<chapter type="" id="en1103000000">
<title><content-text>Switching in an Enterprise Network</content-text></title>
<section type="ChapterIntroduction" id="en1103000000">
<title><content-text>Chapter Introduction</content-text></title>
<topic type="" id="en1103000100">
<title><content-text>Introduction</content-text></title>
<page type="FullScreen" id="en1103000101">
<content-media type="ChapterIntroduction" id="cm3998569673">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103000000/en1103000100/en1103000101/cm3998569673.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103000000/en1103000100/en1103000101/cm3998569673text.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
<section type="" id="en1103010000">
<title><content-text>Describing Enterprise Level Switching</content-text></title>
<topic type="" id="en1103010100">
<title><content-text>Switching and Network Segmentation</content-text></title>
<page type="OneColumn" id="en1103010101">
<content-media type="StaticGraphic" id="cm8600218666">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010100/en1103010101/cm8600218666.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010100/en1103010101/cm8600218666text.xml"/></content-media>
<content-text><p>Although both routers and switches are used to create an enterprise network, the network design of most enterprises relies heavily on switches. Switches are cheaper per port than routers and provide fast forwarding of frames at <content-link target="{4DB279E0-962E-4DAF-B0EB-E4565DE6F355}" type="glossary">wire speed</content-link>.</p> <p>A switch is a very adaptable Layer 2 device. In its simplest role, it replaces a hub as the central point of connection for multiple hosts. In a more complex role, a switch connects to one or more other switches to create, manage, and maintain redundant links and <content-link target="{A7E04384-D456-4FAE-AE30-32720291A404}" type="glossary">VLAN </content-link>connectivity. A switch processes all types of traffic in the same way, regardless of how it is used.</p> <p>A switch moves traffic based on MAC addresses. Each switch maintains a MAC address table in high-speed memory, called content addressable memory (<content-link target="{53A331CD-7A5D-41CB-A2A2-8766EA559AC5}" type="glossary">CAM</content-link>). The switch recreates this table every time it is activated, using both the source MAC addresses of incoming frames and the port number through which the frame entered the switch. </p></content-text>
</page>
<page type="OneColumn" id="en1103010102">
<content-media type="AnimationPartialScreen" id="cm3977039859">	<title><content-text>Click Play to view the MAC table and the aging process on one port.</content-text></title>	<media ref="en1103000000/en1103010000/en1103010100/en1103010102/cm3977039859.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010100/en1103010102/cm3977039859text.xml"/></content-media>
<content-text><p>The switch deletes entries from the MAC address table if they are not used within a certain period of time. The name given to this period of time is the <content-link target="{BC02E363-A03C-41CD-92E0-AED6AE746203}" type="glossary">aging timer</content-link>; removal of an entry is called aging out.</p> <p>As a <content-link target="{D4CECFA9-CEEA-4D88-8D5A-45DD2B1CE0D5}" type="glossary">unicast</content-link> frame enters a port, the switch finds the source MAC address in the frame. It then searches the MAC table, looking for an entry that matches the address. </p> <p>If the source MAC address is not in the table, the switch adds a MAC address and port number entry and sets the aging timer. If the source MAC address already exists, the switch resets the aging timer.</p> <p>Next, the switch checks the table for the destination MAC address. If an entry exists, the switch forwards the frame out the appropriate port number. If the entry does not exist, the switch <content-link target="{EAAE86E9-FC61-4C17-972B-F1BCEA31FA9A}" type="glossary">floods</content-link> the frame out every active port except the port upon which it was received.</p></content-text>
</page>
<page type="OneColumn" id="en1103010103">
<content-media type="AnimationPartialScreen" id="cm5418510105">	<title><content-text>Click Play to view a switch flooding broadcast traffic.</content-text></title>	<media ref="en1103000000/en1103010000/en1103010100/en1103010103/cm5418510105.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010100/en1103010103/cm5418510105text.xml"/></content-media>
<content-text><p>In an enterprise, high availability, speed and throughput of the network are critical. The size of <content-link target="{0FCEF947-36EC-4B36-895C-4D2B542BDF34}" type="glossary">broadcast</content-link> and <content-link target="{ADD82AE6-A30F-40D6-9FE7-C2760136BF50}" type="glossary">collision domain</content-link>s affect the flow of traffic. In general, larger broadcast and collision domains impact these mission-critical variables. </p> <p>If a switch receives a broadcast frame, the switch floods it out every active interface, just as it does for an unknown destination MAC address. All devices that receive this broadcast make up the broadcast domain. As more switches are connected together, the size of the broadcast domain increases. </p> <p>Collision domains create a similar problem. The more devices participating in a collision domain, the more collisions occur. </p> <p>Hubs create large collision domains. Switches, however, use a feature called <content-link target="{1523E959-EAA5-476D-A421-A70BA4DA1FF3}" type="glossary">microsegmentation</content-link> to reduce the size of collision domains to a single switch port. </p></content-text>
</page>
<page type="OneColumn" id="en1103010104">
<content-media type="StaticGraphic" id="cm1199229459">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010100/en1103010104/cm1199229459.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010100/en1103010104/cm1199229459text.xml"/></content-media>
<content-text><p>When a host connects to a switch port, the switch creates a dedicated connection. When two connected hosts communicate with each other, the switch consults the switching table and establishes a virtual connection, or <content-link target="{5CA2B3D0-36D3-478D-81F2-6266BFF119E9}" type="glossary">microsegment</content-link>, between the ports. </p> <p>The switch maintains the virtual circuit (<content-link target="{D633720B-3C01-4F3A-BA0E-AC8D005F826C}" type="glossary">VC</content-link>) until the session terminates. Multiple virtual circuits are active at the same time. Microsegmentation improves bandwidth utilization by reducing collisions and by allowing multiple simultaneous connections. </p> <p>Switches can support either symmetric or <content-link target="{A23C82BC-F97E-4ED3-B7DF-FDD217AC4262}" type="glossary">asymmetric</content-link> switching. Switches that have ports of all the same speeds are termed symmetric. Many switches, however, have two or more high-speed ports. These high-speed, or <content-link target="{F3E03FC6-2582-4B3A-8108-5467C6448D87}" type="glossary">uplink ports</content-link>, connect to areas that have a higher demand for bandwidth. Typically, these areas include: </p> <p><ul><li> Connections to other switches </li><li> Links to servers or server farms </li><li> Connections to other networks </li></ul></p> <p>Connections between ports of different speeds use asymmetric switching. If necessary a switch stores information in memory to provide a buffer between ports of different speeds. Asymmetric switches are common in the enterprise environment.</p></content-text>
</page>
<page type="FullScreen" id="en1103010105">
<content-media type="AnimationFullScreen" id="cm6554877439">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010100/en1103010105/cm6554877439.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010100/en1103010105/cm6554877439text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p>Determine how the switch forwards a frame based on the Destination MAC addresses and the information in the switch MAC table. </p> <p><b>Note: </b>A multicast frame begins with the hexadecimal characters 01:00:5E. </p></content-text>
</page>
</topic>
<topic type="" id="en1103010200">
<title><content-text>Multilayer Switching</content-text></title>
<page type="OneColumn" id="en1103010201">
<content-media type="StaticGraphic" id="cm4969446693">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010200/en1103010201/cm4969446693.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010200/en1103010201/cm4969446693text.xml"/></content-media>
<content-text><p>Traditionally, networks have been composed of separate Layer 2 and Layer 3 devices. Each device uses a different technique for processing and forwarding traffic.</p> <p><b>Layer 2</b></p> <p>Layer 2 switches are hardware-based. They forward traffic at wire-speeds, using the internal circuits that physically connect each incoming port to every other port. The forwarding process uses the MAC address and the existence of the destination MAC address in the MAC table. A Layer 2 switch limits the forwarding of traffic to within a single network segment or subnet.</p> <p><b>Layer 3</b></p> <p>Routers are software-based and use <content-link target="{6264C379-3385-49A6-85C2-4303A42C52DD}" type="glossary">microprocessor</content-link>s to execute routing based on IP addresses. Layer 3 routing allows traffic to be forwarded between different networks and subnets. As a packet enters a router interface, the router uses software to find the destination IP address and select the best path toward the destination network. The router then switches the packet to the correct output interface.</p></content-text>
</page>
<page type="OneColumn" id="en1103010202">
<content-media type="StaticGraphic" id="cm8463415055">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010200/en1103010202/cm8463415055.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010200/en1103010202/cm8463415055text.xml"/></content-media>
<content-text><p>Layer 3 switching, or <content-link target="{8CCBEF97-E2CA-4680-89AD-11B4DA2F4B9C}" type="glossary">multilayer switching</content-link>, combines hardware-based switching and hardware-based routing in the same device.</p> <p>A multilayer switch combines the features of a Layer 2 switch and a Layer 3 router. Layer 3 switching occurs in special application-specific integrated circuit (<content-link target="{7CAFE921-65CD-4E0B-891F-8970B055DDCD}" type="glossary">ASIC</content-link>) hardware. The frame and packet forwarding functions use the same ASIC circuitry. </p> <p>Multilayer switches often save, or <content-link target="{D2C0A8E2-68B2-48DE-8E44-3930149AD5D7}" type="glossary">cache</content-link>, source and destination routing information from the first packet of a conversation. Subsequent packets do not have to execute a routing lookup, because they find the routing information in memory. This caching feature adds to the high performance of these devices.</p></content-text>
</page>
</topic>
<topic type="" id="en1103010300">
<title><content-text>Types of Switching</content-text></title>
<page type="OneColumn" id="en1103010301">
<content-media type="AnimationPartialScreen" id="cm7686436083">	<title><content-text>Click Play to view store and forward switching and validation of the CRC.</content-text></title>	<media ref="en1103000000/en1103010000/en1103010300/en1103010301/cm7686436083.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010300/en1103010301/cm7686436083text.xml"/></content-media>
<content-text><p>When switching was first introcuded, a switch could support one of two major methods to forward a frame from one port to another. The two methods are <content-link target="{3F45F1DD-703A-4266-87A9-C306F7DF3208}" type="glossary">store and forward</content-link> and <content-link target="{9C61DDF0-F44E-40FE-AB68-4F1CFC1AC3FF}" type="glossary">cut-through switching</content-link>. Each of these methods has distinct advantages as well as some disadvantages. </p> <p><b>Store and Forward</b></p> <p>In this type of switching, the entire frame is read and stored in memory before being sent to the destination device. The switch checks the integrity of the bits in the frame by recalculating the cyclic redundancy check (<content-link target="{691244A2-D3CC-4234-B227-E6A75851DDEE}" type="glossary">CRC</content-link>) value. If the calculated CRC value is the same as the CRC field value in the frame, the switch forwards the frame out the destination port. The switch does not forward frames if the CRC values do not match. The CRC value is located within the frame check sequence (<content-link target="{AE924858-D24C-48FF-8398-03C586B2FA22}" type="glossary">FCS</content-link>) field of an Ethernet frame. </p> <p>Although this method keeps damaged frames from being switched to other network segments, it introduces the highest amount of latency. Due to the latency incurred by the store and forward method, it is typically only used in environments where errors are likely to occur, such as environments that have a high probability of EMI.</p></content-text>
</page>
<page type="OneColumn" id="en1103010302">
<content-media type="AnimationDual" id="cm6735969721">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010300/en1103010302/cm6735969721.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010300/en1103010302/cm6735969721text.xml"/></content-media>
<content-text><p><b>Cut-through Switching</b></p> <p>The other major method of switching is cut-through switching. Cut-through switching subdivides into two other methods: <content-link target="{78E78508-AE82-4781-A249-7634F38F7382}" type="glossary">fast-forward</content-link> and <content-link target="{61FC0B5E-4000-4718-BB90-BD2339B802D1}" type="glossary">fragment-free</content-link>. In both of these methods the switch forwards the frame before all of it is received. Because the switch does not calculate or check the CRC value, damaged frames can be switched.</p> <p>Fast-forward is the fastest method of switching. The switch forwards the frames out the destination port as soon as it reads the destination MAC address. This method has the lowest latency but also forwards collision fragments and damaged frames. This method of switching works best in a stable network with few errors.</p> <p>In fragment-free switching, the switch reads the first 64 bytes of the frame before it begins to forward it out the destination port. The shortest valid Ethernet frame is 64 bytes. Smaller frames are usually the result of a collision and are called <content-link target="{0C9571E0-6906-45B7-8A35-137C7ECAC579}" type="glossary">runt</content-link>s. Checking the first 64 bytes ensures that the switch does not forward collision fragments. </p> <p>Store and forward has the highest latency and fast-forward has the lowest. Fragment-free latency is in the middle of these other methods. The fragment-free switching method works best in an environment where many collisions occur. In a properly constructed switched network, collisions are not a problem; therefore, fast-forward switching would be the preferred method.</p></content-text>
</page>
<page type="OneColumn" id="en1103010303">
<content-media type="StaticGraphic" id="cm7969978398">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010300/en1103010303/cm7969978398.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010300/en1103010303/cm7969978398text.xml"/></content-media>
<content-text><p>Today, most Cisco LAN switches rely on the store-and-forward method for switching. This is because with newer technology and faster processing times, switches are able to store and process the frames almost as quickly as cut-through switching, without the issue of errors. Additionally, many of the higher end features, such as multilayer switching, require the use of the store-and-forward method. </p> <p>There are also some newer Layer 2 and Layer 3 switches that can adapt their switching method to changing network conditions. </p> <p>These switches begin by forwarding traffic using the fast-forward method to achieve the lowest latency possible. Even though the switch does not check for errors before forwarding the frame, it recognized the errors and stores an error counter in memory. It compares the number of errors found to a predefined <content-link target="{10AFF043-9277-4377-9A94-888CA8F81957}" type="glossary">threshold value</content-link>.</p> <p>If the number of errors exceeds the threshold value, the switch has forwarded an unacceptable number of errors. In this situation, the switch modifies itself to perform store and forward switching. If the number of errors drops back below the threshold, the switch reverts back to fast-forward mode. This is known as <content-link target="{24341842-96A9-4A9D-9832-2A63D463BBDE}" type="glossary">Adaptive Cut-through</content-link> switching.</p></content-text>
</page>
</topic>
<topic type="" id="en1103010400">
<title><content-text>Switch Security</content-text></title>
<page type="OneColumn" id="en1103010401">
<content-media type="InteractiveGraphicRollovers" id="cm6039144258">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010400/en1103010401/cm6039144258.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103010000/en1103010400/en1103010401/cm6039144258text.xml"/></content-media>
<content-text><p>Keep your network secure, regardless of the switching method used. Network security often focuses on routers and blocking traffic from the outside. Switches are internal to the organization, and designed to allow ease of connectivity, therefore only limited or no security measures are applied. </p> <p>Apply the following basic security features to switches to ensure that only authorized people access the devices:</p> <p><ul><li> Physically secure the device</li><li> Use secure passwords</li><li> Enable SSH access</li><li> Monitor access and traffic</li><li> Disable http access</li><li> Disable unused ports</li><li> Enable port security</li><li> Disable Telnet</li></ul></p></content-text>
</page>
<page type="OneColumn" id="en1103010402">
<content-media type="ActivityLab" id="cm8035097787">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103010000/en1103010400/en1103010402/cm8035097787/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103010000/en1103010400/en1103010402/cm8035097787/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Enable basic switch security.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1103020000">
<title><content-text>Preventing Switching Loops</content-text></title>
<topic type="" id="en1103020100">
<title><content-text>Redundancy in a Switched Network</content-text></title>
<page type="OneColumn" id="en1103020101">
<content-media type="StaticGraphic" id="cm5808715958">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020100/en1103020101/cm5808715958.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020100/en1103020101/cm5808715958text.xml"/></content-media>
<content-text><p>Modern enterprises rely more and more on their networks for their very existence. The network is the lifeline of many organizations. Network downtime translates into potentially disastrous loss of business, income, and customer confidence. </p> <p>The failure of a single network link, a single device, or a critical port on a switch causes network downtime. <content-link target="{1AF7959E-544F-4B51-9284-631DC76D25E6}" type="glossary">Redundancy</content-link> is required in the network design in order to maintain a high degree of reliability and eliminate any single point of failure. Redundancy is accomplished by installing duplicate equipment and network links for critical areas.</p> <p>Sometimes, providing complete redundancy of all links and devices in a network becomes very expensive. Network engineers are often required to balance the cost of redundancy with the need for network availability. </p></content-text>
</page>
<page type="OneColumn" id="en1103020102">
<content-media type="AnimationPartialScreen" id="cm2762498348">	<title><content-text>Click Play to view the development of a broadcast storm.</content-text></title>	<media ref="en1103000000/en1103020000/en1103020100/en1103020102/cm2762498348.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020100/en1103020102/cm2762498348text.xml"/></content-media>
<content-text><p>Redundancy refers to having two different pathways to a particular destination. Examples of redundancy in non-networking environments include two roads into a town, two bridges to cross a river, or two doors to exit a building. If one way is blocked, another is still available.</p> <p>Achieve redundancy in switches by connecting them with multiple links. Redundant links in a switched network reduce <content-link target="{6BAC6447-AA7D-48AF-B535-3AF68BC1675A}" type="glossary">congestion</content-link> and support high <content-link target="{7316F178-E598-422E-ABF7-676D7D69FC20}" type="glossary">availability</content-link> and load balancing. </p> <p>Connecting switches together, however, can cause problems. For example, the broadcast nature of Ethernet traffic creates <content-link target="{2F327FF1-6273-48AB-B6C3-4B7DAEAB231B}" type="glossary">switching loop</content-link>s. The broadcast frames go around and around in all directions, causing a <content-link target="{CE5ECA6C-1A17-4099-A49C-D787876DC6EA}" type="glossary">broadcast storm</content-link>. Broadcast storms use up all of the available bandwidth and can prevent network connections from being established as well as causing existing network connections to be dropped.</p></content-text>
</page>
<page type="OneColumn" id="en1103020103">
<content-media type="AnimationDual" id="cm6502559522">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020100/en1103020103/cm6502559522.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020100/en1103020103/cm6502559522text.xml"/></content-media>
<content-text><p>Broadcast storms are not the only problem created by redundant links in a switched network. <content-link target="{5FAD3CD6-4946-4737-8D23-2995BD623068}" type="glossary">Unicast frames</content-link> sometimes produce problems, such as multiple frame transmissions and MAC database instability. </p> <p><b>Multiple Frame Transmissions</b></p> <p>If a host sends a unicast frame to a destination host and the destination MAC address is not included in any of the connected switch MAC tables, then every switch floods the frame out all ports. In a looped network, the frame could be sent back to the initial switch. The process repeats, creating multiple copies of the frame on the network.</p> <p>Eventually the destination host receives multiple copies of the frame. This causes three problems: wasted bandwidth, wasted CPU time, and potential duplication of transaction traffic. </p> <p><b>MAC Database Instability</b></p> <p>It is possible for switches in a redundant network to learn the wrong information about the location of a host. If a loop exists, one switch may associate the destination MAC address with two separate ports. This causes confusion and suboptimal of frame forwarding.</p></content-text>
</page>
<page type="OneColumn" id="en1103020104">
<content-media type="ActivityPKA" id="cm4233614344">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020100/en1103020104/cm4233614344/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103020000/en1103020100/en1103020104/cm4233614344/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Disable redundant links to avoid switching loops in the network provided. </p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103020200">
<title><content-text>Spanning Tree Protocol (STP)</content-text></title>
<page type="OneColumn" id="en1103020201">
<content-media type="InteractiveGraphicHotspots" id="cm5226655543">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020200/en1103020201/cm5226655543.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020200/en1103020201/cm5226655543text.xml"/></content-media>
<content-text><p>Spanning Tree Protocol (<content-link target="{30D7BBAF-0C63-4C93-870F-3896C8014967}" type="glossary">STP</content-link>) provides a mechanism for disabling redundant links in a switched network. STP provides the redundancy required for reliability without creating switching loops. </p> <p>STP is an open standard protocol, used in a switched environment to create a loop-free logical topology. </p> <p>STP is relatively self-sufficient and requires little configuration. When switches are first powered up with STP enabled, they check the switched network for the existence of loops. Switches detecting a potential loop block some of the connecting ports, while leaving other ports active to forward frames. </p></content-text>
</page>
<page type="OneColumn" id="en1103020202">
<content-media type="InteractiveGraphicRollovers" id="cm4950331558">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020200/en1103020202/cm4950331558.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020200/en1103020202/cm4950331558text.xml"/></content-media>
<content-text><p>STP defines a tree that spans all the switches in an extended star switched network. Switches are constantly checking the network to ensure that there are no loops and that all ports function as required. </p> <p>To prevent switching loops, STP:</p> <p><ul><li> Forces certain interfaces into a standby or blocked state</li><li> Leaves other interfaces in a forwarding state </li><li> Reconfigures the network by activating the appropriate standby path, if the forwarding path becomes unavailable</li></ul></p> <p>In STP terminology, the term bridge is frequently used to refer to a switch. For example, the Root Bridge is the primary switch or focal point in the STP topology. The root bridge communicates with the other switches using Bridge Protocol Data Units (<content-link target="{84513F78-30C6-489D-8079-3ED54477DD70}" type="glossary">BPDU</content-link>s). BPDUs are frames that multicast every 2 seconds to all other switches. BPDUs contain information such as:</p> <p><ul><li> Identity of the source switch</li><li> Identity of the source port</li><li> Cumulative cost of path to root bridge</li><li> Value of aging timers</li><li> Value of the hello timer</li></ul></p></content-text>
</page>
<page type="OneColumn" id="en1103020203">
<content-media type="AnimationPartialScreen" id="cm6152558321">	<title><content-text>Click Play to view the switch transition through the states of STP.</content-text></title>	<media ref="en1103000000/en1103020000/en1103020200/en1103020203/cm6152558321.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020200/en1103020203/cm6152558321text.xml"/></content-media>
<content-text><p>As a switch powers on, each port cycles through a series of four states: <content-link target="{F5D50298-B0F0-48D9-B287-DBAC062F237F}" type="glossary">blocking</content-link>, <content-link target="{E764A95B-F4CF-4406-A1BF-674ED2472511}" type="glossary">listening</content-link>, <content-link target="{3DE34F4C-4021-4CEB-897F-A778F73733D2}" type="glossary">learning</content-link>, and <content-link target="{9E7E7651-F49D-4868-8CFF-D90241B65EFF}" type="glossary">forwarding</content-link>. A fifth state, disabled, indicates that the administrator has shut down the switch port. </p> <p>As the port cycles through these states, the LEDs on the switch change from flashing orange to steady green. It can take as long as 50 seconds for a port to cycle through all of these states and be ready to forward frames.</p> <p>When a switch powers on, it first goes into a blocking state to immediately prevent the formation of a loop. It then changes to listening mode, so that it receives BPDUs from neighbor switches. After processing this information the switch determines which ports can forward frames without creating a loop. If the port can forward frames, it changes to learning mode, and then to forwarding mode.</p> <p>Access ports do not create loops in a switched network and always transition to forwarding if they have a host attached. Trunking ports potentially create a looped network and transition to either a forwarding or blocking state.</p></content-text>
</page>
<page type="FullScreen" id="en1103020204">
<content-media type="ActivityMCMA" id="cm7939202824">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020200/en1103020204/cm7939202824.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020200/en1103020204/cm7939202824text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p> </p> <p>Select all states for which each of the Spanning Tree processes applies.</p></content-text>
</page>
</topic>
<topic type="" id="en1103020300">
<title><content-text>Root Bridges</content-text></title>
<page type="OneColumn" id="en1103020301">
<content-media type="StaticGraphic" id="cm4107764646">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020300/en1103020301/cm4107764646.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020300/en1103020301/cm4107764646text.xml"/></content-media>
<content-text><p>For STP to function, the switches in the network determine a switch that is the focal point in that network. STP uses this focal point, called a <content-link target="{0AE6AD0D-6C45-44F3-84D5-FEC165ABAEF6}" type="glossary">root bridge</content-link> or <content-link target="{CDB68950-0C6D-4EEA-A290-A7A6EB3244D0}" type="glossary">root switch</content-link>, to determine which ports to block and which ports to put into forwarding state. The root bridge sends out BPDUs containing network topology information to all other switches. This information allows the network to reconfigure itself in the event of a failure.</p> <p>There is only one root bridge on each network, and it is elected based on the bridge ID (<content-link target="{48F3812F-E1B8-48DB-A744-D8444401F5AE}" type="glossary">BID</content-link>). The bridge priority value plus the MAC address creates the BID. </p> <p>Bridge priority has a default value of 32,768. If a switch has a MAC address of AA-11-BB-22-CC-33, the BID for that switch would be: 32768: AA-11-BB-22-CC-33.</p></content-text>
</page>
<page type="OneColumn" id="en1103020302">
<content-media type="StaticGraphic" id="cm4545716944">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020300/en1103020302/cm4545716944.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020300/en1103020302/cm4545716944text.xml"/></content-media>
<content-text><p>The root bridge is based on the lowest BID value. Since switches typically use the same default priority value, the switch with the lowest MAC address becomes the root bridge. </p> <p>As each switch powers on, it assumes that it is the root bridge, and sends out BPDUs containing its BID. For example, if S2 advertises a root ID that is a lower number than S1, S1 stops the advertisement of its root ID and accepts the root ID of S2. S2 is now the root bridge. </p> <p>STP designates three types of ports: <content-link target="{A5A782CB-50DB-494F-BDD6-AA8689F6D994}" type="glossary">root port</content-link>s, <content-link target="{E21AF4DA-E00B-418D-AD9F-2ED4335A67ED}" type="glossary">designated port</content-link>s, and <content-link target="{6F50A883-81C3-4BBB-AB32-3B585A053886}" type="glossary">blocked port</content-link>s. </p> <p><b>Root Port</b></p> <p>The port that provides the <content-link target="{4448D3B3-167C-48E3-ABE7-66958FA668DA}" type="glossary">least cost path</content-link> back to the root bridge becomes the root port. Switches calculate the least cost path using the bandwidth cost of each link required to reach the root bridge. </p> <p><b>Designated Port</b></p> <p>A designated port is a port that forwards traffic toward the root bridge but does not connect to the least cost path.</p> <p><b>Blocked Port</b></p> <p>A blocked port is a port that does not forward traffic.</p></content-text>
</page>
<page type="OneColumn" id="en1103020303">
<content-media type="StaticGraphic" id="cm6137648591">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020300/en1103020303/cm6137648591.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020300/en1103020303/cm6137648591text.xml"/></content-media>
<content-text><p>Before configuring STP, the network technician plans and evaluates the network in order to select the best switch to become the root of the spanning tree. If the root switch goes to the lowest MAC address, forwarding might not be optimal. </p> <p>A centrally-located switch works best as the root bridge. A blocked port situated at the extreme edge of the network might cause traffic to take a longer route to get to the destination than if the switch is centrally located. </p> <p>To specify the root bridge, the BID of the chosen switch is configured with the lowest priority value. The bridge priority command is used to configure the bridge priority. The range for the priority is from 0 to 65535, but values are in increments of 4096. The default value is 32768.</p> <p>To set priority: </p> <p><span class="cmd">S3(config)#<b>spanning-tree vlan 1 priority 4096</b></span></p> <p>To restore priority to default:</p> <p><span class="cmd">S3(config)#<b>no spanning-tree vlan 1 priority</b></span></p></content-text>
</page>
<page type="OneColumn" id="en1103020304">
<content-media type="ActivityLab" id="cm1870646214">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020300/en1103020304/cm1870646214/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103020000/en1103020300/en1103020304/cm1870646214/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p> </p> <p>Configure the BID on a switch to control which one becomes the root bridge. Observe the spanning tree and traffic flow patterns as different switches are configured as root.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103020400">
<title><content-text>Spanning Tree in a Hierarchical Network</content-text></title>
<page type="OneColumn" id="en1103020401">
<content-media type="StaticGraphic" id="cm9766650848">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020400/en1103020401/cm9766650848.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020400/en1103020401/cm9766650848text.xml"/></content-media>
<content-text><p>After establishing the root bridge, root ports, designated ports, and blocked ports, STP sends BPDUs throughout the switched network at 2-second intervals. STP continues to listen to these BPDUs to ensure that no links fail and no new loops appear.</p> <p>If a link failure occurs, STP recalculates by: </p> <p><ul><li> Changing some blocked ports to forwarding ports</li><li> Changing some forwarding ports to blocked ports</li><li> Forming a new STP tree to maintain the loop-free integrity of the network</li></ul></p> <p>STP is not instantaneous. When a link goes down, STP detects the failure and recalculates the best paths across the network. This calculation and transition period takes about 30 to 50 seconds on each switch. During this recalculation, no user data passes through the recalculating ports. </p> <p>Some user applications time out during the recalculation period, which can result in lost productivity and revenue. Frequent STP recalculations negatively impact uptime. </p></content-text>
</page>
<page type="OneColumn" id="en1103020402">
<content-media type="StaticGraphic" id="cm3445729183">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020400/en1103020402/cm3445729183.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020400/en1103020402/cm3445729183text.xml"/></content-media>
<content-text><p>A high volume, enterprise server is connected to a switch port. If that port recalculates because of STP, the server is down for 50 seconds. It would be difficult to imagine the number of transactions lost during that timeframe.</p> <p>In a stable network, STP recalculations are infrequent. In an unstable network, it is important to check the switches for stability and configuration changes. One of the most common causes of frequent STP recalculations is a faulty power supply or power feed to a switch. A faulty power supply causes the device to reboot unexpectedly. </p></content-text>
</page>
<page type="OneColumn" id="en1103020403">
<content-media type="AnimationPartialScreen" id="cm4184742066">	<title><content-text>Click Play to view the benefits of PortFast.</content-text></title>	<media ref="en1103000000/en1103020000/en1103020400/en1103020403/cm4184742066.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020400/en1103020403/cm4184742066text.xml"/></content-media>
<content-text><p>Several enhancements to STP minimize the downtime incurred during an STP recalculation.</p> <p><b>PortFast</b></p> <p>STP <content-link target="{2F94F608-0788-4FFD-B85E-FD840B9C9209}" type="glossary">PortFast</content-link> causes an access port to enter the forwarding state immediately, bypassing the listening and learning states. Using PortFast on access ports that are connected to a single workstation or server allows those devices to connect to the network immediately, instead of waiting for STP to converge. </p> <p><b>UplinkFast</b></p> <p>STP <content-link target="{E26A31A6-F4CF-4271-94DD-CCD23D32A538}" type="glossary">UplinkFast</content-link> accelerates the choice of a new root port when a link or switch fails or when STP reconfigures itself. The root port transitions to the forwarding state immediately without going through the listening and learning states, as it would do with normal STP procedures. </p> <p><b>BackboneFast</b></p> <p><content-link target="{6D7404C4-72AF-44B1-A2B4-8A1EB25F653E}" type="glossary">BackboneFast</content-link> provides fast convergence after a spanning tree topology change occurs. It quickly restores backbone connectivity. BackboneFast is used at the Distribution and Core Layers, where multiple switches connect. </p> <p>PortFast, UplinkFast, and BackboneFast are Cisco proprietary; therefore, they can not be used if the network includes switches from other vendors. In addition, all of these features require configuration.</p></content-text>
</page>
<page type="OneColumn" id="en1103020404">
<content-media type="InteractiveGraphicHotspots" id="cm3874023514">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020400/en1103020404/cm3874023514.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020400/en1103020404/cm3874023514text.xml"/></content-media>
<content-text><p>There are several useful commands used to verify spanning tree operation. </p> <p><span class="cmd"><b>show spanning-tree</b></span> - Displays root ID, bridge ID, and port states</p> <p><span class="cmd"><b>show spanning-tree summary</b></span> - Displays a summary of port states</p> <p><span class="cmd"><b>show spanning-tree root </b></span> - Displays the status and configuration of the root bridge</p> <p><span class="cmd"><b>show spanning-tree detail</b></span> - Displays detailed port information</p> <p><span class="cmd"><b>show spanning-tree interface</b></span> - Displays STP interface status and configuration</p> <p><span class="cmd"><b>show spanning-tree blockedports</b></span> - Displays blocked ports</p></content-text>
</page>
<page type="OneColumn" id="en1103020405">
<content-media type="ActivityLab" id="cm6986512333">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103020000/en1103020400/en1103020405/cm6986512333/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103020000/en1103020400/en1103020405/cm6986512333/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p> </p> <p>Use various <span class="cmd"><b>show</b></span> commands to verify STP operation.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103020500">
<title><content-text>Rapid Spanning Tree Protocol (RSTP)</content-text></title>
<page type="OneColumn" id="en1103020501">
<content-media type="AnimationPartialScreen" id="cm7113556318">	<title><content-text>Click Play to view the difference in speed between Spanning Tree and Rapid Spanning Tree.</content-text></title>	<media ref="en1103000000/en1103020000/en1103020500/en1103020501/cm7113556318.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103020000/en1103020500/en1103020501/cm7113556318text.xml"/></content-media>
<content-text><p>When IEEE developed the original 802.1D Spanning Tree Protocol (STP), recovery time of 1 to 2 minutes was acceptable. Today, <content-link target="{7673D708-B605-4DB7-B554-69817FFC506F}" type="glossary">Layer 3 switching</content-link> and advanced routing protocols provide a faster alternative path to the destination. The need to carry delay-sensitive traffic, such as voice and video, requires that switched networks converge quickly to keep up with the new technology. </p> <p>Rapid Spanning Tree Protocol (<content-link target="{88771053-CE38-4F2E-9126-4C55203BB756}" type="glossary">RSTP</content-link>), defined in IEEE 802.1w, significantly speeds the recalculation of the spanning tree. Unlike PortFast, UplinkFast, and BackboneFast, RSTP is not proprietary.</p> <p>RSTP requires a full-duplex, point-to-point connection between switches to achieve the highest reconfiguration speed. Reconfiguration of the spanning tree by RSTP occurs in less than 1 second, as compared to 50 seconds in STP. </p> <p>RSTP eliminates the requirements for features such as PortFast and UplinkFast. RSTP can revert to STP to provide services for legacy equipment. </p> <p>To speed up the recalculation process, RSTP reduces the number of port states to three: <content-link target="{D87970E5-5B2F-4C38-B4C1-469774E5D041}" type="glossary">discarding</content-link>, learning and forwarding. The discarding state is similar to three of the original STP states: blocking, listening, and disabled.</p> <p>RSTP also introduces the concept of <content-link target="{8814AFA9-6B7B-4828-AE63-E0D29FE9F37D}" type="glossary">active topology</content-link>. All ports that are not discarding are part of the active topology and will immediately transition to the forwarding state.</p></content-text>
</page>
</topic>
</section>
<section type="" id="en1103030000">
<title><content-text>Configuring VLANs</content-text></title>
<topic type="" id="en1103030100">
<title><content-text>Virtual LAN</content-text></title>
<page type="OneColumn" id="en1103030101">
<content-media type="StaticGraphic" id="cm9104025863">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030100/en1103030101/cm9104025863.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030100/en1103030101/cm9104025863text.xml"/></content-media>
<content-text><p>Hosts and servers that are connected to Layer 2 switches are part of the same network segment. This arrangement poses two significant problems:</p> <p><ul><li> Switches flood broadcasts out all ports, which consumes unnecessary bandwidth. As the number of devices connected to a switch increases, more broadcast traffic is generated and more bandwidth is wasted.</li><li> Every device that is attached to a switch can forward and receive frames from every other device on that switch.</li></ul></p> <p>As a network design best practice, broadcast traffic is contained to the area of the network in which it is required. There are business reasons why certain hosts access each other while others do not. As an example, members of the accounting department may be the only users who need to access the accounting server. In a switched network, virtual local area networks (<content-link target="{A7E04384-D456-4FAE-AE30-32720291A404}" type="glossary">VLAN</content-link>s) are created to contain broadcasts and group hosts together in communities of interest. </p> <p>A VLAN is a logical broadcast domain that can span multiple physical LAN segments. It allows an administrator to group together stations by logical function, by project teams, or by applications, without regard to physical location of the users.</p></content-text>
</page>
<page type="OneColumn" id="en1103030102">
<content-media type="AnimationPartialScreen" id="cm3981044165">	<title><content-text>Click Play to view the VLAN Broadcast traffic.</content-text></title>	<media ref="en1103000000/en1103030000/en1103030100/en1103030102/cm3981044165.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030100/en1103030102/cm3981044165text.xml"/></content-media>
<content-text><p>The difference between a physical network and a virtual, or logical, network can be shown in the following example:</p> <p>The students in a school are divided into two groups. In the first group, each student is given a red card, for identification. In the second group, each student is given a blue card. The principal announces that students with red cards can only speak to other students with red cards and that students with blue cards can only speak to other students with blue cards. The students are now logically separated into two virtual groups, or VLANs. </p> <p>Using this logical grouping, a broadcast goes out only to the red card group, even though both the red card group and the blue card group are physically located within the same school. </p> <p>This example also shows another feature of VLANs. Broadcasts do not forward between VLANs, they are contained within the VLAN. </p></content-text>
</page>
<page type="OneColumn" id="en1103030103">
<content-media type="StaticGraphic" id="cm1299027626">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030100/en1103030103/cm1299027626.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030100/en1103030103/cm1299027626text.xml"/></content-media>
<content-text><p>Each VLAN functions as a separate LAN. A VLAN spans one or more switches, which allows host devices to behave as if they were on the same network segment. </p> <p>A VLAN has two major functions:</p> <p><ul><li> A VLAN contains broadcasts.</li><li> A VLAN groups devices. Devices located on one VLAN are not visible to devices located on another VLAN.</li></ul></p> <p>Traffic requires a Layer 3 device to move between VLANs.</p> <p>In a switched network, a device can be assigned to a VLAN based on its location, MAC address, IP address, or the applications that the device most frequently uses. Administrators assign membership in a VLAN either statically or dynamically. </p> <p>Static VLAN membership requires an administrator to manually assign each switch port to a specific VLAN. As an example, port fa0/3 may be assigned to VLAN 20. Any device that plugs into port fa0/3 automatically becomes a member of VLAN 20.</p> <p>This type of VLAN membership is the easiest to configure and is also the most popular, however, it requires the most administrative support for adds, moves and changes. For example, moving a host from one VLAN to another requires either the switch port to be manually reconfigured to the new VLAN or the workstation cable to be plugged into a different switchport on the new VLAN.</p> <p>Membership in a specific VLAN is totally transparent to the users. Users working on a device plugged into a switch port have no knowledge that they are members of a VLAN.</p></content-text>
</page>
<page type="OneColumn" id="en1103030104">
<content-media type="AnimationPartialScreen" id="cm2843579152">	<title><content-text>Click Play to view a host join a dynamic VLAN.</content-text></title>	<media ref="en1103000000/en1103030000/en1103030100/en1103030104/cm2843579152.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030100/en1103030104/cm2843579152text.xml"/></content-media>
<content-text><p>Dynamic VLAN membership requires a VLAN management policy server (<content-link target="{5CD28EAB-FA24-4F02-9C52-289F7638E10C}" type="glossary">VMPS</content-link>). The VMPS contains a database that maps MAC addresses to VLAN assignments. When a device plugs into a switch port, the VMPS searches the database for a match of the MAC address and temporarily assigns that port to the appropriate VLAN. </p> <p>Dynamic VLAN membership requires more organization and configuration but creates a structure with much more flexibility than static VLAN membership. In dynamic VLAN, moves, adds, and changes are automated and do not require intervention from the administrator. </p> <p><b>Note: </b>Not all Catalyst switches support the use of VMPSs.</p></content-text>
</page>
<page type="FullScreen" id="en1103030105">
<content-media type="ActivityMCSACheckbox" id="cm5781144523">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030100/en1103030105/cm5781144523.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030100/en1103030105/cm5781144523text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p>Decide which problems can be solved by implementing VLANs.</p></content-text>
</page>
</topic>
<topic type="" id="en1103030200">
<title><content-text>Configuring a Virtual LAN</content-text></title>
<page type="OneColumn" id="en1103030201">
<content-media type="StaticGraphic" id="cm5842472978">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030200/en1103030201/cm5842472978.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030200/en1103030201/cm5842472978text.xml"/></content-media>
<content-text><p>Whether VLANs are created statically or dynamically, the maximum number of VLANs depends on the type of switch and the IOS. By default, VLAN1 is the <content-link target="{0971CF55-0BA4-475B-ADCA-AE32D14DEE6F}" type="glossary">management VLAN</content-link>.</p> <p>An administrator will use the IP address of the management VLAN to configure the switch remotely. When accessing the switch remotely, the network administrator can configure and maintain all VLAN configurations. </p> <p>Additionally, the management VLAN is used to exchange information, such as Cisco Discovery Protocol (CDP) traffic and VLAN Trunking Protocol (VTP) traffic, with other networking devices. </p> <p>When a VLAN is created, it is assigned a number and a name. The <content-link target="{D724236D-B1D0-4894-BAAA-6ABAF86CC71E}" type="glossary">VLAN number</content-link> is any number from the range available on the switch, except for VLAN1. Some switches support approximately 1000 VLANs; others support more than 4000. Naming a VLAN is considered a network management best practice.</p></content-text>
</page>
<page type="OneColumn" id="en1103030202">
<content-media type="StaticGraphic" id="cm2160199564">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030200/en1103030202/cm2160199564.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030200/en1103030202/cm2160199564text.xml"/></content-media>
<content-text><p>Use the following commands to create a VLAN using global configuration mode: </p> <span class="cmd"><p>Switch(config)#<b>vlan </b><i>vlan_number</i></p></span> <span class="cmd"><p>Switch(config-vlan)#<b>name </b><i>vlan_name</i></p></span> <span class="cmd"><p>Switch(config-vlan)#<b>exit</b></p></span> <p>Assign ports to be members of the VLAN. By default, all ports are initially members of VLAN1. Assign ports one at a time or as a range.</p> <p>Use the following commands to assign individual ports to VLANs:</p> <span class="cmd"><p>Switch(config)#<b>interface fa0/</b><i>port_number</i></p></span> <span class="cmd"><p>Switch(config-if)#<b>switchport access vlan </b><i>vlan_number</i></p></span> <span class="cmd"><p>Switch(config-if)# <b>exit</b></p></span> <p>Use the following commands to assign a range ports to VLANs:</p> <span class="cmd"><p>Switch(config)#<b>interface range fa0/</b><i>start_of_range - end_of_range</i></p></span> <span class="cmd"><p>Switch(config-if)#<b>switchport access vlan </b><i>vlan_number</i></p></span> <span class="cmd"><p>Switch(config-if)#<b>exit</b></p></span></content-text>
</page>
<page type="OneColumn" id="en1103030203">
<content-media type="InteractiveGraphicHotspots" id="cm8368590130">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030200/en1103030203/cm8368590130.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030200/en1103030203/cm8368590130text.xml"/></content-media>
<content-text><p>To verify, maintain, and troubleshoot VLANs, it is important to understand the key <span class="cmd"><b>show</b></span> commands that are available in the Cisco IOS.</p> <p>The following commands are used to verify and maintain VLANs:</p> <p><span class="cmd"><b>show vlan</b></span></p> <p><ul><li>Displays a detailed list of all of the VLAN numbers and names currently active on the switch, along with the ports associated with each one</li><li>Displays STP statistics if configured on a per VLAN basis</li></ul></p> <p><span class="cmd"><b>show vlan brief</b></span></p> <p><ul><li>Displays a summarized list showing only the active VLANs and the ports associated with each one</li></ul></p> <p><span class="cmd"><b>show vlan id </b><i>id_number</i></span></p> <p><ul><li>Displays information pertaining to a specific VLAN, based on ID number</li></ul></p> <p><span class="cmd"><b>show vlan name </b><i>vlan_name</i></span></p> <p><ul><li>Displays information pertaining to a specific VLAN, based on name</li></ul></p></content-text>
</page>
<page type="OneColumn" id="en1103030204">
<content-media type="StaticGraphic" id="cm2456898787">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030200/en1103030204/cm2456898787.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030200/en1103030204/cm2456898787text.xml"/></content-media>
<content-text><p>In an organization, employees are frequently added, removed, or moved to a different department or project. This constant movement requires VLAN maintenance, including removal or reassignment to different VLANs. </p> <p>The removal of VLANs and the reassignment of ports to different VLANs are two separate and distinct functions. When a port is disassociated from a specific VLAN, it returns to VLAN1. When a VLAN is removed, any associated ports are deactivated because they are no longer associated with any VLAN.</p> <p>To delete a VLAN:</p> <p><span class="cmd">Switch(config)<b>#no vlan </b><i>vlan_number</i></span></p> <p>To disassociate a port from a specific VLAN:</p> <span class="cmd"><p>Switch(config)#<b>interface fa0</b>/<i>port_number</i></p></span> <span class="cmd"><p>Switch(config-if)#<b>no switchport access vlan </b><i>vlan_number</i></p></span></content-text>
</page>
<page type="OneColumn" id="en1103030205">
<content-media type="ActivityLab" id="cm2319096758">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030200/en1103030205/cm2319096758/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103030000/en1103030200/en1103030205/cm2319096758/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Configure, verify, and troubleshoot VLAN configuration on a Cisco switch.</p><p><b>Click the Lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103030300">
<title><content-text>Identifying VLANs</content-text></title>
<page type="OneColumn" id="en1103030301">
<content-media type="AnimationPartialScreen" id="cm6474485626">	<title><content-text>Click Play to view VLAN interaction.</content-text></title>	<media ref="en1103000000/en1103030000/en1103030300/en1103030301/cm6474485626.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030300/en1103030301/cm6474485626text.xml"/></content-media>
<content-text><p>Devices connected to a VLAN only communicate with other devices in the same VLAN, regardless of whether those devices are on the same switch or different switches.</p> <p>A switch associates each port with a specific VLAN number. As a frame enters that port, the switch inserts the VLAN ID (<content-link target="{65CF6CB1-EF9E-49C2-8D84-8C9D707B98C2}" type="glossary">VID</content-link>) into the Ethernet frame. The addition of the VLAN ID number into the Ethernet frame is called <content-link target="{1E1AFC41-3ECF-440A-8196-AFAF3F3ACC5E}" type="glossary">frame tagging</content-link>. The most commonly used frame tagging standard is <content-link target="{8CDAB31B-96FF-4820-93BC-9CC4E8824CC5}" type="glossary">IEEE 802.1Q</content-link>.</p></content-text>
</page>
<page type="OneColumn" id="en1103030302">
<content-media type="InteractiveGraphicRollovers" id="cm8076731151">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030300/en1103030302/cm8076731151.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030300/en1103030302/cm8076731151text.xml"/></content-media>
<content-text><p>The 802.1Q standard, sometimes abbreviated to <content-link target="{A7B47F20-5187-4412-9949-2F9F362DFA20}" type="glossary">dot1q</content-link>, inserts a 4-byte tag field into the Ethernet frame. This tag sits between the source address and the type/length field. </p> <p>Ethernet frames have a minimum size of 64 bytes and a maximum size of 1518 bytes, however a tagged Ethernet frame can be up to 1522 bytes in size.</p> <p>Frames contain fields such as:</p> <p><ul><li> The destination and source MAC address</li><li> The length of the frame</li><li> The payload data </li><li> The frame check sequence (FCS) </li></ul></p> <p>The FCS field provides error checking to ensure the integrity of all of the bits within the frame.</p> <p>This tag field increases the minimum Ethernet frame from 64 to 68 bytes. The maximum size increases from 1518 to 1522 bytes. The switch recalculates the FCS because the number of bits in the frame has been modified.</p> <p>If an 802.1Q-compliant port is connected to another 802.1Q-compliant port, the VLAN tagging information passes between them.</p> <p>If the connecting port is not 802.1Q-compliant, the VLAN tag is removed before the frame is placed on the media. </p> <p>If a non-802.1Q-enabled device or an access port receives an 802.1Q frame, the tag data is ignored, and the packet is switched at Layer 2 as a standard Ethernet frame. This allows for the placement of Layer 2 intermediate devices, such as other switches or bridges, along the 802.1Q trunk path. To process an 802.1Q tagged frame, a device must allow an MTU of 1522 or higher.</p></content-text>
</page>
<page type="FullScreen" id="en1103030303">
<content-media type="ActivityCustom" id="cm2716301869">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103030000/en1103030300/en1103030303/cm2716301869.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103030000/en1103030300/en1103030303/cm2716301869text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p>Decide whether to deliver each inbound frame to the destination host based on the port configurations.</p></content-text>
</page>
</topic>
</section>
<section type="" id="en1103040000">
<title><content-text>Trunking and Inter-VLAN Routing</content-text></title>
<topic type="" id="en1103040100">
<title><content-text>Trunk Ports</content-text></title>
<page type="OneColumn" id="en1103040101">
<content-media type="StaticGraphic" id="cm6473988732">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040100/en1103040101/cm6473988732.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040100/en1103040101/cm6473988732text.xml"/></content-media>
<content-text><p>A VLAN has three major functions:</p> <p><ul><li> Limits the size of broadcast domains</li><li> Improves network performance</li><li> Provides a level of security</li></ul></p> <p>To take full advantage of the benefits of VLANs, they are extended across multiple switches.</p> <p>Switch ports can be configured for two different roles. A port is classified as either an <content-link target="{F59C77E6-C7EB-4807-926C-A9D995BFEF8B}" type="glossary">access port</content-link> or a <content-link target="{3A5BEF5D-DE13-4335-9627-84432A9D8F79}" type="glossary">trunk port</content-link>. </p> <p><b>Access Port</b></p> <p>An access port belongs to only one VLAN. Typically, single devices such as PCs or servers connect to this type of port. If a hub connects multiple PCs to the single access port, each device connected to the hub is a member of the same VLAN.</p> <p><b>Trunk Port</b></p> <p>A trunk port is a point-to-point link between the switch and another networking device. Trunks carry the traffic of multiple VLANs over a single link and allow VLANs to reach across an entire network. Trunk ports are necessary to carry the traffic from multiple VLANs between devices when connecting either two switches together, a switch to a router, or a host NIC that supports 802.1Q trunking.</p></content-text>
</page>
<page type="OneColumn" id="en1103040102">
<content-media type="AnimationDual" id="cm9282629744">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040100/en1103040102/cm9282629744.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040100/en1103040102/cm9282629744text.xml"/></content-media>
<content-text><p>Without trunk ports, each VLAN requires a separate connection between switches. For example, an enterprise with 100 VLANs requires 100 connecting links. This type of arrangement does not scale well and is very expensive. Trunk links provide a solution to this problem by transporting traffic from multiple VLANs on the same link. </p> <p>When multiple VLANs travel on the same link, they need VLAN identification. A trunk port supports frame tagging. Frame tagging adds VLAN information to the frame.</p> <p>IEEE 802.1Q is the standardized and approved method of frame tagging. Cisco developed a proprietary frame tagging protocol called Inter-Switch Link (<content-link target="{0CE5B97F-4DD3-4A75-A57A-C1012DACB9A6}" type="glossary">ISL</content-link>). Higher-end switches, such as the Catalyst 6500 series, still support both tagging protocols; however, most LAN switches, such as the 2960, support only 802.1Q. </p></content-text>
</page>
<page type="OneColumn" id="en1103040103">
<content-media type="StaticGraphic" id="cm7472225313">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040100/en1103040103/cm7472225313.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040100/en1103040103/cm7472225313text.xml"/></content-media>
<content-text><p>Switch ports are access ports by default. To configure a switch port as a trunk port, use the following commands:</p> <p><span class="cmd">Switch(config)#<b>interface fa0/</b><i>port_number</i></span></p> <p><span class="cmd">Switch(config-if)#<b>switchport mode trunk </b></span></p> <p><span class="cmd">Switch(config-if)#<b>switchport trunk encapsulation {dot1q | isl | negotiate} </b></span></p> <p>Switches that support both 802.1Q and ISL require the last configuration statement. The 2960 switch does not require that statement because it only supports 802.1Q. </p> <p>The <content-link target="{9CAB6846-2BAF-4483-B680-048C14557558}" type="glossary">negotiate parameter</content-link> is the default mode on many Cisco switches. This parameter automatically detects the encapsulation type of the neighbor switch. </p></content-text>
</page>
<page type="OneColumn" id="en1103040104">
<content-media type="StaticGraphic" id="cm4251952684">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040100/en1103040104/cm4251952684.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040100/en1103040104/cm4251952684text.xml"/></content-media>
<content-text><p>Newer switches have the capability to detect the type of link configured at the other end. Based on the attached device, the link configures itself as either a trunk port or an access port.</p> <p><span class="cmd"><b>Switch(config-if)#switchport mode dynamic {desirable | auto}</b></span></p> <p>In <content-link target="{D2B3768C-9EF2-4957-A30D-30175FD8B17D}" type="glossary">desirable mode</content-link>, the port becomes a trunk port if the other end is set to either trunk, desirable, or auto. </p> <p>In <content-link target="{B57ED55A-EADA-4F51-B055-DDCF502FAC56}" type="glossary">auto mode</content-link>, the port becomes a trunk port if the other end is set to either trunk or desirable. </p> <p>To return a trunk port to an access port, issue either of the following commands:</p> <p><span class="cmd">Switch(config)#<b>interface fa0/</b><i>port_number</i></span></p> <p><span class="cmd">Switch(config-if)#<b>no switchport mode trunk</b></span></p> <p>or</p> <p><span class="cmd">Switch(config-if)<b>#switchport mode access</b></span></p></content-text>
</page>
<page type="OneColumn" id="en1103040105">
<content-media type="ActivityLab" id="cm4791582912">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040100/en1103040105/cm4791582912/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103040000/en1103040100/en1103040105/cm4791582912/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Create VLANs and assign them individual ports. </p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103040200">
<title><content-text>Extending VLANs across Switches</content-text></title>
<page type="OneColumn" id="en1103040201">
<content-media type="AnimationPartialScreen" id="cm7178598984">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040200/en1103040201/cm7178598984.swf" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103040000/en1103040200/en1103040201/cm7178598984text.xml"/></content-media>
<content-text><p>Trunking enables VLANs to forward traffic between switches using only a single port. </p> <p>A trunk link configured with 802.1Q on both ends allows traffic that has a 4-byte tag field added to the frame. This frame tag contains the VLAN ID. </p> <p>When a switch receives a tagged frame on a trunk port, it removes the tag before sending it out an access port. The switch forwards the frame only if the access port is a member of the same VLAN as the tagged frame.</p> <p>Some traffic however, needs to cross the 802.1Q configured link without VLAN ID. Traffic with no VLAN ID is called <content-link target="{B78BF646-81C6-4D92-AEA0-7B5098BB9F69}" type="glossary">untagged</content-link>. Examples of untagged traffic are Cisco Discovery Protocol (CDP), VTP, and certain types of voice traffic. Untagged traffic minimizes the delays associated with inspection of the VLAN ID tag.</p></content-text>
</page>
<page type="OneColumn" id="en1103040202">
<content-media type="StaticGraphic" id="cm6358018209">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040200/en1103040202/cm6358018209.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040200/en1103040202/cm6358018209text.xml"/></content-media>
<content-text><p>To accommodate untagged traffic, a special VLAN called a <content-link target="{58946058-0493-4892-9A83-5B3D37F0F5D5}" type="glossary">native VLAN</content-link> is available. Untagged frames received on the 802.1Q trunk port will become members of the native VLAN. On Cisco Catalyst switches, VLAN 1 is the native VLAN by default.</p> <p>Any VLAN can be configured as the native VLAN. Ensure that the native VLAN for an 802.1Q trunk is the same on both ends of the trunk line. If they are different, spanning-tree loops might result.</p> <p>On an 802.1Q trunk, use the following command to assign the native VLAN ID on a physical interface: </p> <p><span class="cmd">Switch(config-if)#<b>dot1q native vlan </b><i>vlan-id</i></span></p></content-text>
</page>
<page type="OneColumn" id="en1103040203">
<content-media type="ActivityLab" id="cm9490505707">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040200/en1103040203/cm9490505707/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103040000/en1103040200/en1103040203/cm9490505707/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Configure trunk ports to connect switches and verify connectivity across the trunk link. </p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103040300">
<title><content-text>Inter-VLAN Routing</content-text></title>
<page type="OneColumn" id="en1103040301">
<content-media type="StaticGraphic" id="cm8518207782">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040300/en1103040301/cm8518207782.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040300/en1103040301/cm8518207782text.xml"/></content-media>
<content-text><p>Although VLANs extend to span multiple switches, only members of the same VLAN can communicate. </p> <p>A Layer 3 device provides connectivity between different VLANs. This arrangement enables the network administrator to strictly control the type of traffic that flows from one VLAN to another.</p> <p>One method of accomplishing the inter-VLAN routing requires a separate interface connection to the Layer 3 device for each VLAN.</p></content-text>
</page>
<page type="OneColumn" id="en1103040302">
<content-media type="StaticGraphic" id="cm9989350543">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040300/en1103040302/cm9989350543.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040300/en1103040302/cm9989350543text.xml"/></content-media>
<content-text><p>Another method for providing connectivity between different VLANs requires a feature called <content-link target="{4282904B-8EA7-4AD1-8023-6CEA918E969E}" type="glossary">subinterface</content-link>s. Subinterfaces logically divide one physical interface into multiple logical pathways. Configure one pathway or subinterface for each VLAN.</p> <p>To support <content-link target="{027BBD2F-C524-44E2-B50C-8C109F87843F}" type="glossary">inter-VLAN</content-link> communication using subinterfaces requires configuration on both the switch and the router. </p>  <p><b>Switch </b></p> <p> </p> <p><ul><li> Configure the switch interface as an 802.1Q trunk link.</li></ul></p> <p><b>Router</b></p> <p> </p> <p><ul><li> Select a router interface with a minimum of a 100Mbps FastEthernet </li><li> Configure subinterfaces that support 802.1Q encapsulation.</li><li> Configure one subinterface for each VLAN. </li></ul></p> <p>A subinterface allows each VLAN to have its own logical pathway and default gateway into the router. </p></content-text>
</page>
<page type="OneColumn" id="en1103040303">
<content-media type="AnimationPartialScreen" id="cm2162811210">	<title><content-text>Click Play to view inter-VLAN routing.</content-text></title>	<media ref="en1103000000/en1103040000/en1103040300/en1103040303/cm2162811210.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040300/en1103040303/cm2162811210text.xml"/></content-media>
<content-text><p>The host from the sending VLAN forwards traffic to the router using the default gateway. The subinterface for the VLAN specifies the default gateway for all hosts in that VLAN. The router locates the destination IP address and does a routing table lookup. </p> <p>If the destination VLAN is on the same switch as the source VLAN, the router forwards the traffic back down to the source switch using the subinterface parameters of the destination VLAN ID. This type of configuration is often referred to as a <content-link target="{14ABC889-1145-45D4-998C-5A7870081926}" type="glossary">router-on-a-stick</content-link>.</p> <p>If the exit interface of the router is 802.1Q-compatible, the frame retains its 4-byte VLAN tag. If the outbound interface is not 802.1Q-compatible, the router strips the tag from the frame and returns the frame to its original Ethernet format.</p></content-text>
</page>
<page type="OneColumn" id="en1103040304">
<content-media type="InteractiveGraphicHotspots" id="cm1884878388">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040300/en1103040304/cm1884878388.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103040000/en1103040300/en1103040304/cm1884878388text.xml"/></content-media>
<content-text><p>To configure inter-VLAN routing, use the following steps:</p> <p>1. Configure a trunk port on the switch.</p> <p><span class="cmd">Switch(config)#<b>interface fa0/2</b></span></p> <p><span class="cmd">Switch(config-if)#<b>switchport mode trunk</b></span></p> <p>2. On the router, configure a FastEthernet interface with no IP address or subnet mask.</p> <p><span class="cmd">Router(config)#<b>interface fa0/1</b></span></p> <p><span class="cmd">Router(config-if)#<b>no ip address</b></span></p> <p><span class="cmd">Router(config-if)#<b>no shutdown</b></span></p> <p>3. On the router, configure one subinterface with an IP address and subnet mask for each VLAN. Each subinterface has an 802.1Q encapsulation. </p> <p><span class="cmd">Router(config)#<b>interface fa0/0.10</b></span></p> <p><span class="cmd">Router(config-subif)#<b>encapsulation dot1q 10</b></span></p> <p><span class="cmd">Router(config-subif)#<b>ip address 192.168.10.1 255.255.255.0</b></span></p> <p>4. Use the following commands to verify the inter-VLAN routing configuration and functionality.</p> <p><span class="cmd">Switch#<b>show trunk</b></span></p> <p><span class="cmd">Router#<b>show ip interfaces</b></span></p> <p><span class="cmd">Router#<b>show ip interfaces brief</b></span></p> <p><span class="cmd">Router#<b>show ip route</b></span></p></content-text>
</page>
<page type="OneColumn" id="en1103040305">
<content-media type="ActivityLab" id="cm6382403958">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103040000/en1103040300/en1103040305/cm6382403958/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103040000/en1103040300/en1103040305/cm6382403958/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Configure inter-VLAN routing.</p> <p><content-link target="Dis3_Ch3.4.3.5B_Lab.pdf" type="internalfile">A secondary version of this lab is also available.</content-link></p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1103050000">
<title><content-text>Maintaining VLANs on an Enterprise Network</content-text></title>
<topic type="" id="en1103050100">
<title><content-text>VLAN Trunking Protocol (VTP)</content-text></title>
<page type="OneColumn" id="en1103050101">
<content-media type="AnimationDual"  id="cm8530938670">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050100/en1103050101/cm8530938670.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050100/en1103050101/cm8530938670text.xml"/></content-media>
<content-text><p>As networks grow in size and complexity, centralized management of the VLAN structure becomes crucial. VLAN Trunking Protocol (VTP) is a Layer 2 messaging protocol that provides a method for the distribution and management of the VLAN database from a centralized server in a network segment. Routers do not forward VTP updates. </p> <p>If there is no automated way to manage an enterprise network with hundreds of VLANs, manual configuration of each VLAN on each switch is necessary. Any change to the VLAN structure requires further manual configuration. One incorrectly keyed number causes inconsistencies in connectivity throughout the entire network.</p> <p>To resolve this issue, Cisco created VTP to automate many of the VLAN configuration functions. VTP ensures that VLAN configuration is consistently maintained across the network and reduces the task of VLAN management and monitoring.</p></content-text>
</page>
<page type="OneColumn" id="en1103050102">
<content-media type="AnimationPartialScreen" id="cm9151977836">	<title><content-text>Roll over each device to learn about the three VTP modes.</content-text></title>	<media ref="en1103000000/en1103050000/en1103050100/en1103050102/cm9151977836.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050100/en1103050102/cm9151977836text.xml"/></content-media>
<content-text><p>VTP is a client/server messaging protocol that adds, deletes, and renames VLANs in a single VTP domain. All switches under a common administration are part of a domain. Each domain has a unique name. VTP switches only share VTP messages with other switches in the same domain. </p> <p>Two different versions of VTP exist: Version 1 and Version 2. Version 1 is the default and it is not compatible with Version 2. All switches must be configured with the same version.</p> <p>VTP has three modes: server, client, and transparent. By default, all switches are servers. It is a good practice to have at least two switches configured as servers on a network, to provide backup and redundancy.</p></content-text>
</page>
<page type="OneColumn" id="en1103050103">
<content-media type="StaticGraphic" id="cm4766661581">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050100/en1103050103/cm4766661581.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050100/en1103050103/cm4766661581text.xml"/></content-media>
<content-text><p>With VTP, each switch advertises messages on its trunk ports. Messages include the management domain, configuration revision number, known VLANs, and parameters for each VLAN. These advertisement frames are sent to a multicast address so that all neighbor devices receive the frames.</p> <p>Each VTP switch saves a VLAN database in NVRAM that contains a revision number. If a VTP receives an update message that has a higher revision number than the one stored in the database, the switch updates its VLAN database with this new information.</p> <p>The <content-link target="{B6E2B5CC-4AAD-4760-980F-40C7C9C5959A}" type="glossary">VTP configuration revision number</content-link> begins at zero. As changes occur, the configuration revision number increases by one. The revision number continues to increment until it reaches 2,147,483,648. When it reaches that point, the counter resets back to zero. Rebooting the switch also resets the revision number to zero.</p> <p>A problem situation can occur related to the revision number if someone inserts a switch with a higher revision number into the network. Since a switch is a server by default, this results in new, but incorrect, information overwriting the legitimate VLAN information on all of the other switches. </p> <p>Another way to protect against this critical situation, is to configure a VTP password to validate the switch. In addition, when adding a switch and there is already a server switch, make sure the new switch is configured in client or transparent mode.</p></content-text>
</page>
<page type="OneColumn" id="en1103050104">
<content-media type="AnimationDual" id="cm4675261364">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050100/en1103050104/cm4675261364.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050100/en1103050104/cm4675261364text.xml"/></content-media>
<content-text><p>VTP messages come in three varieties: <content-link target="{5AEB1BCB-656D-47FA-B252-C03DDB80EA74}" type="glossary">summary advertisement</content-link>s, <content-link target="{D8638629-1815-4E4D-BC3A-F3C4379A80A8}" type="glossary">subset advertisement</content-link>s, and <content-link target="{FD059DDA-13B8-41EA-90F1-60F3DF04DB21}" type="glossary">advertisement request</content-link>s. </p> <p><b>Summary Advertisements</b></p> <p>Catalyst switches issue summary advertisements every 5 minutes or whenever a change to the VLAN database occurs. Summary advertisements contain the current VTP domain name and the configuration revision number. </p> <p>If VLANs are added, deleted, or changed, the server increments the configuration revision number and issues a summary advertisement.</p> <p>When a switch receives a summary advertisement packet, it compares the VTP domain name to its own VTP domain name. If the domain name is the same, the switch compares the configuration revision number to its own number. If it is lower or equal, the switch ignores the packet. If the revision number is higher, an advertisement request is sent.</p> <p><b>Subset Advertisements</b></p> <p> </p> <p>A subset advertisement follows the summary advertisement. A subset advertisement contains a list of VLAN information. </p> <p>The subset advertisement contains the new VLAN information based on the summary advertisement. If there are several VLANs, they require more than one subset advertisement.</p> <p><b>Advertisement Requests</b></p> <p>Catalyst switches use advertisement requests to ask for VLAN information. Advertisement requests are required if the switch has been reset or the VTP domain name has been changed. The switch receives a VTP summary advertisement with a higher configuration revision number than its own.</p></content-text>
</page>
<page type="FullScreen" id="en1103050105">
<content-media type="ActivityDnDSnapback" id="cm8879941535">	<title><content-text>Drag the characteristics to the appropriate switch VTP modes.</content-text></title>	<media ref="en1103000000/en1103050000/en1103050100/en1103050105/cm8879941535.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050100/en1103050105/cm8879941535text.xml"/></content-media>
<content-text><p>FULL SCREEN Activity</p> <p><b>Activity</b></p> <p>Identify the characteristics of server, client, and transparent VTP modes.</p></content-text>
</page>
</topic>
<topic type="" id="en1103050200">
<title><content-text>Configuring VTP</content-text></title>
<page type="OneColumn" id="en1103050201">
<content-media type="StaticGraphic" id="cm3118015103">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050200/en1103050201/cm3118015103.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050200/en1103050201/cm3118015103text.xml"/></content-media>
<content-text><p>Switches are servers by default. If a switch in server mode issues an update with a higher revision number than the number currently in place, all switches will modify their databases to match the new switch. </p> <p>When adding a new switch to an existing VTP domain, use the following steps:</p> <p><b>Step 1:</b> Configure VTP off-line (version 1)</p> <p><b>Step 2:</b> Verify the VTP configuration.</p> <p><b>Step 3:</b> Reboot the switch.</p></content-text>
</page>
<page type="OneColumn" id="en1103050202">
<content-media type="ActivityPKA" id="cm4199202004">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050200/en1103050202/cm4199202004/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103050000/en1103050200/en1103050202/cm4199202004/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer</b> <b>Activity</b></p> <p>Build and test a VTP domain.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
<page type="OneColumn" id="en1103050203">
<content-media type="ActivityPKA" id="cm7205017003">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050200/en1103050203/cm7205017003/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103050000/en1103050200/en1103050203/cm7205017003/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Add a new switch into an existing VTP domain.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103050300">
<title><content-text>VLAN Support for IP Telephony and Wireless</content-text></title>
<page type="OneColumn" id="en1103050301">
<content-media type="StaticGraphic" id="cm3265259711">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050300/en1103050301/cm3265259711.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050300/en1103050301/cm3265259711text.xml"/></content-media>
<content-text><p>The main purpose of VLANs is to separate traffic into logical groups. Traffic from one VLAN will not impact traffic from another VLAN. A VLAN environment is ideal for traffic that is sensitive to time delays, such as voice.</p> <p>Voice traffic must be given priority over normal data traffic to avoid jerky or jittery conversations. Providing a dedicated VLAN for voice traffic prevents voice traffic from having to compete with data for available bandwidth.</p> <p>An IP phone usually has two ports, one for voice and one for data. Packets traveling to and from the PC and the IP phone share the same physical link to the switch and the same switch port. To segment the voice traffic, enable a separate voice VLAN on the switch.</p></content-text>
</page>
<page type="OneColumn" id="en1103050302">
<content-media type="StaticGraphic" id="cm2826626423">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050300/en1103050302/cm2826626423.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050300/en1103050302/cm2826626423text.xml"/></content-media>
<content-text><p>Wireless is another type of traffic that benefits from VLANs. Wireless is, by nature, very insecure and prone to attacks by hackers. VLANs created for wireless traffic isolate some of the problems that may occur. A compromise to the integrity of the wireless VLAN has no effect on any other VLAN within the organization.</p> <p>Most wireless deployments place the user in a VLAN on the outside of the firewall for added security. Users have to authenticate to gain entry into the internal network from the wireless network. </p> <p>In addition, many organizations provide guest access to their wireless network. Guest accounts provide anyone, within a limited range, temporary wireless services such as web access, e-mail, ftp, and SSH. Guest accounts are either included in the wireless VLAN or reside in a VLAN of their own.</p></content-text>
</page>
<page type="OneColumn" id="en1103050303">
<content-media type="ActivityPKA" id="cm2971254220">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050300/en1103050303/cm2971254220/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103050000/en1103050300/en1103050303/cm2971254220/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Build an enterprise-class LAN with voice, wireless, and wired clients. Create separate VLANs that would isolate voice and wireless traffic.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1103050400">
<title><content-text>VLAN Best Practices</content-text></title>
<page type="OneColumn" id="en1103050401">
<content-media type="StaticGraphic" id="cm6631617607">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050400/en1103050401/cm6631617607.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103050000/en1103050400/en1103050401/cm6631617607text.xml"/></content-media>
<content-text><p>When carefully planned and designed, VLANs provide security, conserve bandwidth, and localize traffic on an enterprise network. All of these features combine to improve network performance.</p> <p>Some best practices for configuring VLANs in an enterprise network are:</p> <p><ul><li> Organizing server placement </li><li> Disabling unused ports </li><li> Configuring the management VLAN as a number other than 1</li><li> Using VLAN Trunking Protocol</li><li> Configuring VTP Domains</li><li> Reboot any new switch entering an established network</li></ul></p> <p>VLANs, however, are not the answer to every problem. </p> <p>If VLANs are not correctly implemented, they can overly complicate a network, resulting in inconsistent connectivity and slow network performance.</p> <p>VLANs isolate certain types of traffic for reasons of security. To move traffic between VLANs requires a Layer 3 device, which increases the cost of implementation and introduces an increased level of latency into the network.</p></content-text>
</page>
<page type="OneColumn" id="en1103050402">
<content-media type="ActivityPKA" id="cm4436709195">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103050000/en1103050400/en1103050402/cm4436709195/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1103000000/en1103050000/en1103050400/en1103050402/cm4436709195/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Plan and build a switched network to meet client specifications.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="en1103060000">
<title><content-text>Chapter Summary</content-text></title>
<topic type="" id="en1103060100">
<title><content-text>Summary</content-text></title>
<page type="FullScreen" id="en1103060101">
<content-media type="ChapterSummary" id="cm6285417915">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103060000/en1103060100/en1103060101/cm6285417915.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1103000000/en1103060000/en1103060100/en1103060101/cm6285417915text.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="en1103070000">
<title><content-text>Chapter Quiz</content-text></title>
<topic type="" id="en1103070100">
<title><content-text>Quiz</content-text></title>
<page type="OneColumn" id="en1103070101">
<content-media type="ChapterQuiz" id="cm7207849627">	<title><content-text></content-text></title>	<media ref="en1103000000/en1103070000/en1103070100/en1103070101/cm7207849627/" mime="" scale="true" type="directory" width="100%" height="100%" external="en1103000000/en1103070000/en1103070100/en1103070101/cm7207849627/icontext.xml"/></content-media>
<content-text><p>Take the chapter quiz to check your knowledge.</p><p><b>Click the quiz icon to begin.</b></p></content-text>
</page>
</topic>
</section>
</chapter>
