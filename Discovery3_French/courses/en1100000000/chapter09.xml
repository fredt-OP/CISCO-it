<chapter type="" id="en1109000000">
<title><content-text>Troubleshooting an Enterprise Network</content-text></title>
<section type="ChapterIntroduction" id="en1109000000">
<title><content-text>Chapter Introduction</content-text></title>
<topic type="" id="en1109000100">
<title><content-text>Introduction</content-text></title>
<page type="FullScreen" id="en1109000101">
<content-media type="ChapterIntroduction" id="cm4869430172">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109000000/en1109000100/en1109000101/cm4869430172.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109000000/en1109000100/en1109000101/cm4869430172text.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
<section type="" id="en1109010000">
<title><content-text>Understanding the Impact of Network Failure</content-text></title>
<topic type="" id="en1109010100">
<title><content-text>Enterprise Network Requirements</content-text></title>
<page type="OneColumn" id="en1109010101">
<content-media type="StaticGraphic" id="cm6571802378">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010100/en1109010101/cm6571802378.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010100/en1109010101/cm6571802378text.xml"/></content-media>
<content-text><p>Most enterprises rely on their networks to provide consistent and reliable access to shared resources. Network uptime is the time that the network is available and functioning as expected. Network downtime is any time that the network is not performing as required. A reduction in the performance level of the network may have a negative impact on the business. </p> <p>Without a reliable network, many organizations lose access to customer databases and accounting records that employees need to perform their daily activities. Network outages also prevent customers from placing orders or obtaining the information they require. Downtime results in lost productivity, customer frustration, and often the loss of customers to competitors.</p></content-text>
</page>
<page type="OneColumn" id="en1109010102">
<content-media type="StaticGraphic" id="cm5401419534">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010100/en1109010102/cm5401419534.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010100/en1109010102/cm5401419534text.xml"/></content-media>
<content-text><p>Many different metrics are used to determine the cost of downtime to an enterprise. The actual cost to a company varies depending on the day, date, and time.</p> <p>Large enterprises generally span many different time zones and have employees, customers, and suppliers accessing their network around the clock. For these organizations, any downtime is extremely costly. Many factors cause network downtime. These include:</p> <p><ul><li> Weather and natural disasters</li><li> Security breaches</li><li> Man-made disasters</li><li> Power surges</li><li> Virus attacks</li><li> Equipment failure</li><li> Misconfiguration of devices</li><li> Lack of resources</li></ul></p></content-text>
</page>
<page type="OneColumn" id="en1109010103">
<content-media type="StaticGraphic" id="cm6496750556">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010100/en1109010103/cm6496750556.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010100/en1109010103/cm6496750556text.xml"/></content-media>
<content-text><p>A well-planned network design and implementation are crucial for meeting uptime requirements. </p> <p>To ensure the proper and efficient flow of traffic, a good design includes redundancy of all critical components and data paths. This redundancy eliminates single points of failure. </p> <p>The three-layer hierarchical network design model separates the functionality of the various networking devices and links. This separation ensures efficient network performance. In addition, the use of enterprise class equipment provides a high degree of reliability.</p> <p>Even with proper network design, some downtime is inevitable. To keep downtime to a minimum and ensure rapid recovery requires additional considerations. </p> <p>To guarantee service levels, an enterprise should have service level agreements (SLAs) with key suppliers. An SLA clearly documents network expectations in terms of level of service. These expectations include the acceptable level of downtime as well as the recovery period. SLAs often specify the penalty associated with any loss of service. </p></content-text>
</page>
<page type="OneColumn" id="en1109010104">
<content-media type="StaticGraphic" id="cm4474134653">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010100/en1109010104/cm4474134653.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010100/en1109010104/cm4474134653text.xml"/></content-media>
<content-text><p>Outages are not only associated with loss of service from ISPs. Quite often, the problem stems from the failure of a key piece of equipment that is part of the local network. To minimize this type of downtime requires warrantees on all critical pieces of equipment. Warrantees provide for rapid replacement of mission-critical components.</p> <p><content-link target="{08323F46-9EBC-416B-AD51-2A83FE43074A}" type="glossary">Business continuity</content-link> plans provide a detailed plan of action in case of unexpected man-made or natural disasters such as power failures or earthquakes. Business continuity plans provide the details on how the business continues or resumes operations, with minimal disruption to its clients, after the disaster. They clearly specify how the network re-establishes functionality in the event of a catastrophic failure. One way to ensure functionality is to have a redundant backup site at another location, in case of failure at the primary site. </p></content-text>
</page>
</topic>
<topic type="" id="en1109010200">
<title><content-text>Monitoring and Proactive Maintenance</content-text></title>
<page type="OneColumn" id="en1109010201">
<content-media type="StaticGraphic" id="cm8131095592">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010200/en1109010201/cm8131095592.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010200/en1109010201/cm8131095592text.xml"/></content-media>
<content-text><p>One way of ensuring uptime is to monitor current network functionality and perform <content-link target="{F4D145BE-8838-4A57-8376-2989F4E679D0}" type="glossary">proactive maintenance</content-link>. </p> <p>The purpose of network monitoring is to watch network performance in comparison to a predetermined <content-link target="{8A90DE9D-96DD-4D31-B1F9-A0730FAB185D}" type="glossary">baseline</content-link>. Any observed deviations from this baseline indicate potential problems with the network and require investigation. As soon as the network administrator determines the cause of degraded performance, corrective actions can be taken to prevent a serious network outage.</p> <p>Several groups of tools are available for monitoring network performance levels and gathering data. These tools include:</p> <p><ul><li> Network utilities </li><li> Packet sniffing tools </li><li> SNMP monitoring tools</li></ul></p> <p>Each of these groups of tools has different capabilities and provides different types of information. Using these tools in combination provides comprehensive information on current network performance.</p> <p>A network administrator performs proactive maintenance on a regular basis to verify and service equipment. By doing this, the administrator can detect weaknesses prior to a critical error that could bring down the network. Like regular servicing on a car, proactive maintenance extends the life of a network device. </p></content-text>
</page>
<page type="OneColumn" id="en1109010202">
<content-media type="StaticGraphic" id="cm3180656057">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010200/en1109010202/cm3180656057.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010200/en1109010202/cm3180656057text.xml"/></content-media>
<content-text><p>Network monitoring tools, techniques, and programs rely on the availability of a complete set of accurate and current network documentation. This documentation includes:</p> <p><ul><li> Physical and logical topology diagrams </li><li> Configuration files of all network devices</li><li> A baseline performance level </li></ul></p> <p>It is best practice to determine baseline network performance levels when the network is first installed and then again after any major changes or upgrades occur. Network administrators perform baseline testing of the network under normal load levels, using the protocols and applications that are normally encountered on the network. </p> <p>Many complex tools and procedures exist to determine performance baselines. Some programs perform many different tests with different types of traffic. The tests determine the network performance under very accurately defined loads and conditions. Others, such as a simple ping, are less accurate but often provide sufficient information to alert the administrator to a problem.</p></content-text>
</page>
<page type="OneColumn" id="en1109010203">
<content-media type="StaticGraphic" id="cm2771315930">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010200/en1109010203/cm2771315930.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010200/en1109010203/cm2771315930text.xml"/></content-media>
<content-text><p>Simple network utilities, like <span class="cmd"><b>ping</b></span> and <span class="cmd"><b>tracert</b></span>, provide information on the performance of the network or network link. Performing these commands at multiple times shows the difference in time required for a packet to travel between two locations. Using these commands, however, does not provide a reason for the difference in times. </p> <p>Packet sniffing tools monitor the types of traffic on various parts of the network. These tools indicate if there is an excessive amount of a particular traffic type. They examine the contents of the packets, which provides a quick way of locating the source of this traffic. </p> <p>These tools may also be able to remedy the situation before network congestion becomes critical. For example, traffic sniffing can detect whether a type of traffic or a particular transaction occurring on the network is unexpected. This detection might stop a potential denial of service attack before it impacts network performance.</p></content-text>
</page>
<page type="OneColumn" id="en1109010204">
<content-media type="StaticGraphic" id="cm5334462172">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010200/en1109010204/cm5334462172.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010200/en1109010204/cm5334462172text.xml"/></content-media>
<content-text><p>Simple Network Management Protocol (<content-link target="{4CECB5F6-F9C6-4E22-9493-4AB56FBBFC11}" type="glossary">SNMP</content-link>) allows monitoring of individual devices on the network. SNMP-compliant devices use agents to monitor a number of predefined parameters for specific conditions. These agents collect information and store it in a database known as the management information base (<content-link target="{C0DE6709-70B1-4DFE-9B42-DCD976C0C80E}" type="glossary">MIB</content-link>).</p> <p>SNMP polls devices at regular intervals to collect information about managed parameters. SNMP also traps certain events that exceed a predefined <content-link target="{E17C526E-51A7-407C-A0DC-9A2ADF2628E4}" type="glossary">threshold</content-link> or condition.</p> <p>For example, SNMP monitors a router interface for errors. The network administrator defines a specific level of acceptable errors for that interface. If the errors exceed the threshold level, SNMP traps the condition and sends it to a network management station (<content-link target="{C1E3A88B-F0F4-4896-8D39-B5D1A733538B}" type="glossary">NMS</content-link>). The NMS alerts the network administrator. Some SNMP systems trigger events, such as the automatic reconfiguration of a device, to eliminate the problem. Most enterprise class network management systems use SNMP.</p> <p>A number of freeware and commercial proactive network monitoring tools exist. These tools monitor traffic type, traffic load, server configurations, traffic patterns, and a multitude of other conditions. A proper <content-link target="{3833D894-4B83-4937-827D-26D18C13AA60}" type="glossary">Network Monitoring Plan</content-link> and the use of proper tools help a network administrator evaluate the health of the network and detect any problem situations.</p></content-text>
</page>
<page type="OneColumn" id="en1109010205">
<content-media type="ActivityPKA" id="cm9876760960">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010200/en1109010205/cm9876760960/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109010000/en1109010200/en1109010205/cm9876760960/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Design a network and create a baseline.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109010300">
<title><content-text>Troubleshooting and the Failure Domain</content-text></title>
<page type="OneColumn" id="en1109010301">
<content-media type="StaticGraphic" id="cm2921676777">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010300/en1109010301/cm2921676777.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010300/en1109010301/cm2921676777text.xml"/></content-media>
<content-text><p>The objective of any troubleshooting effort is to return functionality quickly and with little disruption to the end users. Achieving this objective often means postponing an extensive or prolonged process for determining the cause of a problem in favor of quickly re-establishing functionality. </p> <p>In some situations, putting a temporary solution into place allows investigation and correction of the problem under a less critical time constraint.</p> <p>Redundancy is a key design element for enterprise networks. In a redundant environment, if one link goes down, traffic diversion to the redundant link occurs immediately. This temporary solution allows the network to maintain functionality and gives the administrator time to diagnose and correct the problem with the failed link. If problems occur with a specific device or configuration, having backup copies of the configuration files or spare devices allows quick restoration of connectivity. </p></content-text>
</page>
<page type="OneColumn" id="en1109010302">
<content-media type="AnimationPartialScreen" id="cm6168696450">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010300/en1109010302/cm6168696450.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010300/en1109010302/cm6168696450text.xml"/></content-media>
<content-text><p>Quick solutions are not always possible or appropriate. The security of the network and the resources that it houses must always be the highest priority. If a quick fix compromises this security, take the time to investigate an alternative solution that is more appropriate.</p> <p>Detail security concerns in the business continuity plan. The plan includes:</p> <p><ul><li> Documentation of potential problems</li><li> Description of the appropriate course of action in the event of problems</li><li> Details of the security policy of the company </li><li> Details of the security risks of the actions</li></ul></p> <p>When designing an enterprise network limit the size of a failure domain. The failure domain is the area of the network that is impacted by the failure or misconfiguration of a network device. The actual size of the domain depends on the device and the type of failure or misconfiguration. When troubleshooting a network, determine the scope of the issue and isolate the issue to a specific failure domain. </p></content-text>
</page>
<page type="OneColumn" id="en1109010303">
<content-media type="InteractiveGraphicHotspots" id="cm9169819504">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010300/en1109010303/cm9169819504.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010300/en1109010303/cm9169819504text.xml"/></content-media>
<content-text><p>If both a Layer 2 switch and a border router fail at the same time, they affect different failure domains.</p> <p>The failure of a Layer 2 switch on a LAN segment only affects user in the broadcast domain. It has no affect on other regions of the network. Failure of a border router, however, prevents all users in the company from connecting to network resources outside of their local network. </p> <p>The router has a larger impact on the network, it has a larger failure domain. Under normal circumstances, troubleshoot resources with the larger failure domains first. </p> <p>In some circumstances, the size of the failure domain is not the deciding factor in troubleshooting. If a business critical server is connected to a failed switch, correction of this issue may take precedence over the border router.</p></content-text>
</page>
<page type="FullScreen" id="en1109010304">
<content-media type="ActivityCustom" id="cm5259642481">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010300/en1109010304/cm5259642481.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010300/en1109010304/cm5259642481text.xml"/></content-media>
<content-text><p><b>Full Screen Activity</b></p> <p>Determine how many hosts are unable to connect to the Internet when each router fails. </p></content-text>
</page>
</topic>
<topic type="" id="en1109010400">
<title><content-text>Troubleshooting Process</content-text></title>
<page type="OneColumn" id="en1109010401">
<content-media type="StaticGraphic" id="cm3811544646">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010400/en1109010401/cm3811544646.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010400/en1109010401/cm3811544646text.xml"/></content-media>
<content-text><p>When a problem occurs on an enterprise network, troubleshooting that problem quickly and efficiently is very important to avoid extended periods of downtime. Many different structured and unstructured problem-solving techniques are available to the network technician. These include:</p> <p><ul><li> <content-link target="{2928DAD3-30A4-43CD-9F54-E629697D7EFE}" type="glossary">Top-down</content-link></li><li> <content-link target="{D70B8EF8-6C5B-4785-B8BC-57D92BAE5A67}" type="glossary">Bottom-up</content-link></li><li> <content-link target="{510086D3-4A9C-43EC-8C41-73F7904E873B}" type="glossary">Divide-and-conquer</content-link></li><li> <content-link target="{29BCD6BD-111B-4C45-AF11-71B270A0F231}" type="glossary">Trial-and-error</content-link></li><li> <content-link target="{19F92575-CF2E-4673-A0C9-3A12685367DE}" type="glossary">Substitution</content-link></li></ul></p> <p>Most experienced network technicians rely on the knowledge gained from past experience and start the troubleshooting process using a trial-and-error approach. Correcting the problem in this manner saves a great deal of time.</p> <p>Unfortunately, less experienced technicians cannot rely solely on previous experience. Additionally, many times the trial-and-error approach does not provide a solution. Both of these cases require a more structured approach to troubleshooting.</p></content-text>
</page>
<page type="OneColumn" id="en1109010402">
<content-media type="InteractiveGraphicRollovers" id="cm2127014779">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010400/en1109010402/cm2127014779.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010400/en1109010402/cm2127014779text.xml"/></content-media>
<content-text><p>When a situation requires a more structured approach, most network personnel use a layered process based on the OSI or TCP/IP models. The technician uses previous experience to determine if the issue is associated with the lower layers of the OSI model or the upper layers. The layer dictates whether a top-down or bottom-up approach is appropriate.</p> <p>When approaching a problem situation, follow the generic problem-solving model, regardless of the type of troubleshooting technique used. </p> <p><ul><li> Define the problem</li><li> Gather facts</li><li> Deduce possibilities and alternatives</li><li> Design plan of action</li><li> Implement solution</li><li> Analyze results</li></ul></p> <p>If the first pass through this procedure does not determine and correct the problem, repeat the process as necessary. </p> <p>Document the initial symptoms and all attempts at finding and correcting the cause. This documentation serves as a valuable resource should the same or similar problem occur again. It is important to document even failed attempts, to save time during future troubleshooting activities.</p></content-text>
</page>
<page type="FullScreen" id="en1109010403">
<content-media type="ActivityDnDCheckReset" id="cm3249494741">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109010000/en1109010400/en1109010403/cm3249494741.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109010000/en1109010400/en1109010403/cm3249494741text.xml"/></content-media>
<content-text><p>Full Screen <b>Activity</b></p> <p>Match each problem to the OSI model layer with which it is best associated.</p></content-text>
</page>
</topic>
</section>
<section type="" id="en1109020000">
<title><content-text>Troubleshooting Switching and Connectivity Issues</content-text></title>
<topic type="" id="en1109020100">
<title><content-text>Troubleshooting Basic Switching</content-text></title>
<page type="OneColumn" id="en1109020101">
<content-media type="StaticGraphic" id="cm8953625994">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020100/en1109020101/cm8953625994.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020100/en1109020101/cm8953625994text.xml"/></content-media>
<content-text><p>Switches are currently the most commonly used Access Layer networking device. Workstations, printers, and servers connect into the network through switches. Faults with the switch hardware or configuration prevent connection between these local and remote devices.</p> <p>The most common problems with switches occur at the Physical Layer. If a switch is installed in an unprotected environment, it can suffer damage such as dislodged or damaged data or power cables. Ensure that switches are placed in a physically secure area.</p> <p>If an end device cannot connect to the network and the link LED is not illuminated, the link or the switch port is defective or shutdown, perform the following steps:</p> <p><ul><li> Ensure that the power LED is illuminated.</li><li> Ensure that the correct type of cable connects the end device to the switch.</li><li> Reseat the cables at both the workstation and the switch end.</li><li> Check the configuration to ensure that the port is in a <span class="cmd"><b>no shutdown</b></span> state.</li></ul></p> <p>If a connectivity problem exists, and if the link LED is illuminated, the switch configuration is the most likely problem.</p></content-text>
</page>
<page type="OneColumn" id="en1109020102">
<content-media type="StaticGraphic" id="cm1961144765">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020100/en1109020102/cm1961144765.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020100/en1109020102/cm1961144765text.xml"/></content-media>
<content-text><p>If a switch port fails or malfunctions, the easiest way to test it is to move the physical connection to another port and see if this corrects the problem. </p> <p>Ensure that switch port security has not disabled the port. Confirm this using the following commands:</p> <p><span class="cmd"><b>show running-config</b></span></p> <p><span class="cmd"><b>show port-security interface <i>interface_id</i></b></span></p> <p>If the switch security settings are disabling the port, review the security policy to see if altering the security is acceptable. </p> <p>Switches function at Layer 2 and keep a record of the MAC address of all connected devices. If the MAC address in this table is not correct, the switch forwards information to the wrong port and communication does not occur. </p> <p>To display the MAC address of the device connected to each switch port, use: </p> <p><span class="cmd"><b>show mac-address-table</b></span></p> <p>To clear the dynamic entries in the table, issue the command:</p> <p><span class="cmd"><b>clear mac-address-table dynamic</b></span></p> <p>The switch then repopulates the MAC address table with updated information.</p></content-text>
</page>
<page type="OneColumn" id="en1109020103">
<content-media type="InteractiveGraphicHotspots" id="cm3725643238">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020100/en1109020103/cm3725643238.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020100/en1109020103/cm3725643238text.xml"/></content-media>
<content-text><p>Although automatically detected on many devices, mismatched speed or duplex settings can prevent the link between the switch and end device from functioning. Some switches do not properly detect the speed and duplex of the connected device. If this is the suspected problem, lock down the values on the switch port to match the host device using the <span class="cmd"><b>interface speed</b></span> and <span class="cmd"><b>duplex</b></span> commands. </p> <p>To display both the speed and duplex settings of the port, use the command:</p> <p><span class="cmd"><b>show interface interface_id</b></span></p> <p>Switching loops are another potential source of connectivity issues. STP prevents bridging loops and broadcast storms by shutting down redundant paths in a switched network. If STP bases its decisions on inaccurate information, loops may occur.</p> <p>Indicators that a loop is present in a network include:</p> <p><ul><li> Loss of connectivity to, from, and through affected network regions</li><li> High CPU utilization on routers connected to affected segments </li><li> High link utilization up to 100%</li><li> High switch backplane utilization as compared to the baseline utilization </li><li> Syslog messages indicating packet looping, constant address relearning, or MAC address flapping messages</li><li> Increasing number of output drops on many interfaces</li></ul></p></content-text>
</page>
<page type="OneColumn" id="en1109020104">
<content-media type="InteractiveGraphicHotspots" id="cm7978078900">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020100/en1109020104/cm7978078900.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020100/en1109020104/cm7978078900text.xml"/></content-media>
<content-text><p>A loop develops when the switch does not receive BPDUs or is unable to process them. This problem could be due to:</p> <p><ul><li> Misconfigurations</li><li> Defective <content-link target="{1EB94FF4-0E77-44CB-B8D8-EEBF4DC512FF}" type="glossary">transceiver</content-link>s </li><li> Hardware and cabling issues</li><li> Overloaded processors </li></ul></p> <p>Overloaded processors disrupt STP and prevent the switch from processing the BPDUs. A port that is flapping causes multiple transitions to occur. These multiple transitions can overload the processors. This should be a rare occurrence in a properly configured network. To remedy this type of problem, remove as many of the redundant links as possible.</p> <p>Another troubleshooting issue is suboptimal switching. Left to default values, STP does not always identify the best root bridge or root ports. Changing the priority value on a switch can force the selection of the root bridge. The root bridge should normally be at the center of the network to provide for optimum switching. </p> <p>When troubleshooting STP, use the following commands: </p> <p>To provide information about the STP configuration:</p> <p><span class="cmd"><b>show spanning-tree</b></span></p> <p>To provide information about the STP state of an individual port:</p> <p><span class="cmd"><b>show spanning-tree interface </b><i>interface_id</i></span></p></content-text>
</page>
<page type="OneColumn" id="en1109020105">
<content-media type="ActivityPKA" id="cm9148260930">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020100/en1109020105/cm9148260930/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109020000/en1109020100/en1109020105/cm9148260930/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Troubleshoot host connectivity on a switch.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109020200">
<title><content-text>Troubleshooting VLAN Configuration Issues</content-text></title>
<page type="OneColumn" id="en1109020201">
<content-media type="InteractiveGraphicHotspots" id="cm6926826041">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020200/en1109020201/cm6926826041.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020200/en1109020201/cm6926826041text.xml"/></content-media>
<content-text><p>If the Physical Layer is functioning correctly and communication is still not occurring between end devices, check the VLAN configuration.</p> <p>If the non-functioning ports are in the same VLAN, the hosts must have IP addresses on the same network or subnet in order to communicate. If the non-functioning ports are in different VLANs, communication is only possible with the aid of a Layer 3 device, such as a router. If information is required on a specific VLAN, use the following command <span class="cmd"><b>show vlan id <i>vlan_number</i></b></span> to display the ports assigned to each VLAN.</p> <p>If inter-VLAN routing is required, verify the following configurations:</p> <p><ul><li> One port from each VLAN connects into a router interface or subinterface. </li><li> Both the switch port and the router interface are configured with trunking.</li><li> Both the switch and router interface are configured with the same encapsulation.</li></ul></p> <p>Newer switches default to 802.1Q, but some Cisco switches support both 802.1Q and Cisco proprietary Inter-Switch Link (<content-link target="{0CE5B97F-4DD3-4A75-A57A-C1012DACB9A6}" type="glossary">ISL</content-link>) format. IEEE 802.1Q should be used whenever possible, because it is the <content-link target="{B5A69053-4DFF-4289-ACEE-192A56C6E6B1}" type="glossary">de facto standard</content-link> and 802.1Q and ISL are not compatible.</p></content-text>
</page>
<page type="OneColumn" id="en1109020202">
<content-media type="InteractiveGraphicHotspots" id="cm7184270509">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020200/en1109020202/cm7184270509.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020200/en1109020202/cm7184270509text.xml"/></content-media>
<content-text><p>When troubleshooting inter-VLAN issues, ensure that there is no IP address on the physical interface of the router. The interface must be active.</p> <p>To verify the interface configuration, use:</p> <p><span class="cmd"><b>show ip interface brief</b></span></p> <p>The network associated with each VLAN should be visible in the routing table. If not, recheck all physical connections and trunk configuration on both ends of the link. If it is not directly connected to the VLAN subnets, check the configuration of the routing protocol to verify that there is a route to each of the VLANs. Use the command:</p> <p><span class="cmd"><b>show ip route</b></span></p></content-text>
</page>
<page type="OneColumn" id="en1109020203">
<content-media type="AnimationPartialScreen" id="cm4240435328">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020200/en1109020203/cm4240435328.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020200/en1109020203/cm4240435328text.xml"/></content-media>
<content-text><p><b>Access or Trunk Port</b></p> <p>Each switch port is either an access port or a trunk port. On some switch models, other switch port modes are available and the switch automatically configures the port to the appropriate status. It is sometimes advisable to lock the port into either access or trunk status to avoid potential problems with this detection process. </p> <p><b>Native and Management VLANs</b></p> <p>The native VLAN and management VLAN are VLAN1 by default. Untagged frames sent across a trunk are assigned to the native VLAN of the trunk line. If the native VLAN assignment is changed on a device, each end of the 802.1Q trunk should be configured with the same native VLAN number. If one end of the trunk is configured for native VLAN10 and the other end is configured for native VLAN14, a frame sent from VLAN10 on one side is received on VLAN14 on the other. VLAN10 "leaks" into VLAN14. This can create unexpected connectivity issues and increase latency. </p> <p>For smoother, quicker transitions, verify that the native VLAN assignment is the same on all devices throughout the network.</p></content-text>
</page>
<page type="OneColumn" id="en1109020204">
<content-media type="ActivityPKA" id="cm8083010718">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020200/en1109020204/cm8083010718/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109020000/en1109020200/en1109020204/cm8083010718/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Troubleshoot inter-VLAN routing issues.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109020300">
<title><content-text>Troubleshooting VTP</content-text></title>
<page type="OneColumn" id="en1109020301">
<content-media type="StaticGraphic" id="cm5895639690">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020300/en1109020301/cm5895639690.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020300/en1109020301/cm5895639690text.xml"/></content-media>
<content-text><p>VTP simplifies the distribution of VLAN information to multiple switches in a domain. Switches that participate in VTP operate in one of three modes: server, client, or transparent. Only the server adds, deletes, and modifies VLAN information. </p> <p>When troubleshooting VTP on a network, ensure that:</p> <p><ul><li> All participating devices have the same VTP domain name.</li><li> Two VTP servers exist in every domain, in case one fails.</li><li> All servers have the same information.</li><li> The revision numbers are the same on all devices.</li><li> All devices use the same VTP version.</li></ul></p> <p>To display the VTP version in use on a device, the VTP domain name, the VTP mode, and the VTP revision number, issue the command:</p> <p><span class="cmd"><b>show vtp status</b></span></p> <p>To modify the VTP version number, use:</p> <p><span class="cmd"><b>vtp version &lt;1 | 2></b></span></p></content-text>
</page>
<page type="OneColumn" id="en1109020302">
<content-media type="AnimationDual" id="cm7396101906">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020300/en1109020302/cm7396101906.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109020000/en1109020300/en1109020302/cm7396101906text.xml"/></content-media>
<content-text><p>VTP clients and servers use the VTP revision number to decide if they should update their VLAN information. If the revision number of the update is higher than the revision number currently in use, the client and server use the information to update the configuration.</p> <p>Always check the VTP revision information and mode on any switch before allowing it to join the network. The revision number is stored in NVRAM and erasing the start-up configuration on the switch does not reset this value. To reset the revision number, either set the switch mode to transparent or change the VTP domain name. </p> <p>It is also a problem if a <content-link target="{6956CED3-6155-4DB4-8BAA-E67B8F905225}" type="glossary">rogue switch</content-link> joins the domain and modifies VLAN information. To prevent this situation, it is important to configure a password on the VTP domain. To set a VTP password for the domain, use the global configuration command:</p> <p><span class="cmd"><b>vtp password </b><i>password</i></span></p> <p>When configured, the authentication password must be the same on all devices in the VTP domain. If updates are not propagating to a new switch in the VTP domain, suspect the password. To verify the password, use the command:</p> <p><span class="cmd"><b>show vtp password</b></span></p></content-text>
</page>
<page type="OneColumn" id="en1109020303">
<content-media type="ActivityPKA" id="cm5450954547">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109020000/en1109020300/en1109020303/cm5450954547/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109020000/en1109020300/en1109020303/cm5450954547/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Troubleshoot and correct VTP Issues.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1109030000">
<title><content-text>Troubleshooting Routing Issues</content-text></title>
<topic type="" id="en1109030100">
<title><content-text>RIP Issues</content-text></title>
<page type="OneColumn" id="en1109030101">
<content-media type="InteractiveGraphicHotspots" id="cm7391212998">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030100/en1109030101/cm7391212998.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109030000/en1109030100/en1109030101/cm7391212998text.xml"/></content-media>
<content-text><p>Many tools exist for troubleshooting routing issues. These include IOS <span class="cmd"><b>show</b></span> commands, <span class="cmd"><b>debug</b></span> commands and TCP/IP utilities such as <span class="cmd"><b>ping</b></span>, <span class="cmd"><b>traceroute</b></span> and <span class="cmd"><b>telnet</b></span>. </p> <p>The <span class="cmd"><b>show</b></span> commands display a snapshot of a configuration or of a particular component. The <span class="cmd"><b>debug</b></span> commands are dynamic and provide real-time information on traffic movement and the interaction of protocols. Use TCP/IP utilities such as <span class="cmd"><b>ping</b></span> for verifying connectivity. </p> <p>The <span class="cmd"><b>show</b></span> commands are important tools for understanding the status of a router, detecting neighboring routers, isolating problems in the network, and monitoring the network in general. Use a combination of <span class="cmd"><b>show</b></span> commands and <span class="cmd"><b>debug</b></span> commands to troubleshoot RIP routing protocol issues. </p> <p>Before using the <span class="cmd"><b>debug</b></span> command, narrow the problems to a likely subset of causes. Use <span class="cmd"><b>debug</b></span> commands to isolate problems, not to monitor normal network operation. </p></content-text>
</page>
<page type="OneColumn" id="en1109030102">
<content-media type="InteractiveGraphicHotspots" id="cm6760072573">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030100/en1109030102/cm6760072573.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109030000/en1109030100/en1109030102/cm6760072573text.xml"/></content-media>
<content-text><p>RIP is a fairly basic and simple protocol to configure. However, some common issues can arise when configuring RIP routers.</p> <p>Compatibility issues exist between RIPv1 and RIPv2. If the RIP routes are not being advertised, check for the following problems:</p>  <p><ul><li> Layer 1 or Layer 2 connectivity issues</li><li> Requirements for VLSM subnetting but using RIPv1</li><li> RIPv1 and RIPv2 routing configurations mismatched</li><li> Network statements missing or incorrect</li><li> Interface IP addressing incorrect</li><li> Outgoing interface is down</li><li> Advertised network interface is down</li><li> Passive interface misconfigurations</li></ul></p> <p>When testing with the <span class="cmd"><b>show ip route</b></span> command, it is a good idea to clear the routing tables using the <span class="cmd"><b>clear ip route *</b></span> command. </p> <p>In addition to the issues identified here, it is always important is remember that RIP has a hop count limit of 15 hops. This limitation alone can be a problem in a large enterprise network.</p></content-text>
</page>
<page type="OneColumn" id="en1109030103">
<content-media type="ActivityPKA" id="cm7931432700">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030100/en1109030103/cm7931432700/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109030000/en1109030100/en1109030103/cm7931432700/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity </b></p> <p>Troubleshoot RIP using <span class="cmd"><b>show</b></span> and <span class="cmd"><b>debug</b></span> commands. </p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
<page type="OneColumn" id="en1109030104">
<content-media type="ActivityLab" id="cm3825337649">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030100/en1109030104/cm3825337649/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109030000/en1109030100/en1109030104/cm3825337649/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity </b></p> <p>Troubleshoot RIPv2 routing issues. </p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109030200">
<title><content-text>EIGRP Issues</content-text></title>
<page type="OneColumn" id="en1109030201">
<content-media type="InteractiveGraphicHotspots" id="cm4331966424">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030200/en1109030201/cm4331966424.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109030000/en1109030200/en1109030201/cm4331966424text.xml"/></content-media>
<content-text><p>A number of IOS <span class="cmd"><b>show</b></span> commands and <span class="cmd"><b>debug</b></span> commands are the same for troubleshooting EIGRP routing issues as they are for RIP. Commands specific to troubleshooting EIGRP include:</p> <p><span class="cmd"><b>show ip eigrp neighbors</b></span></p> <p>Displays neighbor IP addresses and the interface on which they were learned. </p> <p><span class="cmd"><b>show ip eigrp topology</b></span></p> <p>Displays the topology table of known networks with successor routes, status codes, feasible distance, and interface.</p> <p><span class="cmd"><b>show ip eigrp traffic</b></span></p> <p>Displays EIGRP traffic statistics for the AS configured, including hello packets sent/received, updates, and so on. </p> <p><span class="cmd"><b>debug eigrp packets</b></span></p> <p>Displays real-time EIGRP packet exchanges between neighbors. </p> <p><span class="cmd"><b>debug ip eigrp</b></span></p> <p>Displays real-time EIGRP events, such as link status changes and routing table updates. </p></content-text>
</page>
<page type="OneColumn" id="en1109030202">
<content-media type="InteractiveGraphicHotspots" id="cm5700068718">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030200/en1109030202/cm5700068718.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109030000/en1109030200/en1109030202/cm5700068718text.xml"/></content-media>
<content-text><p>Certain issues commonly occur when configuring the EIGRP protocol. Possible reasons why EIGRP may not be working are: </p> <p><ul><li> Layer 1 or Layer 2 connectivity issues exist.</li><li> An interface has incorrect addressing or subnet mask.</li><li> AS numbers on EIGRP routers are mismatched. </li><li> The wrong network or incorrect wildcard mask is specified in the routing process.</li><li> The link may be congested or down. </li><li> The outgoing interface is down.</li><li> The interface for an advertised network is down. </li></ul></p> <p>If auto-summarization is enabled on routers with discontiguous subnets, routes may not be advertised correctly.</p></content-text>
</page>
<page type="OneColumn" id="en1109030203">
<content-media type="ActivityPKA" id="cm7459342911">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030200/en1109030203/cm7459342911/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109030000/en1109030200/en1109030203/cm7459342911/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p> </p> <p>Troubleshoot common EIGRP issues using <span class="cmd"><b>show</b></span> and <span class="cmd"><b>debug</b></span> commands. </p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109030300">
<title><content-text>OSPF Issues</content-text></title>
<page type="OneColumn" id="en1109030301">
<content-media type="InteractiveGraphicHotspots" id="cm8794110295">	<tiene><content-text></content-text></tiene>	<media ref="en1109000000/en1109030000/en1109030300/en1109030301/cm8794110295.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109030000/en1109030300/en1109030301/cm8794110295text.xml"/></content-media>
<content-text><p>The majority of problems encountered with OSPF relate to the formation of adjacencies and the synchronization of the link-state databases. </p> <p><b>OSPF Troubleshooting Issues</b></p> <p><ul><li> Neighbors must be part of the same OSPF area.</li><li> Interfaces for neighbors must have compatible IP addresses and subnet masks.</li><li> Routers in an area should have the same OSPF hello interval and dead interval.</li><li> The routers must advertise the correct networks for interfaces to participate in the OSPF process.</li><li> The appropriate wildcard masks must be used to advertise the correct IP address ranges.</li><li> Authentication must be correctly configured on routers for communication to occur.</li></ul></p> <p>In addition to the standard <span class="cmd"><b>show</b></span> and <span class="cmd"><b>debug</b></span> commands, the following commands assist troubleshooting OSPF issues:</p> <p><ul><li><span class="cmd"><b>show ip ospf </b></span></li><li><span class="cmd"> <b>show ip ospf neighbor</b></span></li><li><span class="cmd"> <b>show ip ospf interface</b></span></li><li><span class="cmd"> <b>debug ip ospf events</b></span></li><li><span class="cmd"> <b>debug ip ospf packet</b></span></li></ul></p></content-text>
</page>
<page type="FullScreen" id="en1109030302">
<content-media type="ActivityCustom" id="cm8159490352">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030300/en1109030302/cm8159490352.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109030000/en1109030300/en1109030302/cm8159490352text.xml"/></content-media>
<content-text><p>Full Screen <b>Activity</b></p> <p>Analyze the network topology and router output. Indicate whether the statements are true or false.</p></content-text>
</page>
<page type="OneColumn" id="en1109030303">
<content-media type="ActivityLab" id="cm3445907019">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030300/en1109030303/cm3445907019/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109030000/en1109030300/en1109030303/cm3445907019/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity </b></p> <p>Troubleshoot OSPF routing issues. </p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109030400">
<title><content-text>Route Redistribution Issues</content-text></title>
<page type="OneColumn" id="en1109030401">
<content-media type="InteractiveGraphicHotspots" id="cm2128374941">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030400/en1109030401/cm2128374941.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109030000/en1109030400/en1109030401/cm2128374941text.xml"/></content-media>
<content-text><p>Configuring a static default route on an edge router provides a gateway of last resort for packets destined for IP addresses outside the network. </p> <p>Although this configuration provides a solution for the edge router, it does not provide a way out of the internal network for other internal routers. One solution is to configure a default route on each internal router that points to the next hop or edge router. However, this method does not scale well with large networks. A better solution uses the routing protocol to propagate the default route on the edge router to other internal routers. All routing protocols, including RIP, EIGRP and OSPF, provide mechanisms to accomplish this. </p> <p>With each routing protocol, configure a default quad 0 static route on the edge router. </p> <p><span class="cmd"><b>ip route 0.0.0.0 0.0.0.0 S0/0/0</b></span></p> <p>Next, configure the edge router to send or propagate its default route to the other routers. With RIP and OSPF, enter router configuration mode and use the command <span class="cmd"><b>default-information originate</b></span>. EIGRP redistributes default routes directly; the <span class="cmd"><b>redistribute static</b></span> command can also be used.</p> <p>Failure to properly implement default route redistribution prevents users that are connected to internal routers from accessing external networks. </p></content-text>
</page>
<page type="OneColumn" id="en1109030402">
<content-media type="ActivityLab" id="cm8849543593">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030400/en1109030402/cm8849543593/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109030000/en1109030400/en1109030402/cm8849543593/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity </b></p> <p> </p> <p>Troubleshoot default route redistribution with EIGRP.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
<page type="OneColumn" id="en1109030403">
<content-media type="ActivityLab" id="cm5511095133">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109030000/en1109030400/en1109030403/cm5511095133/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109030000/en1109030400/en1109030403/cm5511095133/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity </b></p> <p> </p> <p>Troubleshoot OSPF router configurations to determine why a default route is not being redistributed. </p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1109040000">
<title><content-text>Troubleshooting WAN Configurations</content-text></title>
<topic type="" id="en1109040100">
<title><content-text>Troubleshooting WAN Connectivity</content-text></title>
<page type="OneColumn" id="en1109040101">
<content-media type="StaticGraphic" id="cm3284102521">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040100/en1109040101/cm3284102521.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109040000/en1109040100/en1109040101/cm3284102521text.xml"/></content-media>
<content-text><p>When configuring WAN interfaces, a number of potential problem areas can surface. Some of these problems are unavoidable if the network administrator only has control over one end of the link and the ISP controls the other end. In this case, the network administrator uses the configuration information provided by the ISP to ensure connectivity.</p> <p>At the Physical Layer, the most common problems involve <content-link target="{98DE3E7C-4EFB-4F34-A8A3-28E9D35F6E30}" type="glossary">clocking</content-link>, cable types, and loose or faulty connectors. Serial line connections link a DCE device to a DTE device. Two different types of cables exist for connecting devices: DTE and DCE. Usually the DCE device at the service provider provides that clocking signal.</p> <p>Visually check each cable for loose connections or faulty connectors. If a cable cannot be correctly connected, swap the current cable with one known to work. </p> <p>To display the type of cable and the detection and status of DTE, DCE, and clocking, use the following command:</p> <p><span class="cmd"><b>show controllers </b><i>&lt;serial_port></i></span></p></content-text>
</page>
<page type="OneColumn" id="en1109040102">
<content-media type="InteractiveGraphicHotspots" id="cm9036811427">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040100/en1109040102/cm9036811427.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109040000/en1109040100/en1109040102/cm9036811427text.xml"/></content-media>
<content-text><p>For a serial link to come up, the encapsulation format on both ends of the link must match. The default serial line encapsulation used on Cisco routers is HDLC. Since Cisco HDLC and open standard HDLC are not compatible, do not use the Cisco default encapsulation when connecting to a non-Cisco device.</p> <p>Some Layer 2 encapsulations have more than one form. For example, Cisco routers support both the proprietary Cisco Frame Relay format as well as the industry-standard <content-link target="{635455CD-56F6-461F-BE3D-BC8FB0FD2FEB}" type="glossary">IETF format</content-link>. These formats are not compatible. The default format on Cisco devices is Cisco Frame Relay format. </p> <p>To see the encapsulation in use on a serial line, use the command:</p> <p><span class="cmd"><b>show interfaces </b><i>&lt;serial_port></i></span></p> <p>Layer 3 configurations can also prevent data from moving across a serial link. Although it is not necessary to use an IP address on a serial link, if one is used, both ends of the link must be on the same network or subnet.</p></content-text>
</page>
<page type="OneColumn" id="en1109040103">
<content-media type="StaticGraphic" id="cm4371618058">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040100/en1109040103/cm4371618058.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109040000/en1109040100/en1109040103/cm4371618058text.xml"/></content-media>
<content-text><p>A process known as serial line address resolution protocol (<content-link target="{8C9AD090-808D-4F05-8D07-CC9544A71D91}" type="glossary">SLARP</content-link>) assigns an address to the end point of a serial link if the other end is already configured. SLARP assumes that each serial line is a separate IP subnet, and that one end of the line is host number 1 and the other end is host number 2. As long as one end of the serial link is configured, SLARP automatically configures an IP address for the other end.</p> <p>The IP address configured on an interface and the status of the port and line protocol is viewable with the command:</p> <p><span class="cmd"><b>show ip interface brief</b></span></p> <p>Before Layer 3 information moves across the link, both the interface and the protocol must be up. If the interface is down, there is a problem with the interface itself. </p> <p>If the interface is up but the line protocol is down, check that the proper cable is connected and is firmly attached to the port. If this step still does not correct the problem, replace the cable.</p> <p>If the status of an interface is administratively down, the most probable cause is that the <span class="cmd"><b>no shutdown</b></span> command was not entered on the interface. Interfaces are shutdown by default.</p></content-text>
</page>
<page type="OneColumn" id="en1109040104">
<content-media type="InteractiveGraphicHotspots" id="cm9509940441">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040100/en1109040104/cm9509940441.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109040000/en1109040100/en1109040104/cm9509940441text.xml"/></content-media>
<content-text><p>The PPP process involves both the LCP and NCP phases. LCP establishes the link and verifies that it is of sufficient quality to bring up the Layer 3 protocols. NCP allows Layer 3 traffic to move across the link. There is an optional authentication field between the LCP and NCP phases.</p> <p>Each phase has to complete successfully before the other begins.</p> <p>When troubleshooting PPP connectivity, verify that:</p> <p><ul><li> LCP phase is complete </li><li> Authentication has passed, if configured</li><li> NCP phase is complete</li></ul></p> <p>Commands are available that assist in troubleshooting PPP. To show the status of the LCP and NCP phase, use: </p> <p><span class="cmd"><b>show interface </b></span></p> <p>To display PPP packets transmitted during the startup phase where PPP options are negotiated, use:</p> <p><span class="cmd"><b>debug ppp negotiation</b></span></p> <p>To display real-time PPP packet flow, use:</p> <p><span class="cmd"><b>debug ppp packet</b></span></p></content-text>
</page>
<page type="OneColumn" id="en1109040105">
<content-media type="ActivityPKA" id="cm9711993126">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040100/en1109040105/cm9711993126/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109040000/en1109040100/en1109040105/cm9711993126/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Troubleshoot WAN connectivity issues.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109040200">
<title><content-text>Troubleshooting WAN Authentication</content-text></title>
<page type="OneColumn" id="en1109040201">
<content-media type="InteractiveGraphicHotspots" id="cm6815233845">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040200/en1109040201/cm6815233845.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109040000/en1109040200/en1109040201/cm6815233845text.xml"/></content-media>
<content-text><p>PPP offers many advantages over the default HDLC serial line encapsulation. Among these features is the ability to use either PAP or CHAP to authenticate end devices. Authentication occurs as an optional phase after the establishment of the link with LCP but before the NCPs allow the movement of Layer 3 traffic. </p> <p>If the LCP is not able to connect, negotiation of the optional parameters, including authentication, cannot occur. The absence of active NCPs indicates a failed authentication.</p> <p>When troubleshooting PPP authentication, determine if authentication is the problem by examining the status of the LCP and NCPs using the <span class="cmd"><b>show interface</b></span> command. </p> <p>If both the LCP and NCPs are open, authentication has been successful and the problem is elsewhere.</p> <p>If the LCP is not open, the problem exists with the physical link between the source and destination.</p> <p>If the LCP is open and the NCPs are not, authentication is suspect.</p></content-text>
</page>
<page type="OneColumn" id="en1109040202">
<content-media type="InteractiveGraphicHotspots" id="cm2413287541">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040200/en1109040202/cm2413287541.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109040000/en1109040200/en1109040202/cm2413287541text.xml"/></content-media>
<content-text><p>Authentication can be either one-way or two-way. For enhanced security, use two-way or mutual authentication. Two-way authentication requires that each end device authenticate to the other. </p> <p>On both ends of the link, verify that a user account exists for the remote device and that the password is correct. If uncertain, remove the old user account statement and recreate it. The configuration on both ends of the link must specify the same type of authentication. </p> <p>The most common problem with authentication is either forgetting to configure an account for the remote router or misconfiguring the username and password. By default, the username is the name of the remote router. Both the username and the password are case-sensitive. </p> <p>If using PAP authentication on a current version of the IOS, activate it with the command:</p> <p><span class="cmd"><b>ppp pap sent-username </b><i>username</i><b> password </b><i>password</i></span></p> <p>Debugging the authentication process provides a quick method of determining what is wrong. To display packets involved in the authentication process as they are exchanged between end devices, use the command:</p> <p><span class="cmd"><b>debug ppp authentication</b></span></p></content-text>
</page>
<page type="OneColumn" id="en1109040203">
<content-media type="ActivityPKA" id="cm3223592047">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040200/en1109040203/cm3223592047/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109040000/en1109040200/en1109040203/cm3223592047/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Troubleshoot PPP authentication using CHAP.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
<page type="OneColumn" id="en1109040204">
<content-media type="ActivityLab" id="cm4770258268">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109040000/en1109040200/en1109040204/cm4770258268/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109040000/en1109040200/en1109040204/cm4770258268/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Troubleshoot WAN and PPP connectivity.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1109050000">
<title><content-text>Troubleshooting ACL Issues</content-text></title>
<topic type="" id="en1109050100">
<title><content-text>Determining if an ACL is the Issue</content-text></title>
<page type="OneColumn" id="en1109050101">
<content-media type="StaticGraphic" id="cm4484701689">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050100/en1109050101/cm4484701689.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109050000/en1109050100/en1109050101/cm4484701689text.xml"/></content-media>
<content-text><p>ACLs add a level of complexity to troubleshooting network issues. Therefore, it is important to verify basic network connectivity before applying an ACL.</p>  <p>When networks or hosts become unreachable and ACLs are in use, it is critical to determine if the ACL is the problem. Ask the following questions to help to isolate the problem:</p> <p><ul><li> Is an ACL applied to the problem router or interface?</li><li> Has it been applied recently?</li><li> Did the issue exist before the ACL was applied?</li><li> Is the ACL performing as expected?</li><li> Is the problem with all hosts connected to the interface or only specific hosts?</li><li> Is the problem with all protocols being forwarded or only specific protocols?</li><li> Are the networks appearing in the routing table as expected?</li></ul></p> <p>One way to determine the answer to several of these questions is to enable logging. Logging shows the effect that ACLs are having on various packets. By default, the number of matches display with the <span class="cmd"><b>show access-list</b></span> command. </p> <p>To display details about packets permitted or denied, add the <span class="cmd"><b>log</b></span> keyword to the end of ACL statements.</p></content-text>
</page>
<page type="OneColumn" id="en1109050102">
<content-media type="InteractiveGraphicHotspots" id="cm2734643771">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050100/en1109050102/cm2734643771.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109050000/en1109050100/en1109050102/cm2734643771text.xml"/></content-media>
<content-text><p>A number of commands help to determine if ACLs are configured and applied correctly.</p> <p>To display all ACLs configured on the router, whether applied to an interface or not, use the following command:</p> <p><span class="cmd"><b>show access-lists</b></span></p> <p>To clear the number of matches for each ACL statement, use: </p> <p><span class="cmd"><b>clear access-list counters</b></span></p> <p>To display the source and destination IP address for each packet received or sent by any interface on the router, use:</p> <p><span class="cmd"><b>debug ip packet</b></span></p> <p>The <span class="cmd"><b>debug ip packet</b></span> command shows packets whose source or destination is a router interface. This command includes packets that are denied by an ACL at the interface. Examples of traffic that create a debug message include:</p> <p><ul><li> RIP updates to or from a router interface </li><li> Telnet from an external source to an external destination blocked by an ACL on the interface </li></ul></p> <p>If the packets are simply passing through and the ACL does not block a packet from this IP address, no <span class="cmd"><b>debug</b></span> message is generated.</p></content-text>
</page>
<page type="FullScreen" id="en1109050103">
<content-media type="ActivityCustom" id="cm6783382874">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050100/en1109050103/cm6783382874.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109050000/en1109050100/en1109050103/cm6783382874text.xml"/></content-media>
<content-text><p>Full Screen <b>Activity</b></p> <p>Analyze the network topology and router command output. Indicate whether the statements regarding ACLs and their effects are true or false.</p></content-text>
</page>
<page type="OneColumn" id="en1109050104">
<content-media type="ActivityPKA" id="cm9764611532">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050100/en1109050104/cm9764611532/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109050000/en1109050100/en1109050104/cm9764611532/icontext.xml"/></content-media>
<content-text><p>Packet Tracer Activity</p> <p>Troubleshoot ACL issues using <span class="cmd"><b>show</b></span> and <span class="cmd"><b>debug</b></span> commands.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1109050200">
<title><content-text>ACL Configuration and Placement Issues</content-text></title>
<page type="OneColumn" id="en1109050201">
<content-media type="InteractiveGraphicHotspots" id="cm2980061700">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050200/en1109050201/cm2980061700.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109050000/en1109050200/en1109050201/cm2980061700text.xml"/></content-media>
<content-text><p>Issues such as slow performance and unreachable network resources result from an incorrectly configured ACL. In some cases, the ACL may permit or deny the intended traffic but can also have unintended effects on other traffic. If it appears that the ACL is the problem, there are several issues to check.</p> <p>If the ACL statements are not in the most efficient order to permit the highest volume traffic early in the ACL, check the logging results to determine a more efficient order.</p> <p>The implicit deny may be having unintended effects on other traffic. If so, use an explicit <span class="cmd"><b>deny ip any any log</b></span> command so that packets that do not match any of the previous ACL statements can be monitored. </p> <p>Use logging to determine if the ACL is optimized or working as expected.</p></content-text>
</page>
<page type="OneColumn" id="en1109050202">
<content-media type="StaticGraphic" id="cm5198311189">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050200/en1109050202/cm5198311189.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109050000/en1109050200/en1109050202/cm5198311189text.xml"/></content-media>
<content-text><p>In addition to determining whether the ACL is correctly configured, it is also important to apply the ACL to the right router or interface, and in the appropriate direction. A correctly configured ACL that is incorrectly applied is one of the most common errors when creating ACLs.</p> <p>Standard ACLs filter only on the source IP address; therefore, place them as close to the destination as possible. </p>  <p>Placing a Standard ACL close to the source may unintentionally block traffic to networks that should be allowed. </p> <p>Placing the ACL close to the destination unfortunately allows traffic to flow across one or more network segments prior to being denied. This is a waste of valuable bandwidth. </p> <p>Using an Extended ACL resolves both of these issues. </p> <p>Packets destined for networks other than the one being blocked are unaffected. The routers along the potential path never see the denied packets, which helps to conserve bandwidth.</p></content-text>
</page>
<page type="OneColumn" id="en1109050203">
<content-media type="ActivityPKA" id="cm2202937697">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050200/en1109050203/cm2202937697/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109050000/en1109050200/en1109050203/cm2202937697/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Troubleshoot the placement and direction of an ACL.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
<page type="OneColumn" id="en1109050204">
<content-media type="ActivityLab" id="cm3809760526">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109050000/en1109050200/en1109050204/cm3809760526/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1109000000/en1109050000/en1109050200/en1109050204/cm3809760526/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity </b></p>  <p>Troubleshoot ACL configuration and placement issues. </p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="en1109060000">
<title><content-text>Chapter Summary</content-text></title>
<topic type="" id="en1109060100">
<title><content-text>Summary</content-text></title>
<page type="FullScreen" id="en1109060101">
<content-media type="ChapterSummary" id="cm9017115468">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109060000/en1109060100/en1109060101/cm9017115468.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109060000/en1109060100/en1109060101/cm9017115468text.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
<topic type="" id="en1109060200">
<title><content-text>Critical Thinking</content-text></title>
<page type="FullScreen" id="en1109060201">
<content-media type="ActivityCustom" id="cm3754662047">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109060000/en1109060200/en1109060201/cm3754662047.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1109000000/en1109060000/en1109060200/en1109060201/cm3754662047text.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="en1109070000">
<title><content-text>Chapter Quiz</content-text></title>
<topic type="" id="en1109070100">
<title><content-text>Quiz</content-text></title>
<page type="OneColumn" id="en1109070101">
<content-media type="ChapterQuiz" id="cm3328238705">	<title><content-text></content-text></title>	<media ref="en1109000000/en1109070000/en1109070100/en1109070101/cm3328238705/" mime="" scale="true" type="directory" width="100%" height="100%" external="en1109000000/en1109070000/en1109070100/en1109070101/cm3328238705/icontext.xml"/></content-media>
<content-text><p>Take the chapter quiz to check your knowledge.</p><p><b>Click the quiz icon to begin.</b></p></content-text>
</page>
</topic>
</section>
</chapter>
