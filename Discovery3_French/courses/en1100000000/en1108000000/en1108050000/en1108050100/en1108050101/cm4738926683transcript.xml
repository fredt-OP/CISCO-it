<transcript lastedited="10.10.08 08:10:20">
<title><content-text><![CDATA[8.5.1 - Using Logging to Verify ACL Functionality]]></content-text></title>
<brief><content-text><![CDATA[This animation depicts the different methods of viewing ACL matches, default and logging.<br><br>Default Network Topology<br>Host, H1, has the IP address 192.168.1.2. Host, H2 has the IP address 192.168.1.3. Both hosts are connected to the F A 0 /0 of R1. The ACL has been placed on F A 0 /0. R1 connects via S0/0/0 to the S0/0/0 port of router R2. The link between the two routers is on the network 192.168.2.0. R2 is connected via F A 0 /0 to H3. Host, H3 has the address 192.168.3.11. <br><br>The ACL configuration is listed, as follows:<br><br>R1 (config) # access-list 123 deny tcp host 192.168.1.2 host 192.168.3.11 e q 23<br>R1 (config) # access-list 123 permit IP host 192.168.1.0 0.0.0.255 any<br>R1 (config) #<br>R1 (config) # Int F A 0 /0<br>R1(config-if)# IP access-group 123 in<br>R1 (config) # end<br><br>R1# show access-list 123<br>Extended IP Access list 123<br>10 deny tcp host 192.168.1.2 host 192.168.3.11 eq telnet (1 matches)<br>20 permit IP 192.168.1.0 0.0.0.255 any (1 matches)<br><br>H1 sends a packet onto the network. When the packet reaches the F A 0 /0 of R1, the packet is denied, as highlighted in the ACL output.<br><br>R1# show access-list 123<br>Extended IP Access list 123<br>10 deny tcp host 192.168.1.2 host 192.168.3.11 eq telnet (1 matches)<br>20 permit IP 192.168.1.0 0.0.0.255 any (1 matches)<br><br>Next, H2 sends a packet onto the network. When the packet reaches the F A 0 /0 of R1, the packet is allowed as highlighted in the ACL output.<br><br>R1 # show access-list 123<br>Extended IP Access list 123<br>10 deny tcp host 192.168.1.2 host 192.168.3.11 eq telnet (1 matches)<br>20 permit IP 192.168.1.0 0.0.0.255 any (1 matches)<br><br>By looking at the text taken from the end of the following router config and subsequent show access list command you can see where matches were made and if the matches were denied or permitted. <br><br>Logging Network Topology<br>H1 has the IP address 192.168.1.2. H1 connects to F A 0 /0 of router R1. R1 connects via S0/0/0 to the S0/0/0 port of router R2. The link between these two routers is on the network 192.168.2.0. R2 is connected via F A 0 /0 to host H2. H2 has the address 192.168.3.11. <br><br>The ACL configuration is listed, as follows:<br><br>R1 (config) # no access-list 123<br>R1 (config) # access-list 123 deny tcp host 192.168.1.2 host 192.168.3.11 eq 23 log<br>R1 (config) # access-list 123 permit IP host 192.168.1.0 0.0.0.255 any log<br>R1 (config) # access-list 123 deny IP  <br>R1 (config) # end<br>R1 #<br><br>H1 sends three packets onto the network. The following logged entries from the router configuration describe the outcome.<br><br>H1 sends the first packet using its IP address as the source 192.168.1.2, destination 192.168.3.11 using port 30. <br><br>*Sep 9 20:02:11.979: %SEC-6-IP ACCESS LOG P: list 123 permitted udp 192.168.1.2(2138)<br>192.168.3.11(30), 1 packet<br><br>H1 sends the second packet using its IP address as the source 192.168.1.2, destination 192.168.3.11 using port 23.<br><br>*Sep 9 20:02:53.067: %SEC-6-IP ACCESS LOG P: list 123 denied tcp 192.168.1.2(1141)<br>192.168.3.11(23), 1 packet<br><br>H1 sends the third packet using its IP address as the source 192.168.1.2, destination 192.168.3.20 using the protocol  CMP.<br><br>*Sep 9 20:03:48.279: %SEC-6-IP ACCESS LOG P: list 123 denied icmp 192.168.1.2 192.168.3.20(8 /0), 1 packet<br>]]></content-text></brief>
<full><content-text><![CDATA[FULL - NOT FOR PRODUCTION]]></content-text></full>
</transcript>
