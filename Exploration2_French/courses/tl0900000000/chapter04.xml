<chapter type="" id="tl0904000000">
<title><content-text>Protocoles de routage à vecteur de distance</content-text></title>
<section type="ChapterIntroduction" id="tl0904000000">
<title><content-text>Présentation du chapitre</content-text></title>
<topic type="" id="tl0904000100">
<title><content-text>Présentation du chapitre</content-text></title>
<page type="OneColumn" id="tl0904000101">
<content-media type="StaticGraphic" id="cm9143789873"><title><content-text></content-text></title><media ref="tl0904000000/tl0904000000/tl0904000100/tl0904000101/cm9143789873.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904000000/tl0904000100/tl0904000101/cm9143789873text.xml"/></content-media>
<content-text><p><b>Présentation</b></p> <p>Les chapitres de ce cours relatifs au routage dynamique traitent des protocoles IGP (Interior Gateway Protocol). Comme décrit dans le chapitre 3, les protocoles IGP se répartissent en deux catégories : les protocoles à vecteur de distance et les protocoles à état de liens.</p> <p>Ce chapitre décrit les caractéristiques, les opérations et les fonctionnalités propres aux protocoles de routage à vecteur de distance. Quel que soit le protocole de routage utilisé, tous présentent des avantages et des inconvénients. C’est pourquoi les conditions influençant le fonctionnement des protocoles à vecteur de distance, les pièges qu’ils présentent et les solutions appropriées sont décrits ci-dessous. Il est important de comprendre le fonctionnement du routage à vecteur de distance pour pouvoir activer, vérifier et dépanner ces protocoles.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904010000">
<title><content-text>Présentation des protocoles de routage à vecteur de distance</content-text></title>
<topic type="" id="tl0904010100">
<title><content-text>Protocoles de routage à vecteur de distance</content-text></title>
<page type="OneColumn" id="tl0904010101">
<content-media type="StaticGraphic" id="cm5211114105"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010100/tl0904010101/cm5211114105.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010100/tl0904010101/cm5211114105text.xml"/></content-media>
<content-text><p>Les protocoles de routage dynamique aident les administrateurs réseau à maîtriser le processus fastidieux et astreignant de configuration et de maintenance de routes statiques. Imaginez, par exemple, ce que peut représenter la maintenance des configurations de routage statique des 28 routeurs illustrés dans la figure ci-contre ? Que se passe-t-il en cas d’interruption d’une liaison ? Comment s’assurer de la disponibilité de <content-link target="cg2491080382" type="glossary">chemins redondants</content-link> ? Le routage dynamique est la solution généralement choisie pour les grands réseaux. </p> <p>Parmi les protocoles de routage à vecteur de distance figurent les protocoles RIP, IGRP et EIGRP.</p> <p><b>RIP</b></p> <p>Initialement, le protocole RIP (Routing Information Protocol) était spécifié dans la RFC 1058. Ses principales caractéristiques sont les suivantes :</p> <ul><li> Il utilise le nombre de sauts comme métrique de sélection d’un chemin. </li> <li> Si le nombre de sauts pour un réseau est supérieur à 15, le protocole RIP ne peut pas fournir de route à ce réseau.</li> <li> Par défaut, les mises à jour de routage sont diffusées ou multidiffusées toutes les 30 secondes. </li></ul> <p><b>IGRP</b></p> <p>Le protocole IGRP (Interior Gateway Routing Protocol) est un protocole propriétaire développé par Cisco. Les principales caractéristiques conceptuelles du protocole IGRP sont les suivantes :</p> <ul><li> La bande passante, le délai, la charge et la fiabilité sont utilisés pour créer une métrique composite. </li> <li> Par défaut, les mises à jour de routage sont diffusées toutes les 90 secondes. </li> <li> IGRP est le prédécesseur d’EIGRP et est désormais obsolète.</li></ul> <p><b>EIGRP</b></p> <p>Le protocole EIGRP (Enhanced IGRP) est un protocole de routage à vecteur de distance propriétaire de Cisco. Ses principales caractéristiques sont les suivantes : </p> <ul><li> Il peut effectuer un équilibrage de charge à coût inégal. </li> <li> Il utilise l’<content-link target="cg5832746935" type="glossary">algorithme DUAL</content-link> (Diffused Update Algorithm) pour calculer le chemin le plus court. </li> <li> Contrairement aux protocoles RIP et IGRP, il n’y a pas de mises à jour régulières. Des mises à jour de routage sont envoyées uniquement en cas de modification de la topologie.</li></ul></content-text>
</page>
</topic>
<topic type="" id="tl0904010200">
<title><content-text>Technologie de vecteur de distance</content-text></title>
<page type="OneColumn" id="tl0904010201">
<content-media type="StaticGraphic" id="cm6393632174"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010200/tl0904010201/cm6393632174.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010200/tl0904010201/cm6393632174text.xml"/></content-media>
<content-text><p><b>Signification du terme « vecteur de distance »</b></p> <p>Comme le nom l’indique, « vecteur de distance » signifie que les routes sont annoncées sous la forme de vecteurs de distance et de direction. La distance est définie en termes de métrique, comme le nombre de sauts, et la direction est simplement le routeur de tronçon suivant ou l’interface de sortie. </p> <p>Un routeur utilisant un protocole de routage à vecteur de distance ne connaît pas le chemin complet vers un réseau de destination. Le routeur ne connaît que les éléments suivants :</p> <ul><li> La direction ou l’interface dans laquelle les paquets doivent être transférés et</li> <li> la distance jusqu’au réseau de destination.</li></ul> <p>Par exemple, dans la figure présentée, R1 sait que la distance pour atteindre le réseau 172.16.3.0/24 est de 1 saut, et que la direction est celle de l’interface S0/0/0 vers R2.</p></content-text>
</page>
<page type="OneColumn" id="tl0904010202">
<content-media type="AnimationPartialScreen" id="cm3456621042"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010200/tl0904010202/cm3456621042.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010200/tl0904010202/cm3456621042text.xml"/></content-media>
<content-text><p><b>Fonctionnement des protocoles de routage à vecteur de distance</b></p> <p>Certains protocoles de routage à vecteur de distance appellent le routeur pour qu’il diffuse régulièrement la totalité de la table de routage à chacun de ses voisins. Cette méthode est inefficace car les mises à jour sollicitent non seulement de la bande passante, mais également les ressources processeur du routeur pour traiter ces mises à jour. </p> <p>Les protocoles de routage à vecteur de distance partagent certaines caractéristiques.</p> <p>Des <b>mises à jour régulières </b>sont envoyées à intervalles fixes (30 secondes pour le protocole RIP et 90 secondes pour le protocole IGRP). Des mises à jour régulières continuent à être envoyées à tous les voisins même lorsque la topologie n’a pas changé depuis plusieurs jours.</p> <p>Les <b>voisins </b>sont des routeurs qui partagent une liaison et qui sont configurés de manière à utiliser le même protocole de routage. Le routeur ne connaît que les adresses réseau de ses propres interfaces et les adresses des réseaux distants qu’il peut atteindre par le biais de ses voisins. Il n’en sait pas davantage sur la topologie du réseau. <b>Les routeurs utilisant le routage à vecteur de distance ne connaissent pas la topologie du réseau.</b></p> <p>Des <b>mises à jour des diffusions </b>sont envoyées à 255.255.255.255. Les routeurs voisins configurés avec le même protocole de routage traiteront ces mises à jour. Tous les autres périphériques traiteront également la mise à jour jusqu’à la couche 3, avant de la supprimer. Certains protocoles de routage à vecteur de distance utilisent des adresses de multidiffusion à la place d’adresses de diffusion.</p> <p>Des <b>mises à jour de toute la table de routage </b>sont envoyées régulièrement à tous les voisins, à quelques exceptions près qui seront examinées plus loin. Les voisins qui reçoivent ces mises à jour traitent l’ensemble de la mise à jour pour trouver les informations pertinentes et suppriment le reste. Certains protocoles de routage à vecteur de distance comme EIGRP n’envoient pas de mises à jour régulières de la table de routage.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904010300">
<title><content-text>Algorithmes des protocoles de routage</content-text></title>
<page type="OneColumn" id="tl0904010301">
<content-media type="AnimationPartialScreen" id="cm6606786680"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010300/tl0904010301/cm6606786680.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010300/tl0904010301/cm6606786680text.xml"/></content-media>
<content-text><p><b>Objectif de l’algorithme</b></p> <p>Au centre du protocole à vecteur de distance, l’algorithme sert à calculer les meilleurs chemins et à envoyer ces informations aux voisins.</p> <p>Un algorithme est une procédure permettant d’accomplir une certaine tâche, avec un état initial donné et un état de fin défini. Les protocoles de routage utilisent des algorithmes différents pour installer des routes dans la table de routage, envoyer des mises à jour aux voisins et déterminer le meilleur chemin</p> <p>L’algorithme utilisé pour les protocoles de routage définit les processus suivants :</p> <ul><li> Mécanisme d’envoi et de réception des informations de routage</li> <li> Mécanisme de calcul des meilleurs chemins et d’installation de routes dans la table de routage </li> <li> Mécanisme de détection des modifications topologiques et de réaction à celles-ci</li></ul> <p> </p> <p>Dans l’animation, R1 et R2 sont configurés avec un protocole de routage. L’algorithme envoie et reçoit des mises à jour. R1 et R2 recueillent ensuite de nouvelles informations à partir de la mise à jour. Dans le cas présent, chaque routeur découvre un nouveau réseau. L’algorithme de chaque routeur effectue ses calculs indépendamment et met à jour la table de routage en y incluant les nouvelles informations. En cas de panne du réseau local sur R2, l’algorithme construit une mise à jour « déclenchée » et l’envoie à R1. R1 supprime ensuite le réseau de la table de routage. Les mises à jour déclenchées seront abordées plus loin dans ce chapitre.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904010400">
<title><content-text>Caractéristiques des protocoles de routage</content-text></title>
<page type="OneColumn" id="tl0904010401">
<content-media type="StaticGraphic" id="cm5104895888"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010400/tl0904010401/cm5104895888.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010400/tl0904010401/cm5104895888text.xml"/></content-media>
<content-text><p><b>Caractéristiques des protocoles de routage</b></p> <p>Plusieurs caractéristiques permettent de différencier les protocoles de routage :</p> <ul><li> <b>Temps de convergence</b> - Le temps de convergence définit la rapidité à laquelle les routeurs dans la topologie du réseau parviennent à partager les informations de routage et à disposer d’une base de connaissances cohérente. Plus la convergence est rapide, plus le protocole est recommandé. Des boucles de routage peuvent survenir lorsque des tables de routage incohérentes ne sont pas mises à jour en raison d’une convergence lente dans un réseau changeant.</li> <li> <b>Evolutivité</b> - L’évolutivité définit la taille maximale d’un réseau en fonction du protocole de routage qui est déployé. Plus le réseau est grand, plus le protocole de routage doit être évolutif.</li> <li> <b>Sans classe (utilisation d’un masque VLSM) ou par classe</b> - Les protocoles de routage sans classe incluent le masque de sous-réseau dans les mises à jour. Cette fonctionnalité prend en charge l’utilisation du <content-link target="cg6461978161" type="glossary">masquage de sous-réseau de long. var. (VLSM)</content-link> et permet un meilleur résumé des routes. Les protocoles de routage par classe n’incluent pas le masque de sous-réseau dans les mises à jour de routage et ne peuvent pas prendre en charge les masques de sous-réseau de longueur variable (VLSM).</li> <li> <b>Utilisation des ressources</b> - Inclut les exigences d’un protocole de routage telles que l’espace mémoire, l’utilisation du processeur et l’utilisation de la bande passante de liaison. Pour des besoins en ressources plus élevés, un matériel plus puissant est nécessaire pour prendre en charge le fonctionnement du protocole de routage en plus des processus de transfert de paquets.</li> <li> <b>Implémentation et maintenance</b> - L’implémentation et la maintenance font référence aux connaissances qu’un administrateur réseau doit posséder pour implémenter et gérer le réseau en fonction du protocole de routage déployé.</li></ul> <p>Les avantages et les inconvénients des protocoles de routage à vecteur de distance sont répertoriés dans le tableau.</p></content-text>
</page>
<page type="OneColumn" id="tl0904010402">
<content-media type="StaticGraphic" id="cm4515860153"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010400/tl0904010402/cm4515860153.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010400/tl0904010402/cm4515860153text.xml"/></content-media>
<content-text><p><b>Contrôle des connaissances sur les protocoles de routage</b></p> <p>Dans la figure, tous les protocoles de routage traités dans le cours sont comparés en fonction de ces caractéristiques. Bien que le protocole IGRP ne soit plus pris en charge par l’IOS, il est indiqué ici pour le comparer à la version améliorée (Enhanced IGRP). Par ailleurs, bien que le protocole de routage IS-IS soit traité dans les cours CCNP, il est présenté ici car il s’agit d’un protocole IGP couramment utilisé.</p> <p>Examinez la figure, puis cliquez sur le bouton Réinitialiser pour vider la table. Faites glisser les caractéristiques appropriées vers chaque protocole de routage. En tenant compte des informations présentées plus haut, vous devriez être en mesure d’identifier les avantages et les inconvénients des protocoles de routage à vecteur de distance.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904020000">
<title><content-text>Découverte du réseau</content-text></title>
<topic type="" id="tl0904020100">
<title><content-text>Démarrage à froid</content-text></title>
<page type="OneColumn" id="tl0904020101">
<content-media type="AnimationPartialScreen" id="cm6311061526"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020100/tl0904020101/cm6311061526.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020100/tl0904020101/cm6311061526text.xml"/></content-media>
<content-text><p>Lorsqu’un routeur <i>démarre à froid</i> ou est mis sous tension, il ne dispose d’aucune information sur la topologie du réseau. Il ne sait même pas que des périphériques sont connectés à l’autre extrémité de ses liaisons. Les seules informations dont dispose un routeur sont celles de son propre fichier de configuration qui est stocké dans la mémoire vive non volatile. Une fois amorcé avec succès, le routeur applique la configuration enregistrée. Comme indiqué dans les chapitres 1 et 2, le routeur détecte initialement ses propres réseaux connectés directement si l’adressage IP a été correctement configuré.</p> <p><b>Détection de réseau initiale</b></p> <p>Dans l’exemple de la figure, après un démarrage à froid et avant l’échange d’informations de routage, les routeurs détectent initialement leurs propres réseaux connectés directement et masques de sous-réseau. Ces informations sont ajoutées à leurs tables de routage :</p> <p><b>R1</b></p> <ul><li> 10.1.0.0 disponible via l’interface FastEthernet 0/0  </li> <li> 10.2.0.0 disponible via l’interface Serial 0/0/0</li></ul> <p><b>R2</b></p> <ul><li> 10.2.0.0 disponible via l’interface Serial 0/0/0 </li> <li> 10.3.0.0 disponible via l’interface Serial 0/0/1</li></ul> <p><b>R3</b></p> <ul><li> 10.3.0.0 disponible via l’interface Serial 0/0/1 </li> <li> 10.4.0.0 disponible via l’interface FastEthernet 0/0 </li></ul> <p><b>Lancez l’animation pour observer cette détection initiale de réseaux connectés pour R1.</b> Avec ces informations initiales, les routeurs commencent à échanger des informations de routage.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904020200">
<title><content-text>Échange initial d’informations de routage</content-text></title>
<page type="OneColumn" id="tl0904020201">
<content-media type="AnimationPartialScreen" id="cm2898643623"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020200/tl0904020201/cm2898643623.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020200/tl0904020201/cm2898643623text.xml"/></content-media>
<content-text><p>Si un protocole de routage est configuré, les routeurs commencent à échanger des mises à jour de routage. Au départ, ces mises à jour n’incluent que des informations concernant leurs réseaux directement connectés. Dès qu’il reçoit une mise à jour, le routeur recherche les nouvelles informations. Toutes les routes qui actuellement ne figurent pas dans sa table de routage sont ajoutées.</p> <p><b>Échange initial</b></p> <p>Lancez l’animation pour observer comment R1, R2 et R3 démarrent l’échange initial. Les trois routeurs envoient leurs tables de routage à leurs voisins, qui à ce stade contiennent uniquement les réseaux connectés directement. Chaque routeur traite les mises à jour de la façon suivante :</p> <p><b>R1</b></p> <ul><li> Envoie une mise à jour sur le réseau 10.1.0.0 via l’interface Serial 0/0/0.</li> <li> Envoie une mise à jour sur le réseau 10.2.0.0 via l’interface FastEthernet 0/0.</li> <li> Reçoit une mise à jour de R2 sur le réseau 10.3.0.0 avec une métrique de 1.</li> <li> Stocke le réseau 10.3.0.0 dans la table de routage avec une métrique de 1.</li></ul> <p><b>R2</b></p> <ul><li> Envoie une mise à jour sur le réseau 10.3.0.0 via l’interface Serial 0/0/0.</li> <li> Envoie une mise à jour sur le réseau 10.2.0.0 via l’interface Serial 0/0/1.</li> <li> Reçoit une mise à jour de R1 sur le réseau 10.1.0.0 avec une métrique de 1.</li> <li> Stocke le réseau 10.1.0.0 dans la table de routage avec une métrique de 1.</li> <li> Reçoit une mise à jour de R3 sur le réseau 10.4.0.0 avec une métrique de 1.</li> <li> Stocke le réseau 10.4.0.0 dans la table de routage avec une métrique de 1.</li></ul> <p><b>R3</b></p> <ul><li> Envoie une mise à jour sur le réseau 10.4.0.0 via l’interface Serial 0/0/1.</li> <li> Envoie une mise à jour sur le réseau 10.3.0.0 via l’interface FastEthernet 0/0.</li> <li> Reçoit une mise à jour de R2 sur le réseau 10.2.0.0 avec une métrique de 1.</li> <li> Stocke le réseau 10.2.0.0 dans la table de routage avec une métrique de 1.</li></ul> <p>Après cette première série d’échange de mises à jour, chaque routeur connaît les réseaux connectés de ses voisins directement connectés. Toutefois, avez-vous noté que R1 ne connaît pas encore l’existence du réseau 10.4.0.0 et que R3 ne connaît pas encore l’existence du réseau 10.1.0.0 ? La connaissance du réseau ne sera pas complète et sa convergence ne pourra pas avoir lieu tant qu’un autre échange d’informations de routage n’aura pas été effectué.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904020300">
<title><content-text>Échange d’informations de routage</content-text></title>
<page type="OneColumn" id="tl0904020301">
<content-media type="AnimationPartialScreen" id="cm2009435717"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020300/tl0904020301/cm2009435717.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020300/tl0904020301/cm2009435717text.xml"/></content-media>
<content-text><p>À ce stade, les routeurs connaissent leurs propres réseaux directement connectés et les réseaux connectés de leurs voisins immédiats. Pour se rapprocher de la convergence, les routeurs échangent la série suivante de mises à jour régulières. Chaque routeur vérifie à nouveau les mises à jour à la recherche de nouvelles informations.</p> <p><b>Mise à jour suivante</b></p> <p>Lancez l’animation pour observer comment R1, R2 et R3 envoient la dernière table de routage à leurs voisins. Chaque routeur traite les mises à jour de la façon suivante :</p> <p><b>R1</b></p> <ul><li> Envoie une mise à jour sur le réseau 10.1.0.0 via l’interface Serial 0/0/0.</li> <li> Envoie une mise à jour sur les réseaux 10.2.0.0 et 10.3.0.0 via l’interface FastEthernet 0/0.</li> <li> Reçoit une mise à jour de R2 sur le réseau 10.4.0.0 avec une métrique de 2.</li> <li> Stocke le réseau 10.4.0.0 dans la table de routage avec une métrique de 2.</li> <li> La même mise à jour de R2 contient des informations sur le réseau 10.3.0.0 avec une métrique de 1. Aucune modification n’est intervenue ; par conséquent, les informations de routage restent les mêmes.</li></ul> <p><b>R2</b></p> <ul><li> Envoie une mise à jour sur les réseaux 10.3.0.0 et 10.4.0.0 via l’interface Serial 0/0/0.</li> <li> Envoie une mise à jour sur les réseaux 10.1.0.0 et 10.2.0.0 via l’interface Serial 0/0/1.</li> <li> Reçoit une mise à jour de R1 sur le réseau 10.1.0.0. Aucune modification n’est intervenue ; par conséquent, les informations de routage restent les mêmes.</li> <li> Reçoit une mise à jour de R3 sur le réseau 10.4.0.0. Aucune modification n’est intervenue ; par conséquent, les informations de routage restent les mêmes.</li></ul> <p><b>R3</b></p> <ul><li> Envoie une mise à jour sur le réseau 10.4.0.0 via l’interface Serial 0/0/1.</li> <li> Envoie une mise à jour sur les réseaux 10.2.0.0 et 10.3.0.0 via l’interface FastEthernet 0/0.</li> <li> Reçoit une mise à jour de R2 sur le réseau 10.1.0.0 avec une métrique de 2.</li> <li> Stocke le réseau 10.1.0.0 dans la table de routage avec une métrique de 2.</li> <li> La même mise à jour de R2 contient des informations sur le réseau 10.2.0.0 avec une métrique de 1. Aucune modification n’est intervenue ; par conséquent, les informations de routage restent les mêmes.</li></ul> <p><b>Remarque :</b> les protocoles de routage à vecteur de distance implémentent généralement une technique appelée «<content-link target="cg3251675130" type="glossary"> découpage d’horizon </content-link>». Le découpage d’horizon empêche l’envoi d’informations via l’interface qui les a envoyées. Par exemple, R2 n’envoie pas de mise à jour via l’interface Serial 0/0/0 contenant le réseau 10.1.0.0 car R2 a pris connaissance du réseau via l’interface Serial 0/0/0. Ce mécanisme sera traité en détail plus loin dans ce chapitre.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904020400">
<title><content-text>Convergence</content-text></title>
<page type="OneColumn" id="tl0904020401">
<content-media type="AnimationPartialScreen" id="cm4322105010"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020400/tl0904020401/cm4322105010.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020400/tl0904020401/cm4322105010text.xml"/></content-media>
<content-text><p>Le temps nécessaire à un réseau pour converger est directement proportionnel à la taille de ce réseau. Dans l’animation ci-contre, un routeur de succursale dans la Région 4 (B2-R4) effectue un démarrage à froid. L’animation montre la propagation des nouvelles informations de routage à mesure que des mises à jour sont échangées entre les routeurs voisins. Cinq séries d’échanges de mises à jour régulières sont nécessaires pour que la plupart des routeurs de succursale des Régions 1, 2 et 3 découvrent les nouvelles routes annoncées par B2-R4. Les protocoles de routage sont évalués en fonction de la vitesse à laquelle ils peuvent propager ces informations : on parle de vitesse de convergence.</p> <p>La vitesse de convergence englobe les éléments suivants :</p> <ul><li> la vitesse à laquelle le routeur propage une modification de la topologie lors d’une mise à jour de routage à ses voisins ; </li> <li> la vitesse de calcul des meilleures routes à l’aide des nouvelles informations de routage collectées.</li></ul> <p>Un réseau n’est pas totalement fonctionnel tant qu’il n’a pas convergé. Les administrateurs réseau préfèrent donc les protocoles de routage dont les temps de convergence sont courts.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904030000">
<title><content-text>Maintenance des tables de routage</content-text></title>
<topic type="" id="tl0904030100">
<title><content-text>Mises à jour régulières : Protocoles RIPv1 et IGRP</content-text></title>
<page type="OneColumn" id="tl0904030101">
<content-media type="AnimationPartialScreen" id="cm4501148513"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030100/tl0904030101/cm4501148513.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030100/tl0904030101/cm4501148513text.xml"/></content-media>
<content-text><p><b>Mise à jour de la table de routage</b></p> <p>Plusieurs protocoles à vecteur de distance ont recours à des mises à jour régulières pour échanger des informations de routage avec leurs voisins et maintenir les informations de routage à jour dans la table de routage. RIP et IGRP sont des exemples de protocoles agissant de la sorte. </p> <p>Dans l’animation ci-contre, les routeurs envoient régulièrement la table de routage à leurs voisins. Le terme de <i>mise à jour régulière</i> fait référence au fait qu’un routeur envoie la table de routage complète à ses voisins à un intervalle prédéfini. Pour les protocoles RIP, ces mises à jour sont envoyées toutes les 30 secondes sous forme de diffusion (255.255.255.255) que la topologie ait été ou non modifiée. L’intervalle de 30 secondes est un minuteur de mise à jour des routes qui permet également de connaître l’âge des informations de routage dans une table de routage. </p> <p>L’âge des informations de routage d’une table de routage est actualisé à chaque réception d’une mise à jour. Les informations de la table de routage peuvent ainsi être mises à jour dès que la topologie est modifiée. Des modifications peuvent avoir lieu pour plusieurs raisons, notamment :</p> <ul><li> Défaillance de la liaison active</li> <li> Introduction d’une nouvelle liaison</li> <li> Défaillance d’un routeur</li> <li> Modification des paramètres de liaison</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0904030102">
<content-media type="InteractiveGraphicHotspots" id="cm8821870465"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030100/tl0904030102/cm8821870465.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030100/tl0904030102/cm8821870465text.xml"/></content-media>
<content-text><p><b>Minuteurs RIP</b></p> <p>Outre le minuteur de mise à jour, l’IOS implémente trois minuteurs supplémentaires pour le protocole RIP :</p> <ul><li> Temporisation (Invalid Timer)</li> <li> Annulation (Flush Timer)</li> <li> Mise hors service (Holddown Timer)</li></ul> <p><b>Minuteur de temporisation.</b> Si aucune mise à jour n’a été reçue pour actualiser une route existante dans les 180 secondes (par défaut), la route est marquée comme non valide (valeur 16 attribuée à la métrique). La route est conservée dans la table de routage jusqu’à l’expiration du minuteur d’annulation.</p> <p><b>Minuteur d’annulation. </b>Par défaut, le minuteur d’annulation a une valeur de 240 secondes, ce qui représente 60 secondes de plus que le minuteur de temporisation. Lorsque le délai du minuteur d’annulation expire, la route est supprimée de la table de routage.</p> <p><b>Minuteur de mise hors service.</b> Ce minuteur stabilise les informations de routage et peut permettre d’éviter les boucles de routage au moment de la convergence de la topologie sur la base de nouvelles informations. Une fois marquée comme inaccessible, une route doit rester hors service suffisamment longtemps pour que tous les routeurs de la topologie découvrent le réseau inaccessible. Par défaut, le minuteur de mise hors service a une valeur de 180 secondes. Le minuteur de mise hors service est traité en détail plus loin dans ce chapitre.</p> <p><b>Cliquez sur <span class="cmd">show ip route </span>dans la figure.</b></p> <p>Vous pouvez vérifier les valeurs du minuteur avec deux commandes : <span class="cmd"><b>show ip route</b></span> et <span class="cmd"><b>show ip protocols</b></span>. Dans la sortie de la commande <span class="cmd"><b>show ip route</b></span>, notez que chaque route découverte par le biais du protocole RIP indique le temps écoulé depuis la dernière mise à jour (exprimé en secondes). </p> <p><b>Cliquez sur <span class="cmd">show ip protocols </span>dans la figure.</b></p> <p>Ces informations sont aussi répétées dans la sortie <span class="cmd">show ip protocols</span> sous le titre <span class="cmd">Last Update</span>. La commande <span class="cmd"><b>show ip protocols</b></span> indique à quel moment le routeur R1 est supposé envoyer sa prochaine série de mises à jour. Elle énumère également les valeurs par défaut des minuteurs de temporisation, de mise hors service et d’annulation.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904030200">
<title><content-text>Mises à jour limitées : EIGRP</content-text></title>
<page type="OneColumn" id="tl0904030201">
<content-media type="AnimationPartialScreen" id="cm2852931343"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030200/tl0904030201/cm2852931343.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030200/tl0904030201/cm2852931343text.xml"/></content-media>
<content-text><p>À la différence des autres protocoles de routage à vecteur de distance, le protocole EIGRP n’envoie pas de mises à jour régulières. Au lieu de cela, le protocole EIGRP envoie des <content-link target="cg4471473624" type="glossary">mises à jour limitées</content-link> à propos d’une route en cas de modification d’un chemin ou de la métrique pour cette route. Lorsqu’une nouvelle route devient disponible ou qu’une route doit être supprimée, le protocole EIGRP envoie une mise à jour ne concernant que ce réseau et non la table entière. Ces informations sont envoyées uniquement aux routeurs qui en ont besoin.</p> <p>Le protocole EIGRP utilise des mises à jour qui présentent les caractéristiques suivantes :</p> <ul><li> Elles ne sont pas régulières car elles ne sont pas envoyées périodiquement.</li> <li> Des mises à jour partielles sont envoyées uniquement en cas de modification topologique influençant les informations de routage. </li> <li> Elles sont limitées, ce qui signifie que la propagation des mises à jour partielles est automatiquement limitée de sorte que seuls les routeurs ayant besoin de ces informations sont mis à jour.</li></ul> <p><b> Remarque : </b>pour plus d’informations sur le fonctionnement du protocole EIGRP, consultez le chapitre 9.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904030300">
<title><content-text>Mises à jour déclenchées</content-text></title>
<page type="OneColumn" id="tl0904030301">
<content-media type="AnimationPartialScreen" id="cm7549282981"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030300/tl0904030301/cm7549282981.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030300/tl0904030301/cm7549282981text.xml"/></content-media>
<content-text><p>Pour accélérer la convergence en cas de modification de la topologie, le protocole RIP utilise des mises à jour déclenchées. Une mise à jour déclenchée est une mise à jour de la table de routage qui est envoyée immédiatement en réponse à la modification d’un routage. Les mises à jour déclenchées n’attendent pas l’expiration des minuteurs. Le routeur qui détecte la modification envoie immédiatement un message de mise à jour aux routeurs adjacents. Les routeurs qui reçoivent cette information génèrent à leur tour des mises à jour déclenchées pour informer leurs voisins de la modification. </p> <p>Des mises à jour déclenchées sont envoyées lorsque l’un des événements suivants se produit :</p> <ul><li> Une interface change d’état (activée ou désactivée)</li> <li> Une route passe à l’état « inaccessible » (ou sort de cet état)</li> <li> Une route est installée dans la table de routage</li></ul> <p>Pour pouvoir utiliser uniquement des mises à jour déclenchées, il faudrait avoir la certitude que la vague de mises à jour atteigne immédiatement chaque routeur approprié. Toutefois, deux problèmes sont associés aux mises à jour déclenchées :</p> <ul><li> Les paquets contenant le message de mise à jour peuvent être abandonnés ou endommagés par une liaison dans le réseau.</li> <li> Les mises à jour déclenchées ne se produisent pas instantanément. Il est possible qu’un routeur qui n’a pas encore reçu la mise à jour déclenchée émette une mise à jour régulière au mauvais moment, provoquant ainsi la réinsertion de la route incorrecte dans un voisin ayant déjà reçu la mise à jour déclenchée.</li></ul> <p><b>Lancez l’animation pour observer comment une modification de la topologie du réseau est propagée à l’ensemble du réseau.</b> Lorsque le réseau 10.4.0.0 n’est plus disponible et que le routeur 3 en prend connaissance, il envoie les informations à ses voisins. Cette information est ensuite propagée sur l’ensemble du réseau.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904030400">
<title><content-text>Gigue aléatoire</content-text></title>
<page type="OneColumn" id="tl0904030401">
<content-media type="AnimationPartialScreen" id="cm7343288441"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030400/tl0904030401/cm7343288441.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030400/tl0904030401/cm7343288441text.xml"/></content-media>
<content-text><p><b>Problèmes liés aux mises à jour synchronisées</b></p> <p>Lorsque plusieurs routeurs transmettent simultanément des mises à jour de routage sur des segments LAN à accès multiples (comme illustré dans l’animation), les paquets de mise à jour peuvent entrer en collision et causer des délais ou consommer trop de bande passante. </p> <p><b>Remarque</b> : les collisions ne constituent un problème que pour les concentrateurs, pas pour les commutateurs.</p> <p>L’envoi simultané de plusieurs mises à jour est appelé synchronisation des mises à jour. La synchronisation peut devenir un problème avec les protocoles de routage à vecteur de distance qui font appel à des mises à jour régulières. Au fur et à mesure que les minuteurs des routeurs se synchronisent, les collisions de mises à jour et les délais augmentent dans le réseau. Au début, les mises à jour des routeurs ne seront pas synchronisées. Mais avec le temps, les minuteurs d’un réseau se synchronisent globalement.</p> <p><b>Solution</b></p> <p>Pour empêcher la synchronisation des mises à jour entre routeurs, le système IOS de Cisco utilise une variable aléatoire appelée RIP_JITTER qui soustrait un délai variable à l’intervalle de mise à jour pour chaque routeur dans le réseau. Cette gigue aléatoire, ou durée variable, correspond à une valeur comprise entre 0 % et 15 % de l’intervalle de mise à jour spécifié. Ainsi, l’intervalle de mise à jour varie aléatoirement de 25 à 30 secondes pour l’intervalle par défaut de 30 secondes.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904040000">
<title><content-text>Boucles de routage</content-text></title>
<topic type="" id="tl0904040100">
<title><content-text>Définition et implications</content-text></title>
<page type="OneColumn" id="tl0904040101">
<content-media type="AnimationPartialScreen" id="cm7226242261"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040100/tl0904040101/cm7226242261.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040100/tl0904040101/cm7226242261text.xml"/></content-media>
<content-text><p><b>Qu’est-ce qu’une boucle de routage ?</b></p> <p>Une boucle de routage est une condition dans laquelle un paquet est transmis en continu entre une série de routeurs sans jamais atteindre le réseau de destination souhaité. Une boucle de routage peut se produire lorsque deux routeurs ou plus possèdent des informations de routage qui indiquent, à tort, qu’il existe un chemin valide vers une destination inaccessible.</p> <p>Une boucle de routage peut être provoquée par les éléments suivants :</p> <p> </p> <ul><li> Routes statiques configurées incorrectement</li> <li> <content-link target="cg6329240526" type="glossary">Redistribution</content-link> de routes configurées incorrectement (la redistribution, c.-à-d. le processus de transmission des informations de routage d’un protocole de routage à un autre, est traitée dans les cours de niveau CCNP)</li> <li> Tables de routage incohérentes qui ne sont pas mises à jour en raison d’une convergence lente dans un réseau changeant</li> <li> Routes de suppression configurées ou installées incorrectement </li></ul> <p>Les protocoles de routage à vecteur de distance sont d’un fonctionnement simple. Cette simplicité se traduit par des inconvénients, comme les boucles de routage. Les boucles de routage sont moins susceptibles de se produire avec les protocoles de routage à état de liens, mais elles peuvent néanmoins survenir dans certaines circonstances.</p> <p><b> Remarque : </b>le protocole IP utilise son propre mécanisme pour empêcher la transmission sans fin d’un paquet sur le réseau. Le protocole IP possède un champ de durée de vie (TTL) dont la valeur est diminuée de 1 à chaque routeur. Si la valeur de la durée de vie est zéro, le routeur supprime le paquet.</p> <p><b>Quelles sont les implications des boucles de routage ?</b></p> <p>Une boucle de routage peut avoir des effets dévastateurs sur un réseau, notamment la réduction des performances réseau, voire une panne du réseau. </p> <p>Une boucle de routage peut créer les conditions suivantes :</p> <p> </p> <ul><li> La bande passante de la liaison est utilisée pour faire tourner le trafic en boucle entre les routeurs dans une boucle.</li> <li> Le processeur d’un routeur est fortement sollicité en raison des paquets tournant en boucle.</li> <li> Le processeur d’un routeur est surchargé en raison du réacheminement inutile de paquets, ce qui a un impact négatif sur la convergence du réseau.</li> <li> Les mises à jour de routage peuvent se perdre ou ne pas être traitées en temps voulu. Ces conditions introduisent des boucles de routage supplémentaires qui aggravent davantage la situation.</li> <li> Les paquets peuvent se perdre dans des « trous noirs ».</li></ul> <p>Lancez l’animation pour observer un scénario de boucle de routage possible dans lequel aucun mécanisme ne permet d’éviter de telles boucles.</p> <p>Comme vous pouvez le voir, les boucles de routage consomment de la bande passante mais aussi des ressources du routeur, entraînant un réseau lent voire sans réponse.</p> <p>Plusieurs mécanismes, principalement associés aux protocoles de routage à vecteur de distance, sont disponibles pour éliminer les boucles de routage. Ces mécanismes incluent les éléments suivants : </p> <ul><li> Définition d’une métrique maximale pour éviter le <content-link target="cg9223787049" type="glossary">comptage à l’infini</content-link></li> <li> Minuteurs de mise hors service</li> <li> Découpage d’horizon</li> <li> <content-link target="cg5926288786" type="glossary">Empoisonnement de routage</content-link> ou <content-link target="cg8124883934" type="glossary">antipoison</content-link></li> <li> Mises à jour déclenchées</li></ul> <p>Les mises à jour déclenchées ont été abordées dans la section précédente. Les autres mécanismes permettant d’éviter les boucles sont étudiés plus loin dans ce chapitre.</p></content-text>
</page>
<page type="OneColumn" id="tl0904040102">
<content-media type="ActivityPKA" id="cm1797405272"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040100/tl0904040102/cm1797405272/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0904000000/tl0904040000/tl0904040100/tl0904040102/cm1797405272/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour découvrir comment une boucle de routage peut se produire avec des routes statiques configurées incorrectement.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0904040200">
<title><content-text>Problème : Comptage à l’infini</content-text></title>
<page type="OneColumn" id="tl0904040201">
<content-media type="AnimationPartialScreen" id="cm4594421111"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040200/tl0904040201/cm4594421111.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040200/tl0904040201/cm4594421111text.xml"/></content-media>
<content-text><p><b>Le comptage à l’infini est une situation qui se produit lorsque des mises à jour de routage inexactes augmentent la valeur de la métrique jusqu’à l’infini pour un réseau qui n’est plus accessible.</b> L’animation illustre comment les tables de routage sont modifiées lorsque les trois routeurs continuent à s’envoyer des mises à jour inexactes.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040300">
<title><content-text>Définition d’une valeur maximale</content-text></title>
<page type="OneColumn" id="tl0904040301">
<content-media type="StaticGraphic" id="cm4704444237"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040300/tl0904040301/cm4704444237.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040300/tl0904040301/cm4704444237text.xml"/></content-media>
<content-text><p>Pour arrêter l’incrémentation d’une métrique, l’<b>« infini » est défini par l’attribution d’une valeur maximale à la métrique</b>. Par exemple, le protocole RIP considère que 16 sauts représentent l’infini, ce qui correspond à une métrique inaccessible. Une fois que les routeurs ont « compté jusqu’à l’infini », ils marquent la route comme étant inaccessible.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040400">
<title><content-text>Prévention des boucles de routage à l’aide de minuteurs de mise hors service</content-text></title>
<page type="OneColumn" id="tl0904040401">
<content-media type="AnimationPartialScreen" id="cm4646952885"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040400/tl0904040401/cm4646952885.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040400/tl0904040401/cm4646952885text.xml"/></content-media>
<content-text><p>Vous savez déjà que les protocoles à vecteur de distance utilisent des mises à jour déclenchées pour accélérer le processus de convergence. N’oubliez pas qu’outre les mises à jour déclenchées, les protocoles de routage à vecteur de distance envoient également des mises à jour régulières. Prenons l’exemple d’un réseau instable. L’interface s’active <b>(up)</b>, se désactive <b>(down)</b>, puis se réactive <b>(up)</b> successivement de manière rapide. La route est en battement. Des mises à jour déclenchées risquent de provoquer la réaction trop rapide des routeurs qui sans le vouloir vont créer une boucle de routage. Une boucle de routage peut également être créée par une mise à jour régulière envoyée par les routeurs durant la période d’instabilité. Les minuteurs de mise hors service empêchent la création de boucles de routage dans ces situations. Les minuteurs de mise hors service contribuent aussi à empêcher la condition de comptage à l’infini.</p> <p><b>Ils empêchent les messages de mises à jour régulières de rétablir de façon inappropriée une route qui se serait dégradée.</b> Les minuteurs de mise hors service exigent des routeurs la suspension, pendant une durée spécifiée, de toute modification pouvant affecter les routes. Si une route est identifiée comme étant désactivée <b>(down)</b> ou susceptible de l’être, toute autre information concernant cette route ayant le même statut (ou un statut encore pire) est ignorée pendant une durée prédéterminée (la période de mise hors service). Cela signifie que les routeurs laisseront une route marquée comme <i>inaccessible</i> dans cet état pendant une période suffisamment longue pour permettre aux mises à jour de propager les toutes dernières informations aux tables de routage</p> <p><b>Les minuteurs de mise hors service fonctionnent comme suit :</b></p> <p>1. Un routeur reçoit une mise à jour d’un voisin lui indiquant qu’un réseau auparavant accessible est devenu inaccessible.</p> <p>2. Le routeur marque la route comme étant éventuellement inactive et démarre le minuteur de mise hors service.</p> <p>3. Si une mise à jour avec une métrique inférieure pour ce réseau est reçue d’un routeur voisin au cours de la période de mise hors service, le réseau est rétabli et le minuteur de mise hors service est supprimé.</p> <p>4. Si une mise à jour d’un autre voisin est reçue au cours de la période de mise hors service avec une métrique identique ou supérieure pour ce réseau, cette mise à jour est ignorée. Par conséquent, davantage de temps est alloué à la propagation des informations sur la modification.</p> <p>5. Les routeurs continuent d’acheminer les paquets aux réseaux de destination qui sont marqués comme étant éventuellement inactifs. Le routeur peut ainsi résoudre tout problème lié à une connectivité intermittente. Si le réseau de destination est réellement indisponible et que les paquets sont transférés, un routage de type trou noir est créé et dure jusqu’à l’expiration du minuteur de mise hors service. </p> <p><b>Lancez l’animation qui illustre un exemple de processus de mise hors service.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0904040500">
<title><content-text>Règle de découpage d’horizon</content-text></title>
<page type="OneColumn" id="tl0904040501">
<content-media type="AnimationPartialScreen" id="cm6472667750"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040500/tl0904040501/cm6472667750.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040500/tl0904040501/cm6472667750text.xml"/></content-media>
<content-text><p>Le découpage d’horizon est une autre méthode qui permet d’empêcher les boucles de routage provoquées par la convergence lente d’un protocole de routage à vecteur de distance. <b>Selon la règle de découpage d’horizon, un routeur ne doit pas annoncer de réseau par le biais de l’interface dont est issue la mise à jour.</b> </p> <p>L’application du découpage d’horizon à la route 10.4.0.0 de l’exemple précédent génère les actions suivantes :</p> <ul><li> R3 annonce le réseau 10.4.0.0 à R2.</li> <li> R2 reçoit l’information et met à jour sa table de routage.</li> <li> R2 annonce ensuite le réseau 10.4.0.0 à R1 via S0/0/0. R2 n’annonce pas 10.4.0.0 à R3 via S0/0/1 car la route provient de cette interface</li> <li> R1 reçoit l’information et met à jour sa table de routage.</li> <li> En raison du découpage d’horizon, R1 n’annonce pas non plus les informations sur le réseau 10.4.0.0 à R2.</li></ul> <p>Des mises à jour de routage complètes sont échangées, à l’exception des routes qui transgressent la règle de découpage d’horizon. Le résultat ressemble à ceci :</p> <ul><li> R2 annonce les réseaux 10.3.0.0 et 10.4.0.0 à R1.</li> <li> R2 annonce les réseaux 10.1.0.0 et 10.2.0.0 à R3.</li> <li> R1 annonce le réseau 10.1.0.0 à R2.</li> <li> R3 annonce le réseau 10.4.0.0 à R2.</li></ul> <p><b>Lancez l’animation pour observer ce processus.</b></p> <p>Notez que R2 envoie des mises à jour de routage différentes à R1 et R3.</p> <p><b>Remarque :</b> le découpage d’horizon peut être désactivé par un administrateur. Dans certains cas, cette opération est nécessaire pour garantir un routage correct. Ces cas seront étudiés dans les cours suivants.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040600">
<title><content-text>Découpage d’horizon avec empoisonnement inverse et empoisonnement de route</content-text></title>
<page type="OneColumn" id="tl0904040601">
<content-media type="AnimationPartialScreen" id="cm4645000737"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040600/tl0904040601/cm4645000737.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040600/tl0904040601/cm4645000737text.xml"/></content-media>
<content-text><p><b>Empoisonnement de routage </b></p> <p>L’empoisonnement de routage est une autre méthode employée par les protocoles de routage à vecteur de distance pour éviter les boucles de routage. <b>Il est utilisé pour marquer la route comme étant inaccessible dans une mise à jour de routage qui est envoyée à d’autres routeurs. </b>Inaccessible doit être interprété comme une métrique définie à sa valeur maximale. Pour le protocole RIP, une route empoisonnée a une métrique de 16.</p> <p><b>Lancez l’animation pour observer comment fonctionne l’empoisonnement de routage. </b></p> <p> </p> <p>Le processus suivant se produit :</p> <ul><li> Le réseau 10.4.0.0 devient indisponible en raison d’une défaillance de liaison. </li> <li> R3 empoisonne la métrique avec la valeur 16, puis envoie une <content-link target="cg7301905064" type="glossary">mise à jour déclenchée</content-link> indiquant que le réseau 10.4.0.0 n’est pas disponible.</li> <li> R2 traite cette mise à jour. Étant donné que la métrique est de 16, R2 annule l’entrée de routage dans sa table de routage. </li> <li> R2 envoie ensuite la mise à jour d’empoisonnement à R1, indiquant que la route n’est pas disponible, en attribuant à la métrique la valeur 16.  </li> <li> R1 traite la mise à jour et invalide l’entrée de routage pour 10.4.0.0 dans sa table de routage.</li></ul> <p>L’empoisonnement de routage accélère le processus de convergence car les informations sur 10.4.0.0 circulent dans le réseau en un temps inférieur à celui nécessaire pour que le nombre de sauts arrive à l’infini.</p></content-text>
</page>
<page type="OneColumn" id="tl0904040602">
<content-media type="AnimationPartialScreen" id="cm5691241443"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040600/tl0904040602/cm5691241443.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040600/tl0904040602/cm5691241443text.xml"/></content-media>
<content-text><p><b>Découpage d’horizon avec antipoison</b></p> <p>La technique de l’antipoison peut être associée à celle du découpage d’horizon. Cette méthode est appelée le découpage d’horizon avec empoisonnement inverse. <b>Selon la règle de découpage d’horizon avec antipoison, lors de l’envoi de mises à jour via une interface spécifique, tout réseau dont l’existence a été apprise sur cette interface est désigné comme étant inaccessible.</b></p> <p>Le découpage d’horizon avec antipoison part du principe qu’il vaut mieux indiquer explicitement à un routeur d’ignorer une route que de lui cacher l’existence de la route.</p> <p><b>Lancez l’animation pour observer un exemple de découpage d’horizon avec antipoison.</b></p> <p>Le processus suivant se produit :</p> <ul><li> Le réseau 10.4.0.0 devient indisponible en raison d’une défaillance de liaison. </li> <li> R3 empoisonne la métrique avec la valeur 16, puis envoie une mise à jour déclenchée indiquant que le réseau 10.4.0.0 n’est pas disponible. </li> <li> R2 traite cette mise à jour, invalide l’entrée de routage dans sa table de routage, puis envoie immédiatement un antipoison à R3. </li></ul> <p>L’antipoison est une action spécifique qui annule le découpage d’horizon. Elle permet de garantir que R3 n’est pas susceptible de recevoir des mises à jour incorrectes relatives au réseau 10.4.0.0. </p> <p><b>Remarque</b> : le découpage d’horizon est activé par défaut. Toutefois, il est possible que le découpage d’horizon avec antipoison ne soit pas la valeur par défaut dans toutes les implémentations d’IOS.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040700">
<title><content-text>Protocole IP et Durée de vie (TTL)</content-text></title>
<page type="OneColumn" id="tl0904040701">
<content-media type="AnimationPartialScreen" id="cm6043053576"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040700/tl0904040701/cm6043053576.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040700/tl0904040701/cm6043053576text.xml"/></content-media>
<content-text><p><b>Durée de vie est un champ de 8 bits dans l’en-tête IP qui limite le nombre de sauts qu’un paquet peut effectuer à travers le réseau avant d’être supprimé. </b>Le champ TTL a pour objectif d’éviter la circulation sans fin sur le réseau d’un paquet impossible à remettre. Sa valeur est définie par le périphérique source du paquet. Cette valeur est réduite de 1 par chaque routeur présent sur la route vers sa destination. Si la valeur du champ TTL atteint zéro avant que le paquet n’arrive à sa destination, ce dernier est supprimé et le routeur renvoie un message d’erreur ICMP (Internet Control Message Protocol) à la source du paquet IP. </p> <p>L’animation indique que même en présence d’une boucle de routage, les paquets ne circuleront pas dans une boucle sans fin sur le réseau. La valeur du champ TTL finira par atteindre 0 et le paquet sera alors supprimé par le routeur.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904050000">
<title><content-text>Protocoles de routage à vecteur de distance actuels</content-text></title>
<topic type="" id="tl0904050100">
<title><content-text>Protocoles RIP et EIGRP</content-text></title>
<page type="OneColumn" id="tl0904050101">
<content-media type="ActivityDnDCheckReset" id="cm2106242849"><title><content-text></content-text></title><media ref="tl0904000000/tl0904050000/tl0904050100/tl0904050101/cm2106242849.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904050000/tl0904050100/tl0904050101/cm2106242849text.xml"/></content-media>
<content-text><p>Pour les protocoles de routage à vecteur de distance, le choix se limite à RIP ou EIGRP. Le choix du protocole à utiliser dans une situation donnée varie en fonction d’un certain nombre de facteurs, dont les suivants : </p> <ul><li> Taille du réseau</li> <li> Compatibilité entre les modèles de routeurs</li> <li> Connaissances administratives requises</li></ul> <p><b>RIP</b></p> <p>Au fil des ans, le protocole RIP est passé d’un protocole de routage par classe (RIPv1) à un protocole de routage sans classe (RIPv2). RIPv2 est un protocole de routage normalisé qui fonctionne dans un environnement de routeurs multifournisseurs. Les routeurs fabriqués par différentes sociétés peuvent communiquer via le protocole RIP. C’est l’un des protocoles de routage les plus faciles à configurer, ce qui en fait un bon choix pour les petits réseaux. Toutefois, RIPv2 présente encore quelques limites. RIPv1 et RIPv2 ont une métrique de route qui est basée uniquement sur le nombre de sauts et qui est limitée à 15 sauts.</p> <p>Caractéristiques de RIP</p> <ul><li> Prise en charge du découpage d’horizon et du découpage d’horizon avec antipoison pour éviter les boucles.</li> <li> Possibilité d’équilibrer la charge sur six chemins à coût égal au maximum. La valeur par défaut est quatre chemins à coût égal.</li></ul> <p>RIPv2 a apporté les améliorations suivantes à RIPv1 :</p> <ul><li> Inclusion du masque de sous-réseau dans les mises à jour de routage, ce qui en fait un protocole de routage sans classe.</li> <li> Mécanisme d’authentification visant à sécuriser les mises à jour des tables de routage.</li> <li> Prise en charge des masques de sous-réseau de longueur variable (VLSM).</li> <li> Utilisation d’adresses de multidiffusion au lieu d’adresses de diffusion.</li> <li> Prise en charge du résumé de routes manuel.</li></ul> <p><b>EIGRP</b></p> <p>Le protocole EIGRP (Enhanced IGRP) a été développé sur la base du protocole IGRP, un autre protocole à vecteur de distance. EIGRP est un protocole de routage à vecteur de distance sans classe dont les fonctionnalités sont similaires à celles des protocoles de routage à état de liens. Toutefois, contrairement à RIP ou OSPF, EIGRP est un protocole propriétaire développé par Cisco qui s’exécute uniquement sur les routeurs Cisco.</p> <p>Les caractéristiques du protocole EIGRP sont les suivantes :</p> <ul><li> Mises à jour déclenchées (EIGRP n’a pas de mises à jour régulières).</li> <li> Utilisation d’une <content-link target="cg4943667766" type="glossary">table topologique</content-link> pour maintenir toutes les routes reçues des voisins (pas seulement les meilleurs chemins).</li> <li> Établissement de contiguïtés avec des routeurs voisins par le biais du protocole Hello EIGRP.</li> <li> Prise en charge des masques de sous-réseau de longueur variable et du résumé de routes manuel, permettant ainsi au protocole EIGRP de créer des grands réseaux structurés hiérarchiquement.</li></ul> <p>Avantages du protocole EIGRP :</p> <ul><li> Bien que les routes soient propagées selon un vecteur de distance, la métrique est plutôt basée sur la bande passante minimale et le délai global du chemin que sur le nombre de sauts.</li> <li> Il offre une convergence rapide grâce au calcul des routes avec l’algorithme DUAL (Diffusing Update Algorithm). DUAL permet d’insérer des routes de secours dans la table topologique EIGRP, lesquelles sont utilisées en cas de défaillance de la route principale. Étant donné qu’il s’agit d&apos;une procédure locale, le passage à la route de secours est immédiat et n’implique pas d’action au niveau des autres routeurs.</li> <li> Grâce aux mises à jour limitées, le protocole EIGRP utilise moins de bande passante, surtout dans les grands réseaux avec de nombreuses routes. </li> <li> Le protocole EIGRP prend en charge plusieurs protocoles de couche réseau via des modules dépendant des protocoles qui incluent la prise en charge des protocoles IP, IPX et AppleTalk.</li></ul></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904060000">
<title><content-text>Travaux pratiques</content-text></title>
<topic type="" id="tl0904060100">
<title><content-text>Travaux pratiques</content-text></title>
<page type="OneColumn" id="tl0904060101">
<content-media type="ActivityLab" id="cm5872906315"><title><content-text></content-text></title><media ref="tl0904000000/tl0904060000/tl0904060100/tl0904060101/cm5872906315/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0904000000/tl0904060000/tl0904060100/tl0904060101/cm5872906315/icontext.xml"/></content-media>
<content-text><p>Dans ces travaux pratiques, vous allez recréer un réseau en vous basant uniquement sur les sorties de la commande <span class="cmd"><b>show ip route</b></span>. Puis, pour vérifier votre réponse, vous configurerez les routeurs et comparerez la table de routage actuelle à la table de routage contenue dans la documentation des travaux pratiques.</p><p><b>Si vous souhaitez des précisions, cliquez sur l’icône des travaux pratiques.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0904070000">
<title><content-text>Résumé</content-text></title>
<topic type="" id="tl0904070100">
<title><content-text>Résumé et révision</content-text></title>
<page type="OneColumn" id="tl0904070101">
<content-media type="ChapterSummary" id="cm4424452996"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070101/cm4424452996.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904070000/tl0904070100/tl0904070101/cm4424452996text.xml"/></content-media>
<content-text><p><b>Résumé</b></p> <p>La classification des protocoles de routage peut s’effectuer selon le type d’algorithme qu’ils utilisent pour déterminer le meilleur chemin vers un réseau de destination. Ils peuvent également être classés en tant que protocoles à vecteur de distance, à état de liens et à vecteur de chemin. Vecteur de distance signifie que les routes sont annoncées sous la forme de vecteurs de distance et de direction. La distance est définie en termes de métrique, comme le nombre de sauts, et la direction est simplement le routeur de tronçon suivant ou l’interface de sortie. </p> <p>Parmi les protocoles de routage à vecteur de distance, on compte :</p> <ul><li> RIPv1</li> <li> RIPv2</li> <li> IGRP</li> <li> EIGRP</li> </ul> <p>Les routeurs qui utilisent des protocoles de routage à vecteur de distance déterminent le meilleur chemin vers les réseaux de destination sur la base des informations qu’ils ont apprises de leurs voisins. Si le routeur X découvre deux chemins vers le même réseau, un via le routeur Y à 7 sauts et l’autre via le routeur Z à 10 sauts, il choisira le chemin le plus court et utilisera le routeur Y comme routeur de tronçon suivant. Le routeur X ne sait pas du tout comment se présente le réseau au-delà des routeurs Y et Z et il ne peut choisir son meilleur chemin qu’en fonction des informations qui lui sont envoyées par ces deux routeurs. Contrairement aux protocoles de routage à état de liens, les protocoles de routage à vecteur de distance ne disposent pas d’une carte de la topologie du réseau.</p> <p>La détection de réseaux est un processus important pour tout protocole de routage. Certains protocoles de routage à vecteur de distance comme RIP suivent étape par étape un processus qui leur permet d’apprendre et de partager des informations de routage avec leurs voisins. Au fur et à mesure que des routes sont indiquées par un voisin, ces informations sont transmises à d’autres voisins avec une augmentation de la métrique de routage.</p> <p>Les protocoles de routage doivent également gérer leurs tables de routage pour en assurer la précision et la mise à jour. Le protocole RIP échange des informations de table de routage avec ses voisins toutes les 30 secondes. EIGRP, un autre protocole de routage à vecteur de distance, n’envoie pas ces mises à jour régulières, mais uniquement une mise à jour limitée aux routeurs qui ont besoin de cette information, lorsque la topologie est modifiée. Le protocole EIGRP est abordé dans un chapitre ultérieur.</p> <p>Le protocole RIP utilise aussi des minuteurs pour déterminer si un routeur voisin n’est plus disponible ou si une partie des routeurs ne dispose peut-être pas d’informations de routage à jour. Ceci est généralement dû au fait que le réseau n’a pas encore convergé en raison d’une récente modification de la topologie. Les protocoles de routage à vecteur de distance utilisent également des mises à jour déclenchées pour réduire le temps de convergence.</p> <p>L’un des inconvénients des protocoles de routage à vecteur de distance est le risque de boucles de routage. Celles-ci peuvent se produire lorsque le réseau se trouve dans un état de non-convergence. Les protocoles de routage à vecteur de distance utilisent des minuteurs de mise hors service pour empêcher le routeur d’utiliser une autre route vers un réseau qui vient d’être désactivé jusqu&apos;à ce que tous les routeurs aient eu suffisamment de temps pour apprendre que la topologie a changé. </p> <p>Le découpage d’horizon et le découpage d’horizon avec antipoison sont également utilisés par les routeurs pour empêcher les boucles de routage. La règle de découpage d’horizon stipule qu’un routeur ne doit jamais annoncer une route via l’interface qui lui a communiqué l’existence de cette route. Le découpage d’horizon avec antipoison part du principe qu’il vaut mieux indiquer explicitement que ce routeur ne possède pas de route à ce réseau en empoisonnant la route avec une métrique indiquant que la route est inaccessible.</p> <p>Les protocoles de routage à vecteur de distance sont parfois qualifiés de « routage par rumeur », bien que ce nom soit quelque peu inapproprié. Les protocoles de routage à vecteur de distance sont très populaires auprès de nombreux administrateurs réseau car ils sont faciles à comprendre et à implémenter. Cela ne signifie pas pour autant que les protocoles de routage à état de liens sont plus compliqués ou difficiles à configurer. Malheureusement, les protocoles de routage à état de liens ont acquis cette réputation non fondée. Nous verrons dans les chapitres suivants que ces protocoles sont aussi faciles à comprendre et à utiliser que les protocoles de routage à vecteur de distance.</p></content-text>
</page>
<page type="FullScreen" id="tl0904070102">
<content-media type="ChapterSummary" id="cm9797318836"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070102/cm9797318836.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904070000/tl0904070100/tl0904070102/cm9797318836text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="tl0904070103">
<content-media type="ActivityPKA" id="cm9101922813"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070103/cm9101922813/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0904000000/tl0904070000/tl0904070100/tl0904070103/cm9101922813/icontext.xml"/></content-media>
<content-text><p>L’exercice d’intégration des compétences Packet Tracer de ce chapitre ressemble beaucoup à celui que vous avez effectué en fin de chapitre 3. Le scénario est légèrement différent et vous permet de mieux mettre à profit vos compétences. Dans cet exercice, vous créez un réseau entièrement nouveau. Avec comme point de départ un espace d’adressage et des configurations réseau, vous devez implémenter un modèle de réseau répondant aux spécifications. Il vous faut ensuite implémenter une configuration de routage statique efficace.</p> <p><content-link target="E2_PTAct_4_7_1_Directions.pdf" type="internalfile">Instructions d’intégration des compétences Packet Tracer (PDF)</content-link></p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0904070104">
<content-media type="ChapterSummary" id="cm4803813685"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070104/cm4803813685.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904070000/tl0904070100/tl0904070104/cm4803813685text.xml"/></content-media>
<content-text><p><b>Autres sources d’informations</b></p> <p>L’algorithme de vecteur de distance n’est pas difficile à comprendre. De nombreux ouvrages et sources en ligne expliquent comment des algorithmes comme l’algorithme Bellman-Ford sont utilisés dans les réseaux. Plusieurs sites Web expliquent le fonctionnement de ces algorithmes. Prenez connaissance de ces ressources et familiarisez-vous avec le mode de fonctionnement de cet algorithme.</p> <p>Voici quelques suggestions de lecture (en anglais) :</p> <ul><li> <i>Interconnections, Bridges, Routers, Switches, and Internetworking Protocols</i>, de Radia Perlman</li> <li> <i>Cisco IP Routing</i>, d’Alex Zinin</li> <li> <i>Routing the Internet</i>, de Christian Huitema</li></ul></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0904080000">
<title><content-text>Questionnaire</content-text></title>
<topic type="" id="tl0904080100">
<title><content-text>Questionnaire du chapitre</content-text></title>
<page type="FullScreen" id="tl0904080101">
<content-media type="ChapterQuiz" id="cm6089441792"><title><content-text></content-text></title><media ref="tl0904000000/tl0904080000/tl0904080100/tl0904080101/cm6089441792/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl0904000000/tl0904080000/tl0904080100/tl0904080101/cm6089441792/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>
