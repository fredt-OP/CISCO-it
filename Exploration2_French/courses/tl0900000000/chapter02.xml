<chapter type="" id="tl0902000000">
<title><content-text>Routage statique</content-text></title>
<section type="ChapterIntroduction" id="tl0902000000">
<title><content-text>Présentation du chapitre</content-text></title>
<topic type="" id="tl0902000100">
<title><content-text>Présentation du chapitre</content-text></title>
<page type="OneColumn" id="tl0902000101">
<content-media type="StaticGraphic" id="cm1838215924"><title><content-text></content-text></title><media ref="tl0902000000/tl0902000000/tl0902000100/tl0902000101/cm1838215924.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902000000/tl0902000100/tl0902000101/cm1838215924text.xml"/></content-media>
<content-text><p><b>Présentation du chapitre</b></p> <p>Au cœur de tous les réseaux de données, le routage fait passer les informations de la source à la destination dans le cadre d’un interréseau. Les routeurs sont les périphériques qui assurent le transfert de paquets d’un réseau vers le réseau suivant.</p> <p>Comme nous l’avons vu dans le chapitre précédent, les routeurs obtiennent des informations sur les réseaux distants, soit de manière dynamique par le biais de protocoles de routage, soit de manière manuelle par le biais de routes statiques. Dans de nombreux cas, les routeurs utilisent une combinaison de protocoles de routage dynamique et de routes statiques. Ce chapitre porte sur le routage statique.</p> <p>Les routes statiques sont très courantes et ne nécessitent pas le même niveau de traitement et de charge que les protocoles de routage dynamique.</p> <p>Dans ce chapitre, nous allons suivre un exemple de topologie pour configurer des routes statiques et apprendre des techniques de dépannage. Au cours du processus, nous allons examiner plusieurs commandes IOS essentielles et leurs résultats. Nous allons également passer en revue la table de routage à l’aide de réseaux connectés directement et de routes statiques.</p> <p>Au cours des exercices Packet Tracer associés aux commandes, prenez le temps de vous familiariser avec ces commandes et d’en examiner les résultats. La lecture des tables de routage deviendra bientôt une seconde nature.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902010000">
<title><content-text>Routeurs et réseau</content-text></title>
<topic type="" id="tl0902010100">
<title><content-text>Rôle du routeur</content-text></title>
<page type="OneColumn" id="tl0902010101">
<content-media type="StaticGraphic" id="cm5752858752"><title><content-text></content-text></title><media ref="tl0902000000/tl0902010000/tl0902010100/tl0902010101/cm5752858752.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902010000/tl0902010100/tl0902010101/cm5752858752text.xml"/></content-media>
<content-text><p><b>Rôle du routeur</b></p> <p>Le routeur est un ordinateur spécialisé qui joue un rôle clé dans le fonctionnement d’un réseau de données. Les routeurs assurent principalement l’interconnexion des réseaux en :</p> <ul><li> déterminant le meilleur chemin pour l’envoi des paquets ; </li> <li> transférant les paquets vers leur destination.</li></ul> <p>Les routeurs transfèrent les paquets en obtenant des informations sur les réseaux distants et en gérant les informations de routage. Le routeur est la jonction, ou intersection, qui relie plusieurs réseaux IP. La décision principale de transfert des routeurs est basée sur les informations de couche 3, l’adresse IP de destination. </p> <p>La table de routage du routeur permet de trouver la meilleure correspondance entre l’IP de destination d’un paquet et une adresse réseau dans la table de routage. Au final, la table de routage détermine l’interface de sortie pour transférer le paquet et le routeur encapsule ce paquet dans la trame liaison de données appropriée pour cette interface sortante.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902010200">
<title><content-text>Présentation de la topologie</content-text></title>
<page type="OneColumn" id="tl0902010201">
<content-media type="StaticGraphic" id="cm8855462765"><title><content-text></content-text></title><media ref="tl0902000000/tl0902010000/tl0902010200/tl0902010201/cm8855462765.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902010000/tl0902010200/tl0902010201/cm8855462765text.xml"/></content-media>
<content-text><p><b>Présentation de la topologie</b></p> <p>La figure montre la topologie utilisée dans ce chapitre. La topologie est composée de trois routeurs, appelés R1, R2 et R3. Les routeurs R1 et R2 sont connectés par une liaison de réseau étendu et les routeurs R2 et R3 sont connectés par une autre liaison de réseau étendu. Chaque routeur est connecté à un réseau local Ethernet différent, représenté par un commutateur et un PC.</p> <p>Dans cet exemple, chaque routeur est un routeur Cisco 1841 qui possède les interfaces suivantes :</p> <ul><li>Deux interfaces FastEthernet : FastEthernet 0/0 et FastEthernet 0/1</li> <li> Deux interfaces série : Serial 0/0/0 et Serial 0/0/1</li></ul> <p>Les interfaces de vos routeurs peuvent être différentes de celles du modèle 1841, mais vous devriez pouvoir suivre les commandes de ce chapitre (avec quelques petites modifications) et effectuer les travaux pratiques. Les exercices Packet Tracer sont également disponibles tout au long de la discussion sur le routage statique, pour vous permettre de vous entraîner aux compétences telles qu’elles sont présentées. Les travaux pratiques 2.8.1, « Configuration de base d’une route statique », reflètent la topologie, les configurations et les commandes évoquées dans ce chapitre.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902010300">
<title><content-text>Examen des connexions du routeur</content-text></title>
<page type="OneColumn" id="tl0902010301">
<content-media type="InteractiveGraphicHotspots" id="cm1194388007"><title><content-text></content-text></title><media ref="tl0902000000/tl0902010000/tl0902010300/tl0902010301/cm1194388007.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902010000/tl0902010300/tl0902010301/cm1194388007text.xml"/></content-media>
<content-text><p><b>Connexions aux routeurs</b></p> <p>La connexion d’un routeur à un réseau nécessite qu’un connecteur d’interface du routeur soit associé à un connecteur de câble. Comme l’illustre la figure, les routeurs Cisco prennent en charge de nombreux types de connecteurs différents.</p> <p><b>Connecteurs série</b></p> <p><b>Cliquez sur 1 dans la figure.</b></p> <p>Pour les connexions WAN, les routeurs Cisco prennent en charge les normes EIA/TIA-232, EIA/TIA-449, V.35, X.21 et EIA/TIA-530 pour les connexions série, tel qu’illustré. Il n’est pas nécessaire de mémoriser ces types de connexions. Sachez seulement qu’un routeur dispose d’un port DB-60 capable de prendre en charge cinq normes de câblage différentes. Comme ce port prend en charge cinq types de câbles différents, il est parfois qualifié de port série cinq-en-un. L’autre extrémité du câble série est équipée d’un connecteur adapté à l’une des cinq normes possibles. </p> <p><b>Remarque</b> : la documentation du périphérique auquel vous souhaitez vous connecter doit indiquer la norme utilisée par ce périphérique. </p> <p><b>Cliquez sur 2 et 3 dans la figure.</b></p> <p>Les routeurs plus récents prennent en charge l’interface Smart Serial, qui permet de transférer davantage de données sur un nombre moins élevé de broches dans le câble. L’extrémité série du câble Smart Serial est un connecteur à 26 broches. Celui-ci est beaucoup plus petit que le connecteur DB-60, utilisé pour se connecter sur un port série cinq-en-un. Ces câbles de transition prennent en charge les cinq normes série précédemment citées et sont disponibles en configuration ETTD ou DCE.</p> <p><b>Remarque :</b> pour une explication complète des configurations ETTD et DCE, reportez-vous aux travaux pratiques 1.5.1, « Câblage d’un réseau et configuration des paramètres de base d’un routeur ». </p> <p>À votre niveau, ces désignations de câbles sont importantes uniquement pour configurer votre équipement de travaux pratiques afin de simuler un environnement « réel ». Dans un environnement de production, le type de câble est déterminé par le service de réseau étendu que vous utilisez.</p> <p><b>Connecteurs Ethernet</b></p> <p><b>Cliquez sur 4 dans la figure.</b></p> <p>Un connecteur différent est utilisé dans un environnement de réseau local Ethernet. Un connecteur RJ-45 pour le câble à paires torsadées non blindées (UTP) est le connecteur le plus couramment utilisé pour connecter les interfaces de réseau local. À chaque extrémité d’un câble RJ-45, vous devriez voir huit bandes colorées, ou broches. Un câble Ethernet utilise les broches 1, 2, 3 et 6 pour transférer et recevoir des données. </p> <p>Deux types de câbles peuvent être utilisés avec les interfaces de réseau local Ethernet :</p> <ul><li> un câble droit, ou de raccordement, avec les broches colorées dans le même ordre à chaque extrémité du câble ;</li> <li> un câble croisé, avec la broche 1 reliée à la broche 3 et la broche 2 reliée à la broche 6.</li></ul> <p>Les câbles droits sont utilisés pour les liaisons :</p> <ul><li> commutateur-routeur ;</li> <li> commutateur-PC ;</li> <li> concentrateur-PC ;</li> <li> concentrateur-serveur.</li></ul> <p>Les câbles croisés sont utilisés pour les liaisons :</p> <ul><li> commutateur-commutateur ; </li> <li> PC-PC ; </li> <li> commutateur-concentrateur ;</li> <li> concentrateur-concentrateur ;</li> <li> routeur-routeur ;</li> <li> routeur-serveur.</li></ul> <p><b>Remarque :</b> la connectivité sans fil fait l’objet d’un autre cours.</p></content-text>
</page>
<page type="OneColumn" id="tl0902010302">
<content-media type="ActivityPKA" id="cm8107970031"><title><content-text></content-text></title><media ref="tl0902000000/tl0902010000/tl0902010300/tl0902010302/cm8107970031/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902010000/tl0902010300/tl0902010302/cm8107970031/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour créer la topologie que vous allez utiliser tout au long de ce chapitre. Vous allez ajouter tous les périphériques nécessaires et les connecter avec le câblage adéquat.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902020000">
<title><content-text>Révision de la configuration des routeurs</content-text></title>
<topic type="" id="tl0902020100">
<title><content-text>Examen des interfaces de routeur</content-text></title>
<page type="OneColumn" id="tl0902020101">
<content-media type="InteractiveGraphicHotspots" id="cm5023387160"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020100/tl0902020101/cm5023387160.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020100/tl0902020101/cm5023387160text.xml"/></content-media>
<content-text><p><b>Examen des interfaces de routeur</b></p> <p>Comme nous l’avons vu dans le chapitre 1, la commande <span class="cmd">show ip route</span> est utilisée pour afficher la table de routage. Au départ, la table de routage est vide si aucune interface n’est configurée. </p> <p>Comme vous pouvez le voir dans la table de routage pour R1, aucune interface n’a été configurée avec une adresse IP et un masque de sous-réseau. </p> <p><b>Remarque :</b> les routes statiques et les routes dynamiques ne sont pas ajoutées à la table de routage tant que les interfaces locales adéquates, également connues sous le nom d’interfaces de sortie, ne sont pas configurées sur le routeur. Cette procédure est examinée plus en détail dans les prochains chapitres.</p>  <p><b>Interfaces et leur état</b></p> <p>L’état de chaque interface peut être examiné à l’aide de plusieurs commandes. </p> <p><b>Cliquez sur </b><span class="cmd"><b>show interfaces</b></span><b> dans la figure.</b></p>  <p>La commande <span class="cmd"><b>show interfaces</b></span> indique l’état et donne une description détaillée de toutes les interfaces présentes sur le routeur. Comme vous pouvez le constater, les résultats de la commande peuvent être assez longs. Pour visualiser les mêmes informations, mais pour une interface spécifique, comme FastEthernet 0/0, utilisez la commande <span class="cmd"><b>show interfaces</b></span> avec un paramètre qui précise l’interface. Exemple : </p> <span class="cmd"><p>R1#<b>show interfaces fastethernet 0/0</b></p></span> <span class="cmd"><p>FastEthernet0/0 is <span class="blue">administratively down, line protocol is down</span></p></span> <p>Notez que l’interface est désactivée sur le plan administratif (<b>administratively down</b>) et que le protocole de ligne est désactivé (<b>line protocol is down</b>). La désactivation sur le plan administratif signifie que l’interface est actuellement en mode hors fonction ou désactivée. La désactivation du protocole de ligne signifie, dans le cas présent, que l’interface ne reçoit pas de signal porteur provenant d’un commutateur ou du concentrateur. Cette situation peut également être due au fait que l’interface est en mode hors fonction.</p>  <p>Notez que la commande <span class="cmd"><b>show interfaces</b></span> n’affiche aucune adresse IP sur les interfaces de R1. Ceci est dû au fait que nous n’avons pas encore configuré d’adresse IP sur l’une des interfaces.</p>  <p><b>Commandes supplémentaires pour examiner l’état des interfaces</b></p>  <p><b>Cliquez sur </b><span class="cmd"><b>show ip interface brief</b></span> <b>dans la figure.</b></p> <p></p> <p>La commande <span class="cmd"><b>show ip interface brief</b></span> peut être utilisée pour afficher une partie des informations d’interface, sous forme condensée. </p> <p><b>Cliquez sur </b><span class="cmd"><b>show running-config</b></span><b> dans la figure.</b></p> <p>La commande <span class="cmd"><b>show running-config</b></span> affiche le fichier de configuration en cours d’utilisation par le routeur. Les commandes de configuration sont temporairement stockées dans le fichier de configuration en cours et immédiatement implémentées par le routeur. L’utilisation de cette commande constitue un autre moyen pour vérifier l’état d’une interface telle que FastEthernet 0/0.</p> <span class="cmd"><p>R1#<b>show running-config</b></p></span> <span class="cmd"><p>&lt;partie du résultat omise&gt;</p></span> <span class="cmd"><p>interface FastEthernet0/0</p></span> <span class="cmd"><p><span class="blue">no ip address</span></p></span> <span class="cmd"><p><span class="blue">shutdown</span></p></span> <span class="cmd"><p>&lt;partie du résultat omise&gt;</p></span> <p>Cependant, l’utilisation de <span class="cmd"><b>show running-config</b></span> ne constitue pas forcément la meilleure méthode pour vérifier des configurations d’interface. Utilisez la commande <span class="cmd"><b>show ip interface brief</b></span> pour vérifier rapidement que les interfaces sont <b>up</b> et <b>up</b> (« administratively <b>up</b> » et « line protocol is <b>up</b> »).</p></content-text>
</page>
</topic>
<topic type="" id="tl0902020200">
<title><content-text>Configuration d’une interface Ethernet</content-text></title>
<page type="OneColumn" id="tl0902020201">
<content-media type="InteractiveGraphicHotspots" id="cm1048398155"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020200/tl0902020201/cm1048398155.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020200/tl0902020201/cm1048398155text.xml"/></content-media>
<content-text><p><b>Configuration d’une interface Ethernet</b></p> <p>Comme l’illustre la figure, R1 ne dispose encore d’aucune route. Ajoutons une route en configurant une interface et découvrons ce qui se passe exactement lorsque cette interface est activée. Par défaut, toutes les interfaces de routeur sont <b>shutdown</b> ou désactivées. Pour activer cette interface, utilisez la commande <span class="cmd"><b>no shutdown</b></span> pour faire passer l’interface de l’état <b>administratively down</b> à l’état <b>up</b>.</p> <span class="cmd"><p>R1(config)#<b>interface fastethernet 0/0</b></p></span> <span class="cmd"><p>R1(config-if)#<b>ip address 172.16.3.1 255.255.255.0</b></p></span> <span class="cmd"><p>R1(config-if)#<b>no shutdown</b></p></span> <p>Le message suivant est renvoyé par l’IOS :</p> <span class="cmd"><p>*Mar 1 01:16:08.212: %LINK-3-UPDOWN: Interface FastEthernet0/0, <span class="blue">changed state to up</span></p></span> <span class="cmd"><p>*Mar 1 01:16:09.214: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, <span class="blue">changed state to up</span></p></span> <p>Ces deux messages sont importants. Le premier message <b>changed state to up</b> indique que la connexion est bonne du point de vue physique. Si vous n’obtenez pas ce premier message, assurez-vous que l’interface est correctement connectée à un commutateur ou à un concentrateur. </p> <p><b>Remarque : </b>même si la commande <span class="cmd"><b>no shutdown</b></span> est activée, une interface Ethernet n’est pas active, ou <b>up</b>, tant qu’elle ne reçoit pas un signal porteur provenant d’un autre périphérique (commutateur, concentrateur, PC ou autre routeur). </p> <p>Le deuxième message <b>changed state to up</b> indique que la couche liaison de données est opérationnelle. Pour les interfaces de réseau local, nous ne modifions généralement pas les paramètres de la couche liaison de données. Toutefois, les interfaces de réseau étendu dans un environnement de travaux pratiques nécessitent une synchronisation à une extrémité de la liaison, telle qu’évoquée dans les travaux pratiques 1.5.1, « Câblage d’un réseau et configuration des paramètres de base d’un routeur » et, plus loin, à la section « Configuration d’une interface série ». Si vous ne définissez pas correctement la fréquence d’horloge, alors le protocole de ligne (la couche liaison de données) <b>ne passera pas à up</b>.</p> <p><b>Messages non sollicités de l’IOS</b></p> <p><b>Cliquez sur Messages non sollicités de l’IOS dans la figure.</b></p> <p>L’IOS envoie souvent des messages non sollicités similaires aux messages <b>changed state to up</b> que nous venons de traiter. Comme l’illustre la figure, ces messages surviennent parfois au beau milieu de la saisie d’une commande, telle que la configuration d’une description pour l’interface. Le message IOS n’affecte pas la commande, mais il peut vous faire perdre votre position de saisie. </p> <p><b>Cliquez sur Ouverture de session synchrone dans la figure.</b></p> <p>Pour ne pas mélanger les résultats non sollicités et votre saisie, passez en mode de configuration de ligne pour le port de console et ajoutez la commande <span class="cmd"><b>logging synchronous</b></span>, tel qu’illustré. Vous constatez alors que les messages renvoyés par l’IOS n’interfèrent plus avec votre saisie.</p></content-text>
</page>
<page type="OneColumn" id="tl0902020202">
<content-media type="StaticGraphic" id="cm1891083338"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020200/tl0902020202/cm1891083338.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020200/tl0902020202/cm1891083338text.xml"/></content-media>
<content-text><p><b>Lecture de la table de routage</b></p> <p>Examinons à présent la table de routage illustrée dans la figure. Notez que R1 dispose désormais d’une interface FastEthernet 0/0 « connectée directement » à un nouveau réseau. L’interface a été configurée avec l’adresse IP 172.16.3.1/24, ce qui en fait un membre du réseau 172.16.3.0/24.</p> <p>Observez la ligne de sortie suivante de la table :</p> <span class="cmd"><p>C 172.16.3.0 is directly connected, FastEthernet0/0</p></span> <p>La lettre <b>C</b> au début de la route indique qu’il s’agit d’un réseau connecté directement. En d’autres termes, R1 dispose d’une interface appartenant à ce réseau. La signification de la lettre <b>C</b> est définie dans la liste des codes en haut de la table de routage.</p> <p>Le masque de sous-réseau <b>/24</b> pour cette route s’affiche sur la ligne au-dessus de la route réelle. </p> <span class="cmd"><p>172.16.0.0/24 is subnetted, 1 subnets</p></span> <span class="cmd"><p>C 172.16.3.0 is directly connected, FastEthernet0/0</p></span> <p><b>Les routeurs stockent généralement des adresses réseau.</b></p> <p>À quelques exceptions près, les tables de routage possèdent des routes pour les adresses réseau au lieu d’adresses d’hôte individuelles. La route 172.16.3.0/24 dans la table de routage signifie que cette route correspond à tous les paquets ayant une adresse de destination qui appartient à ce réseau. En représentant un réseau complet d’adresses IP d’hôte par une seule route, la table de routage devient moins volumineuse car elle contient moins de routes, ce qui accélère les recherches dans la table de routage. La table de routage pourrait contenir les 254 adresses IP d’hôtes individuelles du réseau 172.16.3.0/24, mais cette méthode de stockage des adresses est inefficace.</p> <p>L’annuaire téléphonique constitue une bonne analogie avec la structure de la table de routage. Un annuaire téléphonique est une liste de noms et de numéros de téléphone, triés par ordre alphabétique sur le nom de famille. Lors de la recherche d’un numéro, nous pouvons supposer que moins il y a de noms dans l’annuaire, plus nous trouvons rapidement un nom précis. Un annuaire téléphonique de 20 pages contenant peut-être 2 000 entrées est beaucoup plus facile à consulter qu’un annuaire de 200 pages contenant 20 000 entrées. </p> <p>L’annuaire téléphonique ne contient qu’une seule entrée pour chaque numéro de téléphone. Par exemple, la famille Stanford peut être répertoriée comme suit :</p> <p><b>Stanford, Harold, 742 Evergreen Terrace, 555-1234</b></p> <p>C’est la seule entrée pour toute personne résidant à cette adresse et ayant le même numéro de téléphone. L’annuaire téléphonique pourrait contenir une entrée pour chaque individu, mais sa taille augmenterait en conséquence. Par exemple, il pourrait y avoir une entrée distincte pour Harold Stanford, Margaret Stanford, Brad Stanford, Leslie Stanford et Maggie Stanford, tous résidant à la même adresse et disposant du même numéro de téléphone. S’il en était ainsi pour chaque famille, l’annuaire téléphonique serait plus volumineux et sa consultation prendrait plus de temps. </p> <p>Les tables de routage fonctionnent de la même façon : une entrée de la table représente une « famille » de périphériques partageant tous le même réseau ou espace d’adressage (la différence entre réseau et espace d’adressage est précisée plus loin dans le cours). Moins la table de routage contient d’entrées, plus le processus de recherche est rapide. Pour réduire la taille des tables de routage, seules les adresses réseau avec des masques de sous-réseau sont répertoriées, et non les adresses IP d’hôtes individuelles.</p> <p><b>Remarque : </b>parfois, une « route d’hôte » représentant une adresse IP d’hôte individuelle est entrée dans la table de routage. Elle est répertoriée avec l’adresse IP d’hôte du périphérique et un masque de sous-réseau /32 (255.255.255.255). Les routes d’hôte font l’objet d’un autre cours.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902020300">
<title><content-text>Vérification de l’interface Ethernet</content-text></title>
<page type="OneColumn" id="tl0902020301">
<content-media type="InteractiveGraphicHotspots" id="cm7397576153"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020300/tl0902020301/cm7397576153.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020300/tl0902020301/cm7397576153text.xml"/></content-media>
<content-text><p><b>Commandes permettant de vérifier la configuration de l’interface</b></p> <p>La commande <span class="cmd"><b>show interfaces fastethernet 0/0</b></span> dans la figure indique désormais que l’interface est <b>up</b>, tout comme le protocole de ligne. La commande <span class="cmd"><b>no shutdown</b></span> a fait passer l’interface de <b>administratively down</b> (désactivée sur le plan administratif) à <b>up</b> (activée). Notez que l’adresse IP est maintenant affichée.</p> <p>Cliquez sur <span class="cmd"><b>show ip interface brief</b></span> dans la figure.</p> <p>La commande <span class="cmd"><b>show ip interface brief</b></span> affiche également ces mêmes informations. Sous l’état et le protocole, vous devez voir « up ».</p> <p>La commande <span class="cmd"><b>show running-config</b></span> montre la configuration actuelle de cette interface. Lorsque l’interface est désactivée, la commande <span class="cmd"><b>running-config</b></span> affiche <span class="cmd"><b>shutdown</b></span> ; toutefois, lorsque l’interface est activée, <span class="cmd"><b>no shutdown</b></span> ne s’affiche pas. </p> <span class="cmd"><p>R1#<b>show running-config</b></p></span> <span class="cmd"><p>&lt;résultat omis&gt;</p></span> <span class="cmd"><p>interface FastEthernet0/0</p></span> <span class="cmd"><p>ip address 172.16.3.1 255.255.255.0</p></span> <span class="cmd"><p>&lt;résultat omis&gt;</p></span> <p>Comme expliqué dans le chapitre 1, un routeur ne peut pas posséder plusieurs interfaces qui appartiennent au même sous-réseau IP. Chaque interface doit appartenir à un sous-réseau distinct. Par exemple, un routeur ne peut pas avoir son interface FastEthernet 0/0 configurée sur l’adresse et le masque 172.16.3.1/24, et son interface FastEthernet 0/1 configurée sur 172.16.3.2/24. </p> <p>L’IOS renvoie le message d’erreur suivant si vous tentez de configurer la deuxième interface avec le même sous-réseau IP que la première interface : </p> <span class="cmd"><p>R1(config-if)#<b>int fa0/1</b></p></span> <span class="cmd"><p>R1(config-if)<b>#ip address 172.16.3.2 255.255.255.0</b></p></span> <span class="cmd"><p><span class="blue">172.16.3.0 overlaps with FastEthernet0/0</span></p></span> <span class="cmd"><p>R1(config-if)#</p></span> <p>En général, l’interface Ethernet ou FastEthernet du routeur correspond à l’adresse IP de la passerelle par défaut de tout périphérique se trouvant sur ce réseau local. Par exemple, l’ordinateur PC1 peut être configuré avec une adresse IP d’hôte appartenant au réseau 172.16.3.0/24, avec l’adresse IP de passerelle par défaut 172.16.3.1. 172.16.3.1 est l’adresse IP FastEthernet du routeur R1. N’oubliez pas que l’interface Ethernet ou FastEthernet d’un routeur participe également au processus ARP en tant que membre de ce réseau Ethernet.</p></content-text>
</page>
<page type="OneColumn" id="tl0902020302">
<content-media type="StaticGraphic" id="cm9849595011"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020300/tl0902020302/cm9849595011.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020300/tl0902020302/cm9849595011text.xml"/></content-media>
<content-text><p><b>Les interfaces Ethernet participent au protocole ARP.</b></p> <p>L’interface Ethernet d’un routeur participe à un réseau local au même titre que tout autre périphérique sur ce réseau. Cela signifie que ces interfaces ont une adresse MAC de couche 2, telle qu’illustrée dans la figure. La commande <span class="cmd"><b>show interfaces</b></span> affiche l’adresse MAC pour les interfaces Ethernet.</p> <span class="cmd"><p>R1#<b>show interfaces fastethernet 0/0</b></p></span> <p>Comme démontré dans le chapitre 1, une interface Ethernet participe aux requêtes et aux réponses ARP et gère un tableau ARP. Si un routeur a un paquet destiné à un périphérique sur un réseau Ethernet connecté directement, il recherche dans le tableau ARP une entrée avec cette adresse IP de destination afin de la mapper avec l’adresse MAC. Si le tableau ARP ne contient pas cette adresse IP, l’interface Ethernet envoie une requête ARP. Le périphérique ayant l’adresse IP de destination renvoie une réponse ARP qui indique son adresse MAC. L’adresse IP et l’adresse MAC sont ensuite ajoutées au tableau ARP pour cette interface Ethernet. Le routeur peut alors encapsuler le paquet IP dans une trame Ethernet avec l’adresse MAC de destination provenant de son tableau ARP. La trame Ethernet, avec le paquet encapsulé, est ensuite envoyée via cette interface Ethernet.</p></content-text>
</page>
<page type="OneColumn" id="tl0902020303">
<content-media type="ActivityPKA" id="cm2918706651"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020300/tl0902020303/cm2918706651/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902020000/tl0902020300/tl0902020303/cm2918706651/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour mettre en pratique la configuration des interfaces Ethernet. Suivez les instructions supplémentaires fournies dans l’exercice pour examiner le processus ARP en mode simulation.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0902020400">
<title><content-text>Configuration d’une interface série</content-text></title>
<page type="OneColumn" id="tl0902020401">
<content-media type="StaticGraphic" id="cm9138951276"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020400/tl0902020401/cm9138951276.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020400/tl0902020401/cm9138951276text.xml"/></content-media>
<content-text><p><b>Configuration d’une interface série</b></p> <p>Configurons à présent l’interface Serial 0/0/0 sur le routeur R1. Cette interface se trouve sur le réseau 172.16.2.0/24 et reçoit l’adresse IP et le masque de sous-réseau 172.16.2.1/24. Le processus utilisé pour la configuration de l’interface Serial 0/0/0 est similaire à celui employé pour configurer l’interface FastEthernet 0/0.</p> <span class="cmd"><p>R1(config)#<b>interface serial 0/0/0</b></p></span> <span class="cmd"><p>R1(config-if)#<b>ip address 172.16.2.1 255.255.255.0</b></p></span> <span class="cmd"><p>R1(config-if)#<b>no shutdown</b></p></span> <p>Une fois les commandes ci-dessus entrées, l’état de l’interface série peut varier en fonction du type de connexion WAN. Ce sujet est abordé plus en détail dans un cours ultérieur. Dans ce cours, nous allons utiliser des connexions point à point série dédiées entre deux routeurs. L’interface série affiche l’état <b>up</b> (activé) qu’une fois que l’autre extrémité de la liaison série est également correctement configurée. Nous pouvons afficher l’état actuel de Serial 0/0/0 à l’aide de la commande <span class="cmd"><b>show interfaces serial 0/0/0</b></span>, tel qu’illustré dans la figure.</p> <p>Comme vous pouvez le constater, la liaison est toujours désactivée. Cela est dû au fait que nous n’avons ni configuré ni activé l’autre extrémité de la liaison série.</p> <span class="cmd"><p>R1#<b>show interfaces serial 0/0/0</b></p></span> <span class="cmd"><p>Serial0/0/0 is administratively <span class="blue">down</span>, line protocol is <span class="blue">down</span></p></span> <p>Nous allons maintenant configurer l’autre extrémité de cette liaison, la liaison Serial 0/0/0 pour le routeur R2. </p> <p><b>Remarque : </b>il n’est nullement obligatoire que les deux extrémités de la liaison série utilisent la même interface, Serial 0/0/0 dans le cas présent. Toutefois, comme les deux interfaces sont membres du même réseau, elles doivent toutes deux disposer d’adresses IP appartenant au réseau 172.16.2.0/24 (dans le cas présent, les termes <i>réseau</i> et <i>sous-réseau</i> peuvent être utilisés de manière interchangeable). L’interface Serial 0/0/0 du routeur R2 est configurée avec l’adresse IP et le masque de sous-réseau 172.16.2.2/24.</p> <span class="cmd"><p>R2(config)#<b>interface serial 0/0/0</b></p></span> <span class="cmd"><p>R2(config-if)#<b>ip address 172.16.2.2 255.255.255.0</b></p></span> <span class="cmd"><p>R2(config-if)#<b>no shutdown</b></p></span> <p>Si nous utilisons maintenant la commande <span class="cmd"><b>show interfaces serial 0/0/0</b></span> sur l’un des routeurs, nous voyons toujours que la liaison est <b>up/down</b> (activée/désactivée). </p> <span class="cmd"><p>R2#<b>show interfaces serial 0/0/0</b></p></span> <span class="cmd"><p>Serial0/0/0 is <span class="blue">up</span>, line protocol is <span class="blue">down</span></p></span> <span class="cmd"><p>&lt;résultat omis&gt;</p></span> <p>La liaison physique entre les routeurs R1 et R2 est <b>up</b>, car les deux extrémités de la liaison série ont été correctement configurées avec une adresse IP et un masque et ont été activées à l’aide de la commande <span class="cmd"><b>no shutdown</b></span>. Toutefois, le protocole de ligne est toujours <b>down</b> (désactivé) parce que l’interface ne reçoit pas de signal d’horloge. Il nous reste une commande supplémentaire à entrer, <span class="cmd"><b>clock rate</b></span>, dans le routeur avec le câble DCE. La commande <span class="cmd"><b>clock rate</b></span> définit le signal d’horloge pour la liaison. La configuration du signal d’horloge est traitée dans la section suivante.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902020500">
<title><content-text>Examen des interfaces de routeur</content-text></title>
<page type="OneColumn" id="tl0902020501">
<content-media type="StaticGraphic" id="cm6612899463"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020500/tl0902020501/cm6612899463.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020500/tl0902020501/cm6612899463text.xml"/></content-media>
<content-text><p><b>Connexion physique d’une interface de réseau étendu</b></p> <p>La couche physique de réseau étendu décrit l’interface entre l’équipement terminal de traitement de données (ETTD) et l’équipement de communication de données (DCE). En règle générale, le DCE est le fournisseur de services et l’ETTD est le périphérique connecté. Dans ce modèle, les services offerts à l’ETTD sont mis à disposition par le biais d’un modem ou d’un CSU/DSU.</p> <p>En règle générale, le routeur est le périphérique ETTD et il est connecté à un CSU/DSU, qui est le périphérique DCE. Le CSU/DSU (périphérique DCE) est utilisé pour convertir les données du routeur (périphérique ETTD) dans un format acceptable pour le fournisseur de services de réseau étendu. Le CSU/DSU (périphérique DCE) est également chargé de convertir les données du fournisseur de services de réseau étendu dans un format acceptable pour le routeur (périphérique ETTD). Le routeur est généralement connecté au CSU/DSU par le biais d’un câble ETTD série, tel qu’illustré. </p> <p><b>Les interfaces série nécessitent un signal d’horloge pour contrôler la synchronisation des communications</b>. Dans la plupart des environnements, le fournisseur de services (un périphérique DCE, comme un CSU/DSU) fournit cette synchronisation. Par défaut, les routeurs Cisco sont des périphériques ETTD. Toutefois, dans un environnement de travaux pratiques, nous n’utilisons pas de CSU/DSU et nous n’avons pas de fournisseur de services de réseau étendu. </p> <p><b>Placez votre pointeur sur les câbles et périphériques dans la figure pour afficher leur description.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0902020502">
<content-media type="InteractiveGraphicHotspots" id="cm9991825749"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020500/tl0902020502/cm9991825749.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020500/tl0902020502/cm9991825749text.xml"/></content-media>
<content-text><p><b>Configuration de liaisons série dans un environnement de travaux pratiques</b></p> <p>Pour les liaisons série directement interconnectées, comme dans un environnement de travaux pratiques, une extrémité de la connexion doit être considérée comme un DCE et fournir un signal d’horloge. Même si les interfaces série de Cisco sont, par défaut, des périphériques ETTD, elles peuvent être configurées en tant que périphériques DCE.</p> <p>Pour configurer un routeur en périphérique DCE :</p> <p>1. Connectez l’extrémité DCE du câble à l’interface série.</p> <p>2. Configurez le signal d’horloge sur l’interface série à l’aide de la commande <span class="cmd"><b>clock rate</b></span>.</p> <p>Les câbles série utilisés pour les travaux pratiques sont généralement de l’un des deux types suivants : </p> <ul><li> un câble croisé ETTD/DCE doté d’une extrémité ETTD et d’une extrémité DCE ;</li> <li> un câble ETTD branché à un câble DCE.</li></ul> <p>Dans notre topologie de travaux pratiques, l’interface Serial 0/0/0 de R1 est connectée à l’extrémité DCE du câble, et l’interface Serial 0/0/0 de R2 à l’extrémité ETTD du câble. Le câble doit être étiqueté ETTD ou DCE. </p> <p>Vous pouvez également distinguer l’ETTD du DCE en observant le connecteur entre les deux câbles. Le câble ETTD dispose d’un connecteur mâle, tandis que le câble DCE a un connecteur femelle.</p> <p>Si un câble est connecté entre les deux routeurs, vous pouvez utiliser la commande <span class="cmd"><b>show controllers</b></span> pour déterminer quelle extrémité du câble est reliée à cette interface. Dans les résultats de la commande, notez que R1 dispose du câble DCE relié à son interface Serial 0/0 et qu’aucune fréquence d’horloge n’est définie. </p> <span class="cmd"><p>R1#<b>show controllers serial 0/0/0</b></p></span> <span class="cmd"><p>Interface Serial0/0/0</p></span> <span class="cmd"><p>Hardware is PowerQUICC <span class="blue">MPC860</span></p></span> <span class="cmd"><p><span class="blue">DCE V.35</span>, no clock</p></span> <span class="cmd"><p>&lt;résultat omis&gt;</p></span> <p>Une fois le câble connecté, vous pouvez configurer l’horloge à l’aide de la commande <span class="cmd"><b>clock rate</b></span>. Les fréquences d’horloge disponibles, en bits par seconde, sont 1 200, 2 400, 9 600, 19 200, 38 400, 56 000, 64 000, 72 000, 125 000, 148 000, 500 000, 800 000, 1 000 000, 1 300 000, 2 000 000 et 4 000 000. Certains débits binaires peuvent être indisponibles sur certaines interfaces série. Comme l’interface Serial 0/0/0 de R1 dispose d’un câble DCE relié, nous allons configurer cette interface avec une fréquence d’horloge. </p> <span class="cmd"><p>R1(config)#<b>interface serial 0/0/0</b></p></span> <span class="cmd"><p>R1(config-if)#<b>clock rate 64000</b></p></span> <span class="cmd"><p>01:10:28: %LINEPROTO-5-UPDOWN: Line protocol on Interface Serial0/0/0, changed state to up</p></span> <p><b>Remarque :</b> si l’interface d’un routeur avec un câble ETTD est configurée avec la commande clock rate, l’IOS ne tient pas compte de la commande et il n’y a aucun effet néfaste.</p></content-text>
</page>
<page type="OneColumn" id="tl0902020503">
<content-media type="StaticGraphic" id="cm8645466049"><title><content-text></content-text></title><media ref="tl0902000000/tl0902020000/tl0902020500/tl0902020503/cm8645466049.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902020000/tl0902020500/tl0902020503/cm8645466049text.xml"/></content-media>
<content-text><p><b>Vérification de la configuration de l’interface série</b></p> <p>Comme l’illustre la figure, il est possible de déterminer que le protocole de ligne est désormais activé et de le vérifier aux deux extrémités de la liaison série, à l’aide des commandes <span class="cmd"><b>show interfaces</b></span> et <span class="cmd"><b>show ip interface brief</b></span>. N’oubliez pas que l’interface série est activée uniquement si les deux extrémités de la liaison sont correctement configurées. Dans notre environnement de travaux pratiques, nous avons configuré la fréquence d’horloge à une extrémité avec le câble DCE.</p> <p>Nous pouvons ensuite vérifier que la liaison est up/up en envoyant une requête ping à l’interface distante.</p> <span class="cmd"><p>R1#<b>ping 172.16.2.2</b></p></span> <p>Enfin, nous pouvons voir le réseau série 172.16.2.0/24 dans les tables de routage des deux routeurs. Si nous exécutons la commande <span class="cmd"><b>show ip route</b></span> sur R1, nous voyons la route connectée directement pour le réseau 172.16.2.0/24.</p> <span class="cmd"><p>R1#<b>show ip route</b></p></span> <p>Examinons à présent la configuration en cours du routeur R1 à l’aide de la commande <span class="cmd"><b>show running-config</b></span>. </p> <span class="cmd"><p>R1#<b>show running-config</b></p></span> <p><b>Remarque</b> : bien que la commande <span class="cmd"><b>clock rate</b></span> comporte deux mots, l’IOS écrit <b>clockrate</b> en un seul mot dans les fichiers de configuration en cours et initiale.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902030000">
<title><content-text>Découverte des réseaux connectés directement</content-text></title>
<topic type="" id="tl0902030100">
<title><content-text>Vérification des modifications apportées à la table de routage</content-text></title>
<page type="OneColumn" id="tl0902030101">
<content-media type="StaticGraphic" id="cm8922664555"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030100/tl0902030101/cm8922664555.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902030000/tl0902030100/tl0902030101/cm8922664555text.xml"/></content-media>
<content-text><p><b>Concepts de la table de routage</b></p> <p>Comme l’illustre la figure, la commande <span class="cmd"><b>show ip route</b></span> indique le contenu de la table de routage. Revoyons l’objectif d’une table de routage. Une table de routage est une structure de données utilisée pour stocker des informations de routage provenant de différentes sources. Le principal objectif d’une table de routage consiste à fournir au routeur des chemins d’accès à divers réseaux de destination. </p> <p>La table de routage est composée d’une liste d’adresses réseau « connues », à savoir les adresses connectées directement, configurées de manière statique et apprises de manière dynamique. R1 et R2 disposent uniquement de routes pour des réseaux connectés directement. </p> <p> </p></content-text>
</page>
<page type="OneColumn" id="tl0902030102">
<content-media type="StaticGraphic" id="cm6964272567"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030100/tl0902030102/cm6964272567.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902030000/tl0902030100/tl0902030102/cm6964272567text.xml"/></content-media>
<content-text><p><b>Analyse de routes lors de leur ajout à la table de routage</b></p> <p>Nous allons maintenant étudier plus en détail la manière dont les routes directement connectées sont ajoutées à la table de routage et supprimées de celle-ci. À la différence des commandes <span class="cmd"><b>show</b></span>, les commandes <span class="cmd"><b>debug</b></span> peuvent être utilisées pour surveiller le fonctionnement d’un routeur en temps réel. La commande <span class="cmd"><b>debug ip routing</b></span> permet de voir les modifications apportées par le routeur lors de l’ajout et de la suppression de routes. Nous allons configurer les interfaces sur le routeur R2 et étudier ce processus.</p> <p>Tout d’abord, nous allons activer le débogage avec la commande <span class="cmd"><b>debug ip routing</b></span>, afin d’afficher les réseaux directement connectés lorsqu’ils sont ajoutés à la table de routage.</p> <span class="cmd"><p>R2#<b>debug ip routing</b></p></span> <span class="cmd"><p>IP routing debugging is on</p></span> <p><b>Configuration de l’adresse IP et du masque de sous-réseau</b></p> <p>Ensuite, nous allons configurer l’adresse IP et le masque de sous-réseau pour l’interface FastEthernet 0/0 sur le routeur R2 et utiliser la commande <span class="cmd"><b>no shutdown</b></span>. Puisque l’interface FastEthernet est connectée au réseau 172.16.1.0/24, elle doit être configurée avec une adresse IP d’hôte pour ce réseau.</p> <span class="cmd"><p>R2(config)#<b>interface fastethernet 0/0</b></p></span> <span class="cmd"><p>R2(config-if)#<b>ip address 172.16.1.1 255.255.255.0</b></p></span> <span class="cmd"><p>R2(config-if)#<b>no shutdown</b></p></span> <p>Le message suivant sera renvoyé par l’IOS :</p> <span class="cmd"><p>02:35:30: %LINK-3-UPDOWN: Interface FastEthernet0/0, changed state to <span class="blue">up</span></p></span> <span class="cmd"><p>02:35:31: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to <span class="blue">up</span></p></span> <p>Une fois que la commande <span class="cmd"><b>no shutdown</b></span> a été entrée et que le routeur a déterminé que l’interface et le protocole de ligne sont dans un état <b>up</b> et <b>up</b>, la sortie du débogage affichée par le routeur R2 indique que ce réseau directement connecté est ajouté à la table de routage.</p> <span class="cmd"><p>02:35:30: RT: add 172.16.1.0/24 via 0.0.0.0, connected metric [0/0]</p></span> <span class="cmd"><p>02:35:30: RT: <span class="blue">interface FastEthernet0/0 added to routing table</span></p></span> <p><b>Cliquez sur Table de routage 1 dans la figure.</b></p> <p>La table de routage indique maintenant la route pour le réseau directement connecté 172.16.1.0/24, comme illustré dans la figure.</p> <p>La commande <span class="cmd"><b>debug ip routing</b></span> affiche le processus de mise à jour de la table de routage pour n’importe quelle route, qu’il s’agisse d’un réseau directement connecté, d’une route statique ou d’une route dynamique.</p> <p><b>Cliquez sur Désactiver le débogage dans la figure.</b></p> <p>Désactivez <span class="cmd"><b>debug ip routing</b></span> à l’aide de la commande <span class="cmd"><b>undebug ip routing</b></span> ou de la commande <span class="cmd"><b>undebug all</b></span>.</p> <p><b>Modification d’une adresse IP</b></p> <p>Pour modifier une adresse IP ou un masque de sous-réseau pour une interface, reconfigurez l’adresse IP et le masque de sous-réseau de cette interface. Cette modification remplace l’entrée précédente. Il existe plusieurs façons de configurer une seule interface avec plusieurs adresses IP, tant que chaque adresse se trouve sur un sous-réseau différent. Ce sujet fait l’objet d’un cours ultérieur.</p> <p>Pour supprimer un réseau connecté directement d’un routeur, utilisez ces deux commandes : <span class="cmd"><b>shutdown</b></span> et <span class="cmd"><b>no ip address</b></span>.</p> <p>La commande <span class="cmd"><b>shutdown</b></span> est utilisée pour désactiver les interfaces. Cette commande peut être utilisée seule si vous souhaitez désactiver temporairement la configuration adresse/masque IP tout en la conservant pour les interfaces. Dans l’exemple, cette commande désactive l’interface FastEthernet de R2. Toutefois, l’adresse IP reste dans le fichier de configuration <b>running-config</b>. </p> <p>Une fois que la commande <span class="cmd"><b>shutdown</b></span> a été utilisée, vous pouvez supprimer l’adresse IP et le masque de sous-réseau de l’interface. L’ordre dans lequel vous exécutez ces deux commandes n’est pas important.</p> <p><b>Cliquez sur Débogage 2 dans la figure.</b></p> <p>Utilisez <span class="cmd"><b>debug ip routing</b></span> pour afficher le processus de mise à jour de la table de routage. Nous allons supprimer la configuration de l’interface FastEthernet 0/0 du routeur R2.</p> <span class="cmd"><p>R2(config)#<b>interface fastethernet 0/0</b></p></span> <span class="cmd"><p>R2(config-if)#<b>shutdown</b></p></span> <p>Nous pouvons observer la suppression de la route directement connectée par le processus de la table de routage.</p> <span class="cmd"><p>02:53:58: RT:<span class="blue"> interface FastEthernet0/0 removed from routing table</span></p></span> <span class="cmd"><p>02:53:58: RT: del 172.16.1.0/24 via 0.0.0.0, connected metric [0/0]</p></span> <span class="cmd"><p>02:53:58: RT: <span class="blue">delete subnet route to 172.16.1.0/24</span></p></span> <p>L’IOS indique également que l’interface et le protocole de ligne sont maintenant <b>down</b> :</p> <span class="cmd"><p>02:54:00: %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to administratively <span class="blue">down</span></p></span> <span class="cmd"><p>02:54:01: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to <span class="blue">down</span></p></span> <p> </p> <p>Nous allons maintenant supprimer l’adresse IP sur l’interface.</p> <span class="cmd"><p>R2(config-if)#<b>no ip address</b></p></span> <p>Désactivez la débogage :</p> <span class="cmd"><p>R2#<b>undebug all</b></p></span> <span class="cmd"><p>All possible debugging has been turned off</p></span> <p><b>Cliquez sur Table de routage 2 dans la figure.</b></p> <p>Pour vérifier que la route a été supprimée de la table de routage, nous utilisons la commande <b><span class="cmd">show ip route</span></b>. Notez que la route vers 172.16.1.0/24 a été supprimée.</p> <p><b>Reconfiguration de l’interface pour la suite du chapitre</b></p> <p>Pour les besoins de la suite de ce chapitre, nous allons supposer que l’adressage pour FastEthernet 0/0 n’a pas été supprimé. Pour reconfigurer l’interface, il vous suffit d’entrer à nouveau les commandes :</p> <span class="cmd"><p>R2(config)#<b>interface fastethernet 0/0</b></p></span> <span class="cmd"><p>R2(config-if)#<b>ip address 172.16.1.1 255.255.255.0</b></p></span> <span class="cmd"><p>R2(config-if)#<b>no shutdown</b></p></span> <p><b>AVERTISSEMENT :</b> les commandes de débogage, notamment la commande <span class="cmd"><b>debug all</b></span>, doivent être utilisées avec modération. En effet, celles-ci peuvent interrompre le fonctionnement du routeur. Les commandes de débogage sont utiles lors de la configuration ou du dépannage d’un réseau ; elles font toutefois un usage intensif des ressources de l’unité centrale et de la mémoire. Il est recommandé d’exécuter aussi peu de processus de débogage que possible et de les désactiver dès qu’ils ne sont plus utiles. Les commandes de débogage doivent être utilisées avec prudence sur les réseaux de production car elles peuvent influencer les performances du périphérique. </p></content-text>
</page>
<page type="OneColumn" id="tl0902030103">
<content-media type="ActivityPKA" id="cm1541781751"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030100/tl0902030103/cm1541781751/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902030000/tl0902030100/tl0902030103/cm1541781751/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour mettre en pratique la configuration des interfaces série. Nous allons aussi utiliser <span class="cmd"><b>debug ip routing</b></span> pour analyser les processus de la table de routage.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0902030200">
<title><content-text>Périphériques sur des réseaux connectés directement</content-text></title>
<page type="OneColumn" id="tl0902030201">
<content-media type="InteractiveGraphicHotspots" id="cm6511590538"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030200/tl0902030201/cm6511590538.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902030000/tl0902030200/tl0902030201/cm6511590538text.xml"/></content-media>
<content-text><p><b>Accès aux périphériques sur des réseaux connectés directement</b></p> <p>Pour revenir à la configuration de notre topologie, nous allons maintenant supposer que tous les réseaux connectés directement sont configurés pour les trois routeurs. La figure affiche le reste des configurations pour les routeurs R2 et R3.</p> <p><b>Cliquez sur </b><span class="cmd"><b>show ip interface brief</b></span> <b>dans la figure.</b></p> <p>La sortie qui apparaît dans cette figure permet de vérifier que toutes les interfaces configurées sont « <b>up</b> » et « <b>up</b> ».</p> <p><b>Cliquez sur </b><span class="cmd"><b>show ip route</b></span><b> dans la figure.</b></p> <p>En observant les tables de routage dans la figure, nous pouvons nous assurer que tous les réseaux connectés directement sont installés pour le routage.</p>  <p>L’étape cruciale dans la configuration de votre réseau consiste à vérifier que toutes les interfaces sont « up » et « up » et que les tables de routage sont complètes. Quel que soit le modèle de routage configuré (statique, dynamique ou une combinaison des deux), vérifiez vos configurations réseau initiales avec la commande <span class="cmd"><b>show ip interface brief</b></span> et la commande <span class="cmd"><b>show ip route</b></span> avant de passer à une configuration plus complexe.</p>  <p>Lorsqu’un routeur dispose uniquement de ses interfaces configurées et que la table de routage contient les réseaux connectés directement, mais aucune autre route, seuls les périphériques sur ces réseaux connectés directement sont accessibles. </p> <ul><li> R1 peut communiquer avec n’importe quel périphérique sur les réseaux 172.16.3.0/24 et 172.16.2.0/24.</li> <li> R2 peut communiquer avec n’importe quel périphérique sur les réseaux 172.16.1.0/24, 172.16.2.0/24 et 192.168.1.0/24.</li> <li> R3 peut communiquer avec n’importe quel périphérique sur les réseaux 192.168.1.0/24 et 192.168.2.0/24.</li></ul>  <p>Ces routeurs connaissant uniquement leurs réseaux connectés directement, ils ne peuvent communiquer qu’avec les périphériques sur leurs réseaux locaux et série connectés directement. </p> <p>Par exemple, PC1 dans la topologie a été configuré avec l’adresse IP 172.16.3.10 et le masque de sous-réseau 255.255.255.0. PC1 a également été configuré avec l’adresse IP de passerelle par défaut 172.16.3.1, soit l’adresse IP de l’interface FastEthernet 0/0 du routeur. R1 ne connaissant que les réseaux connectés directement, il peut transférer des paquets de PC1 aux périphériques sur le réseau 172.16.2.0/24, comme 172.16.2.1 et 172.16.2.2. Les paquets de PC1 ayant une autre adresse IP de destination, comme PC2 (172.16.1.10), sont ignorés par R1.</p> <p>Examinons la table de routage pour R2 dans la figure. R2 ne connaît que ses trois réseaux connectés directement. Essayez de prévoir ce qui se passe si nous envoyons une requête ping à l’une des interfaces FastEthernet sur l’un des autres routeurs.</p> <p><b>Cliquez sur <span class="cmd">ping</span> dans la figure.</b></p> <p>Notez que les requêtes ping échouent, comme l’indique la série de cinq points. Elles ont échoué parce que R2 n’a pas, dans sa table de routage, de route qui correspond à 172.16.3.1 ou à 192.168.2.1, à savoir l’adresse IP de destination du paquet de requêtes ping. Pour avoir une correspondance entre l’adresse IP de destination du paquet (172.16.3.1) et une route dans la table de routage, l’adresse doit correspondre au nombre de bits les plus à gauche de l’adresse réseau, tel qu’indiqué par le préfixe de la route. Pour R2, toutes les routes ont le préfixe /24 ; par conséquent, les 24 bits les plus à gauche sont vérifiés pour chaque route.</p></content-text>
</page>
<page type="OneColumn" id="tl0902030202">
<content-media type="AnimationPartialScreen" id="cm3706041267"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030200/tl0902030202/cm3706041267.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902030000/tl0902030200/tl0902030202/cm3706041267text.xml"/></content-media>
<content-text><p><b>Vérification de chaque route l’une après l’autre</b></p> <p>La première route dans la table pour le routeur R1 est 172.16.1.0/24.</p> <span class="cmd"><p>172.16.0.0/24 is subnetted, 2 subnets</p></span> <span class="cmd"><p>C 172.16.1.0 is directly connected, FastEthernet0/0</p></span> <p>La table de routage de l’IOS vérifie que les 24 bits les plus à gauche de l’adresse IP de destination du paquet (172.16.3.1) correspondent au réseau 172.16.1.0/24. </p> <p><b>Lisez la première animation dans la figure.</b></p> <p>Si vous convertissez ces adresses en données binaires et que vous les comparez, comme illustré dans l’animation, vous constatez que les 24 premiers bits de cette route ne correspondent pas parce que le 23e bit est différent. Cette route est donc rejetée.</p> <span class="cmd"><p> 172.16.0.0/<span class="blue">24 </span>is subnetted, 2 subnets</p></span> <span class="cmd"><p>C 172.16.2.0 is directly connected, Serial0/0/0</p></span> <p>Dans l’animation, nous constatons que les 24 premiers bits de la seconde route ne correspondent pas, car le 24<sup>e</sup> bit est différent. Par conséquent, cette route est également rejetée et le processus passe à une route suivante dans la table de routage.</p> <span class="cmd"><p>C 192.168.1.0/<span class="blue">24 </span>is directly connected, Serial0/0/1</p></span> <p>La troisième route ne correspond pas non plus. Tel qu’illustré, 10 des 24 premiers bits sont différents. Cette route est donc rejetée. Comme il n’y a pas d’autres routes dans la table de routage, les requêtes ping sont ignorées. Le routeur prend sa décision de transfert au niveau de la couche 3, un acheminement « au mieux » pour transférer le paquet, mais il n’apporte aucune garantie.</p> <p><b>Cliquez sur le bouton Requêtes ping envoyées à R3 dans la figure et lancez l’animation.</b></p> <p>Étudions la seconde animation pour observer ce qui se passe si le routeur R2 envoie une requête ping à l’interface 192.168.1.1 sur le routeur R3.</p> <p>Cette fois, la requête ping aboutit. Elle a réussi parce que R2 a une route dans sa table de routage qui correspond à 192.168.1.1, à savoir l’adresse IP de destination du paquet de requêtes ping. Les deux premières routes, 172.16.1.0/24 et 172.16.2.0/24, sont rejetées. Mais la dernière route, 192.168.1.0/24, correspond aux 24 premiers bits de l’adresse IP de destination. Le paquet de requêtes ping est encapsulé dans le protocole HDLC de couche 2 de l’interface de sortie Serial 0/0/1 et transféré via l’interface Serial 0/0/1. R2 a alors terminé de prendre une décision de transfert pour ce paquet ; les décisions prises par d’autres routeurs en relation avec ce paquet ne le concernent pas.</p> <p><b>Remarque :</b> le processus de recherche de la table de routage sera traité plus en détail dans le chapitre 8, « Table de routage : examen détaillé ».</p></content-text>
</page>
<page type="OneColumn" id="tl0902030203">
<content-media type="ActivityPKA" id="cm5876133420"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030200/tl0902030203/cm5876133420/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902030000/tl0902030200/tl0902030203/cm5876133420/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour tester la connectivité entre les périphériques connectés directement.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0902030300">
<title><content-text>Protocole CDP (Cisco Discovery Protocol)</content-text></title>
<page type="OneColumn" id="tl0902030301">
<content-media type="StaticGraphic" id="cm1748284186"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030300/tl0902030301/cm1748284186.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902030000/tl0902030300/tl0902030301/cm1748284186text.xml"/></content-media>
<content-text><p><b>Détection de réseaux avec le protocole CDP</b></p> <p>Le protocole CDP (Cisco Discovery Protocol) est un puissant outil de surveillance et de dépannage de réseaux. Le protocole CDP est un outil de collecte d’informations utilisé par les administrateurs réseau pour obtenir des données sur les périphériques Cisco connectés directement. Il s’agit d’un outil propriétaire qui permet d’accéder à un résumé des informations de protocoles et d’adresses concernant les périphériques Cisco connectés directement. Par défaut, chaque périphérique Cisco envoie des messages réguliers, connus sous le nom d’annonces CDP, aux périphériques Cisco connectés directement. Ces annonces contiennent des informations comme les types de périphériques connectés, les interfaces des routeurs auxquels ils sont connectés, les interfaces utilisées pour réaliser les connexions et les numéros de modèles des périphériques.</p> <p>La plupart des périphériques réseau, par définition, ne fonctionnent pas de manière isolée. Un périphérique Cisco a fréquemment d’autres périphériques Cisco comme voisins sur le réseau. Les informations collectées auprès d’autres périphériques peuvent aider à la prise de décisions quant à la conception de réseau, au dépannage et à la modification des équipements. Le protocole CDP peut servir d’outil de détection de réseaux, en permettant de créer la topologie logique d’un réseau lorsqu’une telle documentation n’existe pas ou manque de précision. </p> <p>La familiarisation avec le concept général de <i>voisins</i> est importante pour comprendre le protocole CDP et pour les futures discussions concernant les protocoles de routage dynamique.</p> <p><b>Voisins de couche 3</b></p> <p>À ce stade de la configuration de notre topologie, nous avons uniquement des voisins connectés directement. Au niveau de la couche 3, les protocoles de routage considèrent les <i>voisins</i> comme des périphériques partageant le même espace d’adressage réseau. </p> <p>Par exemple, R1 et R2 sont voisins. Ils sont tous deux membres du réseau 172.16.2.0/24. R2 et R3 sont également voisins car ils partagent le réseau 192.168.1.0/24. Mais R1 et R3 ne sont <i>pas</i> voisins car ils ne partagent aucun espace d’adressage réseau. Si nous avions connecté R1 et R3 avec un câble et configuré chaque routeur avec une adresse IP du même réseau, ils seraient voisins.</p> <p><b>Voisins de couche 2</b></p> <p>Le protocole CDP fonctionne uniquement au niveau de la couche 2. Les voisins CDP sont donc des périphériques Cisco qui sont physiquement connectés directement et qui partagent la même liaison de données. Dans la figure du protocole CDP, l’administrateur réseau a ouvert une session sur S3. S3 reçoit uniquement les annonces CDP de S1, S2 et R2.</p> <p>En supposant que tous les routeurs et commutateurs de la figure sont des périphériques Cisco exécutant le protocole CDP, quels seraient les voisins de R1 ? Pouvez-vous déterminer les voisins CDP de chaque périphérique ?</p> <p><b>Cliquez sur le bouton Topologie dans la figure.</b></p> <p>Dans la topologie de notre chapitre, nous pouvons visualiser les relations de voisinage CDP suivantes :</p> <ul><li> R1 et S1 sont des voisins CDP.</li> <li> R1 et R2 sont des voisins CDP.</li> <li> R2 et S2 sont des voisins CDP.</li> <li> R2 et R3 sont des voisins CDP.</li> <li> R3 et S3 sont des voisins CDP.</li></ul> <p>Notez la différence entre les voisins de couche 2 et de couche 3. Les commutateurs ne sont pas des voisins pour les routeurs au niveau de la couche 3 car ils ne fonctionnent qu’au niveau de la couche 2. Toutefois, les commutateurs sont des voisins de couche 2 pour les routeurs qui leur sont connectés directement. </p> <p>Voyons comment le protocole CDP peut aider un administrateur réseau.</p></content-text>
</page>
<page type="OneColumn" id="tl0902030302">
<content-media type="StaticGraphic" id="cm7540033566"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030300/tl0902030302/cm7540033566.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902030000/tl0902030300/tl0902030302/cm7540033566text.xml"/></content-media>
<content-text><p><b>Fonctionnement du protocole CDP</b></p> <p>Examinons les résultats des commandes <span class="cmd"><b>show cdp neighbors</b></span> et <span class="cmd"><b>show cdp neighbors detail</b></span> dans la figure. Notez que R3 a collecté certaines informations détaillées sur R2 et sur le commutateur connecté à l’interface FastEthernet sur R3.</p> <p>Le protocole CDP s’exécute au niveau de la couche liaison de données qui relie les supports physiques aux protocoles de couche supérieure (ULP). Puisque le protocole CDP fonctionne au niveau de la couche liaison de données, deux périphériques réseau Cisco ou plus, tels que des routeurs prenant en charge différents protocoles au niveau de la couche réseau (par exemple, IP et le <content-link target="cg7950820394" type="glossary">protocole IPX</content-link> de Novell), peuvent chacun obtenir des informations sur l’autre.</p> <p>Lorsqu’un périphérique Cisco démarre, le protocole CDP démarre par défaut. Le protocole CDP détecte automatiquement les périphériques Cisco voisins qui exécutent le protocole CDP, quel que soit le protocole ou les suites en cours d’exécution. Le protocole CDP échange des informations sur les périphériques matériels et logiciels avec ses voisins CDP connectés directement.</p> <p>Le protocole CDP fournit les informations suivantes concernant chaque périphérique CDP voisin :</p> <ul><li> <b>Identificateurs de périphériques</b> : par exemple, le nom d’hôte configuré d’un commutateur.</li> <li> <b>Liste d’adresses</b> : jusqu’à une adresse de couche réseau pour chaque protocole pris en charge.</li> <li> <b>Identificateur de port</b> : le nom du port local et distant (sous la forme d’une chaîne de caractères ASCII, comme ethernet0).</li> <li> <b>Liste de capacités</b> : par exemple, pour savoir si ce périphérique est un routeur ou un commutateur.</li> <li> <b>Plateforme</b> : la plateforme matérielle du périphérique, par exemple, un routeur Cisco série 7200.</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0902030303">
<content-media type="ActivityPKA" id="cm5792531794"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030300/tl0902030303/cm5792531794/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902030000/tl0902030300/tl0902030303/cm5792531794/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour étudier les fonctions du protocole CDP (Cisco Discovery Protocol). Mettez en pratique l’activation et la désactivation du protocole CDP, de manière globale et par interface. Étudiez les possibilités qu’offre l’utilisation du protocole pour détecter la topologie d’un réseau.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0902030400">
<title><content-text>Utilisation du protocole CDP pour la détection réseau</content-text></title>
<page type="OneColumn" id="tl0902030401">
<content-media type="StaticGraphic" id="cm5259822858"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030400/tl0902030401/cm5259822858.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902030000/tl0902030400/tl0902030401/cm5259822858text.xml"/></content-media>
<content-text><p><b>Commandes </b><span class="cmd"><b>show </b></span><b>CDP</b></p> <p>Les informations collectées par le protocole CDP peuvent être examinées à l’aide de la commande <span class="cmd"><b>show cdp neighbors</b></span>. Pour chaque voisin CDP, les informations suivantes s’affichent :</p> <ul><li> ID du périphérique voisin ;</li> <li> interface locale ;</li> <li> valeur de temps d’attente, en secondes ; </li> <li> code de capacité du périphérique voisin ;</li> <li> plateforme matérielle voisine ; </li> <li> ID du port distant voisin.</li></ul> <p><b>Cliquez sur <span class="cmd">show cdp neighbors detail</span> dans la figure.</b></p> <p>La commande <span class="cmd"><b>show cdp neighbors detail</b></span> indique également l’adresse IP d’un périphérique voisin. Le protocole CDP révèle l’adresse IP du voisin, que vous puissiez lui envoyer ou non une requête ping. Cette commande est très utile lorsque deux routeurs Cisco ne peuvent pas router via leur liaison de données partagée. La commande <span class="cmd"><b>show cdp neighbors detail</b></span> permet de déterminer si l’un des voisins CDP présente une erreur de configuration IP.</p> <p>Pour les situations de détection réseau, connaître l’adresse IP du voisin CDP suffit souvent pour établir une connexion Telnet avec ce périphérique. Avec une session Telnet établie, des informations peuvent être collectées sur les périphériques Cisco voisins directement connectés. Vous pouvez ainsi établir une connexion Telnet sur un réseau et créer une topologie logique. Lors de l’exercice suivant relatif à Packet Tracer, vous effectuerez cette opération.</p> <p><b>Désactivation du protocole CDP</b></p> <p>Le protocole CDP peut-il présenter un risque pour la sécurité ? Oui, c’est possible. Vous avez peut-être déjà vu des paquets CDP lors de vos travaux pratiques de capture de paquets, dans un cours précédent. Certaines versions d’IOS envoyant des annonces CDP par défaut, il est important de savoir comment désactiver le protocole CDP.</p> <p><b>Cliquez sur Désactivation du CDP dans la figure.</b></p> <p>Si vous devez désactiver le protocole CDP pour l’ensemble du périphérique, utilisez la commande suivante :</p> <span class="cmd"><p>Router(config)#<b>no cdp run</b></p></span> <p>Si vous souhaitez utiliser le protocole CDP, mais que vous devez arrêter les annonces CDP sur une interface précise, utilisez la commande suivante :</p> <span class="cmd"><p>Router(config-if)#<b>no cdp enable</b></p></span></content-text>
</page>
<page type="OneColumn" id="tl0902030402">
<content-media type="ActivityPKA" id="cm3840698242"><title><content-text></content-text></title><media ref="tl0902000000/tl0902030000/tl0902030400/tl0902030402/cm3840698242/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902030000/tl0902030400/tl0902030402/cm3840698242/icontext.xml"/></content-media>
<content-text><p>Vous pouvez utiliser les commandes CDP <span class="cmd"><b>show</b></span> pour détecter des informations concernant des périphériques inconnus sur un réseau. Les commandes CDP <span class="cmd"><b>show</b></span> affichent des informations sur les périphériques Cisco connectés directement, y compris une adresse IP pouvant être utilisée pour atteindre le périphérique. Vous pouvez ensuite établir une connexion Telnet avec le périphérique et répéter le processus jusqu’au mappage de la totalité du réseau. </p> <p>Utilisez l’exercice Packet Tracer pour détecter et mapper un réseau inconnu en utilisant le protocole CDP et Telnet.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902040000">
<title><content-text>Routes statiques avec adresses de « tronçon suivant »</content-text></title>
<topic type="" id="tl0902040100">
<title><content-text>Objectif et syntaxe de la commande ip route</content-text></title>
<page type="OneColumn" id="tl0902040101">
<content-media type="StaticGraphic" id="cm3707745981"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040100/tl0902040101/cm3707745981.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040100/tl0902040101/cm3707745981text.xml"/></content-media>
<content-text><p><b>Objectif et syntaxe de la commande ip route</b></p> <p>Comme évoqué précédemment, un routeur peut obtenir des informations sur des réseaux distants de l’une des deux façons suivantes :</p> <ul><li> manuellement, à partir de routes statiques configurées ;</li> <li> automatiquement, à partir d’un protocole de routage dynamique. </li></ul> <p>La suite de ce chapitre porte sur la configuration de routes statiques. Les protocoles de routage dynamique sont traités dans le chapitre suivant.</p> <p><b>Routes statiques</b></p> <p>Les routes statiques sont communément utilisées lors du routage d’un réseau vers un réseau d’extrémité. <b>Un réseau d’extrémité est un réseau accessible par une seule route.</b> Par exemple, dans l’illustration à droite, nous voyons qu’un réseau relié à R1 n’aurait qu’un seul moyen d’atteindre d’autres destinations, qu’il s’agisse de réseaux reliés à R2 ou de destinations au-delà de R2. Par conséquent, le réseau 172.16.3.0 est un réseau d’extrémité et R1 est un routeur d’extrémité. </p> <p>L’exécution d’un protocole de routage entre R1 et R2 est une perte de ressources, car R1 n’a qu’un seul moyen d’envoyer du trafic non local. Les routes statiques sont donc configurées pour la connectivité avec les réseaux distants qui ne sont pas connectés directement à un routeur. En nous référant de nouveau à la figure, nous allons configurer une route statique sur R2 vers le réseau local relié à R1. Nous allons également voir plus loin dans ce chapitre comment configurer une route statique par défaut de R1 à R2, afin que R1 puisse envoyer du trafic vers n’importe quelle destination au-delà de R2.</p></content-text>
</page>
<page type="OneColumn" id="tl0902040102">
<content-media type="StaticGraphic" id="cm1702038481"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040100/tl0902040102/cm1702038481.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040100/tl0902040102/cm1702038481text.xml"/></content-media>
<content-text><p><b>Commande </b><span class="cmd"><b>ip route</b></span></p> <p>La commande à utiliser pour configurer une route statique est <span class="cmd"><b>ip route</b></span>. La syntaxe complète pour configurer une route statique est la suivante :</p> <span class="cmd"><p>Router(config)#<b>ip route prefix mask</b> {<i>ip-address | interface-type interface-number </i>[<i>ip-address</i>]} [<i>distance</i>] [<i>name</i>] [<b>permanent</b>] [<b>tag </b>tag] </p></span> <p>La plupart de ces paramètres n’ont aucune importance pour ce chapitre ou pour vos études CCNA. Comme l’illustre la figure, nous allons utiliser une version simplifiée de la syntaxe :</p> <span class="cmd"><p>Router(config)#<b>ip route </b><i>network-address subnet-mask</i> {<i>ip-address</i> | <i>exit-interface </i>}</p></span> <p>Les paramètres suivants sont utilisés :</p> <ul><li> <span class="cmd"><i>network-address</i></span> : adresse de destination du réseau distant à ajouter à la table de routage.</li> <li> <span class="cmd"><i>subnet-mask</i></span> : masque de sous-réseau du réseau distant à ajouter à la table de routage. Le masque de sous-réseau peut être modifié pour résumer un groupe de réseaux. </li></ul> <p>Un des paramètres suivants ou les deux doivent également être utilisés :</p> <ul><li> <span class="cmd"><i>ip-address</i></span> : appelée communément adresse IP du routeur du tronçon suivant. </li> <li> <span class="cmd"><i>exit-interface</i></span> : interface de sortie utilisée pour transférer des paquets vers le réseau de destination.</li></ul> <p><b>Remarque : </b>le paramètre <span class="cmd"><i>ip-address</i></span> est communément considéré comme l’adresse IP du routeur du « tronçon suivant ». L’adresse IP du routeur du tronçon suivant réel est communément utilisée pour ce paramètre. Toutefois, le paramètre <span class="cmd"><i>ip-address</i></span> peut être n’importe quelle adresse IP, tant qu’elle peut être résolue dans la table de routage. Nous dépassons ici l’objectif de ce cours, mais nous avons ajouté ce point dans un souci de précision technique.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902040200">
<title><content-text>Configuration de routes statiques</content-text></title>
<page type="OneColumn" id="tl0902040201">
<content-media type="InteractiveGraphicHotspots" id="cm8293580789"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040200/tl0902040201/cm8293580789.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040200/tl0902040201/cm8293580789text.xml"/></content-media>
<content-text><p><b>Installation d’une route statique dans la table de routage</b></p> <p>N’oubliez pas que R1 possède des informations sur ses réseaux connectés directement. Il s’agit des routes actuellement présentes dans sa table de routage. Les réseaux distants que R1 <b>ne connaît pas</b> sont les suivants :</p> <ul><li> 172.16.1.0/124 : le réseau local sur R2 ;</li> <li> 192.168.1.0/24 : le réseau série entre R2 et R3 ;</li> <li> 192.168.2.0/24 : le réseau local sur R3.</li></ul> <p><b>Cliquez sur Route statique dans la figure.</b></p> <p>Tout d’abord, activez <span class="cmd"><b>debug ip routing</b></span> pour que l’IOS affiche un message lorsque la nouvelle route est ajoutée à la table de routage. Ensuite, utilisez la commande <span class="cmd"><b>ip route</b></span> pour configurer des routes statiques sur R1 pour chacun de ces réseaux. La figure représente la première route configurée.</p> <span class="cmd"><p>R1#<b>debug ip routing</b></p></span> <span class="cmd"><p>R1#<b>conf t</b></p></span> <span class="cmd"><p>R1(config)#<b>ip route 172.16.1.0 255.255.255.0 172.16.2.2</b></p></span> <p>Analysons chaque élément dans cette sortie :</p> <ul><li> <span class="cmd"><b>ip route</b></span> : commande de route statique ;</li> <li> <span class="cmd"><b>172.16.1.0</b></span> : adresse réseau de réseau distant ;</li> <li> <span class="cmd"><b>255.255.255.0</b></span> : masque de sous-réseau de réseau distant ;</li> <li> <span class="cmd"><b>172.16.2.2</b></span> : adresse IP d’interface Serial 0/0/0 sur le routeur R2, qui représente le « tronçon suivant » de ce réseau.</li></ul> <p>Lorsque l’adresse IP constitue l’adresse IP du routeur de tronçon suivant réelle, cette adresse IP est joignable à partir de l’un des réseaux connectés directement à ce routeur. En d’autres termes, l’adresse IP de tronçon suivant <b>172.16.2.2</b> est sur le réseau <b>172.16.2.0/24</b> Serial 0/0/0 connecté directement au routeur R1.</p> <p><b>Vérification de la route statique</b></p> <p>La sortie de la commande <span class="cmd"><b>debug ip routing</b></span> indique que cette route a été ajoutée à la table de routage. </p> <span class="cmd"><p>00:20:15: RT: <span class="blue">add 172.16.1.0/24 via 172.16.2.2</span>, static metric [1/0]</p></span> <p>Notez dans la figure qu’en entrant <span class="cmd"><b>show ip route</b></span> sur R1, la nouvelle table de routage apparaît. L’entrée de la route statique est mise en surbrillance.</p> <p>Examinons cette sortie :</p> <ul><li> <span class="cmd"><b>S</b></span> : code de la table de routage pour la route statique ;</li> <li> <span class="cmd"><b>172.16.1.0</b></span> : adresse réseau pour la route ;</li> <li><span class="cmd"><b>/24</b></span> : masque de sous-réseau pour cette route (il est affiché dans la ligne de dessus, appelée la route parent, et est traité plus en détail dans le chapitre 8) ;</li> <li> <span class="cmd"><b>[1/0]</b></span> : distance administrative et métrique pour la route statique (expliquées dans un autre chapitre) ;</li> <li> <span class="cmd"><b>via 172.16.2.2</b></span> : adresse IP du routeur de tronçon suivant, l’adresse IP de l’interface Serial 0/0/0 de R2.</li></ul> <p>Tous les paquets dont les 24 bits les plus à gauche de l’adresse IP de destination correspondent à <b>172.16.1.0</b> utilisent cette route.</p></content-text>
</page>
<page type="OneColumn" id="tl0902040202">
<content-media type="StaticGraphic" id="cm2247731259"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040200/tl0902040202/cm2247731259.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040200/tl0902040202/cm2247731259text.xml"/></content-media>
<content-text><p><b>Configuration de routes vers deux réseaux distants supplémentaires</b></p> <p>Les commandes pour configurer les routes pour les deux autres réseaux distants sont illustrées dans la figure. Notez que les trois routes statiques configurées sur R1 ont la même adresse IP de tronçon suivant : 172.16.2.2. En utilisant le schéma de topologie comme référence, nous pouvons constater que c’est le cas car les paquets pour tous les réseaux distants doivent être transférés vers le routeur R2, celui du tronçon suivant.</p> <p>Utilisez à nouveau la commande <span class="cmd"><b>show ip route</b></span> pour analyser les nouvelles routes statiques dans la table de routage, comme illustré.</p> <span class="cmd"><p>S 192.168.1.0/<span class="blue">24 </span>[1/0] via 172.16.2.2</p></span> <span class="cmd"><p>S 192.168.2.0/<span class="blue">24 </span>[1/0] via 172.16.2.2</p></span> <p>Les masques de sous-réseau /24 se trouvent sur la même ligne que l’adresse réseau. Pour le moment, cette différence n’est pas importante. Vous en apprendrez plus à ce sujet dans le chapitre 8, « Table de routage : examen détaillé ».</p> <p><b>Cliquez sur Vérifier la configuration des routes statiques dans la figure.</b></p> <p>Les routes statiques qui ont été configurées peuvent également être vérifiées en analysant la configuration en cours d’exécution à l’aide de la commande <span class="cmd"><b>show running-config</b></span>.</p> <p>Il convient maintenant d’enregistrer la configuration dans la mémoire NVRAM :</p> <span class="cmd"><p>R1#<b>copy running-config startup-config</b></p></span></content-text>
</page>
</topic>
<topic type="" id="tl0902040300">
<title><content-text>Principes de table de routage et routes statiques</content-text></title>
<page type="OneColumn" id="tl0902040301">
<content-media type="StaticGraphic" id="cm5151278335"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040300/tl0902040301/cm5151278335.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040300/tl0902040301/cm5151278335text.xml"/></content-media>
<content-text><p><b>Principes d’une table de routage</b></p> <p>Maintenant que les trois routes statiques sont configurées, pouvez-vous prévoir si les paquets destinés à ces réseaux vont atteindre leur destination ? Les paquets provenant de tous ces réseaux et destinés au réseau 172.16.3.0/24 vont-ils atteindre leur destination ? </p> <p>Voici trois principes de la table de routage, tels qu’ils sont décrits par Alex Zinin dans son livre, <i>Cisco IP Routing</i> (en anglais). </p> <p><b>Principe 1 : « Chaque routeur prend sa décision seul, en se basant sur les informations dont il dispose dans sa propre table de routage. »</b></p> <p>R1 possède trois routes statiques dans sa table de routage et il prend ses décisions de transfert sur la seule base des informations de cette table de routage. R1 ne consulte aucune autre table de routage appartenant à d’autres routeurs. Il ne sait pas non plus si ces routeurs disposent ou non de routes vers d’autres réseaux. Permettre à chaque routeur de reconnaître des réseaux distants relève de la responsabilité de l’administrateur réseau.</p> <p><b>Principe 2 : « Le fait qu’un routeur dispose de certaines informations dans sa table de routage ne signifie pas que d’autres routeurs ont les mêmes informations. »</b></p> <p>R1 ne sait pas quelles sont les informations dont disposent d’autres routeurs dans leur table de routage. Par exemple, R1 a une route vers le réseau 192.168.2.0/24 via le routeur R2. Tous les paquets correspondant à cette route appartiennent au réseau 192.168.2.0/24 et sont transférés au routeur R2. R1 ne sait pas si R2 dispose ou non d’une route vers le réseau 192.168.2.0/24. Une fois encore, c’est l’administrateur réseau qui est chargé de s’assurer que le routeur de tronçon suivant dispose également d’une route vers ce réseau.</p> <p>En utilisant le principe 2, nous devons encore configurer le routage adéquat sur les autres routeurs (R2 et R3) pour garantir qu’ils disposent de routes vers ces trois réseaux. </p> <p><b>Principe 3 : « Les informations de routage concernant un chemin d’un réseau à l’autre ne fournissent aucune information de routage sur le chemin inverse ou de retour. »</b></p> <p>La plupart des communications sur les réseaux sont bidirectionnelles. Cela signifie que les paquets doivent être acheminés dans les deux sens entre les périphériques finaux impliqués. Un paquet émis par PC1 peut atteindre PC3 parce que tous les routeurs impliqués disposent de routes vers le réseau de destination 192.168.2.0/24. Toutefois, les paquets retournés par PC3 vers PC1 atteignent celui-ci si les routeurs impliqués disposent d’une route vers le chemin de retour, à savoir le réseau 172.16.3.0/24 de PC1. </p> <p>En nous conformant au principe 3, nous allons configurer les routes statiques adéquates sur les autres routeurs afin de garantir qu’ils disposent de routes de retour vers le réseau 172.16.3.0/24.</p></content-text>
</page>
<page type="OneColumn" id="tl0902040302">
<content-media type="InteractiveGraphicHotspots" id="cm7642174641"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040300/tl0902040302/cm7642174641.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040300/tl0902040302/cm7642174641text.xml"/></content-media>
<content-text><p><b>Application des principes</b></p> <p>En gardant ces principes à l’esprit, comment répondriez-vous aux questions posées concernant les paquets émis par PC1 ?</p> <p>1. Les paquets émis par PC1 atteindraient-ils leur destination ? </p> <p>Dans ce cas, les paquets destinés aux réseaux 172.16.1.0/24 et 192.168.1.0/24 atteindraient leur destination parce que le routeur R1 dispose d’une route vers ces réseaux via R2. Lorsque les paquets atteignent le routeur R2, ces réseaux sont connectés directement sur R2 et acheminés par le biais de sa table de routage.</p> <p>Les paquets destinés au réseau 192.168.2.0/24 n’atteindraient pas leur destination. R1 dispose d’une route statique vers ce réseau via R2. Toutefois, quand R2 reçoit un paquet, il l’ignore parce que R2 ne dispose pas encore de route pour ce réseau dans sa table de routage.</p> <p>2. Cela signifie-t-il que les paquets provenant de ces réseaux et destinés au réseau 172.16.3.0/24 atteindront leur destination ?</p> <p>Si R2 ou R3 reçoit un paquet destiné au réseau 172.16.3.0/24, le paquet n’atteint pas sa destination parce qu’aucun de ces routeurs ne dispose d’une route vers le réseau 172.16.3.0/24.</p> <p><b>Cliquez sur Routes statiques de R2 et R3 dans la figure.</b></p> <p>Avec les commandes illustrées dans la figure, tous les routeurs disposent maintenant de routes vers tous les réseaux distants. </p> <p><b>Cliquez sur </b><span class="cmd"><b>show ip route</b></span><b> dans la figure.</b></p> <p>Examinons les tables de routage dans la figure pour vérifier que tous les routeurs disposent désormais de routes vers tous les réseaux distants.</p> <p><b>Cliquez sur </b><span class="cmd"><b>ping</b></span><b> dans la figure.</b></p> <p>La connectivité peut être vérifiée plus avant en envoyant une requête ping aux interfaces des routeurs distants à partir du routeur R1, tel qu’illustré dans la figure.</p> <p>La connectivité est désormais complète pour les périphériques de notre topologie. N’importe quel PC d’un réseau local peut désormais accéder aux PC de tous les autres réseaux locaux.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902040400">
<title><content-text>Résolution vers une interface de sortie</content-text></title>
<page type="OneColumn" id="tl0902040401">
<content-media type="StaticGraphic" id="cm8459832998"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040400/tl0902040401/cm8459832998.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040400/tl0902040401/cm8459832998text.xml"/></content-media>
<content-text><p><b>Recherche de route récursive</b></p> <p>Avant qu’un routeur ne transfère un paquet, le processus de la table de routage doit déterminer l’interface de sortie à utiliser pour transférer le paquet. C’est ce que l’on appelle la résolvabilité d’une route. Examinons ce processus en consultant la table de routage pour R1 dans la figure. R1 dispose d’une route statique pour le réseau distant 192.168.2.0/24, qui transfère tous les paquets vers l’adresse IP de tronçon suivant 172.16.2.2. </p> <span class="cmd"><p><b>S 192.168.2.0/24 [1/0] via 172.16.2.2</b></p></span> <p>La recherche d’une route n’est que la première étape du processus de recherche. R1 doit déterminer comment atteindre l’adresse IP de tronçon suivant 172.16.2.2. Il va effectuer une deuxième recherche en quête d’une correspondance pour 172.16.2.2. Dans ce cas, l’adresse IP 172.16.2.2 correspond à la route pour le réseau connecté directement 172.16.2.0/24. </p> <span class="cmd"><p><b>C 172.16.2.0 is directly connected, Serial0/0/0</b></p></span> <p>La route 172.16.2.0 est un réseau connecté directement avec l’interface de sortie Serial 0/0/0. Cette recherche indique au processus de la table de routage que ce paquet va être transféré en sortie avec cette interface. De ce fait, il faut donc deux processus de recherche dans la table de routage pour transférer un paquet vers le réseau 192.168.2.0/24. Lorsque le routeur doit effectuer plusieurs recherches dans la table de routage avant de transférer un paquet, il exécute un processus appelé <i>recherche récursive</i>. Dans cet exemple :</p> <p>1. L’adresse IP de destination du paquet correspond à la route statique 192.168.2.0/24 avec l’adresse IP de tronçon suivant 172.16.2.2.</p> <p>2. L’adresse IP du tronçon suivant pour la route statique, 172.16.2.2, correspond au réseau 172.16.2.0/24 directement connecté à l’interface de sortie Serial 0/0/0.</p>  <p>Pour chaque route qui ne fait référence qu’à une seule adresse IP de tronçon suivant et qui ne fait référence à aucune interface de sortie, l’adresse IP de tronçon suivant doit être résolue à l’aide d’une autre route figurant dans la table de routage et disposant d’une interface de sortie. </p> <p>En général, ces routes sont résolues au moyen de routes qui figurent dans la table de routage et qui sont des réseaux connectés directement, car ces entrées contiennent toujours une interface de sortie. Nous allons voir à la section suivante que les routes statiques peuvent être configurées avec une interface de sortie. Elles n’ont ainsi pas besoin d’être résolues par le biais d’une autre entrée de route.</p></content-text>
</page>
<page type="OneColumn" id="tl0902040402">
<content-media type="StaticGraphic" id="cm6416309300"><title><content-text></content-text></title><media ref="tl0902000000/tl0902040000/tl0902040400/tl0902040402/cm6416309300.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902040000/tl0902040400/tl0902040402/cm6416309300text.xml"/></content-media>
<content-text><p><b>Interface de sortie désactivée</b></p> <p>Envisageons ce qui se passe si une interface de sortie est désactivée. Par exemple, que se passerait-il pour la route statique de R1 vers 192.16.2.0/24 si son interface Serial 0/0/0 était désactivée ? Si la route statique ne peut pas être résolue sur une interface de sortie, Serial 0/0/0 dans le cas présent, la route statique est supprimée de la table de routage. </p> <p>Examinons ce processus avec la commande <span class="cmd"><b>debug ip routing</b></span> sur R1, puis configurons l’interface Serial 0/0/0 sur <span class="cmd"><b>shutdown</b></span>, tel qu’illustré. </p> <p>Notez d’après la sortie du débogage que les trois routes statiques ont été supprimées lorsque l’interface Serial 0/0/0 a été désactivée. Elles ont été supprimées parce qu’elles étaient toutes trois résolues sur Serial 0/0/0. Toutefois, les routes statiques existent toujours dans la configuration en cours de R1. Si l’interface est rétablie (réactivée à l’aide de la commande <span class="cmd"><b>no shutdown</b></span>), le processus de la table de routage d’IOS réinstalle ces routes statiques dans la table de routage. </p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902050000">
<title><content-text>Routes statiques dotées d’interfaces de sortie</content-text></title>
<topic type="" id="tl0902050100">
<title><content-text>Configuration d’une interface de sortie pour une route statique</content-text></title>
<page type="OneColumn" id="tl0902050101">
<content-media type="StaticGraphic" id="cm9764670292"><title><content-text></content-text></title><media ref="tl0902000000/tl0902050000/tl0902050100/tl0902050101/cm9764670292.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902050000/tl0902050100/tl0902050101/cm9764670292text.xml"/></content-media>
<content-text><p><b>Configuration d’une interface de sortie pour une route statique</b></p> <p>Étudions une autre méthode de configuration des mêmes routes statiques. Actuellement, la route statique de R1 pour le réseau 192.168.2.0/24 est configurée avec l’adresse IP de tronçon suivant 172.16.2.2. Dans la configuration en cours, notez la ligne suivante : </p> <span class="cmd"><p><b>ip route 192.168.2.0 255.255.255.0 172.16.2.2</b></p></span> <p>Comme nous l’avons vu dans la section précédente, cette route statique nécessite une deuxième recherche dans la table de routage pour résoudre l’adresse IP de tronçon suivant 172.16.2.2 sur une interface de sortie. Toutefois, une interface de sortie peut être configurée sur la plupart des routes statiques ; la table de routage peut alors résoudre l’interface de sortie en une seule recherche au lieu de deux. </p></content-text>
</page>
<page type="OneColumn" id="tl0902050102">
<content-media type="StaticGraphic" id="cm8438402046"><title><content-text></content-text></title><media ref="tl0902000000/tl0902050000/tl0902050100/tl0902050102/cm8438402046.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902050000/tl0902050100/tl0902050102/cm8438402046text.xml"/></content-media>
<content-text><p><b>Route statique et interface de sortie</b></p> <p>Reconfigurons à présent cette route statique pour utiliser une interface de sortie au lieu d’une adresse IP de tronçon suivant. La première chose à faire consiste à supprimer la route statique actuelle à l’aide de la commande <span class="cmd"><b>no ip route</b></span>, tel qu’illustré dans la figure.</p> <p>Configurez ensuite la route statique de R1 sur <b>192.168.2.0/24</b> en utilisant l’interface de sortie Serial 0/0/0.</p> <p>Puis utilisez la commande <span class="cmd"><b>show ip route</b></span> pour examiner la modification dans la table de routage. Notez que l’entrée dans la table de routage ne fait plus référence à l’adresse IP de tronçon suivant, mais directement à l’interface de sortie. Cette interface de sortie est la même que celle sur laquelle la route statique était résolue lorsqu’elle utilisait l’adresse IP de tronçon suivant. </p> <span class="cmd"><p><b>S 192.168.2.0/24 </b><b><span class="blue">is directly connected, Serial0/0/0</span></b></p></span> <p>Maintenant, lorsque le processus de table de routage dispose d’une correspondance pour un paquet et cette route statique, il est en mesure de résoudre la route vers une interface de sortie en une recherche unique. Tel qu’illustré dans la figure, les deux autres routes statiques doivent encore être traitées en deux étapes, pour une résolution vers la même interface Serial 0/0/0.</p> <p><b>Remarque : </b>la route statique affiche la route comme <b>connectée directement</b>. Il est important de comprendre que cela ne signifie pas que cette route est un réseau ou une route connecté(e) directement. Cette route demeure une route statique. L’importance de ce fait est examinée à la section du prochain chapitre concernant les distances administratives. Cet examen va nous montrer notamment que ce type de route statique a toujours une distance administrative de « 1 ». Pour le moment, notez simplement que cette route est toujours une route statique avec une distance administrative de « 1 » et qu’elle n’est pas un réseau connecté directement.</p> <p><b>Routes statiques et réseaux point à point</b></p> <p>Les routes statiques configurées avec des interfaces de sortie et non avec des adresses IP de tronçon suivant sont idéales pour la plupart des réseaux série point à point. Les réseaux point à point utilisant des protocoles comme HDLC et PPP ne se servent pas de l’adresse IP de tronçon suivant pour le processus de transfert de paquets. Le paquet IP acheminé est encapsulé dans une trame de couche 2 HDLC avec une adresse de diffusion comme adresse de destination de couche 2. </p> <p>Ces types de liaisons série point à point sont comme des tuyaux. Un tuyau n’a que deux extrémités. Ce qui entre par une extrémité n’a qu’une seule destination : l’autre extrémité du tuyau. Les paquets envoyés via l’interface Serial 0/0/0 de R1 ne peuvent avoir qu’une seule destination : l’interface Serial 0/0/0 de R2. L’interface série de R2 s’avère être l’adresse IP 172.16.2.2. </p> <p><b>Remarque :</b> dans certaines situations, l’administrateur réseau ne veut pas configurer la route statique avec une interface de sortie, mais avec l’adresse IP de tronçon suivant. Ce type de situation dépasse le cadre de ce cours, mais il est important de le noter.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902050200">
<title><content-text>Modification des routes statiques</content-text></title>
<page type="OneColumn" id="tl0902050201">
<content-media type="StaticGraphic" id="cm4808586953"><title><content-text></content-text></title><media ref="tl0902000000/tl0902050000/tl0902050200/tl0902050201/cm4808586953.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902050000/tl0902050200/tl0902050201/cm4808586953text.xml"/></content-media>
<content-text><p><b>Modification des routes statiques</b></p> <p>Parfois, une route statique précédemment configurée doit être modifiée :</p> <ul><li> Le réseau de destination n’existe plus et la route statique doit donc être supprimée.</li> <li> La topologie a été modifiée et l’adresse intermédiaire ou l’interface de sortie doit être modifiée. </li></ul> <p>Il n’existe aucun moyen de modifier une route statique existante. La route statique doit être supprimée et une nouvelle route doit être configurée. </p> <p>Pour supprimer une route statique, ajoutez <span class="cmd"><b>no</b></span> devant la commande <span class="cmd"><b>ip route</b></span>, puis le reste de la route statique à supprimer.</p> <p>À la section précédente, nous avions la route statique suivante :</p> <span class="cmd"><p><b>ip route 192.168.2.0 255.255.255.0 172.16.2.2</b></p></span> <p>Nous pouvons supprimer cette route statique à l’aide de la commande <span class="cmd"><b>no ip route</b></span> :</p> <span class="cmd"><p><b>no ip route 192.168.2.0 255.255.255.0 172.16.2.2</b></p></span> <p>N’oubliez pas que nous avons supprimé la route statique parce que nous souhaitions la modifier pour utiliser une interface de sortie au lieu d’une adresse IP de tronçon suivant. Nous avons configuré une nouvelle route statique à l’aide de l’interface de sortie :</p> <span class="cmd"><p>R1(config)#<b>ip route 192.168.2.0 255.255.255.0 </b><b><span class="blue">serial 0/0/0</span></b></p></span> <p>Pour le processus de recherche de table de routage, il est plus efficace de disposer de routes statiques avec des interfaces de sortie, au moins pour des réseaux sortants de point à point en série. Reconfigurons le reste des routes statiques sur R1, R2 et R3 pour utiliser des interfaces de sortie.</p> <p>Comme l’illustre la figure, chaque fois que nous supprimons une route, nous configurons une nouvelle route vers le même réseau en utilisant une interface de sortie.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902050300">
<title><content-text>Vérification de la configuration d’une route statique</content-text></title>
<page type="OneColumn" id="tl0902050301">
<content-media type="InteractiveGraphicHotspots" id="cm5446374560"><title><content-text></content-text></title><media ref="tl0902000000/tl0902050000/tl0902050300/tl0902050301/cm5446374560.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902050000/tl0902050300/tl0902050301/cm5446374560text.xml"/></content-media>
<content-text><p><b>Vérification de la configuration d’une route statique</b></p> <p>Quelles que soient les modifications apportées aux routes statiques ou à d’autres aspects du réseau, vérifiez que ces modifications ont pris effet et qu’elles produisent les résultats escomptés.</p> <p><b>Vérification des modifications apportées à une route statique</b></p> <p>À la section précédente, nous avons supprimé et reconfiguré les routes statiques pour les trois routeurs. N’oubliez pas que la configuration en cours contient la configuration actuelle du routeur, à savoir les commandes et paramètres utilisés actuellement par le routeur. Vérifiez vos modifications en examinant la configuration en cours. La figure affiche les parties de chaque configuration en cours d’exécution de routeur qui indique la route statique actuelle.</p> <p><b>Cliquez sur </b><span class="cmd"><b>show ip route</b></span><b> dans la figure.</b></p> <p>Cette figure affiche la table de routage pour l’ensemble des trois routeurs. Notez que des routes statiques avec des interfaces de sortie ont été ajoutées à la table de routage et que les routes statiques précédentes avec des adresses de tronçon suivant ont été supprimées.</p> <p><b>Cliquez sur </b><span class="cmd"><b>ping</b></span><b> dans la figure.</b></p> <p>Le test le plus fiable consiste à router des paquets depuis la source vers la destination. À l’aide de la commande <span class="cmd"><b>ping</b></span>, nous pouvons vérifier que les paquets de chaque routeur atteignent leur destination et que le chemin de retour fonctionne correctement lui aussi. Cette figure illustre des sorties de requêtes ping qui ont abouti.</p></content-text>
</page>
<page type="OneColumn" id="tl0902050302">
<content-media type="ActivityPKA" id="cm9988989788"><title><content-text></content-text></title><media ref="tl0902000000/tl0902050000/tl0902050300/tl0902050302/cm9988989788/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902050000/tl0902050300/tl0902050302/cm9988989788/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour mettre en pratique la suppression et la reconfiguration de routes statiques en utilisant l’argument de l’interface de sortie. Vérifiez ensuite la nouvelle configuration et testez la connectivité.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0902050400">
<title><content-text>Routes statiques dotées d’interfaces Ethernet</content-text></title>
<page type="OneColumn" id="tl0902050401">
<content-media type="StaticGraphic" id="cm9316366598"><title><content-text></content-text></title><media ref="tl0902000000/tl0902050000/tl0902050400/tl0902050401/cm9316366598.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902050000/tl0902050400/tl0902050401/cm9316366598text.xml"/></content-media>
<content-text><p><b>Interfaces Ethernet et protocole ARP</b></p> <p>Parfois, l’interface de sortie est un réseau Ethernet. </p> <p>Supposons que la liaison réseau entre R1 et R2 soit une liaison Ethernet et que l’interface FastEthernet 0/1 de R1 soit connectée à ce réseau, tel qu’illustré dans la figure. Une route statique, qui utilise une adresse IP de tronçon suivant pour le réseau 192.168.2.0/24, peut être définie à l’aide de la commande suivante :</p> <span class="cmd"><p>R1(config)#<b>ip route 192.168.2.0 255.255.255.0 172.16.2.2</b></p></span> <p>Comme nous l’avons vu à la section précédente, « Configuration d’une interface Ethernet », le paquet IP doit être encapsulé dans une trame Ethernet avec une adresse MAC de destination Ethernet. Si le paquet doit être envoyé à un routeur de tronçon suivant, l’adresse MAC de destination est l’adresse de l’interface Ethernet du routeur de tronçon suivant. Dans ce cas, l’adresse MAC de destination Ethernet est mise en correspondance avec l’adresse IP de tronçon suivant, 172.16.2.2. R1 recherche dans son tableau ARP de l’interface FastEthernet 0/1 une entrée avec 172.16.2.2 et une adresse MAC correspondante. </p> <p><b>Envoi d’une requête ARP</b></p> <p>Si cette entrée ne figure pas dans le tableau ARP, R1 envoie une requête ARP via son interface FastEthernet 0/1. Selon les exigences de la diffusion de couche 2, si un périphérique a l’adresse IP 172.16.2.2, il doit répondre avec son adresse MAC. Comme l’interface FastEthernet 0/1 de R2 a l’adresse IP 172.16.2.2, elle renvoie une réponse ARP avec l’adresse MAC pour cette interface.</p> <p>R1 reçoit la réponse ARP et ajoute l’adresse IP 172.16.2.2, ainsi que l’adresse MAC associée, à son tableau ARP. Le paquet IP est désormais encapsulé dans une trame Ethernet avec l’adresse MAC de destination trouvée dans le tableau ARP. La trame Ethernet avec le paquet encapsulé est ensuite envoyée en sortie via l’interface FastEthernet 0/1 vers le routeur R2.</p></content-text>
</page>
<page type="OneColumn" id="tl0902050402">
<content-media type="StaticGraphic" id="cm4941855589"><title><content-text></content-text></title><media ref="tl0902000000/tl0902050000/tl0902050400/tl0902050402/cm4941855589.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902050000/tl0902050400/tl0902050402/cm4941855589text.xml"/></content-media>
<content-text><p><b>Routes statiques et interfaces de sortie Ethernet</b></p> <p>Configurons à présent une route statique avec une interface de sortie Ethernet au lieu d’une adresse IP de tronçon suivant. Modifiez la route statique pour que 192.168.2.0/24 utilise une interface de sortie à l’aide de la commande suivante :</p> <span class="cmd"><p>R1(config)#<b>ip route 192.168.2.0 255.255.255.0 fastethernet 0/1</b></p></span> <p>La différence entre un réseau Ethernet et un réseau série point à point repose sur le fait qu’un réseau point à point n’a qu’un seul autre périphérique sur ce réseau : le routeur à l’autre extrémité de la liaison. Avec les réseaux Ethernet, de nombreux périphériques différents peuvent partager le même réseau à accès multiple, y compris des hôtes et même plusieurs routeurs. En désignant seulement l’interface de sortie Ethernet dans la route statique, le routeur n’a pas assez d’informations pour déterminer le périphérique de tronçon suivant. </p> <p>R1 sait que le paquet doit être encapsulé dans une trame Ethernet et envoyé en sortie via l’interface FastEthernet 0/1. Toutefois, R1 ne connaît pas l’adresse IP de tronçon suivant et ne peut donc pas déterminer l’adresse MAC de destination pour la trame Ethernet.</p> <p>En fonction de la topologie et des configurations sur les autres routeurs, cette route statique peut fonctionner ou ne pas fonctionner. Nous n’allons pas entrer dans les détails ici, mais il est recommandé de ne pas utiliser uniquement l’interface de sortie dans une route statique lorsque cette interface est un réseau Ethernet. </p> <p>Une question peut se poser : existe-t-il un moyen de configurer une route statique sur un réseau Ethernet pour qu’elle n’ait pas à utiliser la recherche récursive de l’adresse IP de tronçon suivant ? Oui, c’est possible en configurant la route statique pour inclure à la fois l’interface de sortie et l’adresse IP de tronçon suivant. </p> <p>Comme l’illustre la figure, l’interface de sortie serait FastEthernet 0/1 et l’adresse IP de tronçon suivant serait 172.16.2.2.</p> <span class="cmd"><p>R1(config)#<b>ip route 192.168.2.0 255.255.255.0 fastethernet 0/1 172.16.2.2</b></p></span> <p>L’entrée de la table de routage pour cette route serait la suivante :</p> <span class="cmd"><p><b>S 192.168.2.0/24 [1/0] via 172.16.2.2 FastEthernet0/1</b></p></span> <p>Le processus de la table de routage ne doit effectuer qu’une seule recherche pour obtenir l’interface de sortie et l’adresse IP de tronçon suivant.</p> <p><b>Avantages de l’utilisation d’une interface de sortie avec les routes statiques</b></p> <p>L’utilisation d’interfaces de sortie dans des routes statiques pour les réseaux sortants Ethernet et série point à point présente un avantage. Le processus de la table de routage ne doit effectuer qu’une seule recherche pour trouver l’interface de sortie, sans deuxième recherche pour résoudre une adresse de tronçon suivant.</p> <p>Pour les routes statiques avec des réseaux série sortants point à point, mieux vaut configurer les routes statiques uniquement avec l’interface de sortie. Pour les interfaces série point à point, l’adresse de tronçon suivant dans la table de routage n’est jamais utilisée par la procédure de livraison de paquets, elle n’est donc pas nécessaire. </p> <p>Pour les routes statiques avec des réseaux Ethernet sortants, mieux vaut configurer les routes statiques avec à la fois l’adresse de tronçon suivant et l’interface de sortie.</p> <p><b>Remarque : </b>pour plus d’informations sur les problèmes pouvant survenir avec les routes statiques utilisant uniquement une interface de sortie Ethernet ou FastEthernet, consultez le livre <i>Cisco IP Routing</i> d’Alex Zinin (en anglais).</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902060000">
<title><content-text>Routes statiques résumées et par défaut</content-text></title>
<topic type="" id="tl0902060100">
<title><content-text>Routes statiques résumées</content-text></title>
<page type="OneColumn" id="tl0902060101">
<content-media type="InteractiveGraphicHotspots" id="cm8063643556"><title><content-text></content-text></title><media ref="tl0902000000/tl0902060000/tl0902060100/tl0902060101/cm8063643556.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902060000/tl0902060100/tl0902060101/cm8063643556text.xml"/></content-media>
<content-text><p><b>Résumé des routes pour réduire la taille de la table de routage</b></p> <p>La création de tables de routage moins volumineuses permet d’optimiser le processus de recherche dans la table de routage parce qu’il y a moins de routes à rechercher. Si une seule route statique peut être utilisée au lieu de plusieurs routes statiques, la taille de la table de routage est réduite. Souvent, une seule route statique peut être utilisée pour représenter des dizaines, des centaines, voire des milliers de routes.</p> <p>Nous pouvons utiliser une seule adresse réseau pour représenter plusieurs sous-réseaux. Par exemple, les réseaux 10.0.0.0/16, 10.1.0.0/16, 10.2.0.0/16, 10.3.0.0/16, 10.4.0.0/16, 10.5.0.0/16, et ainsi de suite jusqu’à 10.255.0.0/16, peuvent être représentés par une seule adresse réseau : 10.0.0.0/8.</p> <p><b>Résumé de routage</b></p> <p>Plusieurs routes statiques peuvent être résumées en une seule route statique si :</p> <ul><li> les réseaux de destination peuvent être résumés dans une adresse réseau unique ; </li> <li> les multiples routes statiques utilisent toutes la même interface de sortie ou adresse IP de tronçon suivant. </li></ul> <p>Il s’agit d’un <content-link target="cg3862210443" type="glossary">résumé de routage</content-link>.</p> <p>Dans notre exemple, le routeur R3 possède trois routes statiques. Les trois routes transfèrent du trafic vers la même interface Serial0/0/1. Les trois routes statiques sur le routeur R3 sont les suivantes :</p> <span class="cmd"><p><b>ip route 172.16.1.0 255.255.255.0 Serial0/0/1</b></p></span> <span class="cmd"><p><b>ip route 172.16.2.0 255.255.255.0 Serial0/0/1</b></p></span> <span class="cmd"><p><b>ip route 172.16.3.0 255.255.255.0 Serial0/0/1</b></p></span> <p>Si possible, nous souhaiterions résumer l’ensemble de ces routes dans une route statique unique. 172.16.1.0/24, 172.16.2.0/24 et 172.16.3.0/24 peuvent être résumées vers le réseau 172.16.0.0/22. Les trois routes utilisant la même interface de sortie, elles peuvent être résumées vers le réseau unique 172.16.0.0 255.255.252.0 et nous pouvons créer un seul résumé de routage.</p> <p><b>Calcul d’un résumé de routage</b></p> <p>Voici le processus de création du résumé de routage 172.16.0.0/22, tel qu’illustré dans la figure :</p> <p>1. Répertoriez les réseaux à résumer en format binaire. </p> <p>2. Pour trouver le masque de sous-réseau pour le résumé, commencez par le bit le plus à gauche. </p> <p>3. Progressez vers la droite, en recherchant tous les bits qui correspondent consécutivement.</p> <p>4. Lorsque vous rencontrez une colonne dont les bits <i>ne</i> correspondent <i>plus</i>, arrêtez-vous. Vous êtes à la limite du résumé. </p> <p>5. À présent, comptez le nombre de bits correspondants les plus à gauche, 22 dans notre exemple. Ce nombre devient votre masque de sous-réseau pour la route résumée, /22 ou 255.255.252.0.</p> <p>6. Pour rechercher l’adresse réseau pour le résumé, copiez les 22 bits correspondants et ajoutez tous les bits 0 à la fin pour obtenir 32 bits.</p> <p>En suivant ces étapes, nous découvrons que les trois routes statiques sur R3 peuvent être résumées en une seule route statique, en utilisant l’adresse réseau résumée, 172.16.0.0 255.255.252.0 :</p> <span class="cmd"><p><b>ip route 172.16.0.0 255.255.252.0 Serial0/0/1</b></p></span> <p></p></content-text>
</page>
<page type="OneColumn" id="tl0902060102">
<content-media type="InteractiveGraphicHotspots" id="cm8842667530"><title><content-text></content-text></title><media ref="tl0902000000/tl0902060000/tl0902060100/tl0902060102/cm8842667530.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902060000/tl0902060100/tl0902060102/cm8842667530text.xml"/></content-media>
<content-text><p><b>Configuration d’un <content-link target="cg7394034673" type="glossary">résumé du routage</content-link></b></p> <p>Pour implémenter un résumé de routage, nous devons préalablement supprimer les trois routes statiques actuelles :</p> <span class="cmd"><p>R3(config)#<b>no ip route 172.16.1.0 255.255.255.0 serial0/0/1</b></p></span> <span class="cmd"><p>R3(config)#<b>no ip route 172.16.2.0 255.255.255.0 serial0/0/1</b></p></span> <span class="cmd"><p>R3(config)#<b>no ip route 172.16.3.0 255.255.255.0 serial0/0/1</b></p></span> <p>Ensuite, nous allons configurer le résumé du routage statique :</p> <span class="cmd"><p>R3(config)#<b>ip route 172.16.0.0 255.255.252.0 serial0/0/1</b></p></span> <p><b>Cliquez sur Effet du résumé de routage dans la figure.</b></p> <p>Pour vérifier la nouvelle route statique, analysez la table de routage du routeur R3 à l’aide de la commande <span class="cmd">show ip route</span>, comme illustré :</p> <span class="cmd"><p>172.16.0.0/<span class="blue">22 </span>is subnetted, 1 subnets</p></span> <span class="cmd"><p><span class="blue">S 172.16.0.0 is directly connected, Serial0/0/1</span></p></span> <p>Avec ce résumé de routage, l’adresse IP de destination d’un paquet a juste besoin de correspondre aux 22 bits les plus à gauche de l’adresse réseau 172.16.0.0. N’importe quel paquet avec une adresse IP de destination qui appartient au réseau 172.16.1.0/24, 172.16.2.0/24 ou 172.16.3.0/24 correspond à ce résumé de routage.</p> <p><b>Cliquez sur Vérifier le résumé du routage dans la figure.</b></p> <p>Comme l’illustre la figure, nous pouvons tester la reconfiguration à l’aide de la commande <span class="cmd"><b>ping</b></span>. Vérifions que nous disposons toujours de la connectivité adéquate sur l’ensemble du réseau.</p> <p><b>Remarque :</b> depuis mars 2007, il y a plus de 200 000 routes dans les principaux routeurs Internet. La plupart d’entre elles sont des résumés de routage.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902060200">
<title><content-text>Route statique par défaut</content-text></title>
<page type="OneColumn" id="tl0902060201">
<content-media type="StaticGraphic" id="cm7376673512"><title><content-text></content-text></title><media ref="tl0902000000/tl0902060000/tl0902060200/tl0902060201/cm7376673512.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902060000/tl0902060200/tl0902060201/cm7376673512text.xml"/></content-media>
<content-text><p><b>Correspondance la plus précise</b></p> <p>L’adresse IP de destination d’un paquet peut correspondre à plusieurs routes dans la table de routage. Si, par exemple, nous possédions les deux routes statiques suivantes dans la table de routage :</p> <span class="cmd"><p>172.16.0.0/<span class="blue">24 </span>is subnetted, 3 subnets</p></span> <span class="cmd"><p><span class="blue">S 172.16.1.0</span> is directly connected, Serial0/0/0 and</p></span> <span class="cmd"><p><span class="blue">S 172.16.0.0/16</span> is directly connected, Serial0/0/1</p></span> <p>Supposons qu’il existe un paquet avec l’adresse IP de destination 172.16.1.10. Cette adresse IP correspond aux deux routes. Le processus de recherche dans la table de routage utilise alors la correspondance la plus précise. 24 bits correspondent à la route 172.16.1.0/24, mais seuls 16 bits de la route 172.16.0.0/16 correspondent. De ce fait, la route statique avec la correspondance sur 24 bits est utilisée. C’est la correspondance la plus longue. Le paquet est ensuite encapsulé dans une trame de couche 2 et envoyé via l’interface Serial 0/0/0. N’oubliez pas que le masque de sous-réseau dans l’entrée de route permet de déterminer le nombre de bits devant correspondre à l’adresse IP de destination du paquet, pour que cette route soit une correspondance.</p> <p><b>Remarque :</b> ce processus est le même pour toutes les routes de la table de routage, y compris les routes statiques, les routes apprises d’un protocole de routage et les réseaux connectés directement. Le processus de recherche dans la table de routage est expliqué plus en détail dans un chapitre ultérieur.</p> <p>La route statique par défaut correspond à tous les paquets</p> <p>Une route statique par défaut est une route qui correspond à tous les paquets. Les routes statiques par défaut sont utilisées :</p> <ul><li> Quand aucune autre route de la table de routage ne correspond à l’adresse IP de destination du paquet, en d’autres termes, en l’absence d’une correspondance plus spécifique. Elles sont couramment utilisées lors de la connexion d’un routeur de périphérie d’une société au réseau ISP.</li> <li> Lorsqu’un routeur n’est connecté qu’à un seul autre routeur. Ce cas est appelé « routeur d’extrémité ». </li></ul> <p><b>Configuration d’une route statique par défaut</b></p> <p>La syntaxe pour une route statique par défaut est similaire à toute autre route statique, à l’exception du fait que l’adresse réseau est 0.0.0.0 et que le masque de sous-réseau est 0.0.0.0 :</p> <span class="cmd"><p>Router(config)#<b>ip route 0.0.0.0 0.0.0.0</b> [<b>exit-interface</b> | <b>ip-address</b> ]</p></span> <p>L’adresse et le masque réseau <span class="cmd">0.0.0.0 0.0.0.0</span> sont appelés route « à quatre zéros ». </p> <p>R1 est un routeur d’extrémité. Il est connecté uniquement à R2. Actuellement, R1 a trois routes statiques, utilisées pour atteindre tous les réseaux distants dans notre topologie. Les trois routes statiques ont l’interface de sortie Serial 0/0/0, qui transfère les paquets vers le routeur de tronçon suivant R2. </p> <p>Les trois routes statiques sur le routeur R1 sont les suivantes :</p> <span class="cmd"><p><b>ip route 172.16.1.0 255.255.255.0 serial 0/0/0</b></p></span> <span class="cmd"><p><b>ip route 192.168.1.0 255.255.255.0 serial 0/0/0</b></p></span> <span class="cmd"><p><b>ip route 192.168.2.0 255.255.255.0 serial 0/0/0</b></p></span> <p>Le routeur R1 constitue un candidat idéal pour que toutes ses routes statiques soient remplacées par une route unique par défaut. Tout d’abord, supprimez les trois routes statiques :</p> <span class="cmd"><p>R1(config)#<b>no ip route 172.16.1.0 255.255.255.0 serial 0/0/0</b></p></span> <span class="cmd"><p>R1(config)#<b>no ip route 192.168.1.0 255.255.255.0 serial 0/0/0</b></p></span> <span class="cmd"><p>R1(config)#<b>no ip route 192.168.2.0 255.255.255.0 serial 0/0/0</b></p></span> <p>Ensuite, configurez la route statique par défaut unique à l’aide de la même interface de sortie Serial 0/0/0 que les trois routes statiques précédentes :</p> <span class="cmd"><p>R1(config)#<b>ip route 0.0.0.0 0.0.0.0 serial 0/0/0</b></p></span></content-text>
</page>
<page type="OneColumn" id="tl0902060202">
<content-media type="StaticGraphic" id="cm5763692333"><title><content-text></content-text></title><media ref="tl0902000000/tl0902060000/tl0902060200/tl0902060202/cm5763692333.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902060000/tl0902060200/tl0902060202/cm5763692333text.xml"/></content-media>
<content-text><p><b>Vérification d’une route statique par défaut</b></p> <p>Vérifiez la modification apportée à la table de routage à l’aide de la commande <span class="cmd">show ip route</span>, tel qu’illustré dans la figure :</p> <span class="cmd"><p><b>S* 0.0.0.0/0 is directly connected, Serial0/0/0</b></p></span> <p>Notez l’astérisque <b>*</b> en regard du <b>S</b>. Comme vous pouvez le voir dans le tableau des <b>Codes</b> de la figure, l’astérisque indique que cette route statique est une route <b>candidate par défaut (candidate default)</b>. C’est pourquoi elle est qualifiée de route « statique par défaut ». Nous allons voir dans les chapitres suivants qu’une route « par défaut » n’est pas toujours obligatoirement une route « statique ». </p> <p>L’élément essentiel de cette configuration est le masque <span class="cmd"><b>/0</b></span>. Nous avons indiqué précédemment que c’est le masque de sous-réseau dans la table de routage qui détermine le nombre de bits de correspondance entre l’adresse IP de destination du paquet et la route de la table de routage. Un masque /0 indique que zéro (aucun) bit n’est nécessaire pour la correspondance. En l’absence d’une correspondance plus précise, la route statique par défaut correspond à tous les paquets.</p> <p><b>Les routes par défaut sont très courantes sur les routeurs.</b> Plutôt que de devoir stocker des routes pour tous les réseaux sur Internet, les routeurs peuvent stocker une seule route par défaut pour représenter n’importe quel réseau absent de la table de routage. Ce sujet est traité plus en détail dans la section sur les protocoles de routage dynamique. </p></content-text>
</page>
<page type="OneColumn" id="tl0902060203">
<content-media type="ActivityPKA" id="cm4520039658"><title><content-text></content-text></title><media ref="tl0902000000/tl0902060000/tl0902060200/tl0902060203/cm4520039658/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902060000/tl0902060200/tl0902060203/cm4520039658/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour mettre en pratique la configuration des résumés du routage et des routes par défaut. Vérifiez ensuite la nouvelle configuration en testant la connectivité.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902070000">
<title><content-text>Gestion et dépannage de routes statiques</content-text></title>
<topic type="" id="tl0902070100">
<title><content-text>Routes statiques et transfert de paquets</content-text></title>
<page type="OneColumn" id="tl0902070101">
<content-media type="AnimationPartialScreen" id="cm4895681103"><title><content-text></content-text></title><media ref="tl0902000000/tl0902070000/tl0902070100/tl0902070101/cm4895681103.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902070000/tl0902070100/tl0902070101/cm4895681103text.xml"/></content-media>
<content-text><p><b>Routes statiques et transfert de paquets</b></p> <p>L’exemple suivant illustre le processus de transfert de paquets avec des routes statiques. Comme le montre l’animation, PC1 envoie un paquet à PC3 :</p> <p>1. Le paquet arrive sur l’interface FastEthernet 0/0 de R1.</p> <p>2. R1 n’a pas de route spécifique vers le réseau de destination, 192.168.2.0/24 ; par conséquent, R1 utilise la route statique par défaut.</p> <p>3. R1 encapsule le paquet dans une nouvelle trame. Comme la liaison vers R2 est une liaison point à point, R1 ajoute une adresse composée uniquement de 1 pour l’adresse de destination de couche 2.</p> <p>4. La trame est transférée vers l’interface Serial 0/0/1. Le paquet arrive sur l’interface Serial 0/0/0 sur R2.</p> <p>5. R2 décapsule la trame et recherche une route vers la destination. R2 dispose d’une route statique vers 192.168.2.0/24 via l’interface Serial 0/0/1.</p> <p>6. R2 encapsule le paquet dans une nouvelle trame. Comme la liaison vers R3 est une liaison point à point, R2 ajoute une adresse composée uniquement de 1 pour l’adresse de destination de couche 2.</p> <p>7. La trame est transférée vers l’interface Serial 0/0/1. Le paquet arrive sur l’interface Serial 0/0/1 sur R3.</p> <p>8. R3 décapsule la trame et recherche une route vers la destination. R3 dispose d’une route connectée à 192.168.2.0/24 via FastEthernet 0/1.</p> <p>9. R3 recherche l’entrée du tableau ARP pour 192.168.2.10, afin de trouver l’adresse MAC de couche 2 pour l’ordinateur PC3.</p> <p> a. Si aucune entrée n’existe, R3 envoie une requête ARP vers FastEthernet 0/0.</p> <p> b. L’ordinateur PC3 renvoie une réponse ARP incluant l’adresse MAC de PC3.</p> <p>10. R3 encapsule le paquet dans une nouvelle trame avec l’adresse MAC de l’interface FastEthernet 0/0 comme adresse source de couche 2 et l’adresse MAC de PC3 comme adresse MAC de destination.</p> <p>11. La trame est transférée vers l’interface FastEthernet 0/0. Le paquet arrive sur l’interface de la carte réseau de PC3.</p> <p>Ce processus est identique à celui développé au chapitre 1. Comme nous l’avons expliqué dans le chapitre 1, vous devez être capable de décrire ce processus en détail. Savoir comment un routeur effectue ses deux fonctions de base (détermination du chemin et transfert de paquets) est indispensable à toute discussion sur le routage. Dans les travaux pratiques 2.8.1, « Configuration de base d’une route statique », vous avez la possibilité d’appliquer vos connaissances du processus de détermination du chemin et de transfert de paquets.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902070200">
<title><content-text>Dépannage d’une route manquante</content-text></title>
<page type="OneColumn" id="tl0902070201">
<content-media type="StaticGraphic" id="cm1421063275"><title><content-text></content-text></title><media ref="tl0902000000/tl0902070000/tl0902070200/tl0902070201/cm1421063275.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902070000/tl0902070200/tl0902070201/cm1421063275text.xml"/></content-media>
<content-text><p><b>Dépannage d’une route manquante</b></p> <p>Les réseaux sont soumis à de nombreuses forces différentes susceptibles d’entraîner assez fréquemment la modification de leur état :</p> <ul><li> Une interface est désactivée. </li> <li> Un fournisseur de services perd une connexion.</li> <li> Les liaisons affichent une sursaturation.</li> <li> Un administrateur entre une configuration erronée.</li></ul> <p>Lorsqu’un réseau subit une modification, la connectivité risque d’être perdue. En tant qu’administrateur réseau, vous êtes seul responsable de l’identification et de la résolution du problème.</p> <p>Quelles étapes pouvez-vous suivre ? </p> <p>Vous devez à présent bien connaître certains outils pouvant vous aider à isoler les problèmes de routage. Répertoriés dans la figure, ils incluent : </p> <span class="cmd"><p><b>ping</b></p></span> <span class="cmd"><p><b>traceroute</b></p></span> <span class="cmd"><p><b>show ip route</b></p></span> <p>Bien que nous n’ayons pas encore utilisé traceroute dans ce cours, vous avez sûrement abordé ses fonctionnalités dans des cours précédents. N’oubliez pas que les commandes traceroute recherchent une rupture dans le chemin de la source à la destination. </p> <p>Au fur et à mesure de l’avancement de ce cours, vous allez découvrir d’autres outils. Par exemple, <span class="cmd"><b>show ip interface brief</b></span> vous fournit un bref résumé de l’état de l’interface. Le protocole CDP peut vous aider à récupérer des informations sur la configuration IP d’un périphérique Cisco directement connecté à l’aide de la commande <span class="cmd"><b>show cdp neighbors detail</b></span>.</p></content-text>
</page>
</topic>
<topic type="" id="tl0902070300">
<title><content-text>Résolution de la route manquante</content-text></title>
<page type="OneColumn" id="tl0902070301">
<content-media type="AnimationPartialScreen" id="cm8455311047"><title><content-text></content-text></title><media ref="tl0902000000/tl0902070000/tl0902070300/tl0902070301/cm8455311047.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902070000/tl0902070300/tl0902070301/cm8455311047text.xml"/></content-media>
<content-text><p><b>Résolution de la route manquante</b></p> <p>La recherche d’une route manquante (ou mal configurée) est relativement simple si vous utilisez méthodiquement les bons outils. </p> <p>Examinons le problème suivant : l’ordinateur PC1 ne parvient pas à envoyer de requête ping à l’ordinateur PC3. Une commande traceroute révèle que R2 répond, mais qu’il n’y a pas de réponse de R3. L’affichage de la table de routage de R2 révèle que le réseau 172.16.3.0/24 n’est pas configuré correctement. L’interface de sortie est configurée pour envoyer les paquets à R3. D’après la topologie, il apparaît évident que R1 dispose du réseau 172.16.3.0/24. Par conséquent, le routeur R2 doit utiliser Serial 0/0/0 comme interface de sortie et pas Serial0/0/1. </p> <p>Pour remédier à cette situation, supprimez la route incorrecte et ajoutez la route pour le réseau 172.16.3.0/24 avec Serial 0/0/0 spécifié en tant qu’interface de sortie.</p> <span class="cmd"><p>R2(config)#<b>no ip route 172.16.3.0 255.255.255.0 serial0/0/1</b></p></span> <span class="cmd"><p>R2(config)#<b>ip route 172.16.3.0 255.255.255.0 serial 0/0/0</b></p></span></content-text>
</page>
<page type="OneColumn" id="tl0902070302">
<content-media type="ActivityPKA" id="cm7418519817"><title><content-text></content-text></title><media ref="tl0902000000/tl0902070000/tl0902070300/tl0902070302/cm7418519817/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902070000/tl0902070300/tl0902070302/cm7418519817/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour voir comment peut se produire la boucle expliquée dans cette section. En mode simulation, observez comment R2 et R3 forment une boucle avec le paquet pour 172.16.3.10 jusqu’à ce que le champ de durée de vie atteigne zéro. Ensuite, résolvez le problème et testez la connectivité entre les ordinateurs PC1 et PC3.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0902080000">
<title><content-text>Travaux pratiques de configuration d’une route statique</content-text></title>
<topic type="" id="tl0902080100">
<title><content-text>Configuration de base d’une route statique</content-text></title>
<page type="OneColumn" id="tl0902080101">
<content-media type="ActivityLab" id="cm6056393233"><title><content-text></content-text></title><media ref="tl0902000000/tl0902080000/tl0902080100/tl0902080101/cm6056393233/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902080000/tl0902080100/tl0902080101/cm6056393233/icontext.xml"/></content-media>
<content-text><p>Au cours de ces travaux pratiques, vous allez créer un réseau comme celui utilisé dans ce chapitre. Vous allez câbler le réseau et effectuer les configurations initiales des routeurs requises pour la connectivité. Après avoir réalisé la configuration de base, vous allez tester la connectivité entre les périphériques sur le réseau. Vous allez ensuite configurer les routes statiques nécessaires à la communication entre les hôtes. </p><p><b>Cliquez sur l’icône des travaux pratiques pour plus de détails.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0902080102">
<content-media type="ActivityPKA" id="cm2782798220"><title><content-text></content-text></title><media ref="tl0902000000/tl0902080000/tl0902080100/tl0902080102/cm2782798220/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902080000/tl0902080100/tl0902080102/cm2782798220/icontext.xml"/></content-media>
<content-text><p>Utilisez cet exercice Packet Tracer pour effectuer une simulation des travaux pratiques 2.8.1. Toutefois, n’oubliez pas que Packet Tracer ne remplace pas les travaux pratiques avec des équipements réels. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Pour plus de détails, utilisez le fichier PDF des travaux pratiques.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0902080200">
<title><content-text>Configuration avancée d’une route statique</content-text></title>
<page type="OneColumn" id="tl0902080201">
<content-media type="ActivityLab" id="cm9282976089"><title><content-text></content-text></title><media ref="tl0902000000/tl0902080000/tl0902080200/tl0902080201/cm9282976089/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902080000/tl0902080200/tl0902080201/cm9282976089/icontext.xml"/></content-media>
<content-text><p>Au cours de ces travaux pratiques, vous allez devoir diviser une adresse réseau en sous-réseaux, pour réaliser l’adressage du réseau. L’adressage du réseau local connecté au routeur ISP et de la liaison entre les routeurs HQ et ISP est déjà terminé. Vous devrez également configurer des routes statiques afin que les hôtes qui se trouvent sur des réseaux non connectés directement puissent communiquer entre eux.</p><p><b>Cliquez sur l’icône des travaux pratiques pour plus de détails.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0902080202">
<content-media type="ActivityPKA" id="cm8783985248"><title><content-text></content-text></title><media ref="tl0902000000/tl0902080000/tl0902080200/tl0902080202/cm8783985248/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902080000/tl0902080200/tl0902080202/cm8783985248/icontext.xml"/></content-media>
<content-text><p>Utilisez cet exercice Packet Tracer pour effectuer une simulation des travaux pratiques 2.8.2. Toutefois, n’oubliez pas que Packet Tracer ne remplace pas les travaux pratiques avec des équipements réels. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Pour plus de détails, utilisez le fichier PDF des travaux pratiques.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0902080300">
<title><content-text>Dépannage de routes statiques</content-text></title>
<page type="OneColumn" id="tl0902080301">
<content-media type="ActivityLab" id="cm8500443686"><title><content-text></content-text></title><media ref="tl0902000000/tl0902080000/tl0902080300/tl0902080301/cm8500443686/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902080000/tl0902080300/tl0902080301/cm8500443686/icontext.xml"/></content-media>
<content-text><p>Au cours de ces travaux pratiques, vous chargerez des scripts de configuration endommagés sur chacun des routeurs. Ces scripts contiennent des erreurs visant à empêcher la communication de bout en bout sur le réseau. Vous allez devoir dépanner chaque routeur pour déterminer les erreurs de configuration, puis utiliser les commandes adéquates pour corriger les configurations. Une fois l’ensemble des erreurs de configuration corrigées, tous les hôtes du réseau devraient être en mesure de communiquer entre eux.</p><p><b>Cliquez sur l’icône des travaux pratiques pour plus de détails.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0902080302">
<content-media type="ActivityPKA" id="cm1198614412"><title><content-text></content-text></title><media ref="tl0902000000/tl0902080000/tl0902080300/tl0902080302/cm1198614412/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902080000/tl0902080300/tl0902080302/cm1198614412/icontext.xml"/></content-media>
<content-text><p>Utilisez cet exercice Packet Tracer pour effectuer une simulation des travaux pratiques 2.8.3. Toutefois, n’oubliez pas que Packet Tracer ne remplace pas les travaux pratiques avec des équipements réels. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Pour plus de détails, utilisez le fichier PDF des travaux pratiques.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0902090000">
<title><content-text>Résumé du chapitre</content-text></title>
<topic type="" id="tl0902090100">
<title><content-text>Résumé et révision</content-text></title>
<page type="OneColumn" id="tl0902090101">
<content-media type="StaticGraphic" id="cm4869270145"><title><content-text></content-text></title><media ref="tl0902000000/tl0902090000/tl0902090100/tl0902090101/cm4869270145.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902090000/tl0902090100/tl0902090101/cm4869270145text.xml"/></content-media>
<content-text><p><b>Résumé</b></p> <p>Dans ce chapitre, vous avez appris comment utiliser les routes statiques pour atteindre des réseaux distants. Les réseaux distants sont des réseaux qui ne sont accessibles qu’en transférant le paquet vers un autre routeur. Les routes statiques peuvent être configurées facilement. Toutefois, pour les grands réseaux, cette opération manuelle peut s’avérer fastidieuse. Comme nous le verrons dans les chapitres ultérieurs, les routes statiques sont toujours utilisées, même lorsqu’un protocole de routage dynamique est implémenté.</p> <p>Les routes statiques peuvent être configurées avec une adresse IP de tronçon suivant, communément l’adresse IP du routeur de tronçon suivant. En cas d’utilisation d’une adresse IP de tronçon suivant, le processus de la table de routage doit résoudre cette adresse vers une interface de sortie. Pour les liaisons série point à point, il est généralement plus efficace de configurer une interface de sortie sur la route statique. Sur les réseaux à accès multiple comme Ethernet, une adresse IP de tronçon suivant et une interface de sortie peuvent être configurées sur la route statique.</p> <p>Les routes statiques ont une distance administrative par défaut de « 1 ». Cette distance administrative s’applique également aux routes statiques configurées avec une adresse de tronçon suivant ou avec une interface de sortie.</p> <p>Une route statique n’est entrée dans la table de routage que si l’adresse IP de tronçon suivant peut être résolue par le biais d’une interface de sortie. Que la route statique soit configurée avec une adresse IP de tronçon suivant ou avec une interface de sortie, si cette dernière (utilisée pour transférer le paquet) n’est pas dans la table de routage, la route statique n’est pas incluse dans la table de routage.</p> <p>Souvent, plusieurs routes statiques peuvent être configurées comme un seul résumé de routage. Ainsi, la table de routage contient moins d’entrées, ce qui accélère le processus de recherche dans la table de routage. Le résumé de routage ultime est une route par défaut, configurée avec une adresse réseau 0.0.0.0 et un masque de sous-réseau 0.0.0.0. En l’absence de correspondance plus précise dans la table de routage, cette dernière utilise la route par défaut pour transférer le paquet vers un autre routeur.</p> <p><b>Remarque :</b> le processus de recherche de la table de routage est traité plus en détail dans le chapitre 8, « Table de routage : examen détaillé ».</p></content-text>
</page>
<page type="FullScreen" id="tl0902090102">
<content-media type="ChapterSummary" id="cm4413444998"><title><content-text></content-text></title><media ref="tl0902000000/tl0902090000/tl0902090100/tl0902090102/cm4413444998.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902090000/tl0902090100/tl0902090102/cm4413444998text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="tl0902090103">
<content-media type="ActivityPKA" id="cm4056788680"><title><content-text></content-text></title><media ref="tl0902000000/tl0902090000/tl0902090100/tl0902090103/cm4056788680/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0902000000/tl0902090000/tl0902090100/tl0902090103/cm4056788680/icontext.xml"/></content-media>
<content-text><p>L’exercice d’intégration des compétences Packet Tracer pour ce chapitre intègre toutes les connaissances et compétences acquises dans les deux premiers chapitres de ce cours. Au cours de cet exercice, vous allez entièrement créer un réseau. À partir d’un espace d’adressage et d’exigences réseau, vous devez implémenter une conception de réseau satisfaisant aux spécifications. Puis vous mettez en œuvre une configuration de routage statique efficace.</p> <p><content-link target="E2_PTAct_2_9_1_Directions.pdf" type="internalfile">Instructions d’intégration des compétences Packet Tracer (PDF)</content-link></p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0902090104">
<content-media type="InteractiveGraphicHotspots" id="cm2077447823"><title><content-text></content-text></title><media ref="tl0902000000/tl0902090000/tl0902090100/tl0902090104/cm2077447823.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0902000000/tl0902090000/tl0902090100/tl0902090104/cm2077447823text.xml"/></content-media>
<content-text><p><b>Pour en savoir plus</b></p> <p> </p> <p><b>Routes statiques flottantes</b></p> <p>Une route statique flottante est une route de sauvegarde d’une route qui est soit dynamique, soit une autre route statique. La distance administrative par défaut d’une route statique est « 1 ». Voyez si vous pouvez créer une route statique utilisant une interface de sortie ou une adresse IP de tronçon suivant différente qui ne serait ajoutée à la table de routage qu’en cas d’échec de la route statique principale. </p> <p>Conseils : n’oubliez pas que si le routeur dispose de deux routes vers le même réseau de destination avec deux valeurs de distance administrative différentes, il ajoute la route dont la distance administrative est la plus basse. Une route statique est supprimée de la table de routage si l’interface de sortie ou l’adresse IP de tronçon suivant n’est plus disponible.</p> <p><b>Route d’élimination</b></p> <p>Une configuration courante sur de nombreux réseaux consiste à disposer d’une route statique par défaut sur le routeur de périphérie qui transfère les paquets à ISP. Le routeur ISP dispose ensuite d’une route statique pointée vers le réseau du client. </p> <p>Par exemple, le client A dispose de l’adresse réseau 172.16.0.0/16, divisée en plusieurs sous-réseaux /24. Le routeur de périphérie du client A dispose d’une route statique par défaut qui transfère le reste du trafic vers le routeur ISP : </p> <span class="cmd"><p><b>ip route 0.0.0.0 0.0.0.0 serial 0/0/0</b></p></span> <p>Le routeur ISP dispose d’une route statique par défaut pour transférer le trafic vers le réseau du client A : </p> <span class="cmd"><p><b>ip route 172.16.0.0 255.255.0.0 serial 0/0/1</b></p></span> <p>Un problème peut se produire lorsque des paquets sont émis par le réseau du client A vers un sous-réseau qui n’existe pas. Le routeur de périphérie du client A utilise alors sa route par défaut pour transférer ces paquets vers ISP. Le routeur ISP reçoit ces paquets et les renvoie au routeur de périphérie du client A parce qu’ils font partie du réseau 172.16.0.0/16. Le routeur de périphérie les renvoie à ISP. Les paquets sont pris dans une boucle jusqu’à l’expiration de la durée de vie du paquet.</p> <p>Configurez une route statique sur le routeur de périphérie du client A pour ignorer ces paquets au lieu de les transférer sur le routeur du fournisseur de services Internet.</p> <p><b>Lecture avancée du routage statique</b></p> <p>Bien que les routes statiques puissent être aisément comprises et configurées, dans certains cas, le traitement IOS des routes statiques peut se révéler très complexe. Cela se vérifie notamment lorsque plusieurs routes statiques configurées couvrent la même gamme de réseaux. </p> <p>Le livre d’Alex Zinin, <i>Cisco IP Routing</i> (en anglais), couvre en détail le routage statique et le traitement des routes statiques par l’IOS. Ce livre va bien au-delà de la configuration et étudie le fonctionnement de l’IOS Cisco et de ses processus de routage.</p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0902100000">
<title><content-text>Questionnaire du chapitre</content-text></title>
<topic type="" id="tl0902100100">
<title><content-text>Questionnaire du chapitre</content-text></title>
<page type="FullScreen" id="tl0902100101">
<content-media type="ChapterQuiz" id="cm8806838992"><title><content-text></content-text></title><media ref="tl0902000000/tl0902100000/tl0902100100/tl0902100101/cm8806838992/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl0902000000/tl0902100000/tl0902100100/tl0902100101/cm8806838992/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>
