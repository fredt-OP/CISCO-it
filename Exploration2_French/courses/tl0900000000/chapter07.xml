<chapter type="" id="tl0907000000">
<title><content-text>RIPv2</content-text></title>
<section type="ChapterIntroduction" id="tl0907000000">
<title><content-text>Présentation du chapitre</content-text></title>
<topic type="" id="tl0907000100">
<title><content-text>Présentation du chapitre</content-text></title>
<page type="OneColumn" id="tl0907000101">
<content-media type="StaticGraphic" id="cm5416580540"><title><content-text></content-text></title><media ref="tl0907000000/tl0907000000/tl0907000100/tl0907000101/cm5416580540.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907000000/tl0907000100/tl0907000101/cm5416580540text.xml"/></content-media>
<content-text><p>RIP Version 2 (RIPv2) est défini dans le document RFC 1723. Il s’agit du premier protocole de routage sans classe abordé dans ce cours. La figure place RIPv2 dans sa perspective par rapport aux autres protocoles de routage. Bien que RIPv2 soit un protocole de routage adapté à certains environnements, il a perdu de sa popularité au détriment d’autres protocoles de routage tels qu’EIGRP, OSPF et IS-IS, qui offrent davantage de fonctions et d’évolutivité. </p> <p>Bien qu’il soit moins populaire que d’autres protocoles de routage, les deux versions de RIP sont toujours adaptées à certaines situations. Bien que RIP ne dispose pas des fonctionnalités offertes par les protocoles plus récents, sa pure simplicité et son utilisation étendue à plusieurs systèmes d’exploitation en font un candidat idéal pour les réseaux de taille réduite et homogènes dans lesquels une prise en charge de plusieurs fournisseurs est nécessaire, particulièrement dans les environnements UNIX. </p> <p>Comme vous devez comprendre le mécanisme de RIPv2, même si vous ne l’utilisez pas, ce chapitre se concentre sur les différences entre un protocole de routage par classe (RIPv1) et un protocole de routage sans classe (RIPv2), plutôt que sur les détails du protocole RIPv2. La principale limite du protocole RIPv1 est qu’il s’agit d’un protocole de routage par classe. Comme vous le savez, les protocoles de routage par classe n’incluent pas le masque de sous-réseau avec l’adresse réseau dans les mises à jour de routage, ce qui pose parfois des problèmes avec les sous-réseaux discontinus ou les réseaux qui utilisent le masquage de sous-réseau de longueur variable (VLSM). Comme RIPv2 est un protocole de routage sans classe, les masques de sous-réseau sont inclus dans les mises à jour de routage, ce qui rend le protocole RIPv2 plus compatible avec les environnements de routage moderne.</p> <p>RIPv2 représente plus une réelle amélioration des extensions et des fonctionnalités de RIPv1 qu’un protocole entièrement nouveau. Ces fonctions améliorées comprennent :</p> <ul><li> les adresses du tronçon suivant incluses dans les mises à jour de routage ;</li> <li> l’utilisation d’adresses de multidiffusion dans l’envoi des mises à jour ;</li> <li> l’option d’authentification.</li></ul> <p>Comme RIPv1, RIPv2 un protocole de routage à vecteur de distance. Les deux versions de RIP comportent les fonctions et les limites suivantes :</p> <ul><li> mise hors service et autres minuteurs pour tenter d’éviter les boucles de routage ;</li> <li> découpage d’horizon, avec ou sans empoisonnement inverse, dans le même but ;</li> <li> mises à jour déclenchées en cas de modification de la topologie pour une convergence plus rapide ;</li> <li> nombre de sauts maximum limité à 15, un nombre de sauts de 16 indique un réseau inaccessible.</li></ul></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907010000">
<title><content-text>Restrictions relatives à RIPv1</content-text></title>
<topic type="" id="tl0907010100">
<title><content-text>Topologie des travaux pratiques</content-text></title>
<page type="OneColumn" id="tl0907010101">
<content-media type="InteractiveGraphicHotspots" id="cm2868830782"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010101/cm2868830782.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010101/cm2868830782text.xml"/></content-media>
<content-text><p>La figure présente la topologie et le schéma d’adressage utilisés dans ce chapitre. Ce scénario est identique au domaine de routage doté de trois routeurs utilisé à la fin du chapitre 5 « RIPv1 ». N’oubliez pas que les routeurs R1 et R3 possèdent des sous-réseaux qui font partie du réseau par classe principal 172.30.0.0/16 (classe B). N’oubliez pas non plus que R1 et R3 sont connectés à R2 à l’aide de sous-réseaux du réseau par classe principal 209.165.200.0/24 (classe C). Cette topologie est discontinue et ne converge pas parce que 172.30.0.0/16 est divisé par le réseau 209.165.200.0/24. </p> <p><b>Cliquez sur R1, R2 et R3 pour afficher la configuration de départ de chaque routeur.</b></p> <p><b>Résumé du routage</b></p> <p>La topologie montre que R2 possède un résumé de routes statiques vers le réseau 192.168.0.0/16. La configuration de ce regroupement de route est présentée ultérieurement dans cette section. </p> <p>Le concept et la configuration de résumé de routes statiques sont abordés dans le chapitre 2 « Routage statique ». Il est possible d’insérer des informations de routage statique dans les mises à jour de protocole de routage. On parle alors de redistribution, point aussi abordé ultérieurement dans cette section. Pour l’instant, comprenez bien que cette route de résumé posera des problèmes avec RIPv1, parce que 192.168.0.0/16 n’est pas une adresse par classe principale et comprend toutes les versions /24 de 192.168.0.0/16, comme illustré dans la topologie.</p> <p>Enfin, notez que les routeurs R1 et R3 contiennent les réseaux VLSM et qu’ils partagent l’espace d’adressage du principal réseau par classe 172.30.0.0/16. Ensuite, nous aborderons le schéma d’adressage VLSM.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010102">
<content-media type="StaticGraphic" id="cm4902730884"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010102/cm4902730884.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010102/cm4902730884text.xml"/></content-media>
<content-text><p><b>VLSM</b></p> <p>Consultez le schéma d’adressage VLSM de la figure. Comme illustré sur le graphique supérieur, R1 et R3 ont découpé le réseau 172.30.0.0/16 en sous-réseaux à l’aide du masque /24. Quatre de ces sous-réseaux /24 sont attribués : deux à R1 (172.30.1.0/24 et 172.30.2.0/24) et deux à R3 (172.30.100.0/24 et 172.30.110.0/24). </p> <p>Sur le graphique inférieur, le sous-réseau 172.30.200.0/24 est à son tour découpé en sous-réseaux, avec les quatre premiers bits pour les sous-réseaux et les quatre derniers pour les hôtes. Il en résulte un masque 255.255.255.240 ou /28. Les sous-réseaux 1 et 2 sont attribués à R3. Cela signifie que le sous-réseau 172.30.200.0/24 ne peut plus être utilisé même si les sous-réseaux /28 restants peuvent l’être.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010103">
<content-media type="InteractiveGraphicHotspots" id="cm2916585555"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010103/cm2916585555.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010103/cm2916585555text.xml"/></content-media>
<content-text><p><b>Adresses privées du document RFC 1918</b></p> <p>Vous devez être familier du document RFC 1918 et du raisonnement sous-jacent à l’adressage privé. Tous les exemples du cursus utilisent des adresses privées pour l’exemple d’adressage interne. </p> <p>Les adresses conformes au document RFC 1918 sont présentées dans la table. Cependant, lorsque le trafic IP est routé sur des liaisons de réseau étendu via un fournisseur de services Internet ou que les utilisateurs internes doivent accéder à des sites externes, une adresse IP publique est nécessaire. </p> <p><b>Exemple d’adresses IP Cisco</b></p> <p>Vous avez peut-être remarqué que les liaisons de réseau étendu entre R1, R2 et R3 utilisent des adresses IP publiques. Bien que ces adresses IP ne soient pas des adresses privées conformes au RFC 1918, Cisco a acquis des adresses publiques à des fins d’exemple. </p> <p>Les adresses indiquées dans la figure sont toutes des adresses IP publiques valides qui peuvent être routées sur Internet. Cisco a mis ces adresses de côté pour la formation. Par conséquent, ce cours et les cours ultérieurs se servent de ces adresses lorsque des adresses publiques s’avèrent nécessaires. </p> <p>Dans la figure, R1, R2 et R3 sont connectés à l’aide de l’espace d’adressage public Cisco 209.165.200.224/27. Les liaisons de réseau étendu ne nécessitant que deux adresses, 209.165.200.224/27 est découpé en sous-réseaux à l’aide d’un masque /30. Dans la topologie, le sous-réseau 1 est attribué à la liaison de réseau étendu entre R1 et R2. Le sous-réseau 2 est attribué à la liaison de réseau étendu entre R2 et R3.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010104">
<content-media type="StaticGraphic" id="cm2411978428"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010104/cm2411978428.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010104/cm2411978428text.xml"/></content-media>
<content-text><p><b>Interfaces de bouclage</b></p> <p>Notez que R3 utilise des interfaces de bouclage (Lo0, Lo1 et Lo2). Une interface de bouclage est une interface purement logicielle utilisée pour émuler une interface physique. Comme les autres interfaces, elle peut se voir attribuer une adresse IP. Les interfaces de bouclage sont également utilisées à d’autres fins par d’autres protocoles de routage (notamment OSPF). Ces utilisations sont abordées dans le chapitre 11 « OSPF ». </p> <p>Dans un environnement de travaux pratiques, les interfaces de bouclage sont utiles à la création de réseaux supplémentaires sans avoir à ajouter d’autres interfaces physiques au routeur. Une interface de bouclage peut recevoir une requête ping et le sous-réseau, être annoncé dans les mises à jour de routage. Par conséquent, les interfaces de bouclage sont parfaites pour simuler plusieurs réseaux reliés au même routeur. Dans l’exemple, R3 n’a pas besoin de quatre interfaces de réseau local pour illustrer plusieurs sous-réseaux et VLSM. À la place, nous utilisons les interfaces de bouclage.</p> <p>Liens</p> <p>IANA (Internet Assigned Numbers Authority), <content-link target="http://www.iana.org/" type="external">http://www.iana.org/</content-link></p> <p>« Configuration des interfaces logiques », <content-link target="http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html" type="external">http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html</content-link></p></content-text>
</page>
</topic>
<topic type="" id="tl0907010200">
<title><content-text>Restrictions relatives à la topologie de RIPv1</content-text></title>
<page type="OneColumn" id="tl0907010201">
<content-media type="StaticGraphic" id="cm9887372787"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010200/tl0907010201/cm9887372787.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010200/tl0907010201/cm9887372787text.xml"/></content-media>
<content-text><p><b>Routes statiques et interfaces Null</b></p> <p>Pour configurer la route de super-réseau statique sur R2, la commande suivante est utilisée :</p> <span class="cmd"><p>R2(config)#<b>ip route 192.168.0.0 255.255.0.0 </b><b><span class="blue">Null0</span></b></p></span> <p>N’oubliez pas que le résumé de route permet à une seule entrée de route de haut niveau de représenter plusieurs routes de niveau inférieur, ce qui permet de réduire la taille des tables de routage. La route statique sur R2 utilise un masque /16 pour résumer les 256 réseaux compris entre 192.168.0.0/24 et 192.168.255.0/24. </p> <p>L’espace d’adressage représenté par la route de résumé statique 192.168.0.0/16 n’existe pas réellement. Pour simuler cette route statique, nous utilisons une <content-link target="cg7693750233" type="glossary">interface Null</content-link> comme interface de sortie. Il n’est pas nécessaire de saisir de commandes pour créer ou configurer l’interface Null. Elle est toujours active mais ne transfère ni ne reçoit de trafic. Le trafic envoyé à l’interface Null est abandonné. Afin d’atteindre les objectifs fixés, l’interface Null sert d’interface de sortie pour la route statique. Le chapitre 2 « Routage statique » vous a appris qu’une route statique doit posséder une interface de sortie active avant de pouvoir être installée dans la table de routage. L’utilisation de l’interface Null permet à R2 d’annoncer la route statique dans RIP, même si les réseaux appartenant au résumé 192.168.0.0/16 n’existent pas réellement.</p> <p><b>Redistribution de route</b></p> <p>La deuxième commande qui nécessite d’être entrée est la commande <span class="cmd"><b>redistribute static</b></span> :</p> <span class="cmd"><p>R2(config-router)#<b><span class="blue">redistribute static</span></b></p></span> <p>La redistribution implique de prendre les routes d’une source de routage et de les envoyer à une autre source de routage. Dans l’exemple de topologie présent, le processus RIP sur R2 doit redistribuer la route statique (192.168.0.0/16) en important la route dans RIP, puis en l’envoyant à R1 et R3 à l’aide du processus RIP. Nous verrons si cela se produit réellement et, dans le cas contraire, en chercherons la raison.</p> <p><b>Liens</b></p> <p>« Configuration des interfaces logiques », <content-link target="http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html" type="external">http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html</content-link></p></content-text>
</page>
<page type="OneColumn" id="tl0907010202">
<content-media type="InteractiveGraphicHotspots" id="cm2600402693"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010200/tl0907010202/cm2600402693.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010200/tl0907010202/cm2600402693text.xml"/></content-media>
<content-text><p><b>Vérification et test de la connectivité</b></p> <p>Pour tester si la topologie dispose ou non d’une connectivité totale, commençons par vérifier le bon fonctionnement des deux liaisons série sur R2 à l’aide de la commande <span class="cmd"><b>show ip interface brief</b></span>, comme illustré dans la figure relative aux liaisons R2. Si une liaison ne fonctionne pas, le champ État et/ou le champ Protocole indiquent <b>down</b> dans le résultat de la commande. Si une liaison fonctionne, les deux champs indiquent <b>up</b>, comme sur l’illustration. R2 dispose d’une connectivité directe avec R1 et R3 dans les liaisons série. </p> <p>Cependant, R2 peut-il exécuter une requête ping pour les réseaux locaux situés sur R1 et R3 ? Existe-t-il des problèmes de connectivité avec un protocole de routage par classe et les sous-réseaux discontinus de 172.30.0.0 ? Testons les communications entre les routeurs à l’aide de <span class="cmd"><b>ping</b></span>.</p> <p><b>Cliquez sur Ping R2 dans la figure.</b></p> <p>Cette sortie indique les tentatives de requête ping sur l’interface 172.30.1.1 de R1 et sur l’interface 172.30.100.1 de R3. Chaque fois que R2 exécute une requête ping sur l’un des sous-réseaux 172.30.0.0 de R1 ou R3, seuls 50 % des messages ICMP aboutissent.</p> <p><b>Cliquez sur Ping R1 dans la figure.</b></p> <p>Cette sortie indique que R1 est en mesure d’exécuter une requête ping sur 10.1.0.1, mais qu’il ne parvient pas à le faire sur l’interface 172.30.100.1 de R3. </p> <p><b>Cliquez sur Ping R3 dans la figure.</b></p> <p>Cette sortie indique que R3 est en mesure d’exécuter une requête ping sur 10.1.0.1, mais qu’il ne parvient pas à le faire sur l’interface 172.30.1.1 de R1. </p> <p>Comme vous pouvez le constater, les tentatives de communication avec les sous-réseaux discontinus 172.30.0.0 posent un problème. Les sections suivantes vont permettre d’examiner les tables et les mises à jour de routage afin d’étudier plus en détail ce problème et de tenter de le résoudre.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010203">
<content-media type="ActivityPKT" id="cm4452329343"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010200/tl0907010203/cm4452329343/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907010000/tl0907010200/tl0907010203/cm4452329343/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour vous familiariser avec la configuration des routeurs, y compris les configurations de RIPv1.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0907010300">
<title><content-text>RIPv1 : réseaux discontinus</content-text></title>
<page type="OneColumn" id="tl0907010301">
<content-media type="StaticGraphic" id="cm5550705729"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010300/tl0907010301/cm5550705729.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010300/tl0907010301/cm5550705729text.xml"/></content-media>
<content-text><p>Vous savez déjà que RIPv1 est un protocole de routage par classe. Comme vous pouvez le constater dans le format de message RIPv1, les masques de sous-réseau ne sont pas inclus dans ses mises à jour de routage. RIPv1 ne peut par conséquent pas prendre en charge les réseaux discontinus, VLSM ou super-réseaux de routage interdomaine sans classe (CIDR). Cependant, est-il possible d’étendre le format du message RIPv1 afin d’y inclure le masque de sous-réseau et de disposer ainsi d’une configuration de réseau discontinu ? Comment modifier le format du message de la figure afin d’y inclure le masque de sous-réseau ?</p></content-text>
</page>
<page type="OneColumn" id="tl0907010302">
<content-media type="StaticGraphic" id="cm1973029446"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010300/tl0907010302/cm1973029446.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010300/tl0907010302/cm1973029446text.xml"/></content-media>
<content-text><p>Le masque de sous-réseau n’étant pas inclus dans la mise à jour, RIPv1 et d’autres protocoles de routage par classe peuvent résumer les réseaux au niveau des périphéries de réseau principal. Comme vous pouvez le constater dans la figure, RIPv1 résume les sous-réseaux 172.30.0.0 des routeurs R1 et R3 dans l’adresse réseau principal par classe de 172.30.0.0 lors de l’envoi de mises à jour de routage vers R2. Au niveau de R2, les deux mises à jour ont un coût égal d’un saut pour atteindre le réseau 172.30.0.0/16. Comme vous pouvez le constater, R2 installe les deux chemins dans la table de routage. </p></content-text>
</page>
<page type="OneColumn" id="tl0907010303">
<content-media type="InteractiveGraphicHotspots" id="cm6667716874"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010300/tl0907010303/cm6667716874.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010300/tl0907010303/cm6667716874text.xml"/></content-media>
<content-text><p><b>Étude des tables de routage</b></p> <p>Comme vous avez pu le constater, R2 obtient des résultats incohérents lorsqu’il tente d’exécuter une requête ping sur une adresse d’un des sous-réseaux 172.30.0.0. </p> <p><b>Cliquez sur Routes R2 dans la figure.</b></p> <p>Notez que R2 possède deux routes de valeur égale dans le réseau 172.30.0.0/16. Ceci parce que R1 et R3 envoient une mise à jour RIPv1 à R2 pour le réseau par classe 172.30.0.0/16 avec une métrique égale à 1 saut. R1 et R3 résumant automatiquement les sous-réseaux individuels, la table de routage R2 ne contient que l’adresse réseau par classe principal de 172.30.0.0/16. </p> <p>Il est possible d’examiner le contenu des mises à jour de routage, car les mises à jour sont envoyées et reçues à l’aide de la commande <span class="cmd"><b>debug ip rip</b></span>.</p> <p><b>Cliquez sur Débogage 1 de R2 dans la figure. </b></p> <p>Le résultat de cette commande indique que R2 reçoit deux routes à coût égal 172.30.0.0 avec une métrique égale à 1 saut. R2 reçoit une route sur l’interface série Serial 0/0/0 depuis R1 et l’autre route sur l’interface série Serial 0/0/1 depuis R3. Notez que le masque de sous-réseau n’est pas inclus dans l’adresse réseau de la mise à jour.</p> <p>Que pouvez-vous en conclure sur R1 et R3 ? S’échangent-ils leurs sous-réseaux 172.30.0.0 ? </p> <p><b>Cliquez sur Routes R1 dans la figure.</b></p> <p>Nous constatons ici que R1 possède ses propres routes 172.30.0.0 : 172.30.2.0/24 et 172.30.1.0/24. Cependant, R1 n’envoie pas ces sous-réseaux à R2. R3 possède une table de routage identique. R1 et R3 sont des routeurs de périphérie et n’envoient que le réseau résumé 172.30.0.0 à R2 dans leurs mises à jour de routage RIPv1. R2 a pour cette raison connaissance du réseau par classe 172.30.0.0/16 mais pas des sous-réseaux 172.30.0.0. </p> <p><b>Cliquez sur Débogage 2 de R2 dans la figure.</b></p> <p>Notez que le résultat de la commande <span class="cmd"><b>debug ip rip</b></span> pour R2 ne contient pas le réseau 172.30.0.0 dans ses mises à jour vers R1 ou R3. Pourquoi ? Parce que la fonction split horizon est appliquée. R2 apprend la présence du réseau 172.30.0.0/16 sur les interfaces série Serial 0/0/0 et 0/0/1. R2 ayant appris la présence du réseau 172.30.0.0 sur ces interfaces, les mises à jour envoyées à ces interfaces n’incluent pas ce réseau.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907010400">
<title><content-text>RIPv1 : non-prise en charge de VLSM</content-text></title>
<page type="OneColumn" id="tl0907010401">
<content-media type="StaticGraphic" id="cm5639082266"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010400/tl0907010401/cm5639082266.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010400/tl0907010401/cm5639082266text.xml"/></content-media>
<content-text><p>RIPv1 n’envoyant pas le masque de sous-réseau dans les mises à jour de routage, il ne peut pas prendre en charge VLSM. Le routeur R3 est configuré avec des sous-réseaux VLSM qui sont tous membres du réseau de classe B 172.30.0.0/16 :</p> <ul><li> 172.30.100.0/<b>24 </b>(FastEthernet 0/0)</li> <li> 172.30.110.0/<b>24 </b>(boucle 0)</li> <li> 172.30.200.16/<b>28 </b>(boucle 1)</li> <li> 172.30.200.32/<b>28 </b>(boucle 2)</li></ul> <p>Comme nous l’avons vu avec les mises à jour 172.30.0.0/16 de R2 par R1 et R3, RIPv1 résume les sous-réseaux aux frontières de classes ou utilise le masque de sous-réseau de l’interface sortante pour déterminer les sous-réseaux à annoncer. </p> <p><b>Cliquez sur Topologie dans la figure.</b></p> <p>Pour démontrer comment RIPv1 utilise le masque de sous-réseau de l’interface sortante, R4 est ajouté à la topologie connectée à R3 via l’interface FastEthernet0/0 sur le réseau 172.30.100.0/24. </p> <p>Cliquez sur le bouton <b>Sortie du routeur</b> dans la figure.</p> <p>Reportez-vous à <span class="cmd"><b>debug ip rip</b></span> dans la figure. Notez que le seul sous-réseau 172.30.0.0 envoyé au routeur R4 est 172.30.110.0. En outre, notez que R3 envoie la totalité du réseau par classe principal 172.30.0.0 à l’interface série Serial 0/0/1.</p> <p>Pourquoi RIPv1 sur R3 n’inclut-il pas les autres sous-réseaux (172.30.200.16/28 et 172.30.200.32/28) dans les mises à jour vers R4 ? Ces sous-réseaux n’ont pas le même masque de sous-réseau que FastEthernet 0/0. C’est pour cette raison que tous les sous-réseaux doivent utiliser le même masque de sous-réseau quand un protocole de routage par classe est implémenté dans le réseau.</p> <p><b>Explication plus précise</b></p> <p>R3 doit déterminer les sous-réseaux 172.30.0.0 à inclure dans les mises à jour qui définissent son interface FastEthernet 0/0 avec l’adresse IP 172.30.100.1/24. Il n’inclut dans sa table de routage que les routes 172.30.0.0 dont le masque est le même que celui de l’interface de sortie. S’agissant d’une interface 172.30.100.1 dotée d’un masque /24, il n’inclut que les sous-réseaux 172.30.0.0 dotés d’un masque /24. Le sous-réseau 172.30.110.0 est le seul à remplir cette condition.</p> <p>Les autres sous-réseaux 172.30.0.0 (172.30.200.16/28 et 172.30.200.32/28) ne sont pas inclus, car les masques /28 ne correspondent pas au masque /24 de l’interface sortante. Le routeur récepteur (R4) ne peut appliquer son propre masque d’interface /24 qu’aux annonces de route RIPv1 avec les sous-réseaux 172.30.0.0. R4 appliquerait le mauvais masque (/24) aux sous-réseaux dotés de masques /28.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907010500">
<title><content-text>RIPv1 : non-prise en charge de CIDR</content-text></title>
<page type="OneColumn" id="tl0907010501">
<content-media type="InteractiveGraphicHotspots" id="cm1137743180"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010500/tl0907010501/cm1137743180.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010500/tl0907010501/cm1137743180text.xml"/></content-media>
<content-text><p><b>Route statique 192.168.0.0/16</b></p> <p>La majeure partie des informations données jusqu’ici ont déjà été abordées au chapitre 5 « RIPv1 ». Il reste toutefois encore une question à aborder. </p> <p><b>Cliquez sur Routage R2 dans la figure.</b></p> <p>Nous avons configuré une route statique vers le réseau 192.168.0.0/16 sur R2 et demandé à RIP d’inclure cette route dans ses mises à jour à l’aide de la commande <span class="cmd"><b>redistribute static</b></span>, comme illustré dans la figure. Cette route statique est un résumé des sous-réseaux 192.168.0.0/24 compris entre 192.168.0.0/24 et 192.168.255.0/24. </p> <span class="cmd"><p>R2(config)#<b>ip route 192.168.0.0 255.255.0.0 Null0</b></p></span> <p><b>Cliquez sur Routes R2 dans la figure.</b></p> <p>Constatez que la route statique est incluse dans la table de routage R2. </p> <p><b>Cliquez sur Routes R1 dans la figure.</b></p> <p>Un examen de la table de routage de R1 permet de remarquer que R1 ne reçoit pas comme prévu la route 192.168.0.0/16 dans ses mises à jour RIP depuis R2.</p> <p><b>Cliquez sur Débogage de R2 dans la figure.</b></p> <p>L’utilisation de la commande <span class="cmd"><b>debug ip rip</b></span> sur R2 nous permet de remarquer que RIPv1 n’inclut pas la route 192.168.0.0/16 dans ses mises à jour RIP vers R1 ou R3. Savez-vous pourquoi cette route n’est pas incluse ? Examinez la route 192.168.0.0/16. Quelle est la classe de cette route ? A, B ou C ? Quel est le masque utilisé dans la route statique ? Correspond-il à la classe ? Le masque de la route statique est-il inférieur au masque par classe ?</p> <p>Nous avons configuré la route statique 192.168.0.0 avec un masque /16. Il compte moins de bits que le masque de classe C par classe /24. Le masque ne correspondant pas à la classe ni à un sous-réseau de la classe, RIPv1 n’inclut pas cette route dans ses mises à jour vers d’autres routeurs.</p> <p>RIPv1 et d’autres protocoles de routage par classe ne peuvent pas prendre en charge les routes CIDR qui sont des routes résumées avec un masque de sous-réseau plus petit que le masque par classe de la route. RIPv1 ignore ces super-réseaux dans la table de routage et ne les inclut pas aux mises à jour vers d’autres routeurs. Le routeur récepteur ne peut en effet appliquer que le masque par classe le plus important à la mise à jour et non pas le masque /16, plus court.</p> <p><b>Remarque :</b> si la route statique 192.168.0.0 est configurée avec un masque /24 ou supérieur, cette route est incluse dans les mises à jour RIP. Les routeurs récepteurs appliquent le masque /24 par classe à cette mise à jour.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010502">
<content-media type="ActivityPKT" id="cm6564056915"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010500/tl0907010502/cm6564056915/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907010000/tl0907010500/tl0907010502/cm6564056915/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer en mode Simulation pour constater que les mises à jour ne sont pas envoyées aux périphéries d’un réseau par classe avec RIPv1. En mode Temps réel, vérifiez la non-convergence à l’aide des commandes <span class="cmd"><b>show ip route</b></span>, <span class="cmd"><b>ping</b></span> et <span class="cmd"><b>debug ip rip</b></span>.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907020000">
<title><content-text>Configuration de RIPv2</content-text></title>
<topic type="" id="tl0907020100">
<title><content-text>Activation et vérification de RIPv2</content-text></title>
<page type="OneColumn" id="tl0907020101">
<content-media type="StaticGraphic" id="cm9926725123"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020100/tl0907020101/cm9926725123.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020100/tl0907020101/cm9926725123text.xml"/></content-media>
<content-text><p><b>Comparaison des formats des messages RIPv1 et RIPv2</b></p> <p>RIPv2 est défini dans le document RFC 1723. À l’instar de la version 1, RIPv2 est encapsulé dans un segment UDP via le port 520 et peut transporter jusqu’à 25 routes. Bien que RIPv2 possède le même format de message de base que RIPv1, deux modifications majeures ont été apportées. </p> <p>La première modification apportée au format de message RIPv2 se situe au niveau du champ du masque de sous-réseau, qui permet d’inclure un masque 32 bits dans l’entrée de route RIP. En conséquence, le routeur récepteur ne dépend plus du masque de sous-réseau de l’interface entrante ou du masque par classe lors de la détermination du masque de sous-réseau d’une route.</p> <p>La deuxième modification significative apportée au format du message RIPv2 concerne l’ajout de l’adresse de tronçon suivant. L’adresse de tronçon suivant permet, le cas échéant, d’identifier une adresse de tronçon suivant mieux adaptée que l’adresse du routeur émetteur. Si le champ contient uniquement des zéros (0.0.0.0), l’adresse du routeur émetteur constitue la meilleure adresse de tronçon suivant. Les informations détaillées sur l’utilisation de l’adresse de tronçon suivant dépassent le cadre de ce cours. Cependant, un exemple est disponible dans le document RFC 1722 ou dans l’ouvrage <i>Routing TCP/IP Volume 1</i> (Routage TCP/IP volume 1) de Jeff Doyle.</p> <p><b>Liens</b></p> <p>« RFC 1723 : RIP version 2 » (<content-link target="http://www.ietf.org/rfc/rfc1723.txt" type="external">http://www.ietf.org/rfc/rfc1723.txt</content-link>)</p></content-text>
</page>
<page type="OneColumn" id="tl0907020102">
<content-media type="InteractiveGraphicHotspots" id="cm9098894796"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020100/tl0907020102/cm9098894796.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020100/tl0907020102/cm9098894796text.xml"/></content-media>
<content-text><p><b>Version 2</b></p> <p>Par défaut, lorsqu’un processus RIP est configuré sur un routeur Cisco, il exécute RIPv1. Cependant, bien que le routeur n’envoie que des messages RIPv1, il peut tout aussi bien interpréter les messages RIPv1 et les messages RIPv2. Un routeur RIPv1 ignore simplement les champs RIPv2 dans l’entrée de route.</p> <p><b>Cliquez sur R2 RIPv1 dans la figure.</b></p> <p>La commande <span class="cmd"><b>show ip protocols</b></span> vérifie que R2 est configuré pour RIPv1, mais reçoit les messages RIP pour les deux versions. </p> <p><b>Cliquez dans la figure sur Configurations de RIPv2.</b></p> <p>Notez que la commande <span class="cmd"><b>version 2</b></span> permet de modifier RIP afin d’utiliser la version 2. Cette commande doit être configurée sur tous les routeurs du domaine de routage. Le processus RIP inclut désormais le masque de sous-réseau dans toutes les mises à jour et convertit ainsi RIPv2 en un protocole de routage sans classe. </p> <p><b>Cliquez sur R2 RIPv2 dans la figure.</b></p> <p>Comme vous pouvez le constater dans le résultat, lorsqu’un routeur est configuré pour la version 2, seuls les messages RIPv2 sont envoyés et reçus.</p> <p><b>Cliquez dans la figure sur Rétablir RIPv1.</b></p> <p>Vous pouvez rétablir le comportement par défaut de RIPv1 à l’aide de la commande <span class="cmd"><b>no version</b></span> dans le mode de configuration du routeur.Toutefois, la commande <span class="cmd"><b>version 1</b></span> peut également être utilisée de telle sorte que seuls les messages RIPv1 soient envoyés et reçus.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907020200">
<title><content-text>Commande Auto-summary et RIPv2</content-text></title>
<page type="OneColumn" id="tl0907020201">
<content-media type="InteractiveGraphicHotspots" id="cm9908866463"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020200/tl0907020201/cm9908866463.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020200/tl0907020201/cm9908866463text.xml"/></content-media>
<content-text><p><b>Étude des tables de routage</b></p> <p>RIPv2 étant un protocole de routage sans classe, vous pouvez vous attendre à voir les sous-réseaux 172.30.0.0 individuels dans les tables de routage. Cependant, en étudiant la table de routage de R2 de la figure, nous trouvons toujours la route 172.30.0.0/16 résumée avec les deux mêmes chemins à coût égal. Les routeurs R1 et R3 n’incluent toujours pas les sous-réseaux 172.30.0.0 de l’autre routeur. </p> <p><b>Cliquez sur Routes R1 dans la figure.</b></p> <p>Jusqu’à présent, l’unique différence entre RIPv1 et RIPv2 se situe au niveau de R1 et de R3 qui disposent tous deux d’une route vers le super-réseau 192.168.0.0/16. Cette route correspond à la route statique configurée sur R2 et redistribuée par RIP. </p> <p><b>Cliquez sur Débogage 1 de R1 dans la figure.</b></p> <p>Que se passe-t-il ? Pour étudier les routes RIPv2 envoyées et reçues, utilisons la commande <span class="cmd"><b>debug ip rip</b></span>. La figure montre le résultat de la commande <span class="cmd"><b>debug ip rip</b></span> pour R1. Notez que RIPv2 envoie l’adresse réseau et le masque de sous-réseau :</p> <span class="cmd"><p>RIP: sending v2 update to 224.0.0.9 via Serial0/0 (209.165.200.230)</p></span> <span class="cmd"><p> 172.30.0.0/16 via 0.0.0.0, metric 1, tag 0</p></span> <p>Toutefois, notez que la route envoyée est l’adresse réseau par classe résumée 172.30.0.0/16 et non les sous-réseaux individuels 172.30.1.0/24 et 172.30.2.0/24. </p> <p><b>Cliquez dans la figure sur Résumé automatique.</b></p> <p><b>Par défaut, RIPv2 résume automatiquement les réseaux au niveau des périphéries du réseau principal, comme RIPv1. </b>Les routeurs R1 et R3 résument toujours leurs sous-réseaux 172.30.0.0 dans l’adresse de classe B 172.30.0.0 lors de l’envoi de mises à jour depuis leurs interfaces, respectivement sur les réseaux 209.165.200.228 et 209.165.200.232. La commande <span class="cmd"><b>show ip protocols</b></span> vérifie que le « résumé automatique est actif ».</p> <p><b>Cliquez sur Débogage 2 de R1 dans la figure.</b></p> <p>La seule modification apportée à la commande <span class="cmd"><b>version 2</b></span> se situe au niveau de R2, qui inclut désormais le réseau 192.168.0.0/16 dans ses mises à jour. Cela est dû au fait que RIPv2 inclut le masque 255.255.0.0 avec l’adresse réseau 192.168.0.0 dans la mise à jour. R1 et R3 reçoivent maintenant cette route statique redistribuée via RIPv2 et l’entrent dans leurs tables de routage.</p> <p><b>Remarque :</b> n’oubliez pas que la route 192.168.0.0/16 n’a pas pu être distribuée avec RIPv1, car le masque de sous-réseau était inférieur au masque par classe. Le masque n’étant pas inclus dans les mises à jour RIPv1, le routeur RIPv1 n’a pas pu déterminer le masque nécessaire. Par conséquent, la mise à jour n’a jamais été envoyée.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907020300">
<title><content-text>Désactivation du résumé automatique dans RIPv2</content-text></title>
<page type="OneColumn" id="tl0907020301">
<content-media type="StaticGraphic" id="cm6363831877"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020300/tl0907020301/cm6363831877.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020300/tl0907020301/cm6363831877text.xml"/></content-media>
<content-text><p>Comme vous pouvez le constater dans la figure, la modification de l’utilisation par défaut du résumé automatique dans RIPv2 nécessite d’utiliser la commande <span class="cmd"><b>no auto-summary</b></span> dans le mode de configuration du routeur. Cette commande n’est pas disponible dans RIPv1. Bien que Cisco IOS vous permette de configurer la commande <span class="cmd"><b>no auto-summary</b></span> pour RIPv1, la commande n’a aucun effet. Vous devez également configurer la version 2 avant que Cisco IOS ne modifie le mode d’envoi des mises à jour RIP.</p> <p>Une fois le résumé automatique désactivé, RIPv2 ne résume plus les réseaux dans leur adresse par classe au niveau des routeurs de périphérie. RIPv2 inclut maintenant tous les sous-réseaux et leurs masques appropriés dans ses mises à jour de routage. La commande <span class="cmd"><b>show ip protocols</b></span> permet de vérifier si « le résumé de réseau automatique n’est pas actif ».</p></content-text>
</page>
</topic>
<topic type="" id="tl0907020400">
<title><content-text>Vérification des mises à jour de RIPV2</content-text></title>
<page type="OneColumn" id="tl0907020401">
<content-media type="InteractiveGraphicHotspots" id="cm6966142067"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020400/tl0907020401/cm6966142067.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020400/tl0907020401/cm6966142067text.xml"/></content-media>
<content-text><p>Maintenant que le protocole de routage sans classe RIPv2 est utilisé et que le résumé automatique est désactivé, que doit-on voir dans les tables de routage ? </p> <p>Dans la figure, la table de routage de R2 contient maintenant les sous-réseaux individuels du réseau 172.30.0.0/16. Remarquez qu’elle ne contient plus un seul résumé de routage avec deux chemins à coût égal. Chaque sous-réseau et chaque masque possèdent leur propre entrée spécifique, ainsi que l’interface de sortie et l’adresse du tronçon suivant pour atteindre le sous-réseau.</p> <p><b>Cliquez sur Routes R1 dans la figure.</b></p> <p>La table de routage de R1 contient l’ensemble des sous-réseaux de 172.30.0.0/16, y compris les sous-réseaux de R3.</p> <p><b>Cliquez sur Routes R3 dans la figure.</b></p> <p>La table de routage de R3 contient l’ensemble des sous-réseaux de 172.30.0.0/16, y compris les sous-réseaux de R1. Le réseau converge.</p> <p><b>Cliquez sur Débogage de R2 dans la figure.</b></p> <p>Nous pouvons vérifier que le protocole de routage sans classe RIPv2 envoie et reçoit les informations de masque de sous-réseau dans les mises à jour de routage à l’aide de la commande <span class="cmd"><b>debug ip rip</b></span>. Remarquez que chaque entrée de route possède maintenant la notation à barres obliques du masque de sous-réseau.</p> <p>Nous pouvons également constater que la métrique d’une mise à jour sur une interface est incrémentée avant son envoi vers une autre interface. Par exemple, la mise à jour reçue sur l’interface série Serial 0/0/1 pour le réseau 172.30.100.0/24 avec un saut est envoyée aux autres interfaces, telles que l’interface série Serial 0/0/0, avec une métrique égale à 2 (sauts).</p> <span class="cmd"><p>RIP: received v2 update from 209.165.200.234 on Serial0/0/1</p></span> <span class="cmd"><p> 172.30.100.0/24 via 0.0.0.0 in <span class="blue">1 hops</span></p></span> <span class="cmd"><p>RIP: sending v2 update to 224.0.0.9 via Serial0/0/0 (209.165.200.229)</p></span> <span class="cmd"><p> 172.30.100.0/24 via 0.0.0.0, <span class="blue">metric 2</span>, tag 0</p></span> <p>Notez également que les mises à jour sont envoyées en utilisant l’adresse de multidiffusion 224.0.0.9. RIPv1 envoie des mises à jour sous forme de diffusion sur 255.255.255.255. L’utilisation d’une adresse de multidiffusion présente plusieurs avantages. Les informations détaillées sur l’adressage multidiffusion dépassent le cadre de ce cours. Cependant, les multidiffusions utilisent généralement moins de bande passante sur le réseau. En outre, les mises à jour de multidiffusion nécessitent moins de traitement pour les unités qui ne sont pas compatibles RIP. Dans RIPv2, toute unité qui n’est pas configurée pour RIP abandonne la trame au niveau de la couche liaison de données. Lors des mises à jour de diffusion dans des configurations RIPv1, toutes les unités d’un réseau de diffusion comme Ethernet doivent traiter une mise à jour RIP de bout en bout jusqu’à la couche transport, où l’unité découvre finalement que le paquet est destiné à un processus qui n’existe pas.</p></content-text>
</page>
<page type="OneColumn" id="tl0907020402">
<content-media type="ActivityPKT" id="cm4407617918"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020400/tl0907020402/cm4407617918/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907020000/tl0907020400/tl0907020402/cm4407617918/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour configurer RIPv2, désactiver le résumé automatique et vérifier vos configurations.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907030000">
<title><content-text>VLSM et CIDR</content-text></title>
<topic type="" id="tl0907030100">
<title><content-text>RIPv2 et VLSM</content-text></title>
<page type="OneColumn" id="tl0907030101">
<content-media type="StaticGraphic" id="cm4246680612"><title><content-text></content-text></title><media ref="tl0907000000/tl0907030000/tl0907030100/tl0907030101/cm4246680612.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907030000/tl0907030100/tl0907030101/cm4246680612text.xml"/></content-media>
<content-text><p>Les protocoles de routage sans classe tels que RIPv2 pouvant transporter l’adresse réseau et le masque de sous-réseau, il n’est pas nécessaire qu’ils résument ces réseaux dans leurs adresses par classe au niveau des périphéries de réseau principal. Par conséquent, les protocoles de routage sans classe prennent en charge VLSM. Les routeurs utilisant RIPv2 n’ont plus besoin d’utiliser le masque de l’interface entrante pour déterminer le masque de sous-réseau dans l’annonce de la route. Le réseau et le masque sont inclus de manière explicite dans chaque mise à jour de routage.</p> <p>Dans les réseaux qui utilisent un schéma d’adressage VLSM, un protocole de routage sans classe est essentiel pour propager tous les réseaux avec leurs masques de sous-réseau appropriés. Le résultat de la commande <span class="cmd"><b>debug ip rip</b></span> pour R3 dans la figure indique que RIPv2 contient les réseaux et les masques de sous-réseau correspondants dans ses mises à jour de routage. </p> <p>Remarquez également dans la figure que nous avons encore ajouté le routeur R4 dans la topologie. N’oubliez pas qu’avec RIPv1, R3 n’envoie à R4 que les routes 172.30.0.0 qui possèdent le même masque que l’interface de sortie 0/0 FastEthernet. S’agissant d’une interface 172.30.100.1 dotée d’un masque /24, RIP n’inclut que les sous-réseaux 172.30.0.0 dotés d’un masque /24. La seule route à remplir cette condition est 172.30.110.0.</p> <p>Cependant, grâce à RIPv2, R3 peut maintenant inclure tous les sous-réseaux 172.30.0.0 dans ses mises à jour de routage vers R4, comme illustré par le résultat de débogage de la figure. RIPv2 peut en effet inclure le masque de sous-réseau approprié dans l’adresse réseau contenue dans la mise à jour.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907030200">
<title><content-text>RIPv2 et CIDR</content-text></title>
<page type="OneColumn" id="tl0907030201">
<content-media type="InteractiveGraphicHotspots" id="cm7188828208"><title><content-text></content-text></title><media ref="tl0907000000/tl0907030000/tl0907030200/tl0907030201/cm7188828208.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907030000/tl0907030200/tl0907030201/cm7188828208text.xml"/></content-media>
<content-text><p>L’un des objectifs du routage interdomaine sans classe (CIDR) défini dans le RFC 1519 consiste à « fournir un mécanisme d’agrégation des informations de routage ». Cet objectif inclut le concept de super-réseau. Un super-réseau est un bloc de réseaux par classe continus défini comme un réseau unique. Nous avons configuré un super-réseau sur le routeur R2. Il s’agit d’une route statique vers un réseau unique qui est utilisée pour représenter plusieurs réseaux ou sous-réseaux. </p> <p>Les super-réseaux possèdent des masques qui sont inférieurs au masque par classe (/16 ici, au lieu du masque /24 par classe). Pour inclure le super-réseau à une mise à jour de routage, le protocole de routage doit être en mesure de transporter ce masque. En d’autres termes, il doit s’agir d’un protocole de routage sans classe, comme RIPv2.</p> <p>La route statique sur R2 inclut un masque inférieur au masque par classe :</p> <span class="cmd"><p>R2(config)#<b>ip route 192.168.0.0 255.255.0.0 Null0</b></p></span> <p>Dans un environnement par classe, l’adresse réseau 192.168.0.0 est associée au masque /24 de classe C, ou 255.255.255.0. Dans les réseaux actuels, nous n’associons plus d’adresses réseau à des masques par classe. Dans cet exemple, le réseau 192.168.0.0 possède un masque /16, ou 255.255.0.0. Cette route peut représenter une série de réseaux 192.168.0.0/24 ou un nombre de plages d’adresses différentes. La seule manière d’inclure cette route à une mise à jour de routage dynamique consiste à le faire à l’aide d’un protocole de routage sans classe contenant le masque /16.</p> <p><b>Cliquez sur Débogage de R2 dans la figure.</b></p> <p>La commande <span class="cmd"><b>debug ip rip</b></span> permet de voir que ce super-réseau CIDR est inclus à la mise à jour de routage envoyée par R2. Le résumé automatique ne doit pas être désactivé dans RIPv2 ou tout protocole de routage sans classe afin d’inclure les super-réseaux aux mises à jour.</p> <p><b>Cliquez sur Routes R1 dans la figure.</b></p> <p>La table de routage de R1 indique qu’elle a reçu la route de super-réseau depuis R2.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907040000">
<title><content-text>Vérification et dépannage de RIPv2</content-text></title>
<topic type="" id="tl0907040100">
<title><content-text>Commandes de vérification et de dépannage</content-text></title>
<page type="OneColumn" id="tl0907040101">
<content-media type="InteractiveGraphicHotspots" id="cm7324178988"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040100/tl0907040101/cm7324178988.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907040000/tl0907040100/tl0907040101/cm7324178988text.xml"/></content-media>
<content-text><p>Il existe plusieurs manières de vérifier et de dépanner RIPv2. De nombreuses commandes utilisées pour RIPv2 peuvent être utilisées dans le cadre de la vérification et du dépannage d’autres protocoles de routage. </p> <p>Il est toujours recommandé de commencer par les bases :</p> <p>1. Assurez-vous du bon fonctionnement de toutes les liaisons (interfaces).</p> <p>2. Vérifiez le câblage. </p> <p>3. Vérifiez que l’adresse IP et le masque de sous-réseau sont corrects pour chaque interface.</p> <p>4. Retirez toute commande de configuration inutile, qui n’est plus nécessaire ou qui a été remplacée par une autre commande.</p> <p><b>Cliquez sur </b><span class="cmd"><b>show ip route</b></span><b> dans la figure. </b></p> <p>Il s’agit de la première commande à utiliser pour vérifier la convergence de réseau. Lors de l’étude de la table de routage, il est important de vérifier si la table de routage contient les routes qui doivent y figurer (ainsi que celles qui ne le doivent pas). </p> <p><b>Dans la figure, cliquez sur </b><span class="cmd"><b>show ip interface brief</b></span><b>. </b></p> <p>Une interface hors service ou mal configurée est souvent la cause de l’absence d’un réseau dans la table de routage. La commande <span class="cmd"><b>show ip interface brief</b></span> vérifie rapidement l’état de toutes les interfaces.</p> <p><b>Cliquez sur </b><span class="cmd"><b>show ip route</b></span><b> dans la figure.</b></p> <p>La commande <span class="cmd"><b>show ip protocols</b></span> vérifie plusieurs éléments critiques, notamment l’activation de RIP, sa version, l’état du résumé automatique et les réseaux inclus dans les instructions réseau. Les informations Routing Information Sources répertoriées au bas de la sortie sont les voisins RIP depuis lesquels ce routeur reçoit actuellement les mises à jour.</p> <p><b>Cliquez sur </b><span class="cmd"><b>debug ip rip</b></span><b> dans la figure.</b></p> <p>Comme présenté dans l’ensemble du chapitre, la commande <span class="cmd"><b>debug ip rip</b></span> est très utile pour examiner le contenu des mises à jour de routage envoyées et reçues par un routeur. Parfois, une route peut aboutir dans un routeur sans être ajoutée à la table de routage. Cela peut être dû à une route statique déjà configurée pour le même réseau annoncé. Par défaut, une route statique a une distance administrative inférieure à celle de tous les protocoles de routage dynamique et elle prime lors de l’ajout dans la table de routage.</p> <p><b>Dans la figure, cliquez sur </b><span class="cmd"><b>ping</b></span><b>.</b></p> <p>La commande <span class="cmd"><b>ping</b></span> permet de vérifier facilement la connectivité de transmission. Si la connectivité de bout en bout n’est pas disponible, commencez par exécuter une commande ping sur les interfaces locales. Si la commande aboutit, exécutez une commande ping sur les interfaces de routeur des réseaux directement connectés. Si cette commande aboutit également, exécutez une commande ping sur les interfaces de chaque routeur. Quand une commande ping a échoué, examinez les deux routeurs et tous les routeurs intermédiaires pour déterminer où et pourquoi la commande ping a échoué.</p> <p><b>Cliquez sur </b><span class="cmd"><b>show running-config</b></span><b> dans la figure.</b></p> <p>La commande <span class="cmd"><b>show running-config</b></span> peut être utilisée pour vérifier toutes les commandes actuellement configurées. Généralement, les autres commandes sont plus efficaces et permettent de disposer de davantage d’informations qu’une simple liste de configuration actuelle. Cependant, la commande <span class="cmd"><b>show running-config</b></span> permet de déterminer si un paramètre essentiel a été omis ou configuré de manière incorrecte.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907040200">
<title><content-text>Problèmes courants relatifs à RIPv2</content-text></title>
<page type="OneColumn" id="tl0907040201">
<content-media type="StaticGraphic" id="cm1130444790"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040200/tl0907040201/cm1130444790.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907040000/tl0907040200/tl0907040201/cm1130444790text.xml"/></content-media>
<content-text><p>Lors du dépannage de problèmes spécifiques à RIPv2, plusieurs points doivent être examinés. </p> <p><b>Version </b></p> <p>Un bon point de départ du dépannage d’un réseau exécutant RIP est de vérifier que la version 2 est configurée sur tous les routeurs. Malgré la compatibilité de RIPv1 et de RIPv2, RIPv1 ne prend pas en charge les sous-réseaux discontinus, VLSM ni les routes de super-réseau CIDR. Il est toujours recommandé d’utiliser le même protocole sur tous les routeurs, sauf cas de force majeure. </p> <p><b>Instructions réseau</b></p> <p>Des instructions réseau incorrectes ou manquantes peuvent constituer une autre source de problèmes. N’oubliez pas que l’instruction réseau a deux objectifs :</p> <ul><li> elle active le protocole de routage pour envoyer et recevoir des mises à jour sur toutes les interfaces locales qui appartiennent à ce réseau ;</li> <li> elle inclut ce réseau dans ses mises à jour de routage vers les routeurs avoisinants.</li></ul> <p>Si une instruction réseau est absente ou incorrecte, des mises à jour de routage sont manquées et elles ne sont ni envoyées, ni reçues sur une interface. </p> <p><b>Résumé automatique</b></p> <p>Si l’envoi de sous-réseaux spécifiques (et pas uniquement des routes regroupées) est nécessaire ou souhaité, assurez-vous que le résumé automatique est désactivé.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907040300">
<title><content-text>Authentification</content-text></title>
<page type="OneColumn" id="tl0907040301">
<content-media type="StaticGraphic" id="cm5805533153"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040300/tl0907040301/cm5805533153.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907040000/tl0907040300/tl0907040301/cm5805533153text.xml"/></content-media>
<content-text><p>La plupart des protocoles de routage envoient leurs mises à jour de routage et d’autres informations de routage à l’aide du protocole IP (sous forme de paquets IP). Le protocole de routage IS-IS constitue l’exception importante. Il est présenté dans les cours CCNP. Le problème de sécurité propre à tout protocole de routage est le risque d’accepter des mises à jour de routage invalides. La source de ces mises à jour de routage invalides peut être une personne malveillante qui tente d’interrompre le fonctionnement du réseau ou de capturer des paquets en indiquant au routeur une mauvaise destination d’envoi des mises à jour. Un routeur incorrectement configuré peut constituer une autre source de mises à jour invalides. Il peut arriver également qu’un hôte soit relié au réseau et qu’à l’insu de l’utilisateur, l’hôte exécute le protocole de routage du réseau local.</p> <p>Par exemple dans la figure, R1 propage une route par défaut dans tous les autres routeurs de ce domaine de routage. Cependant, une personne a ajouté par erreur le routeur R4 au réseau, qui propage également une route par défaut. Certains routeurs peuvent transférer le trafic par défaut vers R4 au lieu du véritable routeur de passerelle, à savoir R1. Ces paquets risquent d’être absorbés par un « trou noir » et de disparaître à jamais.</p> <p>Quoi qu’il en soit, il est conseillé d’authentifier les informations de routage transmises entre les routeurs. Les protocoles RIPv2, EIGRP, OSPF, IS-IS et BGP peuvent être configurés pour authentifier les informations de routage. Ainsi, les routeurs n’acceptent que les informations de routage des autres routeurs qui ont été configurés avec le même mot de passe ou les mêmes informations d’authentification. Remarque : l’authentification ne chiffre pas la table de routage. </p> <p><b>Remarque : </b>RIP ayant ouvert la voie à des protocoles de routage plus populaires, les fonctions de configuration détaillées d’authentification dans RIP ne sont pas abordées dans ce chapitre. La configuration des protocoles de routage dans le cadre de l’utilisation de l’authentification est abordée dans un autre cours, parallèlement à d’autres problèmes de sécurité.</p></content-text>
</page>
<page type="OneColumn" id="tl0907040302">
<content-media type="ActivityPKT" id="cm6018361150"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040300/tl0907040302/cm6018361150/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907040000/tl0907040300/tl0907040302/cm6018361150/icontext.xml"/></content-media>
<content-text><p>Effectuez l’exercice Packet Tracer pour voir comment des mises à jour de routage involontaires peuvent endommager la table de routage.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907050000">
<title><content-text>Travaux pratiques de configuration de RIPv2</content-text></title>
<topic type="" id="tl0907050100">
<title><content-text>Configuration de base de RIPv2</content-text></title>
<page type="OneColumn" id="tl0907050101">
<content-media type="ActivityLab" id="cm3753237663"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050100/tl0907050101/cm3753237663/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050100/tl0907050101/cm3753237663/icontext.xml"/></content-media>
<content-text><p>Dans ces travaux pratiques, vous utiliserez un <content-link target="cg4461611920" type="glossary">réseau discontinu</content-link> divisé en sous-réseaux au moyen de VLSM. Comme vous l’avez constaté tout au long de ce chapitre et du chapitre 5, « Protocole RIP version 1 », lorsque le protocole de routage utilisé ne contient pas suffisamment d’informations pour distinguer les différents sous-réseaux, cela peut poser un problème. Pour résoudre ce problème, vous allez configurer RIPv2 en tant que protocole de routage sans classe afin d’inclure des informations de masque de sous-réseau dans les mises à jour de routage.</p><p><b>Si vous souhaitez des précisions, cliquez sur l’icône des travaux pratiques.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907050102">
<content-media type="ActivityPKA" id="cm6895014294"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050100/tl0907050102/cm6895014294/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050100/tl0907050102/cm6895014294/icontext.xml"/></content-media>
<content-text><p>Effectuez l’exercice Packet Tracer pour répéter la simulation des travaux pratiques 7.5.1. N’oubliez pas cependant que Packet Tracer ne remplace pas les travaux pratiques avec équipement réel. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Pour plus de détails, utilisez le fichier PDF des travaux pratiques.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0907050200">
<title><content-text>Configuration avancée de RIPv2</content-text></title>
<page type="OneColumn" id="tl0907050201">
<content-media type="ActivityLab" id="cm4318206083"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050200/tl0907050201/cm4318206083/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050200/tl0907050201/cm4318206083/icontext.xml"/></content-media>
<content-text><p>Dans ces travaux pratiques, vous disposez d’une adresse réseau qui doit être découpée en sous-réseaux à l’aide de VLSM pour exécuter l’adressage du réseau. Vous devez vous servir de RIP version 2 et du routage statique pour que les hôtes du réseau non directement connectés communiquent entre eux et sur Internet.</p><p><b>Si vous souhaitez des précisions, cliquez sur l’icône des travaux pratiques.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907050202">
<content-media type="ActivityPKA" id="cm6343800598"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050200/tl0907050202/cm6343800598/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050200/tl0907050202/cm6343800598/icontext.xml"/></content-media>
<content-text><p>Effectuez l’exercice Packet Tracer pour répéter la simulation des travaux pratiques 7.5.2. N’oubliez pas cependant que Packet Tracer ne remplace pas les travaux pratiques avec équipement réel. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Pour plus de détails, utilisez le fichier PDF des travaux pratiques.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0907050300">
<title><content-text>Dépannage de RIPv2</content-text></title>
<page type="OneColumn" id="tl0907050301">
<content-media type="ActivityLab" id="cm6443912401"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050300/tl0907050301/cm6443912401/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050300/tl0907050301/cm6443912401/icontext.xml"/></content-media>
<content-text><p>Dans ces travaux pratiques, vous allez commencer par charger les scripts de configuration sur chaque routeur. Ces scripts contiennent des erreurs qui empêchent une communication de bout en bout dans le réseau. Une fois les scripts corrompus chargés, dépannez chaque routeur afin de déterminer les erreurs de configuration, puis utilisez les commandes appropriées pour corriger les configurations. Une fois l’ensemble des erreurs de configuration corrigées, tous les hôtes du réseau devraient être en mesure de communiquer entre eux.</p><p><b>Si vous souhaitez des précisions, cliquez sur l’icône des travaux pratiques.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907050302">
<content-media type="ActivityPKA" id="cm8190179932"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050300/tl0907050302/cm8190179932/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050300/tl0907050302/cm8190179932/icontext.xml"/></content-media>
<content-text><p>Effectuez l’exercice Packet Tracer pour répéter la simulation des travaux pratiques 7.5.3. N’oubliez pas cependant que Packet Tracer ne remplace pas les travaux pratiques avec équipement réel. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Pour plus de détails, utilisez le fichier PDF des travaux pratiques.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0907060000">
<title><content-text>Résumé du chapitre</content-text></title>
<topic type="" id="tl0907060100">
<title><content-text>Résumé et révision</content-text></title>
<page type="OneColumn" id="tl0907060101">
<content-media type="StaticGraphic" id="cm7014867842"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060101/cm7014867842.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907060000/tl0907060100/tl0907060101/cm7014867842text.xml"/></content-media>
<content-text><p><b>Résumé</b></p> <p>RIPv2 est un protocole de routage sans classe à vecteur de distance qui est défini dans le document RFC 1723. S’agissant d’un protocole de routage sans classe, RIPv2 inclut le masque de sous-réseau aux adresses réseau des mises à jour de routage. À l’instar des autres protocoles de routage sans classe, RIPv2 prend en charge les super-réseaux CIDR, VLSM et les réseaux discontinus.</p> <p>Nous avons constaté que les protocoles de routage par classe tels que RIPv1 ne prennent pas en charge les réseaux discontinus, car ils procèdent à un résumé automatique au niveau des périphéries du réseau principal. Un routeur qui reçoit des mises à jour de routage de plusieurs routeurs annonçant le même regroupement de route par classe ne peut pas déterminer les sous-réseaux qui appartiennent à chaque regroupement de route. Cette incapacité génère des résultats inattendus, tels que des paquets routés de manière incorrecte.</p> <p>RIPv1 est la version par défaut. La commande <span class="cmd"><b>version 2</b></span> permet de définir RIPv2 comme version par défaut.</p> <p>De la même manière que RIPv1, RIPv2 procède à un résumé automatique au niveau des périphéries de réseau principal. Cependant, RIPv2 permet de désactiver le regroupement automatique grâce à la commande <span class="cmd"><b>no auto-summary</b></span>. Le regroupement automatique peut être désactivé pour prendre en charge les réseaux discontinus. RIPv2 prend également en charge les super-réseaux CIDR et VLSM car le masque de sous-réseau spécifique est inclus dans l’adresse réseau lors de chaque mise à jour de routage. Vous pouvez utiliser la commande <span class="cmd"><b>debug ip rip</b></span> pour afficher la mise à jour RIP qui envoie le masque de sous-réseau avec l’adresse réseau dans l’entrée de route. </p> <p>La commande <span class="cmd"><b>show ip protocols</b></span> montre si RIP envoie et reçoit maintenant les mises à jour de la version 2 et si le résumé automatique est activé ou non.</p></content-text>
</page>
<page type="FullScreen" id="tl0907060102">
<content-media type="ChapterSummary" id="cm7458552167"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060102/cm7458552167.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907060000/tl0907060100/tl0907060102/cm7458552167text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="tl0907060103">
<content-media type="ActivityPKA" id="cm3597071240"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060103/cm3597071240/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907060000/tl0907060100/tl0907060103/cm3597071240/icontext.xml"/></content-media>
<content-text><p>L’exercice d’intégration des compétences Packet Tracer intègre toutes les connaissances et compétences que vous avez acquises dans les chapitres précédents de ce cours, et dans des cours précédents. Les compétences liées à RIPv2 sont également incluses. Dans cet exercice, vous créez un réseau entièrement nouveau.</p> <p>Muni d’un espace d’adressage et des spécifications relatives au réseau, vous devez concevoir un réseau conforme aux spécifications définies, puis implémenter une configuration de routage RIPv2 dotée d’un routage par défaut intégré. L’exercice fournit des instructions détaillées. </p> <p><content-link target="E2_PTAct_7_6_1_Directions.pdf" type="internalfile">Instructions d’intégration des compétences Packet Tracer (PDF)</content-link></p><p><b>Cliquez sur l’icône Packet Tracer pour plus de détails.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907060104">
<content-media type="StaticGraphic" id="cm3125995247"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060104/cm3125995247.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907060000/tl0907060100/tl0907060104/cm3125995247text.xml"/></content-media>
<content-text><p><b>Autres sources d’informations</b></p> <p><b>RFC 1723 RIP version 2</b></p> <p>Les documents RFC sont une série de documents soumis au groupe de travail IETF pour proposer une norme Internet ou transmettre de nouveaux concepts, de nouvelles informations ou parfois des notes d’humour. Le document RFC 1723 concerne RIP version 2. </p> <p>Les documents RFC sont accessibles à partir de plusieurs sites, notamment <content-link target="http://www.ietf.org" type="external">www.ietf.org</content-link>. Consultez tout ou partie du document RFC 1723 pour en savoir plus sur ce protocole de routage sans classe. </p> <p><b>Packet tracer</b></p> <p>Utilisez Packet Tracer pour créer deux réseaux par classe discontinus. Chaque réseau discontinu, dont un qui utilise VLSM, doit posséder plusieurs routeurs et sous-réseaux. Entre les deux groupes de réseaux discontinus, ajoutez un autre routeur reliant les deux réseaux discontinus. Assurez-vous d’utiliser un réseau principal différent entre ce routeur et chaque réseau discontinu. </p> <p>Utilisez ce scénario pour étudier les problèmes relatifs à RIPv1 et savoir comment utiliser RIPv2 pour résoudre ces problèmes de routage.</p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0907070000">
<title><content-text>Questionnaire du chapitre</content-text></title>
<topic type="" id="tl0907070100">
<title><content-text>Questionnaire du chapitre</content-text></title>
<page type="FullScreen" id="tl0907070101">
<content-media type="ChapterQuiz" id="cm7936652092"><title><content-text></content-text></title><media ref="tl0907000000/tl0907070000/tl0907070100/tl0907070101/cm7936652092/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl0907000000/tl0907070000/tl0907070100/tl0907070101/cm7936652092/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>
