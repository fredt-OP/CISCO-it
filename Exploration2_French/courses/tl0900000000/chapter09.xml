<chapter type="" id="tl0909000000">
<title><content-text>Protocole EIGRP</content-text></title>
<section type="ChapterIntroduction" id="tl0909000000">
<title><content-text>Présentation du chapitre</content-text></title>
<topic type="" id="tl0909000100">
<title><content-text>Présentation du chapitre</content-text></title>
<page type="OneColumn" id="tl0909000101">
<content-media type="StaticGraphic" id="cm6816439676"><title><content-text></content-text></title><media ref="tl0909000000/tl0909000000/tl0909000100/tl0909000101/cm6816439676.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909000000/tl0909000100/tl0909000101/cm6816439676text.xml"/></content-media>
<content-text><p>Le protocole EIGRP (Enhanced Interior Gateway Routing Protocol) est un protocole de routage sans classe à vecteur de distance publié en 1992 avec le logiciel IOS 9.21. Comme son nom l’indique, EIGRP est une amélioration du protocole IGRP (Interior Gateway Routing Protocol) de CISCO. Les deux sont des protocoles propriétaires et ne fonctionnent que sur des routeurs Cisco.</p> <p>En développant EIRGP, Cisco avait pour objectif principal la création d’une version sans classe du protocole IGRP. EIGRP comprend plusieurs fonctions peu répandues dans d’autres protocoles de routage par vecteur de distance tels que RIP (RIPv1 et RIPv2) et IGRP. Ces fonctions comprennent :</p> <ul><li> le protocole RTP (Reliable Transport Protocol) ;</li> <li> les mises à jour limitées ;</li> <li> l’algorithme DUAL (Diffusing Update Algorithm) ;</li> <li> l’établissement de contiguïtés ;</li> <li> les tables de voisinage et de topologie.</li></ul> <p>Bien qu’EIGRP puisse <i>se comporter</i> comme un protocole de routage à état de liens, il s’agit tout de même d’un protocole de routage à vecteur de distance.</p> <p><b> Remarque : </b>le terme de protocole de routage <i>hybride</i> est parfois utilisé pour définir le protocole EIGRP. Toutefois, il peut être trompeur, car EIGRP n’est pas un protocole hybride entre les protocoles à vecteur de distance et les protocoles à état de liens. Il s’agit d’un protocole de routage à vecteur de distance à part entière. Par conséquent, Cisco n’utilise plus ce terme pour désigner EIGRP.</p> <p>Dans ce chapitre, vous apprendrez à configurer le protocole EIGRP et à vérifier votre configuration à l’aide de nouvelles commandes <span class="cmd">show</span>. Vous apprendrez également la formule que le protocole EIGRP utilise pour calculer cette métrique composite.</p> <p>Le protocole RTP (Reliable Transport Protocol) est propre à EIRGP et permet la livraison fiable et non fiable des paquets EIGRP. En outre, le protocole EIGRP établit des relations avec des routeurs directement connectés qui sont également configurés pour EIGRP. Les relations de voisinage servent à assurer le suivi de l’état de ces voisins. Le protocole RTP et le suivi des contiguïtés de voisinage préparent le terrain pour le moteur du protocole EIGRP, l’algorithme de diffusion des mises à jour DUAL (Diffusing Update Algorithm). </p> <p>En tant que moteur logiciel du protocole EIGRP, l’algorithme DUAL se trouve au centre du protocole de routage et garantit des chemins <content-link target="cg1421657329" type="glossary">sans boucle</content-link> et des chemins de secours sur l’ensemble du domaine de routage. Vous apprendrez comment DUAL sélectionne une route à installer dans la table de routage et traite les routes de secours potentielles.</p> <p>Comme le protocole RIPv2, EIGRP peut adopter un mode de fonctionnement par classe ou sans classe. Vous apprendrez comment désactiver le résumé des routes et comment résumer manuellement les réseaux afin de réduire le volume des tables de routage. Enfin, vous apprendrez comment utiliser le routage par défaut avec EIGRP.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909010000">
<title><content-text>Présentation d’EIGRP</content-text></title>
<topic type="" id="tl0909010100">
<title><content-text>Protocole EIGRP : un protocole de routage à vecteur de distance amélioré</content-text></title>
<page type="OneColumn" id="tl0909010101">
<content-media type="StaticGraphic" id="cm4569755634"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010100/tl0909010101/cm4569755634.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010100/tl0909010101/cm4569755634text.xml"/></content-media>
<content-text><p>Bien que le protocole EIGRP soit décrit comme un protocole de routage à vecteur de distance amélioré, il s’agit d’un protocole de routage à vecteur de distance à part entière. Cela peut quelquefois engendrer la confusion. Pour être en mesure d’en apprécier les améliorations et de dissiper toute confusion, commençons par étudier son prédécesseur, IGRP. </p> <p><b>Les origines du protocole EIGRP : IGRP</b></p> <p>Cisco a développé le protocole propriétaire IGRP en 1985, pour pallier certaines des limites du protocole RIPv1, notamment l’utilisation du nombre de sauts comme métrique et la limite de 15 sauts comme taille maximale du réseau. </p> <p>Les protocoles IGRP et EIGRP n’utilisent pas le nombre de sauts, mais des métriques complexes comprenant la bande passante, le délai, la fiabilité et la charge. Par défaut, les deux protocoles de routage utilisent uniquement la bande passante et le délai. Cependant, étant donné qu’IGRP est un protocole de routage par classe utilisant l’algorithme Bellman-Ford et les mises à jour périodiques, son utilité est limitée sur bon nombre de réseaux actuels. </p> <p>C’est pour cette raison que Cisco a amélioré IGRP en mettant en œuvre un nouvel algorithme, DUAL, ainsi que d’autres fonctions. Les commandes des protocoles IGRP et EIGRP sont similaires, et dans bien des cas identiques. Cela permet une migration aisée d’IGRP vers EIGRP. Cisco a cessé d’utiliser le protocole IGRP avec IOS 12.2(13)T et 12.2(R1s4)S.</p> <p>Bien qu’elles soient abordées plus en détail dans ce chapitre, examinons les différences existant entre un protocole de routage à vecteur de distance tel que RIP ou IGRP et le protocole de routage à vecteur de distance amélioré EIGRP.</p> <p>La figure résume les principales différences entre un protocole de routage à vecteur de distance traditionnel tel que le protocole RIP et le protocole EIGRP.</p> <p><b>L’algorithme</b></p> <p>Les protocoles de routage à vecteur de distance traditionnels utilisent tous des variantes des algorithmes Bellman-Ford ou Ford-Fulkerson. Ces protocoles, tels que RIP et IGRP, affectent un délai aux entrées de routage individuelles, et nécessitent donc l’envoi périodique de mises à jour de la table de routage. </p> <p>EIGRP utilise l’algorithme DUAL (Diffusing Update Algorithm). Bien qu’il reste un protocole de routage à vecteur de distance, le protocole EIGRP avec DUAL met en œuvre des fonctions qu’on ne trouve pas dans les protocoles traditionnels de ce type. Le protocole EIGRP n’envoie pas de mises à jour périodiques et les entrées de route n’ont pas de délai de validité. EIGRP utilise plutôt un protocole Hello léger pour contrôler l’état de la connexion avec ses voisins. Seules les modifications des données de routage, par exemple un nouveau lien ou un lien devenant indisponible, déclenchent une mise à jour de routage. Les mises à jour de routage EIGRP restent néanmoins des vecteurs de distance transmis aux voisins connectés directement. </p> <p><b>Détermination du chemin</b></p> <p>Les protocoles de routage à vecteur de distance traditionnels tels que RIP et IGRP conservent uniquement les routes préférées, c’est-à-dire le meilleur chemin vers un réseau de destination. Si la route devient indisponible, le routeur attend une autre mise à jour de routage comprenant un chemin vers ce réseau distant. </p> <p>L’algorithme DUAL du protocole EIGRP maintient une table topologique et une table de routage distinctes. La table topologique inclut à la fois le meilleur chemin vers le réseau de destination et tous les chemins de secours que DUAL a identifiés comme étant sans boucle. Un chemin sans boucle signifie qu’aucune route du voisin vers le réseau de destination ne passe par ce routeur. </p> <p>Plus loin dans ce chapitre, vous verrez que l’algorithme DUAL considère une route comme chemin de secours sans boucle valide si elle respecte un critère appelé condition de faisabilité. Tout chemin de secours conforme à la condition de faisabilité est garanti exempt de boucle. EIGRP étant un protocole de routage à vecteur de distance, il est possible qu’il existe des chemins de secours sans boucle vers un réseau de destination ne respectant pas la condition de faisabilité. L’algorithme DUAL n’inclut donc <i>pas</i> ces chemins dans la table topologique en tant que chemins de secours sans boucle valides. </p> <p>Lorsqu’une route devient indisponible, DUAL recherche un chemin de secours valide dans la table topologique. S’il en existe un, il est immédiatement intégré à la table de routage. Dans le cas contraire, DUAL lance un processus de détection sur le réseau pour voir s’il existe un chemin de secours ne satisfaisant pas à la condition de faisabilité. Ce processus est traité de façon plus complète plus loin dans ce chapitre.</p> <p><b>Convergence</b></p> <p>Les protocoles de routage à vecteur de distance traditionnels tels que RIP et IGRP utilisent des mises à jour périodiques. En raison de la nature non fiable de ces mises à jour périodiques, les protocoles de routage à vecteur de distance traditionnels peuvent rencontrer des problèmes de boucles de routage et de comptage à l’infini. Les protocoles RIP et IGRP utilisent divers mécanismes pour éviter ces problèmes, notamment les minuteurs de mise hors service, qui génèrent des délais de convergence élevés.</p> <p>Le protocole EIGRP n’utilise pas de minuteurs de mise hors service. En revanche, il obtient des chemins sans boucle grâce à un système de calculs de routes (calculs de diffusion) effectués de façon coordonnée parmi les routeurs. Le détail de ces calculs dépasse le cadre de ce cours, mais il en résulte des délais de convergence inférieurs à ceux des protocoles de routage à vecteur de distance traditionnels.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010200">
<title><content-text>Format de message EIGRP</content-text></title>
<page type="OneColumn" id="tl0909010201">
<content-media type="InteractiveGraphicRollovers" id="cm4267074960"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010200/tl0909010201/cm4267074960.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010200/tl0909010201/cm4267074960text.xml"/></content-media>
<content-text><p><b>Placez le pointeur de la souris sur les champs du message EIGRP encapsulé pour examiner le processus d’encapsulation. </b></p> <p>La partie données d’un message EIGRP est encapsulée dans un paquet. Ce champ de données est nommé Type/Longueur/Valeur ou TLV. Comme indiqué dans la figure, les types de TLV concernant ce cours sont les paramètres EIGRP, les routes IP internes et les routes IP externes. Les composants des champs de données TLV sont traités plus en détail à la page suivante.</p> <p>L’en-tête de paquet EIGRP est inclus dans chaque paquet EIGRP, quel que soit son type. L’en-tête de paquet EIGRP et le champ TLV sont ensuite encapsulés dans un paquet IP. Dans l’en-tête de paquet IP, le champ protocole est défini avec la valeur 88 pour indiquer EIGRP et l’adresse de destination est définie avec l’adresse de multidiffusion 224.0.0.10. Si le paquet EIGRP est encapsulé dans une trame Ethernet, l’adresse MAC de destination est elle aussi une adresse de multidiffusion : 01-00-5E-00-00-0A.</p></content-text>
</page>
<page type="OneColumn" id="tl0909010202">
<content-media type="AnimationPartialScreen" id="cm4763640792"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010200/tl0909010202/cm4763640792.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010200/tl0909010202/cm4763640792text.xml"/></content-media>
<content-text><p><b>Remarque :</b> dans la rubrique qui suit concernant les messages EIGRP, de nombreux champs sortent du programme de ce cours. Tous les champs sont indiqués pour fournir une illustration précise du format du message EIGRP. Cependant, seuls les champs intéressant les candidats CCNA sont décrits.</p> <p><b>Cliquez sur En-tête de paquet EIGRP dans la figure.</b></p> <p>Chaque message EIGRP inclut l’en-tête. Les champs importants pour notre cours sont les champs Code opération et Numéro de système autonome. Le code opération indique le type de paquet EIGRP : </p> <ul><li> Mise à jour</li> <li> Demande</li> <li> Réponse</li> <li> Hello</li></ul> <p>Le Numéro de <content-link target="cg6494076566" type="glossary">système autonome</content-link> spécifie l’ID du processus de routage EIGRP. Contrairement à RIP, les routeurs Cisco peuvent exécuter plusieurs instances d’EIGRP. Le numéro de système autonome (AS) permet d’assurer le suivi de plusieurs instances du protocole EIGRP.</p> <p>Les types de paquets EIGRP sont traités plus loin dans ce chapitre.</p> <p><b>Cliquez sur TLV : paramètres EIGRP dans la figure.</b></p> <p>Le message de paramètres EIGRP contient les pondérations que le protocole EIGRP utilise pour sa métrique composite. Par défaut, seuls la bande passante et le délai sont pondérés. Les deux sont pondérés de façon égale ; par conséquent, le champ K1 correspondant à la bande passante et le champ K3 correspondant au délai reçoivent tous les deux la valeur 1. Les autres valeurs K ont pour valeur zéro. Les calculs de métrique sont traités en détail plus loin dans ce chapitre.</p> <p>Le temps d’attente correspond au délai pendant lequel le voisin EIGRP qui reçoit le message doit attendre avant de considérer que le routeur annonceur est hors service. Le temps d’attente est traité en détail plus loin dans ce chapitre.</p> <p><b>Cliquez sur TLV : IP interne dans la figure.</b></p> <p>Le message interne IP sert à annoncer les routes EIGRP dans un système autonome. Les champs importants pour notre étude sont les suivants : les champs de métrique (Délai et Bande passante), le masque de sous-réseau (longueur de préfixe) et le champ de destination. </p> <p>Le délai est calculé comme étant la somme des délais de la source à la destination, en unités de 10 microsecondes. La bande passante correspond à la valeur minimale de bande passante configurée pour les différentes interfaces le long du chemin. </p> <p>Le masque de sous-réseau est indiqué comme la longueur du préfixe ou le nombre de bits réseau du masque de sous-réseau. Par exemple, la longueur du préfixe du masque de sous-réseau 255.255.255.0 est 24, car 24 correspond au nombre de bits réseau. </p> <p>Le champ Destination contient l’adresse du réseau de destination. Bien que seuls 24 bits soient indiqués dans cette figure, le champ varie en fonction de la valeur de la partie réseau de l’adresse réseau en 32 bits. Par exemple, la partie réseau de 10.1.0.0/16 est 10.1. Par conséquent, le champ Destination stocke les 16 premiers bits. La longueur <i>minimale</i> de ce champ étant de 24 bits, le reste du champ est complété par des zéros. Si une adresse réseau est supérieure à 24 bits (192.168.1.32/27, par exemple), le champ Destination est étendu de 32 bits supplémentaires (pour un total de 56 bits) et les bits non utilisés sont complétés par des zéros.</p> <p><b>Cliquez sur TLV : IP externe dans la figure.</b></p> <p>Le message Externe IP est utilisé lorsque des routes externes sont importées dans le processus de routage EIGRP. Dans ce chapitre, nous importerons ou redistribuerons une route statique par défaut dans le protocole EIGRP. Notez que la partie inférieure du TLV IP Externe contient l’ensemble des champs utilisés dans les TLV des routes IP internes. </p> <p><b>Remarque :</b> certains ouvrages concernant EIGRP indiquent de façon erronée que l’unité de transmission maximale (MTU) est l’une des métriques utilisées par le protocole EIGRP. MTU <i>n’est pas</i> une métrique utilisée par EIGRP. Cette unité est incluse dans les mises à jour de routage, mais n’est pas utilisée pour déterminer la métrique de routage.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010300">
<title><content-text>Modules dépendant d’un protocole (PDM)</content-text></title>
<page type="OneColumn" id="tl0909010301">
<content-media type="StaticGraphic" id="cm3812279625"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010300/tl0909010301/cm3812279625.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010300/tl0909010301/cm3812279625text.xml"/></content-media>
<content-text><p>EIGRP est en mesure d’effectuer le routage de plusieurs protocoles différents, notamment IP, IPX et AppleTalk, en utilisant des modules dépendant d’un protocole. Ces derniers sont chargés d’effectuer des tâches de routage spécifiques pour chaque protocole de couche réseau. </p> <p>Exemple :</p> <ul><li> Le module IP-EIGRP est chargé de l’envoi et de la réception des paquets EIGRP encapsulés dans IP et de l’utilisation de l’algorithme DUAL pour créer et maintenir la table de routage IP. Comme vous pouvez le voir dans la figure, le protocole EIGRP utilise différents paquets EIGRP et maintient des tables de voisinage, topologique et de routage distinctes pour chaque protocole de couche réseau. </li> <li> Le module IPX EIGRP est responsable de l’échange des informations de routage relatives aux réseaux IPX avec d’autres routeurs IPX EIGRP. IPX EIGRP et Appletalk EIGRP ne sont pas étudiés dans le cadre de ce cours. </li></ul></content-text>
</page>
</topic>
<topic type="" id="tl0909010400">
<title><content-text>Types de paquets RTP et EIGRP</content-text></title>
<page type="OneColumn" id="tl0909010401">
<content-media type="StaticGraphic" id="cm6683622472"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010400/tl0909010401/cm6683622472.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010400/tl0909010401/cm6683622472text.xml"/></content-media>
<content-text><p>EIGRP utilise le protocole de transport fiable RTP (Reliable Transport Protocol) pour la livraison et la réception des paquets EIGRP. EIGRP a été conçu comme un protocole de routage indépendant des couches réseau et ne peut par conséquent pas utiliser les services UDP ou TCP car IPX et Appletalk n’utilisent pas les protocoles de la suite TCP/IP. La figure illustre le mode de fonctionnement de RTP d’un point de vue conceptuel. </p> <p>Bien qu’il soit nommé « fiable », le protocole RTP (Reliable Transport Protocol) inclut à la fois la livraison fiable et non fiable des paquets, comme les protocoles TCP et UDP respectivement. Le transport RTP fiable requiert l’envoi d’un reçu à l’expéditeur par le destinataire. Un paquet RTP non fiable n’exige pas de reçu. </p> <p>Le protocole RTP peut envoyer des paquets en monodiffusion ou en multidiffusion. Les paquets EIGRP en multidiffusion utilisent l’adresse de multidiffusion réservée 224.0.0.10.</p></content-text>
</page>
<page type="OneColumn" id="tl0909010402">
<content-media type="InteractiveGraphicHotspots" id="cm5603778361"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010400/tl0909010402/cm5603778361.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010400/tl0909010402/cm5603778361text.xml"/></content-media>
<content-text><p><b>Types de paquets EIGRP</b></p> <p>EIGRP utilise cinq types de paquets différents, dont certains par paires.</p> <p><b>Cliquez sur Hello dans la figure.</b></p> <p>Les <b>paquets Hello</b> sont utilisés par EIGRP pour découvrir des voisins et former des contiguïtés avec ces voisins. Les paquets hello EIGRP sont de type multidiffusion et utilisent la livraison non fiable. Les paquets Hello du protocole EIGRP sont traités dans une section ultérieure.</p> <p><b>Cliquez sur Mise à jour et ACK dans la figure.</b></p> <p>Les <b>paquets de mise à jour</b> sont utilisés par EIGRP pour propager des informations de routage. Contrairement au protocole RIP, EIGRP n’envoie pas de mises à jour périodiques. Les paquets de mises à jour sont transmis uniquement en cas de nécessité. Les mises à jour EIGRP contiennent uniquement les informations de routage nécessaires et ne sont envoyées qu’aux routeurs concernés. Les paquets de mise à jour EIGRP utilisent la livraison fiable. Ils sont envoyés en multidiffusion lorsqu’ils concernent plusieurs routeurs, ou en monodiffusion lorsqu’ils ne concernent qu’un seul routeur. Dans cette figure, puisqu’il s’agit de liaisons point à point, les mises à jour sont envoyées en monodiffusion.</p> <p>Les <b>paquets ACK</b> (de reçu) sont envoyés par EIGRP lorsque la livraison fiable est utilisée. RTP utilise la livraison fiable pour les paquets de mise à jour, de demande et de réponse EIGRP. Les paquets ACK EIGRP contiennent un numéro de reçu différent de zéro et sont toujours envoyés à l'aide d'une adresse de monodiffusion.</p> <p>Dans la figure, R2 a perdu la connectivité avec le réseau local lié à son interface FastEthernet. R2 envoie immédiatement une mise à jour à R1 et R3 mentionnant la route hors fonction. R1 et R3 répondent par un reçu (ACK).</p> <p><b>Cliquez sur Demande et réponse dans la figure.</b></p> <p>Les <b>paquets de demande et de réponse</b> sont utilisés par l’algorithme DUAL lors de la recherche de réseaux et d’autres tâches. Les demandes et les réponses utilisent la livraison fiable. Les demandes utilisent la multidiffusion, tandis que les réponses sont toujours envoyées en monodiffusion. L’algorithme DUAL est traité dans une section ultérieure. Les paquets de demande et de réponse sont étudiés plus en détail dans le programme CCNP.</p> <p>Dans la figure, R2 a perdu sa connectivité avec le réseau local et envoie des demandes à tous les voisins EIGRP à la recherche d’autres routes possibles vers le réseau local. Les demandes utilisant la livraison fiable, le routeur destinataire doit renvoyer un reçu (ACK) EIGRP. (Pour que cet exemple reste simple, les reçus n’ont pas été représentés sur le graphique.)</p> <p>Tous les voisins doivent envoyer une réponse, qu’ils disposent ou non d’une route vers le réseau hors fonction. Les réponses utilisant elles aussi la livraison fiable, les routeurs tels que R2 doivent renvoyer un reçu.</p> <p><b>Remarque :</b> vous vous demandez peut-être pourquoi R2 envoie une demande pour un réseau dont il sait qu’il est hors service. En fait, seule l’interface liée au réseau est hors service. Un autre routeur pourrait être connecté au même réseau local. C’est pour cette raison que R2 envoie une demande concernant ces éventuels routeurs avant de supprimer le réseau de sa base de données.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010500">
<title><content-text>Protocole Hello</content-text></title>
<page type="OneColumn" id="tl0909010501">
<content-media type="StaticGraphic" id="cm1582251881"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010500/tl0909010501/cm1582251881.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010500/tl0909010501/cm1582251881text.xml"/></content-media>
<content-text><p>Avant qu’un paquet EIGRP puisse être échangé entre routeurs, EIGRP doit détecter ses voisins. Les voisins EIGRP sont d’autres routeurs exécutant EIGRP sur des réseaux partagés connectés directement.</p> <p>Les routeurs EIGRP détectent les voisins et établissent des contiguïtés avec les routeurs voisins au moyen de paquets Hello. Sur la plupart des réseaux, des paquets Hello EIGRP sont envoyés toutes les 5 secondes. Sur les réseaux multipoints à accès multiple sans diffusion (NBMA) tels que les interfaces X.25, Frame Relay et ATM avec liaisons d’accès T1 (1 544 Mbits/s) ou plus lentes, les paquets Hello sont envoyés en monodiffusion toutes les 60 secondes. Un routeur EIGRP suppose que tant qu’il reçoit des paquets Hello d’un voisin, ce dernier et ses routes restent praticables. </p> <p>Le temps d’attente indique au routeur le délai maximum qu’il doit attendre pour recevoir le Hello suivant avant de déclarer le voisin inaccessible. Par défaut, le <content-link target="cg6535488659" type="glossary">temps d’attente</content-link> est égal à trois fois l’intervalle Hello, soit 15 secondes sur la plupart des réseaux et 180 secondes sur les réseaux NBMA à bas débit. Si le temps d’attente expire, EIGRP déclare la route comme hors service et l’algorithme DUAL recherche un nouveau chemin en envoyant des paquets de demande. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909010600">
<title><content-text>Mises à jour limitées d’EIGRP</content-text></title>
<page type="OneColumn" id="tl0909010601">
<content-media type="StaticGraphic" id="cm9368639123"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010600/tl0909010601/cm9368639123.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010600/tl0909010601/cm9368639123text.xml"/></content-media>
<content-text><p>EIGRP utilise le terme <i>partiel</i> ou <i>limité</i> pour qualifier ses paquets de mise à jour. Contrairement au protocole RIP, EIGRP n’envoie pas de mises à jour périodiques. En revanche, EIGRP envoie ses mises à jour uniquement lorsque la métrique d’une route est modifiée. </p> <p>Le terme <i>partiel</i> signifie que la mise à jour ne contient que les informations concernant les modifications de route. EIGRP envoie ces mises à jour incrémentielles en cas de modification de l’état d’une destination, plutôt que d’envoyer la totalité du contenu de la table de routage. </p> <p>Le terme <i>limité</i> désigne la propagation des mises à jour envoyées uniquement aux routeurs affectés par la modification. La mise à jour partielle est automatiquement « limitée », de sorte que seuls les routeurs qui ont besoin de l’information sont mis à jour. </p> <p>En envoyant uniquement les informations de routage nécessaires aux seuls routeurs qui en ont besoin, EIGRP réduit la bande passante requise pour l’envoi des paquets EIGRP.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010700">
<title><content-text>Algorithme DUAL : présentation</content-text></title>
<page type="OneColumn" id="tl0909010701">
<content-media type="AnimationPartialScreen" id="cm5040324477"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010700/tl0909010701/cm5040324477.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010700/tl0909010701/cm5040324477text.xml"/></content-media>
<content-text><p>L’algorithme DUAL (Diffusing Update Algorithm) est l’algorithme de convergence utilisé par le protocole EIGRP à la place des algorithmes Bellman-Ford ou Ford Fulkerson qui sont utilisés par d’autres protocoles de routage à vecteur de distance tels que RIP. DUAL a été élaboré à partir de recherches menées par l’institut SRI International, grâce à des calculs proposés en premier lieu par E.W. Dijkstra et C.S. Scholten. Le travail le plus important concernant DUAL a été mené par J.J. Garcia-Luna-Aceves.</p> <p>Les boucles de routage, même temporaires, peuvent être préjudiciables aux performances réseau. Les protocoles de routage à vecteur de distance tels que RIP évitent les boucles de routage à l’aide de règles de découpage d’horizon et de <content-link target="cg3331630841" type="glossary">minuteurs de mise hors service</content-link>. Bien que le protocole EIGRP utilise ces deux techniques, il les utilise un peu différemment, le principal moyen d’éviter les boucles de routage étant l’algorithme DUAL. </p> <p><b>Cliquez sur Lire pour afficher le fonctionnement de base de l’algorithme DUAL.</b></p> <p>L’algorithme DUAL permet d’éviter les boucles à tout moment grâce à des calculs de route. Cela permet à tous les routeurs concernés par une modification de topologie de se synchroniser simultanément. Les routeurs qui ne sont pas affectés par le changement de topologie ne sont pas impliqués dans le nouveau calcul. Cette méthode fournit au protocole EIGRP des temps de convergence plus rapides que ceux des autres protocoles de routage à vecteur de distance. </p> <p>Le processus de décision de tous les calculs de route est exécuté par la technologie Finite State Machine (FSM) DUAL. Globalement, une Finite State Machine (FSM) est un modèle de comportement composé d’un nombre fini d’états, de transitions entre ces différents états et d’événements ou d’actions créant ces transitions.</p> <p>La FSM DUAL recherche toutes les routes, utilise sa métrique pour sélectionner les chemins efficaces et sans boucle, et sélectionne les routes ayant le coût le plus faible pour constituer la table de routage. La machine FSM DUAL sera présentée plus en détail plus loin dans ce chapitre.</p> <p>Les nouveaux calculs de l’algorithme DUAL pouvant être exigeants en termes de temps processeur, il est souhaitable de les éviter dans la mesure du possible. DUAL conserve donc une liste de routes de secours déjà déterminées comme étant sans boucle. Si la route principale de la table de routage est mise hors service, la meilleure route de secours est immédiatement ajoutée à la table de routage. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909010800">
<title><content-text>Distance administrative</content-text></title>
<page type="OneColumn" id="tl0909010801">
<content-media type="StaticGraphic" id="cm5496832646"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010800/tl0909010801/cm5496832646.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010800/tl0909010801/cm5496832646text.xml"/></content-media>
<content-text><p>Comme vous l’avez appris au chapitre 3, « Présentation des protocoles de routage dynamique », la distance administrative est la fiabilité (ou préférence) de la source de la route. Par défaut, le protocole EIGRP a pour distance administrative 90 pour les routes internes, et 170 pour les routes importées depuis une source externe, telles que les routes par défaut. Par rapport à d’autres protocoles IGP (Interior Gateway Protocol), le protocole EIGRP est préférable pour Cisco IOS car sa distance administrative est la plus courte. </p> <p>Notez que dans la figure, EIGRP a une troisième valeur de distance administrative de 5 correspondant aux résumés du routage. Vous apprendrez à configurer les résumés du routage EIGRP plus loin dans ce chapitre.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010900">
<title><content-text>Authentification</content-text></title>
<page type="OneColumn" id="tl0909010901">
<content-media type="StaticGraphic" id="cm8222038895"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010900/tl0909010901/cm8222038895.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010900/tl0909010901/cm8222038895text.xml"/></content-media>
<content-text><p>Comme d’autres protocoles de routage, EIGRP peut être configuré pour l’authentification. Les protocoles RIPv2, EIGRP, OSPF, IS-IS et BGP peuvent tous être configurés pour chiffrer et authentifier leurs informations de routage.</p> <p>L’authentification des informations de routage transmises est une pratique recommandée. Elle garantit que les routeurs n’accepteront que les informations en provenance de routeurs ayant été configurés avec le même mot de passe ou les mêmes informations d’authentification. </p> <p><b>Remarque :</b> l’authentification ne chiffre pas la table de routage du routeur.</p> <p>Comme nous l’avons indiqué précédemment, la configuration des protocoles de routage pour utiliser l’authentification sera étudiée dans un cours ultérieur. </p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909020000">
<title><content-text>Configuration EIGRP de base</content-text></title>
<topic type="" id="tl0909020100">
<title><content-text>Topologie de réseau EIGRP</content-text></title>
<page type="OneColumn" id="tl0909020101">
<content-media type="InteractiveGraphicHotspots" id="cm5326487712"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020100/tl0909020101/cm5326487712.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020100/tl0909020101/cm5326487712text.xml"/></content-media>
<content-text><p>La figure montre la topologie issue des chapitres précédents, mais inclut maintenant en outre un routeur ISP. Notez que les routeurs R1 et R2 ont tous deux des masques de sous-réseau faisant partie du réseau par classe 172.16.0.0/16, une adresse de classe B. Le fait que 172.16.0.0 soit une adresse de classe B n’est pertinent que parce que le protocole EIGRP récapitule automatiquement les routes au niveau des périphéries de classes, comme RIP. </p> <p><b>Cliquez sur R1, R2 et R3 pour afficher la configuration initiale de chaque routeur.</b></p> <p>Notez que le routeur ISP n’existe pas physiquement dans notre configuration. La connexion entre R2 et le routeur ISP est représentée avec une <content-link target="cg9480679254" type="glossary">interface de bouclage</content-link> sur R2. Comme nous l’avons vu au chapitre 7, « RIPv2 », une interface de bouclage peut être utilisée pour représenter une interface sur un routeur n’ayant pas de connexion réelle avec une liaison physique sur le réseau. Les adresses de bouclage peuvent être contrôlées à l’aide de la commande <span class="cmd"><b>ping</b></span> et être incluses dans les mises à jour de routage.</p> <p><b>Remarque :</b> les interfaces de bouclage ont également des utilisations spécifiques dans certains protocoles de routage, comme nous le verrons au chapitre 11, Protocole OSPF.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909020200">
<title><content-text>Systèmes autonomes et ID de processus</content-text></title>
<page type="OneColumn" id="tl0909020201">
<content-media type="StaticGraphic" id="cm1271893935"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020200/tl0909020201/cm1271893935.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020200/tl0909020201/cm1271893935text.xml"/></content-media>
<content-text><p><b>Système autonome</b></p> <p>Un système autonome (AS) est une série de réseaux sous le contrôle administratif d’une entité unique présentant une stratégie de routage commune sur Internet. Dans la figure, les sociétés A, B, C et D sont sous le contrôle administratif de FAI1. FAI1 « présente une stratégie de routage commune » pour toutes les sociétés lorsqu’il annonce les routes à FAI2. </p> <p>Les principes directeurs de la création, de la sélection et de l’enregistrement d’un système autonome (AS) sont décrits dans le document RFC 1930. Les numéros AS sont affectés par l’IANA (Internet Assigned Numbers Authority), l’autorité qui affecte les espaces d’adressage IP. L’IANA et les registres d’enregistrement Internet locaux (RIR) vous ont été présentés dans un cours précédent. Les registres RIR sont chargés d’affecter un numéro AS à une entité à partir du bloc de numéros AS qui lui a été affecté. Avant 2007, les numéros AS étaient des nombres de 16 bits, allant de 0 à 65535. Maintenant, les numéros AS affectés sont des nombres de 32 bits, ce qui porte le nombre de numéros AS disponibles à plus de 4 milliards. </p> <p>Qui a besoin d’un numéro de système autonome ? En général, les fournisseurs d’accès internet (FAI), les fournisseurs de réseaux fédérateurs Internet et les grands organismes qui se connectent à d’autres entités possédant aussi un numéro AS. Ces FAI et ces grandes institutions utilisent le protocole de routage de passerelle externe, ou BGP (Border Gateway Protocol), pour propager les données de routage. BGP est l’unique protocole de routage qui utilise un numéro de système autonome réel dans sa configuration. </p> <p>La grande majorité des sociétés et des institutions possédant des réseaux IP n’ont pas besoin de numéro AS car ces réseaux sont sous le contrôle d’une entité plus importante, telle qu’un FAI. Ces sociétés utilisent des protocoles de passerelle internes tels que RIP, EIGRP, OSPF et IS-IS pour acheminer des paquets à l’intérieur de leurs propres réseaux. Chacune représente ainsi un des nombreux réseaux indépendants et autonomes dans le système autonome du FAI. Le FAI est responsable du routage des paquets à l’intérieur de son système autonome et vers les autres systèmes autonomes. </p></content-text>
</page>
<page type="OneColumn" id="tl0909020202">
<content-media type="StaticGraphic" id="cm7178461969"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020200/tl0909020202/cm7178461969.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020200/tl0909020202/cm7178461969text.xml"/></content-media>
<content-text><p><b>ID de processus</b></p> <p>EIGRP et OSPF utilisent tous les deux un ID de processus pour représenter une instance de leur protocole de routage respectif s’exécutant sur le routeur. </p> <span class="cmd"><p>Router(config)#<b>router eigrp </b><i>système-autonome</i> </p></span> <p>Bien qu’EIGRP appelle ce paramètre un numéro de « système autonome », celui-ci fonctionne en fait comme un ID de processus. Ce numéro n’est <i>pas</i> associé au numéro de système autonome étudié précédemment et n’importe quelle valeur de 16 bits peut lui être attribuée. </p> <span class="cmd"><p>Router(config)#<b>router eigrp 1</b></p></span> <p>Dans cet exemple, le nombre 1 désigne le processus EIGRP particulier s’exécutant sur ce routeur. Pour établir des contiguïtés de voisinage, le protocole EIGRP requiert que tous les routeurs du même domaine de routage soient configurés avec le même ID de processus. En général, un seul ID de processus est configuré sur un routeur pour un protocole de routage donné. </p> <p><b> Remarque : </b>RIP n’utilise pas les ID de processus et ne peut donc prendre en charge qu’une seule instance de RIP. EIGRP et OSPF peuvent tous deux prendre en charge plusieurs instances de chaque protocole de routage, bien que ce type de mise en œuvre de plusieurs protocoles de routage ne soit en général ni nécessaire, ni conseillé. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909020300">
<title><content-text>La commande router eigrp</content-text></title>
<page type="OneColumn" id="tl0909020301">
<content-media type="StaticGraphic" id="cm4718440561"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020300/tl0909020301/cm4718440561.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020300/tl0909020301/cm4718440561text.xml"/></content-media>
<content-text><p>La commande de configuration globale <span class="cmd"><b>router eigrp </b><i>système-autonome</i></span> active le protocole EIGRP. Le paramètre de système autonome est un nombre choisi entre 1 et 65 535 choisi par l’administrateur réseau. Ce nombre est le numéro d’ID de processus, et il est important car tous les routeurs situés sur ce domaine de routage EIGRP doivent utiliser le même numéro d’ID de processus (numéro de <span class="cmd"><i>système-autonome</i></span>).</p> <p><b>Cliquez sur Sortie du routeur dans la figure.</b></p> <p>Comme vous pouvez le voir dans la sortie du routeur et la topologie de la figure, nous allons activer EIGRP sur les trois routeurs en utilisant l’ID de processus 1.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909020400">
<title><content-text>La commande network</content-text></title>
<page type="OneColumn" id="tl0909020401">
<content-media type="StaticGraphic" id="cm8531213541"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020400/tl0909020401/cm8531213541.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020400/tl0909020401/cm8531213541text.xml"/></content-media>
<content-text><p>La commande network du protocole EIGRP a la même fonction que dans les autres protocoles de routage IGP : </p> <ul><li> toute interface sur ce routeur qui correspond à l’adresse réseau figurant dans la commande <span class="cmd"><b>network</b></span> est activée pour envoyer et recevoir des mises à jour EIGRP ;</li> <li> ce réseau (ou sous-réseau) sera inclus dans les mises à jour de routage EIGRP.</li></ul> <p><b>Cliquez sur Sortie du routeur dans la figure.</b></p> <p>La commande <span class="cmd"><b>network</b></span> est utilisée en mode de configuration du routeur.</p> <span class="cmd"><p>Router(config-router)#<b>network </b><i>adresse-réseau</i></p></span> <p>Le paramètre <span class="cmd"><i>adresse-réseau</i></span> correspond à l’adresse réseau par classe de cette interface. La figure montre les commandes réseau configurées pour R1 et R2. R3 sera configuré sur la page suivante. Dans la figure, une seule instruction de réseau par classe est utilisée sur R1 pour contenir les deux sous-réseaux 172.16.1.0/24 et 172.16.3.0/30 :</p> <span class="cmd"><p>R1(config-router)#<b>network 172.16.0.0</b></p></span>  <p>Lorsqu’EIGRP est configuré sur le routeur R2, DUAL envoie un message de notification à la console indiquant qu’une relation de voisinage avec un autre routeur EIGRP a été établie. Cette nouvelle <content-link target="cg3325821460" type="glossary">contiguïté</content-link> s’établit automatiquement car R1 et R2 utilisent le même processus de routage <span class="cmd"><b>eigrp 1</b></span> et les deux routeurs envoient désormais des mises à jour sur le réseau 172.16.0.0.</p> <span class="cmd"><p>R2(config-router)#<b>network 172.16.0.0</b></p></span> <span class="cmd"><p>%DUAL-5-NBRCHANGE: <span class="blue">IP-EIGRP 1</span>: Neighbor 172.16.3.1 (Serial0/0) is up: new adjacency</p></span></content-text>
</page>
<page type="OneColumn" id="tl0909020402">
<content-media type="StaticGraphic" id="cm3761399799"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020400/tl0909020402/cm3761399799.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020400/tl0909020402/cm3761399799text.xml"/></content-media>
<content-text><p><b>La commande </b><span class="cmd"><b>network</b></span><b> avec masque générique</b></p> <p>Par défaut, si la commande <span class="cmd">network</span> et une adresse de réseau par classe telle que 172.16.0.0 sont utilisées, toutes les interfaces du routeur appartenant à cette adresse de réseau par classe sont activées pour EIGRP. Toutefois, l’administrateur réseau ne veut pas toujours inclure toutes les interfaces d’un réseau lorsqu’il active EIGRP. Pour configurer EIGRP pour annoncer des sous-réseaux spécifiques uniquement, utilisez l’option <span class="cmd"><i>masque-générique</i></span> de la commande <span class="cmd"><b>network</b></span> :</p> <span class="cmd"><p>Router(config-router)#<b>network </b><i>adresse-réseau</i> [<i>masque-générique</i>] </p></span> <p>Considérez un <content-link target="cg7157518994" type="glossary">masque générique</content-link> (wildcard mask) comme étant l’inverse d’un masque de sous-réseau. L’inverse du masque de sous-réseau 255.255.255.252 est 0.0.0.3. Pour calculer l’inverse d’un masque de sous-réseau, soustrayez le masque de sous-réseau de 255.255.255.255 :</p> <span class="cmd"><p> 255.255.255.255 </p></span> <span class="cmd"><p>- 255.255.255.252</p></span> <span class="cmd"><p>Soustraire le masque de sous-réseau</p></span> <span class="cmd"><p>---------------</p></span> <span class="cmd"><p>0. 0. 0. 3</p></span> <span class="cmd"><p>Masque générique</p></span> <p><b>Cliquez sur Sortie du routeur dans la figure.</b></p> <p>Dans la figure, R2 est configuré avec le sous-réseau 192.168.10.8 et le masque générique 0.0.0.3.</p> <span class="cmd"><p>R2(config-router)#<b>network 192.168.10.8 0.0.0.3</b></p></span> <p>Certaines versions IOS vous permettent également d’entrer simplement le masque de sous-réseau. Par exemple, vous pouvez entrer la commande suivante :</p> <span class="cmd"><p>R2(config-router)#<b>network 192.168.10.8 255.255.255.252</b></p></span> <p>Toutefois, IOS convertira alors la commande au format de masque générique, comme vous pouvez le vérifier au moyen de la commande <span class="cmd"><b>show run</b></span> :</p> <span class="cmd"><p>R2#<b>show run</b></p></span> <span class="cmd"><p>&lt;partie du résultat omise&gt;</p></span> <span class="cmd"><p>!</p></span> <span class="cmd"><p>router eigrp 1</p></span> <span class="cmd"><p>network 172.16.0.0</p></span> <span class="cmd"><p>network 192.168.10.8 <span class="blue">0.0.0.3</span></p></span> <span class="cmd"><p>auto-summary</p></span> <span class="cmd"><p>!</p></span> <p>La figure présente également la configuration pour R3. Dès que le réseau par classe 192.168.10.0 est configuré, R3 établit des contiguïtés avec R1 et R2. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909020500">
<title><content-text>Vérification du protocole EIGRP</content-text></title>
<page type="OneColumn" id="tl0909020501">
<content-media type="StaticGraphic" id="cm5354599932"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020500/tl0909020501/cm5354599932.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020500/tl0909020501/cm5354599932text.xml"/></content-media>
<content-text><p>Avant de pouvoir envoyer ou recevoir des mises à jour par EIGRP, les routeurs doivent établir des contiguïtés avec leurs voisins. Les routeurs EIGRP établissent des contiguïtés avec des routeurs voisins en échangeant des paquets Hello EIGRP. </p> <p>Utilisez la commande <span class="cmd"><b>show ip eigrp neighbors</b></span> pour afficher la table de voisinage et vérifier que le protocole EIGRP a établi une contiguïté avec ses voisins. Pour chaque routeur, vous devez voir l’adresse IP du routeur contigu et l’interface que ce dernier utilise pour joindre le voisin EIGRP. Dans la figure, nous pouvons vérifier que tous les routeurs ont établi les contiguïtés nécessaires. Chaque routeur a deux voisins répertoriés dans la table de voisinage.</p> <p>La sortie de la commande <span class="cmd"><b>show ip eigrp neighbors</b></span> comprend les éléments suivants :</p> <ul><li> <span class="cmd"><b>Colonne H</b></span> : répertorie les voisins dans l’ordre dans lequel ils ont été détectés.</li> <li> <span class="cmd"><b>Address</b></span> : l’adresse IP du voisin.</li> <li> <span class="cmd"><b>Interface</b></span> : interface locale sur laquelle ce paquet Hello a été reçu.</li> <li> <span class="cmd"><b>Hold</b></span> : le délai d’attente actuel. Lorsqu’un paquet Hello est reçu, cette valeur est réinitialisée avec le temps d’attente maximum de cette interface, puis un compte à rebours s’effectue jusqu’à zéro. Si la valeur zéro est atteinte, le voisin est considéré comme étant « hors service ».</li> <li> <span class="cmd"><b>Uptime</b></span> : délai écoulé depuis l’ajout du voisin à la table de voisinage.</li> <li> <span class="cmd"><b>SRTT</b></span> (Smooth Round Trip Timer) et <span class="cmd"><b>RTO</b></span> (Retransmit interval) : le temps moyen nécessaire pour envoyer un message et recevoir sa réponse d’un voisin et l’intervalle de retransmission, utilisés par RTP pour la gestion des paquets EIGRP fiables. Les paramètres SRTT et RTO sont abordés en détail dans les cours CCNP.</li> <li> <span class="cmd"><b>Queue Count</b></span> : le nombre de paquets en attente d’envoi. Il doit toujours être égal à zéro. Si la valeur est supérieure à 0, des paquets EIGRP attendent pour être envoyés. La notion de paquets en attente d’envoi est abordée en détail dans les cours CCNP.</li> <li> <span class="cmd"><b>Sequence Number</b></span> : numéro d’ordre, permettant de suivre les paquets de mise à jour, de demande et de réponse. Les numéros d’ordre sont abordés en détail dans les cours CCNP.</li></ul> <p>La commande <span class="cmd"><b>show ip eigrp neighbors</b></span> est très utile pour la vérification et le dépannage d’EIGRP. Si un voisin n’est pas répertorié une fois que les contiguïtés ont été établies avec un routeur voisin, vérifiez l’interface locale pour vous assurer qu’elle est activée à l’aide de la commande <span class="cmd"><b>show ip interface brief</b></span>. Si l’interface est active, lancez une requête ping vers l’adresse IP du voisin. Si cette dernière échoue, cela  signifie que l’interface du voisin est hors service et qu’elle doit être activée. Si la commande ping a abouti et qu’EIGRP ne voit toujours pas le routeur comme un voisin, examinez les configurations suivantes :</p> <ul><li> Les deux routeurs sont-ils configurés avec le même ID de processus EIGRP ?</li> <li> Le réseau connecté directement est-il inclus dans les instructions network du protocole EIGRP ?</li> <li> La commande <span class="cmd"><b>passive-interface</b></span> est-elle configurée pour empêcher les paquets Hello EIGRP sur l’interface ?</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0909020502">
<content-media type="StaticGraphic" id="cm8027203070"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020500/tl0909020502/cm8027203070.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020500/tl0909020502/cm8027203070text.xml"/></content-media>
<content-text><p>Comme avec RIP, la commande <span class="cmd"><b>show ip protocols</b></span> peut être utilisée pour vérifier que le protocole EIGRP est activé. Cette commande affiche les différents types de sorties spécifiques à chaque protocole de routage. Nous examinerons certains de ces détails dans des sections ultérieures. </p> <p><b>Cliquez sur Sortie du routeur dans la figure.</b></p> <p>Notez que la sortie indique l’ID de processus utilisé par EIGRP : </p> <span class="cmd"><p>Routing Protocol is &quot;<span class="blue">eigrp 1</span>&quot;</p></span> <p>N’oubliez pas que l’ID de processus doit être identique sur tous les routeurs pour que le protocole EIGRP puisse établir des contiguïtés de voisinage et partager des informations de routage.</p> <p>Les distances administratives internes et externes d’EIGRP sont également affichées : </p> <span class="cmd"><p>Distance: <span class="blue">internal 90</span> external 170</p></span></content-text>
</page>
</topic>
<topic type="" id="tl0909020600">
<title><content-text>Examen de la table de routage</content-text></title>
<page type="OneColumn" id="tl0909020601">
<content-media type="InteractiveGraphicHotspots" id="cm6753980030"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020601/cm6753980030.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020600/tl0909020601/cm6753980030text.xml"/></content-media>
<content-text><p>Un autre moyen de vérifier que le protocole EIGRP et les autres fonctions du routeur sont configurés correctement consiste à examiner les tables de routage à l’aide de la commande <span class="cmd"><b>show ip route</b></span>. </p> <p><b>Cliquez sur R1, R2 et R3 dans la figure.</b></p> <p>Par défaut, EIGRP récapitule automatiquement les routes au niveau de la périphérie du réseau principal. Vous pouvez désactiver le récapitulatif automatique des routes à l’aide de la commande <span class="cmd"><b>no auto-summary</b></span>, comme nous l’avons fait pour le protocole RIPv2. Cette procédure sera abordée plus en détail dans une section ultérieure.</p> <p>Notez que les routes EIGRP sont indiquées par un <b>D</b>, pour DUAL. </p> <p>Souvenez-vous qu’EIGRP étant un protocole de routage sans classe (qui inclut le masque de sous-réseau dans la mise à jour de routage), il prend en charge VLSM et CIDR. Nous pouvons voir dans la table de routage de R1 que le réseau parent 172.16.0.0/16 est subdivisé en sous-réseaux de longueur variable (variably subnetted), avec trois routes enfant utilisant un masque /24 ou /30. </p></content-text>
</page>
<page type="OneColumn" id="tl0909020602">
<content-media type="StaticGraphic" id="cm4746051302"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020602/cm4746051302.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020600/tl0909020602/cm4746051302text.xml"/></content-media>
<content-text><p><b>Présentation de la route de récapitulatif Null0</b></p> <p>La figure représente la table de routage de R2, dont deux entrées sont mises en évidence. Notez qu’EIGRP a inclus automatiquement un résumé du routage vers Null0 pour les réseaux par classe 192.168.10.0/24 et 172.16.0.0/16.</p> <p>Comme nous l’avons vu au chapitre 7, « RIPv2 », Null0 n’est pas une interface réelle. Notez que les résumés du routage ont pour source Null0, et ce, parce qu’ils sont utilisés à des fins d’annonce. Les routes 192.168.10.0/24 et 172.16.0.0/16 ne représentent pas vraiment un chemin d’accès vers les réseaux parents. Si un paquet ne correspond pas à l’une des deux routes enfant de niveau 2, il est envoyé vers l’interface Null0. En d’autres termes, si le paquet correspond au niveau 1 parent, l’adresse de réseau par classe, mais à aucun des sous-réseaux, le paquet est abandonné. </p> <p><b>Remarque</b> : EIGRP inclut automatiquement une route de récapitulatif Null0 comme route enfant lorsqu’une des deux conditions qui suivent est avérée :</p> <ul><li> il existe au moins un sous-réseau qui a été acquis via EIGRP ;</li> <li> la fonction de récapitulatif automatique est activée.</li></ul> <p>Nous verrons que la route de récapitulatif null0 est supprimée lorsque la fonction de récapitulatif automatique est désactivée.</p></content-text>
</page>
<page type="OneColumn" id="tl0909020603">
<content-media type="StaticGraphic" id="cm7071561185"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020603/cm7071561185.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020600/tl0909020603/cm7071561185text.xml"/></content-media>
<content-text><p><b>Table de routage de R3</b></p> <p>La table de routage de R3 indique que R1 et R2 récapitulent automatiquement le réseau 172.16.0.0/16 et l’envoient en tant que mise à jour de routage unique. R1 et R2 ne propagent pas les sous-réseaux individuels car la fonction de récapitulatif automatique est activée. Nous désactiverons le récapitulatif automatique ultérieurement. Étant donné que R3 reçoit de R1 et R2 deux routes à coût égal pour 172.16.0.0/16, ces routes sont comprises dans la table de routage.</p></content-text>
</page>
<page type="OneColumn" id="tl0909020604">
<content-media type="ActivityPKT" id="cm9973251828"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020604/cm9973251828/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909020000/tl0909020600/tl0909020604/cm9973251828/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour configurer et vérifier le routage EIGRP de base.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus d’informations.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909030000">
<title><content-text>Calcul de métrique EIGRP</content-text></title>
<topic type="" id="tl0909030100">
<title><content-text>Métrique composite EIGRP et valeurs K</content-text></title>
<page type="OneColumn" id="tl0909030101">
<content-media type="StaticGraphic" id="cm4744617533"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030100/tl0909030101/cm4744617533.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030100/tl0909030101/cm4744617533text.xml"/></content-media>
<content-text><p>EIGRP utilise les valeurs suivantes dans sa métrique composite pour calculer le chemin préféré vers un réseau :</p> <ul><li> Bande passante</li> <li> Délai</li> <li> Fiabilité</li> <li> Charge</li></ul> <p><b> Remarque : </b>comme indiqué plus haut dans ce chapitre, bien que l’unité de transmission maximale (MTU) soit incluse dans les mises à jour de table de routage, il ne s’agit pas d’une métrique de routage utilisée par EIGRP ou IGRP. Par défaut, seuls la bande passante et le délai sont pris en compte pour calculer la métrique. Cisco conseille aux administrateurs de ne pas utiliser la fiabilité et la charge à moins d’en avoir explicitement besoin. </p> <p><b>La métrique composite</b></p> <p>La figure montre la formule de métrique composite utilisée par le protocole EIGRP. La formule comprend les valeurs K1 à K5, connues sous le nom de pondérations de métrique EIGRP. Par défaut, K1 et K3 ont pour valeur 1, et K2, K4 et K5 ont pour valeur 0. Ainsi, seules les valeurs de bande passante et de délai sont utilisées dans le calcul de la métrique composite par défaut. </p> <p>Les valeurs K par défaut peuvent être modifiées à l’aide de la commande de routeur EIGRP :</p> <span class="cmd"><p>Router(config-router)#<b>metric weights </b><i>tos k1 k2 k3 k4 k5</i></p></span> <p><b>Remarque :</b> la modification des pondérations de métrique n’entre pas dans le cadre de ce cours, mais ces valeurs sont importantes dans l’établissement des voisinages et elles sont abordées dans une section ultérieure. Le paramètre <span class="cmd"><b>tos</b></span> (Type of Service) est un vestige d’IGRP et n’a jamais été mis en œuvre. Il est toujours défini avec la valeur 0. </p></content-text>
</page>
<page type="OneColumn" id="tl0909030102">
<content-media type="StaticGraphic" id="cm4722514667"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030100/tl0909030102/cm4722514667.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030100/tl0909030102/cm4722514667text.xml"/></content-media>
<content-text><p><b>Vérification des valeurs K</b></p> <p>La commande <span class="cmd"><b>show ip protocols</b></span> est utilisée pour vérifier les valeurs K. La figure montre la sortie de cette commande pour R1. Notez que les valeurs K de R1 sont les valeurs par défaut. Là encore, il n’est pas recommandé d’utiliser des valeurs autres que les valeurs par défaut, à moins que l’administrateur réseau n’ait une bonne raison de le faire. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909030200">
<title><content-text>Métrique EIGRP</content-text></title>
<page type="OneColumn" id="tl0909030201">
<content-media type="StaticGraphic" id="cm8842260833"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030200/tl0909030201/cm8842260833.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030200/tl0909030201/cm8842260833text.xml"/></content-media>
<content-text><p><b>Examen des valeurs de métrique</b></p> <p>Vous connaissez maintenant les valeurs par défaut des paramètres K. En utilisant la commande <span class="cmd"><b>show interface</b></span> nous pouvons voir les valeurs <i>réelles</i> de bande passante, de délai, de fiabilité et de charge utilisées dans le calcul de la métrique de routage. </p> <p><b>Cliquez sur Sortie du routeur dans la figure.</b></p> <p>La sortie de la figure montre les valeurs utilisées dans la métrique composite de l’interface série Serial 0/0/0 de R1.</p> <span class="cmd"><p> MTU 1500 bytes, <span class="blue">BW 1544 Kbit, DLY 20000 usec,</span></p></span> <span class="cmd"><p><span class="blue"> reliability 255/255, txload 1/255, rxload 1/255</span></p></span>  <p><b>Bande passante</b></p> <p>La métrique de bande passante (1 544 Kbits) est une valeur statique utilisée par certains protocoles de routage tels qu’EIGRP et OSPF pour calculer leur métrique de routage. La bande passante s’affiche en Kbits (kilobits). La plupart des interfaces série utilisent la valeur de bande passante par défaut de 1 544 Kbits soit 1 544 000 bits/s (1 544 Mbits/s). Il s’agit de la bande passante d’une connexion T1. Cependant, certaines interfaces série utilisent une valeur de bande passante par défaut différente. Vous devez toujours vérifier la bande passante à l’aide de la commande <span class="cmd"><b>show interface</b></span>.</p> <p>Cette valeur peut refléter ou non la bande passante physique réelle de l’interface. <i>La modification de la valeur de bande passante ne modifie pas la bande passante réelle de la liaison.</i> Si la bande passante réelle de la liaison est différente de la valeur par défaut, vous devez la modifier, comme nous le verrons dans une section ultérieure.</p></content-text>
</page>
<page type="OneColumn" id="tl0909030202">
<content-media type="StaticGraphic" id="cm7941191867"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030200/tl0909030202/cm7941191867.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030200/tl0909030202/cm7941191867text.xml"/></content-media>
<content-text><p><b>Délai</b></p> <p>Le délai est la mesure du temps nécessaire à un paquet pour parcourir une route. La métrique de délai (DLY) est une valeur statique déterminée à partir du type de liaison à laquelle l’interface est connectée et s’exprime en microsecondes. Le délai n’est pas mesuré de façon dynamique. En d’autres termes, le routeur ne contrôle pas réellement le temps que le paquet prend pour atteindre sa destination. La valeur de délai, comme la valeur de bande passante, est une valeur par défaut que l’administrateur peut modifier.</p> <span class="cmd"><p> MTU 1500 bytes, BW 1544 Kbit, <span class="blue">DLY 20000</span> usec,</p></span> <span class="cmd"><p> reliability 255/255, txload 1/255, rxload 1/255</p></span>  <p>Le tableau de la figure présente les valeurs de délai par défaut pour diverses interfaces. Notez que la valeur par défaut est de 20 000 microsecondes pour les interfaces série, et de 100 microsecondes pour les interfaces FastEthernet.</p></content-text>
</page>
<page type="OneColumn" id="tl0909030203">
<content-media type="StaticGraphic" id="cm4448111834"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030200/tl0909030203/cm4448111834.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030200/tl0909030203/cm4448111834text.xml"/></content-media>
<content-text><p><b>Fiabilité</b></p> <p>La fiabilité (<span class="cmd">reliability</span>) est une mesure de la probabilité que la liaison soit mise hors service ou de la fréquence d’erreur de la liaison. Contrairement au délai, la fiabilité est mesurée de façon dynamique par une valeur comprise entre 0 et 255, 1 étant un lien à fiabilité minimale, et 255 un lien fiable à 100 %. La fiabilité est calculée sur une moyenne pondérée de 5 minutes pour éviter l’impact soudain de taux d’erreurs élevés (ou faibles). </p> <p>Elle s’exprime sous forme de fraction de 255 (plus la valeur est élevée, plus la liaison est fiable). Une valeur de 255/255 correspondrait donc à une fiabilité de 100 %, tandis qu’une liaison de 234/255 serait fiable à 91,8 %.</p> <p><b>Rappel :</b> par défaut, le protocole EIGRP n’utilise pas la fiabilité dans le calcul de métrique.</p> <p><b>Charge</b></p> <p>La charge (<span class="cmd">load</span>) reflète le volume du trafic qui emprunte la liaison. Comme la fiabilité, la charge est mesurée de façon dynamique par une valeur comprise entre 0 et 255. La charge est elle aussi mesurée sous forme de fraction de 255. Cependant, dans ce cas, une valeur plus faible est souhaitable, car elle signifie une charge moindre sur la liaison. 1/255 correspondrait ainsi à une liaison chargée au minimum. 40/255 serait une liaison à 16 % de capacité, et 255/255 une liaison saturée à 100 %.</p> <p>La charge s’affiche soit comme une valeur de charge de sortie, ou de transmission (<span class="cmd">txload</span>), soit comme une valeur de charge entrante ou de réception (<span class="cmd">rxload</span>). La charge est calculée sur une moyenne pondérée de 5 minutes pour éviter l’impact d’une utilisation très forte (ou très faible) du canal.</p> <p><b>Rappel :</b> par défaut, le protocole EIGRP n’utilise pas la charge dans le calcul de métrique.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909030300">
<title><content-text>Utilisation de la commande de bande passante (bandwidth)</content-text></title>
<page type="OneColumn" id="tl0909030301">
<content-media type="InteractiveGraphicHotspots" id="cm2386363372"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030300/tl0909030301/cm2386363372.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030300/tl0909030301/cm2386363372text.xml"/></content-media>
<content-text><p>Sur la plupart des liaisons série, la métrique de bande passante a par défaut une valeur de 1 544 Kbits. Étant donné que les protocoles EIGRP et OSPF utilisent la bande passante dans les calculs de métrique par défaut, il est important d’attribuer une valeur correcte à la bande passante afin que les informations de routage soient correctes. Mais que faire lorsque la bande passante réelle de la liaison ne correspond pas à la bande passante par défaut de l’interface ? </p> <p><b>Cliquez sur Configurer la bande passante dans la figure.</b></p> <p>Utilisez la commande d’interface <span class="cmd"><b>bandwidth</b></span> pour modifier la métrique de bande passante : </p> <span class="cmd"><p>Router(config-if)#<b>bandwidth </b><i>kilobits</i></p></span>  <p>Utilisez la commande d’interface <span class="cmd"><b>no bandwidth</b></span> pour restaurer la valeur par défaut.</p> <p>Dans la figure, la bande passante de la liaison entre R1 et R2 est de 64 Kbits/s et celle de la liaison entre R2 et R3 de 1 024 Kbits/s. La figure montre les configurations utilisées sur les trois routeurs pour modifier la bande passante sur les interfaces série appropriées.</p> <p><b>Cliquez sur Vérifier la bande passante dans la figure.</b></p> <p>Vous pouvez vérifier la modification à l’aide de la commande <span class="cmd"><b>show interface</b></span>. Il est important de modifier la métrique de bande passante des deux côtés de la liaison afin d’assurer un acheminement correct dans les deux directions.</p> <p><b> Remarque : </b>les participants qui commencent tout juste leur formation sur les réseaux et sur Cisco IOS font souvent l’erreur de penser que la commande <span class="cmd"><b>bandwidth</b></span> modifie la bande passante physique de la liaison. Comme nous l’avons vu dans la section précédente, la commande <span class="cmd"><b>bandwidth</b></span> ne modifie que la métrique de bande passante utilisée par les protocoles de routage tels qu’EIGRP et OSPF. Il arrive qu’un administrateur réseau modifie la valeur de bande passante afin d’avoir un meilleur contrôle sur l’interface de sortie choisie.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909030400">
<title><content-text>Calcul de la métrique EIGRP</content-text></title>
<page type="OneColumn" id="tl0909030401">
<content-media type="StaticGraphic" id="cm5976719281"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030400/tl0909030401/cm5976719281.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030400/tl0909030401/cm5976719281text.xml"/></content-media>
<content-text><p>La figure montre la formule de métrique composite utilisée par le protocole EIGRP. En utilisant les valeurs par défaut pour K1 et K3, nous pouvons simplifier la formule : la bande passante la plus lente (ou bande passante minimale) plus la somme cumulée de l’ensemble des délais. </p> <p>En d’autres termes, en examinant les valeurs de bande passante et de délai de l’ensemble des interfaces de sortie de la route, il est possible de déterminer la métrique EIGRP. Déterminez en premier lieu la liaison avec la bande passante la plus lente. C’est cette bande passante qui est utilisée pour la partie <b>(10 000 000/bande passante en Kbits/s) * 256</b> de la formule. Déterminez ensuite la valeur de délai de chaque interface de sortie sur le chemin vers la destination. Faites la somme des valeurs de délai, divisez-la par 10 <b>(somme des délais/10)</b>, puis multipliez la valeur obtenue par 256 <b>(* 256)</b>. Ajoutez les valeurs de bande passante et de somme des délais pour obtenir la <b>métrique EIGRP</b>.</p> <p>La sortie de la table de routage de R2 montre que la route vers 192.168.1.0/24 a une métrique EIGRP de 3 014 400. Examinons comment EIGRP a calculé cette valeur. </p></content-text>
</page>
<page type="OneColumn" id="tl0909030402">
<content-media type="InteractiveGraphicHotspots" id="cm2875518052"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030400/tl0909030402/cm2875518052.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030400/tl0909030402/cm2875518052text.xml"/></content-media>
<content-text><p><b>Bande passante</b></p> <p><b>Cliquez sur Calcul de la bande passante dans la figure.</b></p> <p>Étant donné que le protocole EIGRP utilise la bande passante la plus lente pour son calcul de métrique, nous pouvons trouver cette valeur en examinant chaque interface située entre R2 et le réseau de destination 192.168.1.0. L’interface série Serial 0/0/1 de R2 a une bande passante de 1 024 Kbits/s, soit 1 024 000 bits/s. L’interface FastEthernet 0/0 de R3 a une bande passante de 100 000 Kbits/s ou 100 Mbits/s. La bande passante la plus lente est donc de 1 024 Kbits/s et elle est utilisée pour calculer la métrique.</p> <p>EIGRP utilise la valeur de <content-link target="cg2185396118" type="glossary">bande passante de référence</content-link> de 10 000 000 et la divise par la valeur de bande passante en Kbits/s. Les valeurs de bande passante élevées reçoivent ainsi une métrique plus faible et les valeurs de bande passante faibles une métrique plus élevée. </p> <p>10 000 000 est divisé par 1 024. Si le résultat n’est pas un entier, la valeur est arrondie à la valeur inférieure. Dans le cas présent, 10 000 000 divisé par 1024 est égal à 9 765,625. Les décimales ,625 sont ignorées avant la multiplication par 256. La partie bande passante de la métrique composite est donc de 2 499 840.</p> <p><b>Délai</b></p> <p>Nous pouvons également déterminer la valeur de délai en utilisant les mêmes interfaces de sortie.</p> <p><b>Cliquez sur Calcul du délai dans la figure.</b></p> <p>EIGRP utilise la somme cumulée des métriques de délai de toutes les interfaces de sortie. Le délai de l’interface série Serial 0/0/1 de R2 est de 20 000 microsecondes. Le délai de l’interface FastEthernet 0/0 de R3 est de 100 microsecondes. </p> <p>Chaque valeur de délai est d’abord divisée par 10, puis ajoutée. 20 000/10 + 100/10 donne une valeur de 2 010. Ce résultat est ensuite multiplié par 256. La partie délai de la métrique composite est de 514 560.</p> <p><b>Ajout de la bande passante et du délai</b></p> <p><b>Cliquez sur Métrique EIGRP dans la figure.</b></p> <p>Ajoutez simplement les deux valeurs, 2 499 840 + 514 560 pour obtenir une métrique EIGRP de 3 014 400. Cette valeur correspond à celle qui figure dans la table de routage de R2. Il s’agit du résultat de la bande passante la plus lente et de la somme des délais.</p></content-text>
</page>
<page type="OneColumn" id="tl0909030403">
<content-media type="ActivityPKT" id="cm5610587491"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030400/tl0909030403/cm5610587491/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909030000/tl0909030400/tl0909030403/cm5610587491/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour étudier les calculs de métrique EIGRP.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus d’informations.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909040000">
<title><content-text>DUAL</content-text></title>
<topic type="" id="tl0909040100">
<title><content-text>Concepts DUAL</content-text></title>
<page type="OneColumn" id="tl0909040101">
<content-media type="StaticGraphic" id="cm1541901476"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040100/tl0909040101/cm1541901476.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040100/tl0909040101/cm1541901476text.xml"/></content-media>
<content-text><p>Comme indiqué dans une section précédente, le protocole EIGRP utilise l’algorithme DUAL (Diffusing Update Algorithm). Cette section décrit comment l’algorithme DUAL détermine le meilleur chemin sans boucle et les meilleurs chemins de secours sans boucle.</p> <p>L&apos;algorithme DUAL utilise plusieurs termes qui seront présentés plus en détail au cours de cette section :</p> <ul><li> Successeur (Successor)</li> <li> <content-link target="cg3609572796" type="glossary">Distance de faisabilité (FD)</content-link> (Feasible Distance)</li> <li> <content-link target="cg9630550867" type="glossary">Successeur potentiel (FS)</content-link> (Feasible Successor)</li> <li> Distance annoncée (Reported Distance, RD ou Advertised Distance, AD)</li> <li> <content-link target="cg2454214713" type="glossary">Condition de faisabilité (FC)</content-link> (Feasible condition)</li></ul> <p>Ces termes et ces concepts se trouvent au centre du mécanisme de prévention des boucles de l’algorithme DUAL. Examinons-les de plus près.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040200">
<title><content-text>Successeur et distance de faisabilité</content-text></title>
<page type="OneColumn" id="tl0909040201">
<content-media type="StaticGraphic" id="cm6635095626"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040200/tl0909040201/cm6635095626.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040200/tl0909040201/cm6635095626text.xml"/></content-media>
<content-text><p>Un <i><content-link target="cg8388310335" type="glossary">successeur</content-link></i> est un routeur voisin utilisé pour le transfert de paquets et qui constitue la route à moindre coût vers le réseau de destination. L’adresse IP d’un successeur figure dans l’entrée de la table de routage tout de suite après le mot <span class="cmd">via</span>. </p> <p><i>La distance de faisabilité</i> (FD) est la métrique la plus basse calculée pour atteindre le réseau de destination. La métrique FD est répertoriée dans l’entrée de table de routage sous forme du second nombre entre crochets. Comme dans les autres protocoles de routage, elle est aussi connue sous le nom de métrique de route. </p> <p><b>Cliquez sur Sortie du routeur dans la figure.</b></p> <p>Lorsque nous examinons la table de routage de R2 dans la figure, nous observons que le meilleur chemin EIGRP vers le réseau 192.168.1.0/24 passe par le routeur R3 et que la distance de faisabilité est de 3014400, la métrique que nous avons calculée dans la section précédente : </p> <span class="cmd"><p>D 192.168.1.0/24 [90/<span class="blue">3014400</span>] via <span class="blue">192.168.10.10</span>, 00:00:31, Serial0/0/1</p></span>  <p>D’autres successeurs et d’autres distances de faisabilité sont également présentés dans la figure. Pouvez-vous répondre aux questions suivantes ?</p> <p><b>Quelle est l’adresse IP du successeur pour le réseau 172.16.1.0/24 ? </b></p> <p>Réponse :  172.16.3.1, soit R1. </p> <p><b>Quelle est la distance de faisabilité vers 172.16.1.0/24 ? </b></p> <p>Réponse :  40514560.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040300">
<title><content-text>Successeurs potentiels, condition de faisabilité et distance annoncée </content-text></title>
<page type="OneColumn" id="tl0909040301">
<content-media type="InteractiveGraphicHotspots" id="cm3668751889"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040300/tl0909040301/cm3668751889.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040300/tl0909040301/cm3668751889text.xml"/></content-media>
<content-text><p>L’algorithme DUAL converge rapidement après une modification de topologie, notamment parce qu’il peut utiliser des chemins de secours vers d’autres routeurs appelés <i>successeurs potentiels</i> sans avoir à recalculer l’algorithme.</p> <p><b>Dans la figure, cliquez sur Successeur potentiel.</b></p> <p>Un <i>successeur potentiel</i> (FS) est un voisin qui dispose d’un chemin de secours sans boucle vers le même réseau que le successeur et qui répond également à la condition de faisabilité. Dans notre topologie, R2 considérerait-il R1 comme un successeur potentiel vers le réseau 192.168.1.0/24 ? Pour être un successeur potentiel, R1 doit satisfaire à la <i>condition de faisabilité</i> (FC). Examinons ce que cela signifie.</p> <p><b>Dans la figure, cliquez sur Condition de faisabilité.</b></p> <p>La condition de faisabilité est remplie lorsque la <content-link target="cg1726875050" type="glossary">distance annoncée (RD)</content-link> d’un voisin à un réseau est inférieure à la distance de faisabilité qui sépare le routeur local et ce même réseau de destination. La distance annoncée est simplement la distance de faisabilité d’un voisin EIGRP vers le même réseau de destination. La distance annoncée est la métrique qu’un routeur annonce à un voisin à propos de son propre coût vers le réseau. </p> <p>Si R3 est le successeur, le voisin R1 peut-il être un successeur potentiel vers ce même réseau 192.161.0/24 ? En d’autres termes, si la liaison entre R2 et R3 s’interrompt, R1 peut-il immédiatement être utilisé comme chemin de secours sans nouveau calcul de l’algorithme DUAL ? R1 ne peut être successeur potentiel que s’il respecte la condition de faisabilité.</p> <p>Dans la figure, R1 annonce à R2 que sa distance de faisabilité vers 192.168.1.0/24 est de 2172416. Du point de vue de R2, 2172416 est la distance <i>annoncée</i> de R1. Du point de vue de R1, 2172416 est sa distance <i>de faisabilité</i>.</p> <p><b>Cliquez sur Distance annoncée dans la figure.</b></p> <p>R2 examine la distance annoncée (RD) 2172416 de R1. La distance annoncée (RD) de R1 étant inférieure à la distance de faisabilité (FD) de R2 de 3014400, R1 satisfait à la condition de faisabilité. R1 est maintenant un successeur potentiel de R2 vers le réseau 192.168.1.0/24.</p> <p>Pourquoi R1 n’est-il pas le successeur puisque sa distance annoncée est inférieure à la distance de faisabilité de R2 vers 192.168.1.0/24 ? Parce que le coût total de R2, sa distance de faisabilité (FD), pour atteindre 192.168.1.0/24 est plus important via R1 que via R3. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909040400">
<title><content-text>Table topologique : successeur et successeur potentiel</content-text></title>
<page type="OneColumn" id="tl0909040401">
<content-media type="StaticGraphic" id="cm7392579353"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040400/tl0909040401/cm7392579353.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040400/tl0909040401/cm7392579353text.xml"/></content-media>
<content-text><p>Le successeur, la distance de faisabilité et tous les successeurs potentiels, avec leur distance annoncée, sont conservés par le routeur dans sa table topologique EIGRP ou <content-link target="cg6545469832" type="glossary">base de données topologique</content-link>. Comme indiqué dans la figure, la table topologique peut être affichée à l’aide de la commande <span class="cmd"><b>show ip eigrp topology</b></span>. La table topologique répertorie tous les successeurs et successeurs potentiels que l’algorithme DUAL a calculés vers les réseaux de destination.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040402">
<content-media type="InteractiveGraphicHotspots" id="cm7930108412"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040400/tl0909040402/cm7930108412.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040400/tl0909040402/cm7930108412text.xml"/></content-media>
<content-text><p><b>Cliquez sur Lire pour lancer l’animation.</b></p> <p>Une description détaillée de chaque partie de la table topologique pour le réseau de destination 192.168.1.0/24 apparaît ci-dessous.</p> <p>La première ligne affiche les informations suivantes :</p> <ul><li> <span class="cmd"><b>P</b></span> : cette route est en <content-link target="cg6028464901" type="glossary">état passif</content-link>. Lorsque l’algorithme n’est pas en train d’effectuer des calculs de diffusion pour déterminer un chemin de réseau, la route est en mode stable, connu sous le nom d’état passif. Si l’algorithme DUAL recalcule ou recherche un nouveau chemin, la route sera en <content-link target="cg9615848253" type="glossary">état actif</content-link>. Toutes les routes de la table topologique d’un domaine de routage stable doivent être à l’état passif. DUAL affiche un <b>A</b> si la route reste « active », ce qui constitue un problème de dépannage de niveau CCNP. </li> <li> <span class="cmd"><b>192.168.1.0/24</b></span> : réseau de destination, qui se trouve également dans la table de routage.</li> <li> <span class="cmd"><b>1 successors</b></span> : cette partie affiche le nombre de successeurs pour ce réseau. S’il existe plusieurs chemins à coût égal vers ce réseau, il y aura plusieurs successeurs.</li> <li> <span class="cmd"><b>FD is 3014400</b></span> : il s’agit de la distance de faisabilité, la métrique EIGRP permettant d’atteindre le réseau de destination. </li></ul> <p>La première entrée indique le successeur :</p> <ul><li> <span class="cmd"><b>via 192.168.10.10</b></span> : il s’agit de l’adresse de tronçon suivant du successeur, R3. Cette adresse est indiquée dans la table de routage.</li> <li> <span class="cmd"><b>3014400</b></span> : distance de faisabilité vers 192.168.1.0/24. Il s’agit de la métrique qui figure dans la table de routage.</li> <li> <span class="cmd"><b>28160</b></span> : distance annoncée par le successeur, qui représente le coût de R3 pour atteindre ce réseau.</li> <li> <span class="cmd"><b>Serial0/0/1</b></span> : interface de sortie permettant d’atteindre ce réseau. Elle figure également dans la table de routage.</li></ul> <p>La seconde entrée indique le successeur potentiel, R1 (s’il n’existe pas de seconde entrée, il n’existe aucun successeur potentiel) :</p> <ul><li> <span class="cmd"><b>via 172.16.3.1</b></span> : il s’agit de l’adresse de tronçon suivant du successeur potentiel, R1.</li> <li> <span class="cmd"><b>41026560</b></span> : nouvelle distance de faisabilité de R2 vers 192.168.1.0/24 si R1 devient le nouveau successeur. </li> <li> <span class="cmd"><b>2172416</b></span> : distance annoncée (RD) par le successeur potentiel ou métrique de R1 pour atteindre ce réseau. Cette valeur RD doit être inférieure à la valeur FD actuelle de 3014400 pour satisfaire à la condition de faisabilité.</li> <li> <span class="cmd"><b>Serial0/0/0</b></span> : interface de sortie utilisée pour atteindre le successeur potentiel au cas où il deviendrait successeur.</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0909040403">
<content-media type="StaticGraphic" id="cm7522451666"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040400/tl0909040403/cm7522451666.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040400/tl0909040403/cm7522451666text.xml"/></content-media>
<content-text><p>Pour afficher les informations détaillées sur la métrique d’une entrée spécifique de la table topologique, ajoutez le paramètre facultatif <span class="cmd">[<i>réseau</i>]</span> à la commande <span class="cmd"><b>show ip eigrp topology</b></span>, comme indiqué dans la figure :</p> <span class="cmd"><p>R2#<b>show ip eigrp topology 192.168.1.0</b></p></span> <p>N’oubliez pas que le protocole EIGRP est un protocole de routage à vecteur de distance. Cette commande permet de répertorier toute la liste des métriques de vecteur de distance disponibles pour EIGRP bien que par défaut, EIGRP n’utilise que la bande passante et le délai. Elle affiche également d’autres informations incluses dans la mise à jour de routage, mais pas dans la métrique composite : l’unité de transmission maximale (MTU) minimale et le nombre de sauts.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040500">
<title><content-text>Table topologique : aucun successeur potentiel</content-text></title>
<page type="OneColumn" id="tl0909040501">
<content-media type="InteractiveGraphicHotspots" id="cm2187051213"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040500/tl0909040501/cm2187051213.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040500/tl0909040501/cm2187051213text.xml"/></content-media>
<content-text><p>Pour mieux comprendre l’algorithme DUAL et la façon dont il utilise les successeurs et les successeurs potentiels, examinons la table de routage de R1. </p> <p><b>Cliquez sur Table de routage de R1 dans la figure.</b></p> <p>La route vers 192.168.1.0/24 indique que le successeur est R3, via 192.168.10.6, avec une distance de faisabilité de 2172416.</p> <span class="cmd"><p>D 192.168.1.0/24 [90/<span class="blue">2172416</span>] via 192.168.10.6, 00:56:13, Serial0/1</p></span> <p>Examinons maintenant la table topologique afin de déterminer s’il existe des successeurs potentiels pour cette route. </p> <p><b>Cliquez sur Table topologique de R1 dans la figure.</b></p> <p>La table topologique affiche uniquement le successeur 192.168.10.6. Il n’existe aucun successeur potentiel. En examinant la topologie physique réelle ou le schéma du réseau, on peut immédiatement constater qu’un chemin de secours existe vers 192.168.1.0/24 via R2. Pourquoi R2 n’est-il pas répertorié comme successeur potentiel ? R2 n’est pas un successeur potentiel car il ne satisfait pas à la condition de faisabilité. </p> <p>Bien que l’examen de la topologie montre clairement que R2 est un chemin de secours, EIGRP ne dispose pas de la carte topologique de réseau. EIGRP est un protocole de routage à vecteur de distance qui ne connaît les informations de réseau distant que par ses voisins.</p> <p>Par conséquent, DUAL ne stocke pas les informations concernant la route passant par R2 dans la table topologique. Cependant, il est possible d’afficher l’ensemble des liaisons possibles, qu’elles satisfassent ou non à la condition de faisabilité, en ajoutant l’option <span class="cmd">[all-links]</span> (toutes liaisons) à la commande <span class="cmd">show ip eigrp topology</span>.</p> <p><b>Cliquez sur Table topologique de R1 [</b><span class="cmd"><b>toutes liaisons</b></span><b>] dans la figure.</b></p> <p>La commande <span class="cmd"><b>show ip eigrp topology all-links</b></span> affiche tous les chemins possibles vers un réseau, notamment les successeurs, les successeurs potentiels et même les routes qui ne sont pas des successeurs potentiels. La distance de faisabilité R1 vers 192.168.1.0/24 est de 2172416 via le successeur R3. Pour que R2 puisse être considéré comme successeur potentiel, il doit satisfaire à la condition de faisabilité. La distance de faisabilité de R2 pour atteindre 192.168.1.0/24 doit être inférieure à celle de R1. Comme nous pouvons le voir dans la figure, la distance de faisabilité de R2 est de 3014400 et est donc supérieure à la distance de faisabilité de R1, qui est de 2172416. </p> <p>Bien que R2 semble un chemin de secours viable vers 192.168.1.0/24, R1 ne sait pas qu’il ne s’agit pas d’une boucle potentielle vers lui-même. EIGRP est un protocole à vecteur de distance, qui ne dispose pas d’une carte topologique sans boucle du réseau. La méthode utilisée par l’algorithme DUAL pour garantir qu’un voisin possède un chemin d’accès sans boucle est que la métrique de ce voisin satisfasse à la condition de faisabilité. En s’assurant que la distance annoncée par le voisin est inférieure à sa propre FD, le routeur peut supposer que le routeur de voisinage n’est pas une portion de sa propre route annoncée, ce qui évite la possibilité de boucle.</p> <p>Cela signifie-t-il que R2 ne peut pas être utilisé si le successeur est hors service ? Non, R3 peut être utilisé, mais le délai sera plus long avant qu’il soit ajouté à la table de routage. Avant que cela ne puisse avoir lieu, DUAL devra procéder à d’autres traitements, comme nous le verrons à la rubrique suivante.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040600">
<title><content-text>Finite State Machine (FSM)</content-text></title>
<page type="OneColumn" id="tl0909040601">
<content-media type="StaticGraphic" id="cm9163160256"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040601/cm9163160256.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040600/tl0909040601/cm9163160256text.xml"/></content-media>
<content-text><p><b>Finite State Machine (FSM) DUAL</b></p> <p>L’élément principal d’EIGRP est l’algorithme DUAL et son moteur de calcul de route EIGRP. Le nom réel de cette technologie est « Finite State Machine (FSM) DUAL ». Cette machine contient toute la logique permettant de calculer et de comparer des routes dans un réseau EIGRP. La figure montre une version simplifiée de la machine FSM DUAL. </p> <p>Il s’agit d’une machine abstraite, pas d’un appareil mécanique avec des pièces en mouvement. Les FSM définissent un ensemble d’états possibles que peut prendre un objet, les événements à l’origine de ces états et les événements résultant de ces états. Les concepteurs utilisent des FSM pour décrire comment un matériel, un programme informatique ou un algorithme de routage vont réagir à un ensemble d’événements donnés. Les machines FSM dépassent le cadre de ce cours ; cependant, nous en présentons le concept afin d’examiner la sortie de la machine FSM du protocole EIGRP à l’aide de la commande <span class="cmd"><b>debug eigrp fsm</b></span>. Utilisons cette commande pour examiner ce que fait l’algorithme DUAL lorsqu’une route est supprimée de la table de routage.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040602">
<content-media type="InteractiveGraphicHotspots" id="cm1515566624"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040602/cm1515566624.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040600/tl0909040602/cm1515566624text.xml"/></content-media>
<content-text><p><b>Cliquez sur Table topologique 1 de R2 dans la figure.</b></p> <p>Souvenez-vous que R2 utilise actuellement R3 comme successeur vers 192.168.1.0/24. En outre, R2 répertorie actuellement R1 comme successeur potentiel. Examinons ce qui se passe lorsque nous simulons une interruption de la liaison entre R1 et R3.</p> <p><b>Cliquez sur Résultat du débogage de R2 dans la figure.</b></p> <p>Activons tout d’abord le débogage DUAL à l’aide de la commande <span class="cmd"><b>debug eigrp fsm</b></span>. Ensuite, nous simulons une interruption de liaison à l’aide de la commande <span class="cmd"><b>shutdown</b></span> sur l’interface série Serial 0/0/1 de R2. </p> <p>Lorsque vous effectuez cette procédure sur un routeur réel ou sur Packet Tracer, vous pouvez examiner l’activité que génère DUAL en cas d’interruption de liaison. R2 doit informer tous les voisins EIGRP de l’interruption de la liaison et mettre à jour ses propre tables de routage et topologique. La figure dans cet exemple ne représente qu’une partie de la sortie de débogage. Notez en particulier que la machine DUAL FSM recherche et trouve un successeur potentiel pour la route dans la table topologique EIGRP. Le successeur potentiel, R1, devient alors successeur et est installé dans la table de routage comme le meilleur chemin vers 192.168.1.0/24.</p> <p><b>Cliquez sur Table topologique 2 de R2 dans la figure.</b></p> <p>La table topologique de R2 affiche maintenant R1 comme successeur et il n’existe pas de nouveau successeur potentiel.</p> <p>Si vous suivez cet exemple sur les routeurs ou sur Packet Tracer, assurez-vous de restaurer la topologie d’origine en réactivant l’interface Serial 0/0/1 sur R2 à l’aide de la commande <span class="cmd"><b>no shutdown</b></span>.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040603">
<content-media type="InteractiveGraphicHotspots" id="cm9283994052"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040603/cm9283994052.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040600/tl0909040603/cm9283994052text.xml"/></content-media>
<content-text><p><b>Aucun successeur potentiel</b></p> <p>Que se passe t-il si le chemin vers le successeur s’interrompt et qu’il n’existe aucun successeur potentiel ? Comme nous l’avons vu, le fait que DUAL ne détecte pas de successeur potentiel ne signifie pas nécessairement qu’il n’existe pas d’autre chemin vers le réseau. Cela signifie simplement que DUAL ne possède aucun chemin de secours garanti sans boucle vers le réseau et par conséquent n’en a ajouté aucun à la table topologique en tant que successeur potentiel . S’il n’existe pas de successeur potentiel dans la table topologique, DUAL met le réseau en état <i>actif</i> et demande activement à ses voisins un nouveau successeur. </p> <p><b>Cliquez sur Table topologique 1 de R1 dans la figure.</b></p> <p>R1 utilise actuellement R3 comme successeur vers 192.168.1.0/24. Cependant, R2 <i>n’est pas</i> répertorié en tant que successeur potentiel par R1, car il ne satisfait pas à la condition de faisabilité. Examinons ce qui se passe lorsque nous simulons une interruption de la liaison entre R1 et R3.</p> <p><b>Cliquez sur Résultat du débogage de R1 dans la figure.</b></p> <p>Activons tout d’abord le débogage DUAL à l’aide de la commande <span class="cmd"><b>debug eigrp fsm</b></span>. Ensuite, nous simulons une interruption de liaison à l’aide de la commande <span class="cmd"><b>shutdown</b></span> sur l’interface série Serial 0/0/1 de R1. </p> <p>La sortie de débogage sélectionnée montre que le réseau 192.168.1.0/24 est à l’état <i>actif</i> et que des demandes EIGRP sont envoyées aux autres voisins. R2 répond par un chemin vers ce réseau, qui devient le nouveau successeur et est installé dans la table de routage.</p> <p>Lorsque le successeur n’est plus disponible et qu’il n’existe pas de successeur potentiel, DUAL met la route à l’état actif. DUAL envoie des demandes EIGRP, demandant aux autres routeurs un chemin vers ce réseau. Les autres routeurs renvoient des réponses EIGRP, indiquant à l’expéditeur de la demande EIGRP s’ils ont ou non un chemin d’accès vers le réseau demandé. Si aucune des réponses EIGRP ne contient de chemin vers le réseau, l’expéditeur ne dispose d’aucune route vers ce réseau. </p> <p>Si l’expéditeur des demandes EIGRP reçoit des réponses EIGRP contenant un chemin vers le réseau demandé, le chemin préféré est désigné comme nouveau successeur et ajouté à la table de routage. Ce processus prend plus de temps que si DUAL possédait un successeur potentiel dans sa table topologique et pouvait ajouter rapidement la nouvelle route à la table de routage.</p> <p><b>Remarque</b> : la présentation détaillée de la machine FSM DUAL et du processus de demandes et réponses n’entre pas dans le cadre de ce cours.</p> <p><b>Cliquez sur Table topologique 2 de R1 dans la figure.</b></p> <p>La table topologique de R1 affiche maintenant R2 comme successeur et il n’existe pas de nouveau successeur potentiel.</p> <p>Si vous suivez cet exemple sur les routeurs ou sur Packet Tracer, assurez-vous de restaurer la topologie d’origine en réactivant l’interface Serial 0/0/1 sur R1 à l’aide de la commande <span class="cmd"><b>no shutdown</b></span>.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040604">
<content-media type="ActivityPKT" id="cm8828838954"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040604/cm8828838954/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909040000/tl0909040600/tl0909040604/cm8828838954/icontext.xml"/></content-media>
<content-text><p>Utilisez l’exercice Packet Tracer pour en savoir plus sur les successeurs et les successeurs potentiels, et pour voir la machine FSM DUAL supprimer et installer des routes.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus d’informations.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909050000">
<title><content-text>Autres configurations EIGRP</content-text></title>
<topic type="" id="tl0909050100">
<title><content-text>Route de récapitulatif Null0</content-text></title>
<page type="OneColumn" id="tl0909050101">
<content-media type="StaticGraphic" id="cm6537092320"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050100/tl0909050101/cm6537092320.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050100/tl0909050101/cm6537092320text.xml"/></content-media>
<content-text><p>L’analyse d’une table de routage contenant des routes EIGRP peut être complexe en raison de l’inclusion automatique de <content-link target="cg2370190715" type="glossary">routes de récapitulatif Null0</content-link> par EIGRP. Dans la figure, la table de routage de R1 contient deux routes ayant une interface de sortie Null0. Nous avons vu au chapitre 7, « RIPv2 », que l’interface Null0 est une route qui ne mène nulle part, connue communément sous le nom de « corbeille ». Par défaut, EIGRP utilise donc l’interface Null0 pour supprimer tous les paquets qui correspondent à la route parent, mais ne correspondent à aucune des routes enfant.</p> <p>On pourrait supposer que si un comportement de routage sans classe était configuré à l’aide de la commande <span class="cmd"><b>ip classless</b></span>, EIGRP ne supprimerait pas le paquet, mais continuerait de chercher une route par défaut ou de super-réseau. Toutefois, la route de récapitulatif Null0 EIGRP est une route enfant qui correspondra à n’importe quel paquet de la route parent ne correspondant à aucune route enfant. Même avec un comportement de routage sans classe <span class="cmd"><b>ip classless</b></span>, avec lequel on attendrait que le processus de recherche de route vérifie les routes de super-réseau et les routes par défaut, EIGRP utilise la route de récapitulatif Null0 et supprime le paquet, car cette route correspond à n’importe quel paquet de la route parent sans route enfant.</p> <p>Que le comportement de routage appliqué soit sans classe ou par classe, EIGRP utilisera la route de récapitulatif Null0, rejetant ainsi l’utilisation d’une route de super-réseau ou par défaut. </p> <p>Dans la figure, R1 supprime tous les paquets correspondant au réseau parent par classe 172.16.0.0/16, mais qui ne correspondent pas à l’une des routes enfant 172.16.1.0/24, 172.16.2.0/24 ou 172.16.3.0/24. Par exemple, un paquet destiné à 172.16.4.10 sera supprimé. Même si une route par défaut a été configurée, R1 supprimera le paquet parce qu’il correspond à la route de récapitulatif Null0 vers 172.16.0.0/16.</p> <span class="cmd"><p>D 172.16.0.0/16 is a summary, 00:46:10, Null0</p></span> <p><b>Remarque</b> : EIGRP inclut automatiquement une route de récapitulatif Null0 comme route enfant lorsqu’une des deux conditions qui suivent est avérée :</p> <ul><li> il existe au moins un sous-réseau qui a été acquis via EIGRP ;</li> <li> la fonction de récapitulatif automatique est activée.</li></ul> <p>Comme RIP, EIGRP récapitule automatiquement les routes au niveau des périphéries de réseau principal. Vous avez peut-être déjà remarqué dans la sortie <span class="cmd"><b>show run</b></span> que le protocole EIGRP, par défaut, utilise la commande <span class="cmd"><b>auto-summary</b></span>. Dans la prochaine rubrique, vous verrez que la désactivation du récapitulatif automatique supprimera la route de récapitulatif Null0 et permettra à EIGRP de rechercher une route de super-réseau ou une route par défaut lorsqu’un paquet de destination ne correspond à aucune route EIGRP enfant.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909050200">
<title><content-text>Désactivation du récapitulatif automatique</content-text></title>
<page type="OneColumn" id="tl0909050201">
<content-media type="InteractiveGraphicHotspots" id="cm6362989412"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050200/tl0909050201/cm6362989412.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050200/tl0909050201/cm6362989412text.xml"/></content-media>
<content-text><p>Comme RIP, EIGRP récapitule automatiquement les routes au niveau des périphéries de réseau principal à l’aide de la commande <span class="cmd"><b>auto-summary</b></span>. Vous pouvez voir le résultat de cette procédure en examinant la table de routage de R3. </p> <p><b>Cliquez sur Table de routage R3 dans la figure.</b></p> <p>Comme vous pouvez le constater, le routeur R3 ne reçoit pas de routes individuelles pour les sous-réseaux 172.16.1.0/24, 172.16.2.0/24 et 172.16.3.0/24. R1 et R2 ont automatiquement récapitulé ces sous-réseaux à la périphérie de classes 172.16.0.0/16 lors de l’envoi des paquets de mise à jour EIGRP vers R3. Le résultat est que R3 possède une route vers 172.16.0.0/16 via R1. R1 est le successeur en raison de la différence de bande passante.</p> <span class="cmd"><p>D 172.16.0.0/16 [90/2172416] via 192.168.10.5, 01:08:30, Serial0/0/0</p></span> <p>Vous remarquerez rapidement que cette route n’est pas optimale. R3 acheminera tous les paquets destinés à 172.16.2.0 via R1. R3 ne sait pas que R1 devra ensuite acheminer ces paquets via une liaison très lente vers R2. R3 ne peut être informé de cette bande passante lente que si R1 et R2 envoient des routes individuelles pour chacun des sous-réseaux 172.16.0.0/16. En d’autres termes, R1 et R2 doivent arrêter le récapitulatif automatique de 172.16.0.0/16. </p> <p><b>Cliquez sur </b><span class="cmd"><b>no auto-summary</b></span><b> dans la figure.</b></p> <p>Comme dans RIPv2, la fonction de récapitulatif automatique peut être désactivée à l’aide de la commande <span class="cmd"><b>no auto-summary</b></span>. La commande de configuration de routeur <span class="cmd"><b>eigrp log-neighbor-changes</b></span> est activée par défaut dans certaines mises en œuvre d’IOS. Dans ce cas, vous verrez une sortie similaire à celle illustrée pour R1. DUAL interrompt toutes les contiguïtés de voisinage, puis les rétablit afin que l’effet de la commande <span class="cmd"><b>no auto-summary</b></span> puisse être total. Tous les voisins EIGRP vont immédiatement lancer une nouvelle série de mises à jour qui ne seront pas automatiquement récapitulées.</p> <p><b>Cliquez sur R1, R2 et R3 dans la figure.</b></p> <p>Nous pouvons voir dans les tables de routage des trois routeurs que le protocole EIGRP propage maintenant des sous-réseaux individuels. Notez qu’EIGRP ne contient plus la route de récapitulatif Null0, car la fonction de récapitulatif automatique a été désactivée à l’aide de <span class="cmd"><b>no auto-summary</b></span>. Tant que le comportement de routage sans classe par défaut (<span class="cmd"><b>ip classless</b></span>) est appliqué, les routes de super-réseau et par défaut sont utilisées lorsqu’il n’existe pas de correspondance avec une route de sous-réseau. </p></content-text>
</page>
<page type="OneColumn" id="tl0909050202">
<content-media type="InteractiveGraphicHotspots" id="cm3776931818"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050200/tl0909050202/cm3776931818.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050200/tl0909050202/cm3776931818text.xml"/></content-media>
<content-text><p>Étant donné que les routes ne sont plus récapitulées automatiquement aux périphéries de réseau principal, les tables de routage et topologique EIGRP sont également modifiées.</p> <p><b>Cliquez sur R1, R2 et R3 dans la figure.</b></p> <p>Sans récapitulatif automatique, la table de routage de R3 comprend maintenant les trois sous-réseaux 172.16.1.0/24, 172.16.2.0/24 et 172.16.3.0/24. Pourquoi la table de routage de R3 contient-elle deux chemins à coût égal vers 172.16.3.0/24 ? Le meilleur chemin ne devrait-il pas être celui qui passe par R1, avec sa liaison de 1 544 Mbits/s ? </p> <p>N’oubliez pas que le protocole EIGRP utilise uniquement la liaison avec la bande passante la plus lente lorsqu’il calcule la métrique composite. La liaison la plus lente est la liaison de 64 Kbits/s qui contient le réseau 172.16.3.0/30. Dans cet exemple, les liaisons de 1 544 Mbits/s et 1 024 Kbits/s ne sont pas pertinentes pour le calcul en ce qui concerne la métrique de bande passante. Les deux chemins ayant le même nombre et les même types d’interfaces de sortie, les valeurs de délai sont les mêmes. Ainsi, la métrique EIGRP des deux chemins est la même, bien que le chemin passant par R1 soit en fait le chemin « le plus rapide ».</p></content-text>
</page>
</topic>
<topic type="" id="tl0909050300">
<title><content-text>Résumé manuel</content-text></title>
<page type="OneColumn" id="tl0909050301">
<content-media type="InteractiveGraphicHotspots" id="cm2211769071"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050300/tl0909050301/cm2211769071.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050300/tl0909050301/cm2211769071text.xml"/></content-media>
<content-text><p>EIGRP peut être configuré pour résumer les routes, que la fonction de récapitulatif automatique (<span class="cmd"><b>auto-summary</b></span>) soit activée ou non. EIGRP étant un protocole de routage sans classe qui inclut le masque de sous-réseau dans les mises à jour de routage, le résumé manuel peut inclure des routes de super-réseau. Souvenez-vous qu’un super-réseau est un ensemble de plusieurs adresses de réseau principal par classe.</p> <p><b>Cliquez sur Nouveaux réseaux locaux R3 dans la figure.</b></p> <p>Supposons que nous avons ajouté deux nouveaux réseaux au routeur R3 en utilisant des interfaces de bouclage : 192.168.2.0/24 et 192.168.3.0/24. Nous avons également configuré ces réseaux dans le processus de routage EIGRP de R3 avec des commandes <span class="cmd"><b>network</b></span> de sorte que R3 propagera ces réseaux vers les autres routeurs.</p> <p><b>Cliquez sur Tables de routage 1 dans la figure.</b></p> <p>Pour vérifier que R3 a bien envoyé des paquets de mise à jour EIGRP à R1 et R2, vérifions les tables de routage. Dans la figure, seules les routes pertinentes sont affichées. Les routeurs R1 et R2 affichent ces réseaux supplémentaires dans leurs tables de routage : 192.168.2.0/24 et 192.168.3.0/24. Plutôt que d’envoyer trois réseaux séparés, R3 peut résumer les réseaux 192.168.1.0/24, 192.168.2.0/24 et 192.168.3.0/24 en une route unique.</p> <p><b>Cliquez sur Résumé du routage R3 dans la figure.</b></p> <p><b>Détermination du résumé du routage EIGRP</b></p> <p>Tout d’abord, déterminons le résumé de ces trois réseaux en utilisant la même méthode que celle utilisée pour déterminer le résumé des routes statiques : </p> <p>1. Répertoriez les réseaux à résumer sous format binaire. </p> <p>2. Pour trouver le masque de sous-réseau pour le résumé, commencez par le bit le plus à gauche. </p> <p>3. Progressez vers la droite, en trouvant tous les bits qui correspondent successivement. </p> <p>4. Lorsque vous trouvez une colonne dont les bits ne correspondent plus, arrêtez-vous. Vous êtes à la périphérie du résumé. </p> <p>5. Maintenant, comptez le nombre de bits de gauche correspondant, soit 22 dans notre exemple. Ce nombre deviendra votre masque de sous-réseau pour le résumé du routage : /22 ou 255.255.252.0</p> <p>6. Pour rechercher l’adresse réseau pour le résumé, copiez les 22 bits correspondants et complétez par des bits de 0 pour obtenir 32 bits.</p> <p>Vous disposez ainsi de l’adresse réseau résumée et du masque pour 192.168.0.0/22.</p> <p><b>Configuration du résumé manuel EIGRP</b></p> <p>Pour établir le résumé manuel EIGRP sur toutes les interfaces qui envoient des paquets EIGRP, utilisez la commande d’interface suivante :</p> <span class="cmd"><p>Router(config-if)<b>#ip summary-address eigrp </b><i>système-autonome adresse-réseau masque-sous-réseau</i></p></span> <p>Puisque R3 comporte deux voisins EIGRP, le résumé manuel EIGRP est configuré à la fois sur Serial 0/0/0 et Serial 0/0/1.</p> <p><b>Cliquez sur Tables de routage 2 dans la figure.</b></p> <p>Les tables de routage de R1 et de R2 ne contiennent plus les réseaux individuels 192.168.1.0/24, 192.168.2.0/24 et 192.168.3.0/24. Elles contiennent désormais un seul résumé du routage de 192.168.0.0/22. Comme nous l’avons vu au Chapitre 2, « Routage statique », les résumés du routage réduisent le nombre total de routes dans les tables de routage, ce qui rend le processus de recherche dans les tables de routage plus efficace. En outre, les résumés du routage utilisent moins de bande passante pour les mises à jour de routage, dans la mesure où une seule route peut être envoyée au lieu de plusieurs routes individuelles.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909050400">
<title><content-text>Route par défaut EIGRP</content-text></title>
<page type="OneColumn" id="tl0909050401">
<content-media type="InteractiveGraphicHotspots" id="cm1560663639"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050400/tl0909050401/cm1560663639.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050400/tl0909050401/cm1560663639text.xml"/></content-media>
<content-text><p><b>Cliquez sur Configuration statique par défaut R2 dans la figure.</b></p> <p>L’utilisation d’une route statique vers 0.0.0.0/0 comme route par défaut ne dépend pas du protocole de routage. La route statique « quatre zéros » peut être utilisée avec n’importe quel protocole de routage pris en charge. Cette route statique par défaut est en général configurée sur un routeur qui possède une connexion vers un réseau situé en dehors du domaine de routage EIGRP, par exemple, vers un FAI. </p> <p>La commande <span class="cmd"><b>redistribute static</b></span> doit être utilisée pour inclure cette route statique par défaut dans les mises à jour de routage EIGRP. Cette commande demande à EIGRP d’inclure cette route statique dans les mises à jour EIGRP vers les autres routeurs. La figure montre la configuration de la route statique par défaut et la commande <span class="cmd"><b>redistribute static</b></span> sur le routeur R2. </p> <p><b>Remarque :</b> la route statique par défaut utilise l’interface de sortie de <b>Loopback1</b>. Ceci est dû au fait que le routeur ISP de notre topologie n’existe pas physiquement. En utilisant une interface de bouclage, nous pouvons simuler une connexion vers un autre routeur. </p> <p><b>Cliquez sur R1, R2 et R3 dans la figure.</b></p> <p>Les tables de routage affichent maintenant une route statique par défaut et une <span class="cmd">passerelle de dernier recours</span> (gateway of last resort) est maintenant définie. </p> <p>Dans les tables de routage de R1 et R3, notez la source de routage et la distance administrative de la nouvelle route statique par défaut. L’entrée de la route statique par défaut sur R1 est la suivante :</p> <span class="cmd"><p><span class="blue">D*EX</span> 0.0.0.0/0 [<span class="blue">170</span>/3651840] via 192.168.10.6, 00:01:08, Serial0/1</p></span> <ul><li> <span class="cmd"><b>D</b></span> : cette route statique a été acquise au moyen d’une mise à jour de routage EIGRP.</li> <li> <span class="cmd"><b>*</b></span> : la route est une route par défaut potentielle (candidate default).</li> <li> <span class="cmd"><b>EX</b></span> : la route est une route EIGRP externe, dans ce cas une route statique à l’extérieur du domaine de routage EIGRP.</li> <li> <span class="cmd"><b>170</b></span> : il s’agit de la distance administrative d’une route EIGRP externe.</li></ul> <p>Les routes par défaut fournissent un chemin par défaut vers l’extérieur du domaine de routage et, comme les résumés du routage, réduisent le nombre d’entrées dans la table de routage.</p> <p><b>Remarque</b> : il existe une autre méthode de propagation d’une route par défaut dans EIGRP, à l’aide de la commande <span class="cmd"><b>ip default-network</b></span>. Vous trouverez des informations supplémentaires sur cette commande à l’adresse (en anglais) :</p> <p><content-link target="http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094374.shtml" type="external">http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094374.shtml</content-link></p></content-text>
</page>
</topic>
<topic type="" id="tl0909050500">
<title><content-text>Réglage du protocole EIGRP</content-text></title>
<page type="OneColumn" id="tl0909050501">
<content-media type="StaticGraphic" id="cm1126029541"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050500/tl0909050501/cm1126029541.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050500/tl0909050501/cm1126029541text.xml"/></content-media>
<content-text><p>Les deux dernières rubriques de ce chapitre présentent deux moyens fondamentaux de régler le protocole EIGRP. Nous traiterons en premier lieu de l’utilisation de la bande passante par EIGRP. Ensuite, nous verrons comment modifier les valeurs par défaut des paramètres Hello et des temps d’attente.</p> <p><b>Utilisation de la bande passante par EIGRP</b></p> <p>Par défaut, EIGRP n’utilise que jusqu’à 50 % de la bande passante d’une interface pour les données EIGRP. Cela permet au processus EIGRP de ne pas surcharger une liaison en ne laissant pas suffisamment de bande passante pour le routage du trafic normal. La commande <span class="cmd"><b>ip bandwidth-percent eigrp</b></span> peut être utilisée pour configurer le pourcentage de bande passante pouvant être utilisé par le protocole EIGRP sur une interface. </p> <span class="cmd"><p>Router(config-if)#<b>ip bandwidth-percent eigrp</b><i> système_autonome pourcentage</i></p></span> <p>Dans la figure, R1 et R2 partagent une liaison très lente de 64 Kbits/s. La configuration permettant de limiter la bande passante utilisée par EIGRP est illustrée, ainsi que la commande bandwidth. La commande <span class="cmd"><b>ip bandwidth-percent eigrp</b></span> utilise le volume de bande passante configurée (ou la bande passante par défaut) lors du calcul du pourcentage que le protocole EIGRP peut utiliser. Dans notre exemple, nous limitons EIGRP à 50 % de la bande passante de la liaison. Le protocole EIGRP n’utilisera donc jamais plus de 32 Kbits/s de la bande passante de la liaison pour le trafic de paquets EIGRP.</p></content-text>
</page>
<page type="OneColumn" id="tl0909050502">
<content-media type="StaticGraphic" id="cm2307703188"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050500/tl0909050502/cm2307703188.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050500/tl0909050502/cm2307703188text.xml"/></content-media>
<content-text><p><b>Configuration des intervalles Hello et des temps d’attente</b></p> <p>Les intervalles Hello et les temps d’attente peuvent être configurés sur chaque interface et ne doivent pas nécessairement correspondre avec les autres routeurs EIGRP pour établir des contiguïtés. La commande permettant de configurer un intervalle Hello différent est la suivante :</p> <span class="cmd"><p>Router(config-if)#<b>ip hello-interval eigrp </b><i>système-autonome secondes</i></p></span> <p>Si vous modifiez l’intervalle Hello, assurez-vous de modifier également le temps d’attente en lui attribuant une valeur supérieure ou égale à celle de l’intervalle Hello. Sinon, la contiguïté de voisinage s’interrompra une fois le temps d’attente écoulé et avant l’intervalle Hello suivant. La commande permettant de configurer un temps d’attente différent est la suivante :</p> <span class="cmd"><p>Router(config-if)#<b>ip hold-time eigrp </b><i>système-autonome secondes</i></p></span> <p>La valeur <span class="cmd"><i>secondes</i></span> des intervalles Hello et d’attente peut être comprise entre 1 et 65 535. Cette plage signifie que vous pouvez définir une valeur Hello de plus de 18 heures, ce qui peut convenir à une ligne commutée très coûteuse. Toutefois, dans la figure, nous avons configuré à la fois R1 et R2 pour qu’ils utilisent un intervalle Hello de 60 secondes et un temps d’attente de 180 secondes. La forme <span class="cmd"><b>no</b></span> peut être utilisée pour ces deux commandes pour restaurer les valeurs par défaut.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909060000">
<title><content-text>Travaux pratiques de configuration du protocole EIGRP</content-text></title>
<topic type="" id="tl0909060100">
<title><content-text>Travaux pratiques de configuration de base du protocole EIGRP</content-text></title>
<page type="OneColumn" id="tl0909060101">
<content-media type="ActivityLab" id="cm1186097403"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060100/tl0909060101/cm1186097403/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060100/tl0909060101/cm1186097403/icontext.xml"/></content-media>
<content-text><p>Au cours de ces travaux pratiques, vous allez configurer le protocole de routage EIGRP. Une <content-link target="cg8751073854" type="glossary">adresse de bouclage</content-link> sera utilisée sur le routeur R2 pour simuler une connexion à un fournisseur de services Internet (FAI), auquel sera envoyé l’ensemble du trafic non destiné au réseau local. Certains segments du réseau ont été divisés en sous-réseaux avec la technologie VLSM. EIGRP est un protocole de routage sans classe qui peut être utilisé pour fournir des données de masque de sous-réseau dans les mises à jour de routage. Cela permet aux données de sous-réseau VLSM d’être diffusées sur tout le réseau.</p><p><b>Pour plus d’informations, cliquez sur l’icône des travaux pratiques.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909060102">
<content-media type="ActivityPKA" id="cm1822274063"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060100/tl0909060102/cm1822274063/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060100/tl0909060102/cm1822274063/icontext.xml"/></content-media>
<content-text><p>Utilisez cet exercice Packet Tracer pour répéter la simulation des travaux pratiques 9.6.1. Toutefois, n’oubliez pas que Packet Tracer ne remplace pas l’expérience des travaux pratiques avec des équipements réels. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Cliquez sur le fichier PDF des travaux pratiques pour plus de détails.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus d’informations.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0909060200">
<title><content-text>Travaux pratiques de configuration avancée du protocole EIGRP</content-text></title>
<page type="OneColumn" id="tl0909060201">
<content-media type="ActivityLab" id="cm1183716590"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060200/tl0909060201/cm1183716590/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060200/tl0909060201/cm1183716590/icontext.xml"/></content-media>
<content-text><p>Au cours de cet exercice de travaux pratiques, vous recevrez une adresse réseau qui doit être subdivisée en sous-réseaux utilisant la technologie VLSM afin de mener à bien l’adressage du réseau. Une combinaison de routage EIGRP et de routage statique sera nécessaire afin que des hôtes de réseaux qui ne sont pas connectés directement puissent communiquer entre eux. Vous devrez configurer le protocole EIGRP de sorte que tout le trafic IP suive le chemin le plus court vers l’adresse de destination.</p><p><b>Pour plus d’informations, cliquez sur l’icône des travaux pratiques.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909060202">
<content-media type="ActivityPKA" id="cm3328204853"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060200/tl0909060202/cm3328204853/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060200/tl0909060202/cm3328204853/icontext.xml"/></content-media>
<content-text><p>Utilisez cet exercice Packet Tracer pour répéter la simulation des travaux pratiques 9.6.2. Toutefois, n’oubliez pas que Packet Tracer ne remplace pas l’expérience des travaux pratiques avec des équipements réels. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Cliquez sur le fichier PDF des travaux pratiques pour plus de détails.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus d’informations.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0909060300">
<title><content-text>Travaux pratiques de dépannage du protocole EIGRP</content-text></title>
<page type="OneColumn" id="tl0909060301">
<content-media type="ActivityLab" id="cm9423696379"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060300/tl0909060301/cm9423696379/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060300/tl0909060301/cm9423696379/icontext.xml"/></content-media>
<content-text><p>Au cours de ces travaux pratiques, vous chargerez en premier lieu des scripts de configuration corrompus sur chacun des routeurs. Ces scripts contiennent des erreurs qui empêcheront la communication de bout en bout sur le réseau. Vous devrez dépanner chacun des routeurs pour identifier les erreurs de configuration, puis utiliser les commandes appropriées pour corriger les différentes configurations. Une fois l’ensemble des erreurs de configuration corrigées, tous les hôtes du réseau devraient être en mesure de communiquer entre eux. </p><p><b>Pour plus de détails, cliquez sur l’icône des travaux pratiques.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909060302">
<content-media type="ActivityPKA" id="cm4832565156"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060300/tl0909060302/cm4832565156/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060300/tl0909060302/cm4832565156/icontext.xml"/></content-media>
<content-text><p>Utilisez cet exercice Packet Tracer pour répéter la simulation des travaux pratiques 9.6.3. Toutefois, n’oubliez pas que Packet Tracer ne remplace pas l’expérience des travaux pratiques avec des équipements réels. </p> <p>Un résumé des instructions est fourni pendant cet exercice. Cliquez sur le fichier PDF des travaux pratiques pour plus de détails.</p><p><b>Cliquez sur l’icône Packet Tracer pour plus d’informations.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0909070000">
<title><content-text>Résumé du chapitre</content-text></title>
<topic type="" id="tl0909070100">
<title><content-text>Résumé et révision</content-text></title>
<page type="OneColumn" id="tl0909070101">
<content-media type="ChapterSummary" id="cm7193811547"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070101/cm7193811547.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909070000/tl0909070100/tl0909070101/cm7193811547text.xml"/></content-media>
<content-text><p><b>Résumé</b></p> <p>EIGRP (Enhanced Interior Gateway Routing Protocol) est un protocole de routage à vecteur de distance <i>sans classe</i> publié en 1992 par Cisco Systems. EIGRP est un protocole de routage propriétaire de Cisco et une amélioration d’un autre protocole propriétaire de Cisco, IGRP (Interior Gateway Routing Protocol). IGRP est un protocole de routage à vecteur de distance <i>par classe</i> qui n’est plus pris en charge par Cisco. EIGRP utilise le code source « D » de DUAL dans la table de routage. Par défaut, le protocole EIGRP a pour distance administrative 90 pour les routes internes et 170 pour les routes importées à partir d’une source externe, telles que les routes par défaut.</p> <p>EIGRP utilise des modules dépendants d’un protocole (PDM, Protocol Dependent Modules), ce qui lui permet de prendre en charge différents protocoles de couche 3, notamment IP, IPX et AppleTalk. EIGRP utilise le protocole de transport fiable RTP (Reliable Transport Protocol) comme protocole de couche transport pour la livraison des paquets EIGRP. EIGRP utilise la livraison fiable pour les mises à jour, les demandes et les réponses EIGRP, et la livraison non fiable pour les paquets Hello et les reçus (ACK) EIGRP. Le protocole RTP fiable signifie qu’un reçu EIGRP doit être renvoyé.</p> <p>Avant d’envoyer des mises à jour EIGRP, un routeur doit d’abord détecter ses voisins. Cette procédure est effectuée à l’aide de paquets Hello EIGRP. Sur la plupart des réseaux EIGRP, des paquets Hello sont envoyés toutes les 5 secondes. Sur les réseaux multipoints à accès multiple sans diffusion (NBMA) tels que les interfaces X.25, Frame Relay et ATM avec liaisons d’accès T1 (1 544 Mbits/s) ou plus lentes, les paquets Hello sont envoyés toutes les 60 secondes. Le délai d’attente est de trois fois l’intervalle Hello, soit 15 secondes sur la plupart des réseaux, et 180 secondes sur les réseaux NBMA à faible vitesse. </p> <p>Les valeurs Hello et de temps d’attente de deux routeurs ne doivent pas nécessairement correspondre pour qu’ils deviennent voisins. La commande <span class="cmd"><b>show ip eigrp neighbors</b></span> permet d’afficher la table de voisinage et de vérifier que le protocole EIGRP a établi une contiguïté avec ses voisins.</p> <p>Contrairement au protocole RIP, EIGRP n’envoie pas de mises à jour périodiques. EIGRP envoie des mises à jour partielles ou limitées qui ne contiennent que les modifications de routes, et uniquement aux routeurs concernés par la modification. La métrique composite d’EIGRP utilise la bande passante, le délai, la fiabilité et la charge pour déterminer le meilleur chemin. Par défaut, seuls la bande passante et le délai sont pris en compte. Le calcul par défaut correspond à la bande passante la plus lente ajoutée à la somme des délais des interfaces de sortie du routeur jusqu’au réseau de destination.</p> <p>Au centre du protocole EIGRP se trouve l’algorithme de diffusion de mise à jour DUAL (Diffusing Update Algorithm). La Finite State Machine (FSM) DUAL permet de déterminer le meilleur chemin ainsi que les chemins de secours potentiels vers chaque réseau de destination. Le successeur est un routeur voisin utilisé pour transmettre le paquet en utilisant la route à moindre coût vers le réseau de destination. La distance de faisabilité (FD) est la métrique la plus basse calculée pour atteindre le réseau de destination via le successeur. Un successeur potentiel (FS) est un voisin qui dispose d’un chemin de secours sans boucle vers le même réseau que le successeur et qui répond également à la condition de faisabilité. La condition de faisabilité (FC) est respectée lorsque la distance annoncée d’un voisin à un réseau est inférieure à la distance de faisabilité du routeur local vers ce même réseau de destination. La distance annoncée est simplement la distance de faisabilité d’un voisin EIGRP vers le réseau de destination.</p> <p>EIGRP est configuré à l’aide de la commande <span class="cmd"><b>router eigrp </b><i>système-autonome</i></span>. La valeur <span class="cmd"><i>système-autonome</i></span> est en fait un ID de processus et doit être la même sur tous les routeurs du domaine de routage EIGRP. La commande <span class="cmd"><b>network</b></span> est identique à celle utilisée avec le protocole RIP. Le réseau est l’adresse réseau par classe des interfaces connectées directement sur le routeur. Un masque générique est un paramètre facultatif qui peut être utilisé pour n’inclure que certaines interfaces spécifiques.</p> <p>Il existe plusieurs moyens de propager une route par défaut statique avec EIGRP. La commande <span class="cmd"><b>redistribute static</b></span> en mode routeur EIGRP est une méthode très employée.</p></content-text>
</page>
<page type="FullScreen" id="tl0909070102">
<content-media type="ChapterSummary" id="cm4745806305"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070102/cm4745806305.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909070000/tl0909070100/tl0909070102/cm4745806305text.xml"/></content-media>
<content-text><p>Vérifiez vos connaissances</p></content-text>
</page>
<page type="OneColumn" id="tl0909070103">
<content-media type="ActivityPKA" id="cm1523561835"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070103/cm1523561835/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909070000/tl0909070100/tl0909070103/cm1523561835/icontext.xml"/></content-media>
<content-text><p>L’exercice d’intégration des compétences Packet Tracer intègre toutes les connaissances et compétences que vous avez acquises dans les chapitres précédents de ce cours, et dans des cours précédents. Les compétences en relation avec l’objet du présent chapitre sur EIGRP y sont également incluses. </p> <p>Dans cet exercice, vous allez créer un réseau à partir de zéro. Avec comme point de départ un espace d’adressage et des spécifications de réseau, vous devez mettre en œuvre un modèle de réseau répondant aux spécifications. Vous mettrez ensuite en œuvre une configuration de routage EIGRP efficace, avec routage par défaut intégré. Des instructions détaillées vous seront fournies pendant l’exercice. </p> <p><content-link target="E2_PTAct_9_7_1_Directions.pdf" type="internalfile">Instructions d’intégration des compétences Packet Tracer (PDF)</content-link></p><p><b>Cliquez sur l’icône Packet Tracer pour plus d’informations.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909070104">
<content-media type="StaticGraphic" id="cm8973111891"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070104/cm8973111891.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909070000/tl0909070100/tl0909070104/cm8973111891text.xml"/></content-media>
<content-text><p><b>Autres sources d’informations</b></p> <p> </p> <p><b>Routing TCP/IP, Volume I</b></p> <p>Il existe plusieurs sources valables pour en savoir plus sur l’algorithme DUAL. L’ouvrage <i>Routing TCP/IP</i>, Volume I (en anglais) de Jeff Doyle et Jennifer Carroll, contient une excellente section sur DUAL (Diffusing Update Algorithm), qui inclut deux exemples de calcul de diffusion.</p> <p><b>J.J. Garcia-Luna-Aceves</b></p> <p>DUAL a d’abord été proposé par E.W. Dijkstra et C.S. Scholten, et le travail le plus remarquable effectué sur le sujet est celui de J.J. Garcia-Luna-Aceves. J.J. Garcia-Luna-Aceves occupe la chaire Jack Baskin de l’école d’ingénierie informatique à l’Université de Californie, Santa Cruz (UCSC), et est chercheur au centre de recherche de Palo Alto (PARC). Vous trouverez plusieurs articles (en anglais) de J.J. Garcia-Luna-Aceves, notamment le travail effectué sur DUAL, « Loop-Free Routing Using Diffusing Computations », IEEE/ACM Transactions on Networking, Vol. 1, No. 1, February 1993, à l’adresse suivante : <content-link target="http://ccrg.soe.ucsc.edu/publications.html" type="external">http://ccrg.soe.ucsc.edu/publications.html</content-link>.</p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0909080000">
<title><content-text>Questionnaire du chapitre</content-text></title>
<topic type="" id="tl0909080100">
<title><content-text>Questionnaire du chapitre</content-text></title>
<page type="FullScreen" id="tl0909080101">
<content-media type="ChapterQuiz" id="cm5700175412"><title><content-text></content-text></title><media ref="tl0909000000/tl0909080000/tl0909080100/tl0909080101/cm5700175412/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl0909000000/tl0909080000/tl0909080100/tl0909080101/cm5700175412/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>
