<chapter type="" id="en0909000000">
<title><content-text>EIGRP</content-text></title>
<section type="ChapterIntroduction" id="en0909000000">
<title><content-text>Chapter Introduction</content-text></title>
<topic type="" id="en0909000100">
<title><content-text>Chapter Introduction</content-text></title>
<page type="OneColumn" id="en0909000101">
<content-media type="StaticGraphic" id="cm6816439676"><title><content-text></content-text></title><media ref="en0909000000/en0909000000/en0909000100/en0909000101/cm6816439676.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909000000/en0909000100/en0909000101/cm6816439676text.xml"/></content-media>
<content-text><p>Enhanced Interior Gateway Routing Protocol (EIGRP) is a distance vector, classless routing protocol that was released in 1992 with IOS 9.21. As its name suggests, EIGRP is an enhancement of Cisco IGRP (Interior Gateway Routing Protocol). Both are Cisco proprietary protocols and only operate on Cisco routers.</p> <p>The main purpose in Cisco's development of EIGRP was to create a classless version of IGRP. EIGRP includes several features that are not commonly found in other distance vector routing protocols like RIP (RIPv1 and RIPv2) and IGRP. These features include:</p> <ul><li> Reliable Transport Protocol (RTP)</li> <li> Bounded Updates</li> <li> Diffusing Update Algorithm (DUAL)</li> <li> Establishing Adjacencies</li> <li> Neighbor and Topology Tables</li></ul> <p>Although EIGRP may <i>act</i> like a link-state routing protocol, it is still a distance vector routing protocol.</p> <p><b>Note: </b>The term <i>hybrid</i> routing protocol is sometimes used to define EIGRP. However, this term is misleading because EIGRP is not a hybrid between distance vector and link-state routing protocols - it is solely a distance vector routing protocol. Therefore, Cisco is no longer using this term to refer to EIGRP.</p> <p>In this chapter, you will learn how to configure EIGRP and verify your EIGRP configuration with new <span class="cmd">show</span> commands. You will also learn the formula used by EIGRP to calculate this composite metric.</p> <p>Unique to EIGRP is its Reliable Transport Protocol (RTP) which provides reliable and unreliable delivery of EIGRP packets. In addition, EIGRP establishes relationships with directly connected routers that are also enabled for EIGRP. Neighbor relationships are used to track the status of these neighbors. RTP and the tracking of neighbor adjacencies set the stage for the EIGRP workhorse, the Diffusing Update Algorithm (DUAL). </p> <p>As the computational engine that drives EIGRP, DUAL resides at the center of the routing protocol, guaranteeing <content-link target="cg1421657329" type="glossary">loop-free</content-link> paths and backup paths throughout the routing domain. You will learn exactly how DUAL selects a route to install in the routing table and what DUAL does with potential backup routes.</p> <p>Like RIPv2, EIGRP can operate with classful or classless routing behavior. You will learn how to disable automatic summarization and then how to manually summarize networks to reduce the size of routing tables. Finally, you will learn how to use default routing with EIGRP.</p></content-text>
</page>
</topic>
</section>
<section type="" id="en0909010000">
<title><content-text>Introduction to EIGRP</content-text></title>
<topic type="" id="en0909010100">
<title><content-text>EIGRP: An Enhanced Distance Vector Routing Protocol</content-text></title>
<page type="OneColumn" id="en0909010101">
<content-media type="StaticGraphic" id="cm4569755634"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010100/en0909010101/cm4569755634.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010100/en0909010101/cm4569755634text.xml"/></content-media>
<content-text><p>Although EIGRP is described as an enhanced distance vector routing protocol, it is still a distance vector routing protocol. This can sometimes be a source of confusion. In order to appreciate enhancements of EIGRP and eliminate any confusion, we must first look at its predecessor, IGRP. </p> <p><b>Roots of EIGRP: IGRP</b></p> <p>Cisco developed the proprietary IGRP in 1985, in response to some of the limitations of RIPv1, including the use of the hop count metric and the maximum network size of 15 hops. </p> <p>Instead of hop count, both IGRP and EIGRP use metrics composed of bandwidth, delay, reliability, and load. By default, both routing protocols use only bandwidth and delay. However, because IGRP is a classful routing protocol that uses the Bellman-Ford algorithm and periodic updates, its usefulness is limited in many of today's networks. </p> <p>Therefore, Cisco enhanced IGRP with a new algorithm, DUAL and other features. The commands for both IGRP and EIGRP are similar, and in many cases identical. This allows for easy migration from IGRP to EIGRP. Cisco discontinued IGRP starting with IOS 12.2(13)T and 12.2(R1s4)S.</p> <p>Although discussed in more detail throughout this chapter, let us examine some of the differences between a traditional distance vector routing protocol such as RIP and IGRP, and the enhanced distance vector routing protocol, EIGRP.</p> <p>The figure summarizes the main differences between a traditional distance vector routing protocol, such as RIP, and the enhanced distance vector routing protocol EIGRP.</p> <p><b>The Algorithm</b></p> <p>Traditional distance vector routing protocols all use some variant of the Bellman-Ford or Ford-Fulkerson algorithm. These protocols, such as RIP and IGRP, age out individual routing entries, and therefore need to periodically send routing table updates. </p> <p>EIGRP uses the Diffusing Update Algorithm (DUAL). Although still a distance vector routing protocol, EIGRP with DUAL implements features not found in traditional distance vector routing protocols. EIGRP does not send periodic updates and route entries do not age out. Instead, EIGRP uses a lightweight Hello protocol to monitor connection status with its neighbors. Only changes in the routing information, such as a new link or a link becoming unavailable cause a routing update to occur. EIGRP routing updates are still vectors of distances transmitted to directly connected neighbors. </p> <p><b>Path Determination</b></p> <p>Traditional distance vector routing protocols such as RIP and IGRP keep track of only the preferred routes; the best path to a destination network. If the route becomes unavailable, the router waits for another routing update with a path to this remote network. </p> <p>EIGRP's DUAL maintains a topology table separate from the routing table, which includes both the best path to a destination network and any backup paths that DUAL has determined to be loop-free. Loop-free means that the neighbor does not have a route to the destination network that passes through this router. </p> <p>Later in this chapter, you will see that for a route to be considered as a valid loop-free backup path by DUAL, it must meet a requirement known as the feasibility condition. Any backup path that meets this condition is guaranteed to be loop-free. Because EIGRP is a distance vector routing protocol, it is possible that there might be loop-free backup paths to a destination network that do not meet the feasibility condition. These paths are therefore <i>not </i>included in the topology table as a valid loop-free backup path by DUAL. </p> <p>If a route becomes unavailable, DUAL will search its topology table for a valid backup path. If one exists, that route is immediately entered into the routing table. If one does not exist, DUAL performs a network discovery process to see if there happens to be a backup path that did not meet the requirement of the feasibility condition. This process is discussed more thoroughly later in this chapter.</p> <p><b>Convergence</b></p> <p>Traditional distance vector routing protocols such as RIP and IGRP use periodic updates. Due to the unreliable nature of periodic updates, traditional distance vector routing protocols are prone to routing loops and the count-to-infinity problem. RIP and IGRP use several mechanisms to help avoid these problems including holddown timers, which cause long convergence times.</p> <p>EIGRP does not use holddown timers. Instead, loop-free paths are achieved through a system of route calculations (diffusing computations) that are performed in a coordinated fashion among the routers. The detail of how this is done is beyond the scope of this course, but the result is faster convergence than traditional distance vector routing protocols.</p></content-text>
</page>
</topic>
<topic type="" id="en0909010200">
<title><content-text>EIGRP Message Format</content-text></title>
<page type="OneColumn" id="en0909010201">
<content-media type="InteractiveGraphicRollovers" id="cm4267074960"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010200/en0909010201/cm4267074960.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010200/en0909010201/cm4267074960text.xml"/></content-media>
<content-text><p><b>Roll over the fields in the Encapsulated EIGRP Message to see the encapsulation process. </b></p> <p>The data portion of an EIGRP message is encapsulated in a packet. This data field is called Type/Length/Value or TLV. As shown in the figure, the types of TLVs relevant to this course are EIGRP Parameters, IP Internal Routes, and IP External Routes. The components of the TLV data field are discussed further on the next page.</p> <p>The EIGRP packet header is included with every EIGRP packet, regardless of its type. The EIGRP packet header and TLV are then encapsulated in an IP packet. In the IP packet header, the protocol field is set to 88 to indicate EIGRP, and the destination address is set to the multicast 224.0.0.10. If the EIGRP packet is encapsulated in an Ethernet frame, the destination MAC address is also a multicast address: 01-00-5E-00-00-0A.</p></content-text>
</page>
<page type="OneColumn" id="en0909010202">
<content-media type="AnimationPartialScreen" id="cm4763640792"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010200/en0909010202/cm4763640792.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010200/en0909010202/cm4763640792text.xml"/></content-media>
<content-text><p><b>Note:</b> In the following discussion of EIGRP messages, many fields are beyond the scope of this course. All fields are shown to provide an accurate picture of the EIGRP message format. However, only the fields relevant to the CCNA candidate are discussed.</p> <p><b>Click EIGRP Packet Header in the figure.</b></p> <p>Every EIGRP message includes the header. Important fields for our discussion include the Opcode field and the Autonomous System Number field. Opcode specifies the EIGRP packet type: </p> <ul><li> Update</li> <li> Query</li> <li> Reply</li> <li> Hello</li></ul> <p>The <content-link target="cg6494076566" type="glossary">Autonomous System (AS)</content-link> Number specifies the EIGRP routing process. Unlike RIP, Cisco routers can run multiple instances of EIGRP. The AS number is used to track multiple instances of EIGRP.</p> <p>EIGRP packet types are discussed later in this chapter.</p> <p><b>Click TLV: EIGRP Parameters in the figure.</b></p> <p>The EIGRP parameters message includes the weights that EIGRP uses for its composite metric. By default, only bandwidth and delay are weighted. Both are equally weighted, therefore, the K1 field for bandwidth and the K3 field for delay are both set to 1. The other K values are set to zero. Metric calculations are further discussed later in this chapter.</p> <p>The Hold Time is the amount of time the EIGRP neighbor receiving this message should wait before considering the advertising router to be down. Hold Time is discussed in more detail later in this chapter.</p> <p><b>Click TLV: IP Internal in the figure.</b></p> <p>The IP Internal message is used to advertise EIGRP routes within an autonomous system. Important fields for our discussion include: the metric fields (Delay and Bandwidth), the subnet mask field (Prefix Length), and the Destination field. </p> <p>Delay is calculated as the sum of delays from source to destination in units of 10 microseconds. Bandwidth is the lowest configured bandwidth of any interface along the route. </p> <p>The subnet mask is specified as the prefix length or the number of network bits in the subnet mask. For example, the prefix length for the subnet mask 255.255.255.0 is 24 because 24 is the number of network bits. </p> <p>The Destination field stores the address of the destination network. Although only 24 bits are shown in this figure, this field varies based on the value of the network portion of the 32-bit network address. For example, the network portion of 10.1.0.0/16 is 10.1. Therefore, the Destination field stores the first 16 bits. Because the <i>minimum</i> length of this field is 24 bits, the remainder of the field is padded with zeros. If a network address is longer than 24 bits (192.168.1.32/27, for example), then the Destination field is extended for another 32 bits (for a total of 56 bits) and the unused bits are padded with zeros.</p> <p><b>Click TLV: IP External in the figure.</b></p> <p>The IP External message is used when external routes are imported into the EIGRP routing process. In this chapter, we will import or redistribute a default static route into EIGRP. Notice that the bottom half of the IP External TLV includes all the fields used by the IP Internal TLV. </p> <p><b>Note:</b> Some EIGRP literature may incorrectly state that the Maximum Transmission Unit (MTU) is one of the metrics used by EIGRP. MTU is <i>not</i> a metric used by EIGRP. The MTU is included in the routing updates but it is not used to determine the routing metric.</p></content-text>
</page>
</topic>
<topic type="" id="en0909010300">
<title><content-text>Protocol Dependent Modules (PDM)</content-text></title>
<page type="OneColumn" id="en0909010301">
<content-media type="StaticGraphic" id="cm3812279625"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010300/en0909010301/cm3812279625.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010300/en0909010301/cm3812279625text.xml"/></content-media>
<content-text><p>EIGRP has the capability for routing several different protocols including IP, IPX, and AppleTalk using protocol-dependent modules (PDM). PDMs are responsible for the specific routing tasks for each Network layer protocol. </p> <p>For example:</p> <ul><li> The IP-EIGRP module is responsible for sending and receiving EIGRP packets that are encapsulated in IP and for using DUAL to build and maintain the IP routing table. As you can see in the figure, EIGRP uses different EIGRP packets and maintains separate neighbor, topology, and routing tables for each Network layer protocol. </li> <li> The IPX EIGRP module is responsible for exchanging routing information about IPX networks with other IPX EIGRP routers. IPX EIGRP and Appletalk EIGRP are not included in this course. </li></ul></content-text>
</page>
</topic>
<topic type="" id="en0909010400">
<title><content-text>RTP and EIGRP Packet Types</content-text></title>
<page type="OneColumn" id="en0909010401">
<content-media type="StaticGraphic" id="cm6683622472"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010400/en0909010401/cm6683622472.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010400/en0909010401/cm6683622472text.xml"/></content-media>
<content-text><p>Reliable Transport Protocol (RTP) is the protocol used by EIGRP for the delivery and reception of EIGRP packets. EIGRP was designed as a Network layer independent routing protocol; therefore, it cannot use the services of UDP or TCP because IPX and Appletalk do not use protocols from the TCP/IP protocol suite. The figure shows conceptually how RTP operates. </p> <p>Although "Reliable" is part of its name, RTP includes both reliable delivery and unreliable delivery of EIGRP packets, similar to TCP and UDP, respectively. Reliable RTP requires an acknowledgement to be returned by the receiver to the sender. An unreliable RTP packet does not require an acknowledgement. </p> <p>RTP can send packets either as a unicast or a multicast. Multicast EIGRP packets use the reserved multicast address of 224.0.0.10.</p></content-text>
</page>
<page type="OneColumn" id="en0909010402">
<content-media type="InteractiveGraphicHotspots" id="cm5603778361"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010400/en0909010402/cm5603778361.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010400/en0909010402/cm5603778361text.xml"/></content-media>
<content-text><p><b>EIGRP Packet Types</b></p> <p>EIGRP uses five different packet types, some in pairs.</p> <p><b>Click Hello in the figure.</b></p> <p><b>Hello packets</b> are used by EIGRP to discover neighbors and to form adjacencies with those neighbors. EIGRP hello packets are multicasts and use unreliable delivery. EIGRP Hello packets are discussed in a later section.</p> <p><b>Click Update and ACK in the figure.</b></p> <p><b>Update packets</b> are used by EIGRP to propagate routing information. Unlike RIP, EIGRP does not send periodic updates. Update packets are sent only when necessary. EIGRP updates contain only the routing information needed and are sent only to those routers that require it. EIGRP update packets use reliable delivery. Update packets are sent as a multicast when required by multiple routers, or as a unicast when required by only a single router. In the figure, because the links are point-to-point, the updates are sent as unicasts.</p> <p><b>Acknowledgement (ACK) packets</b> are sent by EIGRP when reliable delivery is used. RTP uses reliable delivery for EIGRP update, query, and reply packets. EIGRP acknowledgement packets contain a nonzero acknowledgment number and always are sent by using a unicast address.</p> <p>In the figure, R2 has lost connectivity to the LAN attached to its FastEthernet interface. R2 immediately sends an Update to R1 and R3 noting the downed route. R1 and R3 respond with an acknowledgement.</p> <p><b>Click Query and Reply in the figure.</b></p> <p><b>Query and reply packets</b> are used by DUAL when searching for networks and other tasks. Queries and replies use reliable delivery. Queries use multicast, whereas replies are always sent as unicast. DUAL is discussed in a later section. Query and reply packets are discussed in more detail in CCNP.</p> <p>In the figure, R2 has lost connectivity to the LAN and it sends out queries to all EIGRP neighbors searching for any possible routes to the LAN. Because queries use reliable delivery, the receiving router must return an EIGRP acknowledgement. (To keep this example simple, acknowledgements were omitted in the graphic.)</p> <p>All neighbors must send a reply regardless of whether or not they have a route to the downed network. Because replies also use reliable delivery, routers such as R2, must send an acknowledgement.</p> <p><b>Note:</b> You may be wondering why R2 would send out a query for a network it knows is down. Actually, only the interface attached to the network is down. Another router could be attached to the same LAN. Therefore, R2 queries for such a router before completely removing the network from its database.</p></content-text>
</page>
</topic>
<topic type="" id="en0909010500">
<title><content-text>Hello Protocol</content-text></title>
<page type="OneColumn" id="en0909010501">
<content-media type="StaticGraphic" id="cm1582251881"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010500/en0909010501/cm1582251881.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010500/en0909010501/cm1582251881text.xml"/></content-media>
<content-text><p>Before any EIGRP packets can be exchanged between routers, EIGRP must first discover its neighbors. EIGRP neighbors are other routers running EIGRP on shared, directly connected networks.</p> <p>EIGRP routers discover neighbors and establish adjacencies with neighbor routers using the Hello packet. On most networks EIGRP Hello packets are sent every 5 seconds. On multipoint nonbroadcast multiaccess networks (NBMA) such as X.25, Frame Relay, and ATM interfaces with access links of T1 (1.544 Mbps) or slower, Hellos are unicast every 60 seconds. An EIGRP router assumes that as long as it is receiving Hello packets from a neighbor, the neighbor and its routes remain viable. </p> <p>Holdtime tells the router the maximum time the router should wait to receive the next Hello before declaring that neighbor as unreachable. By default, the <content-link target="cg6535488659" type="glossary">hold time</content-link> is three times the Hello interval, or 15 seconds on most networks and 180 seconds on low speed NBMA networks. If the hold time expires, EIGRP will declare the route as down and DUAL will search for a new path by sending out queries. </p></content-text>
</page>
</topic>
<topic type="" id="en0909010600">
<title><content-text>EIGRP Bounded Updates</content-text></title>
<page type="OneColumn" id="en0909010601">
<content-media type="StaticGraphic" id="cm9368639123"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010600/en0909010601/cm9368639123.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010600/en0909010601/cm9368639123text.xml"/></content-media>
<content-text><p>EIGRP uses the term <i>partial</i> or <i>bounded</i> when referring to its update packets. Unlike RIP, EIGRP does not send periodic updates. Instead, EIGRP sends its updates only when the metric for a route changes. </p> <p>The term <i>partial</i> means that the update only includes information about the route changes. EIGRP sends these incremental updates when the state of a destination changes, instead of sending the entire contents of the routing table. </p> <p>The term <i>bounded</i> refers to the propagation of partial updates sent only to those routers that are affected by the change. The partial update is automatically "bounded" so that only those routers that need the information are updated. </p> <p>By sending only the routing information that is needed and only to those routers that need it, EIGRP minimizes the bandwidth required to send EIGRP packets.</p></content-text>
</page>
</topic>
<topic type="" id="en0909010700">
<title><content-text>DUAL: An Introduction</content-text></title>
<page type="OneColumn" id="en0909010701">
<content-media type="AnimationPartialScreen" id="cm5040324477"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010700/en0909010701/cm5040324477.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010700/en0909010701/cm5040324477text.xml"/></content-media>
<content-text><p>Diffusing Update Algorithm (DUAL) is the convergence algorithm used by EIGRP instead of the Bellman-Ford or Ford Fulkerson algorithms used by other distance vector routing protocols, like RIP. DUAL is based on research conducted at SRI International, using calculations that were first proposed by E.W. Dijkstra and C.S. Scholten. The most prominent work with DUAL has been done by J.J. Garcia-Luna-Aceves.</p> <p>Routing loops, even temporary ones, can be extremely detrimental to network performance. Distance vector routing protocols such as RIP prevent routing loops with <content-link target="cg3331630841" type="glossary">hold-down timers</content-link> and split horizon. Although EIGRP uses both of these techniques, it uses them somewhat differently; the primary way that EIGRP prevents routing loops is with the DUAL algorithm. </p> <p><b>Click Play to view the basic operation of DUAL.</b></p> <p>The DUAL algorithm is used to obtain loop-freedom at every instant throughout a route computation. This allows all routers involved in a topology change to synchronize at the same time. Routers that are not affected by the topology changes are not involved in the recomputation. This method provides EIGRP with faster convergence times than other distance vector routing protocols. </p> <p>The decision process for all route computations is done by the DUAL Finite State Machine. In general terms, a finite state machine (FSM) is a model of behavior composed of a finite number of states, transitions between those states, and events or actions that create the transitions.</p> <p>The DUAL FSM tracks all routes, uses its metric to select efficient, loop-free paths, and selects the routes with the least cost path to insert into the routing table. The DUAL FSM will be discussed in more detail later in this chapter.</p> <p>Because recomputation of the DUAL algorithm can be processor-intensive, it is advantageous to avoid recomputation whenever possible. Therefore, DUAL maintains a list of backup routes it has already determined to be loop-free. If the primary route in the routing table fails, the best backup route is immediately added to the routing table. </p></content-text>
</page>
</topic>
<topic type="" id="en0909010800">
<title><content-text>Administrative Distance</content-text></title>
<page type="OneColumn" id="en0909010801">
<content-media type="StaticGraphic" id="cm5496832646"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010800/en0909010801/cm5496832646.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010800/en0909010801/cm5496832646text.xml"/></content-media>
<content-text><p>As you know from Chapter 3, "Introduction to Dynamic Routing Protocols," administrative distance (AD) is the trustworthiness (or preference) of the route source. EIGRP has a default administrative distance of 90 for internal routes and 170 for routes imported from an external source, such as default routes. When compared to other interior gateway protocols (IGPs), EIGRP is the most preferred by the Cisco IOS because it has the lowest administrative distance. </p> <p>Notice in the figure that EIGRP has a third AD value, of 5, for summary routes. Later in this chapter, you will learn how to configure EIGRP summary routes.</p></content-text>
</page>
</topic>
<topic type="" id="en0909010900">
<title><content-text>Authentication</content-text></title>
<page type="OneColumn" id="en0909010901">
<content-media type="StaticGraphic" id="cm8222038895"><title><content-text></content-text></title><media ref="en0909000000/en0909010000/en0909010900/en0909010901/cm8222038895.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909010000/en0909010900/en0909010901/cm8222038895text.xml"/></content-media>
<content-text><p>Like other routing protocols, EIGRP can be configured for authentication. RIPv2, EIGRP, OSPF, IS-IS, and BGP can all be configured to encrypt and authenticate their routing information.</p> <p>It is good practice to authenticate transmitted routing information. This practice ensures that routers will only accept routing information from other routers that have been configured with the same password or authentication information. </p> <p><b>Note:</b> Authentication does not encrypt the router's routing table.</p> <p>As stated in previous chapters, configuring routing protocols to use authentication will be discussed in a later course. </p></content-text>
</page>
</topic>
</section>
<section type="" id="en0909020000">
<title><content-text>Basic EIGRP Configuration</content-text></title>
<topic type="" id="en0909020100">
<title><content-text>EIGRP Network Topology</content-text></title>
<page type="OneColumn" id="en0909020101">
<content-media type="InteractiveGraphicHotspots" id="cm5326487712"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020100/en0909020101/cm5326487712.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020100/en0909020101/cm5326487712text.xml"/></content-media>
<content-text><p>The figure shows our topology from previous chapters, but now includes the addition of the ISP router. Notice that both the R1 and R2 routers have subnets that are part of the 172.16.0.0/16 classful network, a class B address. The fact that 172.16.0.0 is a class B address is only relevant because EIGRP automatically summarizes at classful boundaries, similar to RIP. </p> <p><b>Click R1, R2, and R3 to see each router's starting configuration.</b></p> <p>Notice that the ISP router does not physically exist in our configurations. The connection between R2 and ISP is represented with a <content-link target="cg9480679254" type="glossary">loopback interface</content-link> on router R2. Remember from Chapter 7, "RIPv2," that a loopback interface can be used to represent an interface on a router that does not have any actual connection to a physical link on the network. Loopback addresses can be verified with the <span class="cmd"><b>ping</b></span> command and included in routing updates.</p> <p><b>Note:</b> Loopback interfaces also have specific uses with some routing protocols, as we will see in Chapter 11, OSPF.</p></content-text>
</page>
</topic>
<topic type="" id="en0909020200">
<title><content-text>Autonomous Systems and Process IDs</content-text></title>
<page type="OneColumn" id="en0909020201">
<content-media type="StaticGraphic" id="cm1271893935"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020200/en0909020201/cm1271893935.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020200/en0909020201/cm1271893935text.xml"/></content-media>
<content-text><p><b>Autonomous System</b></p> <p>An autonomous system (AS) is a collection of networks under the administrative control of a single entity that presents a common routing policy to the Internet. In the figure, companies A, B, C, and D are all under the administrative control of ISP1. ISP1 "presents a common routing policy" for all of these companies when advertising routes to ISP2. </p> <p>The guidelines for the creation, selection, and registration of an autonomous system are described in RFC 1930. AS numbers are assigned by the Internet Assigned Numbers Authority (IANA), the same authority that assigns IP address space. You learned about IANA and its Regional Internet Registries (RIRs) in a previous course. The local RIR is responsible for assigning an AS number to an entity from its block of assigned AS numbers. Prior to 2007, AS numbers were 16-bit numbers, ranging from 0 to 65535. Now 32-bit AS numbers are assigned, increasing the number of available AS numbers to over 4 billion. </p> <p>Who needs an autonomous system number? Usually ISPs (Internet Service Providers), Internet backbone providers, and large institutions connecting to other entities that also have an AS number. These ISPs and large institutions use the exterior gateway routing protocol Border Gateway Protocol, or BGP, to propagate routing information. BGP is the only routing protocol that uses an actual autonomous system number in its configuration. </p> <p>The vast majority of companies and institutions with IP networks do not need an AS number because they come under the control of a larger entity such as an ISP. These companies use interior gateway protocols such as RIP, EIGRP, OSPF, and IS-IS to route packets within their own networks. They are one of many independent and separate networks within the autonomous system of the ISP. The ISP is responsible for the routing of packets within its autonomous system and between other autonomous systems. </p></content-text>
</page>
<page type="OneColumn" id="en0909020202">
<content-media type="StaticGraphic" id="cm7178461969"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020200/en0909020202/cm7178461969.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020200/en0909020202/cm7178461969text.xml"/></content-media>
<content-text><p><b>Process ID</b></p> <p>Both EIGRP and OSPF use a process ID to represent an instance of their respective routing protocol running on the router. </p> <span class="cmd"><p>Router(config)#<b>router eigrp </b><i>autonomous-system</i> </p></span> <p>Although EIGRP refers to the parameter as an "autonomous-system" number, it actually functions as a process ID. This number is <i>not</i> associated with an autonomous system number discussed previously and can be assigned any 16-bit value. </p> <span class="cmd"><p>Router(config)#<b>router eigrp 1</b></p></span> <p>In this example, the number 1 identifies this particular EIGRP process running on this router. In order to establish neighbor adjacencies, EIGRP requires all routers in the same routing domain to be configured with the same process ID. Typically, only a single process ID of any routing protocol would be configured on a router. </p> <p><b>Note: </b>RIP does not use process IDs; therefore, it can only support a single instance of RIP. Both EIGRP and OSPF can support multiple instances of each routing protocol, although this type of multiple routing protocol implementation is not usually needed or recommended. </p></content-text>
</page>
</topic>
<topic type="" id="en0909020300">
<title><content-text>The router eigrp command</content-text></title>
<page type="OneColumn" id="en0909020301">
<content-media type="StaticGraphic" id="cm4718440561"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020300/en0909020301/cm4718440561.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020300/en0909020301/cm4718440561text.xml"/></content-media>
<content-text><p>The <span class="cmd"><b>router eigrp </b><i>autonomous-system</i></span> global configuration command enables EIGRP. The autonomous system parameter is a number chosen by the network administrator between 1 and 65535. The number chosen is the process ID number and is important because all routers in this EIGRP routing domain must use the same process ID number (<span class="cmd"><i>autonomous-system</i></span> number).</p> <p><b>Click Router Output in the figure.</b></p> <p>As you can see from the topology and router output in the figure, we will enable EIGRP on all three routers using the process ID of 1.</p></content-text>
</page>
</topic>
<topic type="" id="en0909020400">
<title><content-text>The network Command</content-text></title>
<page type="OneColumn" id="en0909020401">
<content-media type="StaticGraphic" id="cm8531213541"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020400/en0909020401/cm8531213541.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020400/en0909020401/cm8531213541text.xml"/></content-media>
<content-text><p>The network command in EIGRP has the same function as in other IGP routing protocols: </p> <ul><li> Any interface on this router that matches the network address in the <span class="cmd"><b>network</b></span> command will be enabled to send and receive EIGRP updates.</li> <li> This network (or subnet) will be included in EIGRP routing updates.</li></ul> <p><b>Click Router Output in the figure.</b></p> <p>The <span class="cmd"><b>network</b></span> command is used in router configuration mode.</p> <span class="cmd"><p>Router(config-router)#<b>network </b><i>network-address</i></p></span> <p>The <span class="cmd"><i>network-address</i></span> is the classful network address for this interface. The figure shows the network commands configured for R1 and R2. R3 will be configured on the next page. In the figure, a single classful network statement is used on R1 to include both 172.16.1.0/24 and 172.16.3.0/30 subnets:</p> <span class="cmd"><p>R1(config-router)#<b>network 172.16.0.0</b></p></span>  <p>When EIGRP is configured on R2, DUAL sends a notification message to the console stating that a neighbor relationship with another EIGRP router has been established. This new <content-link target="cg3325821460" type="glossary">adjacency</content-link> happens automatically because both R1 and R2 are using the same <span class="cmd"><b>eigrp 1</b></span> routing process and both routers are now sending updates on the 172.16.0.0 network.</p> <span class="cmd"><p>R2(config-router)#<b>network 172.16.0.0</b></p></span> <span class="cmd"><p>%DUAL-5-NBRCHANGE: <span class="blue">IP-EIGRP 1</span>: Neighbor 172.16.3.1 (Serial0/0) is up: new adjacency</p></span></content-text>
</page>
<page type="OneColumn" id="en0909020402">
<content-media type="StaticGraphic" id="cm3761399799"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020400/en0909020402/cm3761399799.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020400/en0909020402/cm3761399799text.xml"/></content-media>
<content-text><p><b>The </b><span class="cmd"><b>network</b></span><b> Command with a Wildcard Mask</b></p> <p>By default, when using the <span class="cmd">network</span> command and a classful network address such as 172.16.0.0, all interfaces on the router that belong to that classful network address will be enabled for EIGRP. However, there may be times when the network administrator does not want to include all interfaces within a network when enabling EIGRP. To configure EIGRP to advertise specific subnets only, use the <span class="cmd"><i>wildcard-mask</i></span> option with the <span class="cmd"><b>network</b></span> command:</p> <span class="cmd"><p>Router(config-router)#<b>network </b><i>network-address</i> [<i>wildcard-mask</i>] </p></span> <p>Think of a <content-link target="cg7157518994" type="glossary">wildcard mask</content-link> as the inverse of a subnet mask. The inverse of subnet mask 255.255.255.252 is 0.0.0.3. To calculate the inverse of the subnet mask, subtract the subnet mask from 255.255.255.255:</p> <span class="cmd"><p> 255.255.255.255 </p></span> <span class="cmd"><p>- 255.255.255.252</p></span> <span class="cmd"><p>Subtract the subnet mask</p></span> <span class="cmd"><p>---------------</p></span> <span class="cmd"><p>0. 0. 0. 3</p></span> <span class="cmd"><p>Wildcard mask</p></span> <p><b>Click Router Output in the figure.</b></p> <p>In the figure, R2 is configured with the subnet 192.168.10.8 and the wildcard mask 0.0.0.3.</p> <span class="cmd"><p>R2(config-router)#<b>network 192.168.10.8 0.0.0.3</b></p></span> <p>Some IOS versions will also let you simply enter the subnet mask. For example, you might enter the following:</p> <span class="cmd"><p>R2(config-router)#<b>network 192.168.10.8 255.255.255.252</b></p></span> <p>However, the IOS will then convert the command to the wildcard mask format, as can be verified with the <span class="cmd"><b>show run</b></span> command:</p> <span class="cmd"><p>R2#<b>show run</b></p></span> <span class="cmd"><p>&lt;some output omitted></p></span> <span class="cmd"><p>!</p></span> <span class="cmd"><p>router eigrp 1</p></span> <span class="cmd"><p>network 172.16.0.0</p></span> <span class="cmd"><p>network 192.168.10.8 <span class="blue">0.0.0.3</span></p></span> <span class="cmd"><p>auto-summary</p></span> <span class="cmd"><p>!</p></span> <p>The figure also shows the configuration for R3. As soon as the classful network 192.168.10.0 is configured, R3 establishes adjacencies with both R1 and R2. </p></content-text>
</page>
</topic>
<topic type="" id="en0909020500">
<title><content-text>Verifying EIGRP</content-text></title>
<page type="OneColumn" id="en0909020501">
<content-media type="StaticGraphic" id="cm5354599932"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020500/en0909020501/cm5354599932.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020500/en0909020501/cm5354599932text.xml"/></content-media>
<content-text><p>Before any updates can be sent or received by EIGRP, routers must establish adjacencies with their neighbors. EIGRP routers establish adjacencies with neighbor routers by exchanging EIGRP Hello packets. </p> <p>Use the <span class="cmd"><b>show ip eigrp neighbors</b></span> command to view the neighbor table and verify that EIGRP has established an adjacency with its neighbors. For each router, you should be able to see the IP address of the adjacent router and the interface that this router uses to reach that EIGRP neighbor. In the figure, we can verify that all routers have established the necessary adjacencies. Each router has two neighbors listed in the neighbor table.</p> <p>The output from the <span class="cmd"><b>show ip eigrp neighbor</b></span> command includes:</p> <ul><li> <span class="cmd"><b>H column</b></span> - Lists the neighbors in the order they were learned.</li> <li> <span class="cmd"><b>Address</b></span> - The IP address of the neighbor.</li> <li> <span class="cmd"><b>Interface</b></span> - The local interface on which this Hello packet was received.</li> <li> <span class="cmd"><b>Hold</b></span> - The current hold time. Whenever a Hello packet is received, this value is reset to the maximum hold time for that interface and then counts down to zero. If zero is reached, the neighbor is considered "down".</li> <li> <span class="cmd"><b>Uptime</b></span> - Amount of time since this neighbor was added to the neighbor table.</li> <li> <span class="cmd"><b>SRTT</b></span> (Smooth Round Trip Timer) and <span class="cmd"><b>RTO</b></span> (Retransmit Interval) - Used by RTP to manage reliable EIGRP packets. SRTT and RTO are discussed further in CCNP courses.</li> <li> <span class="cmd"><b>Queue Count</b></span> - Should always be zero. If more than zero, then EIGRP packets are waiting to be sent. Queue count is discussed further in CCNP courses.</li> <li> <span class="cmd"><b>Sequence Number</b></span> - Used to track updates, queries, and reply packets. Sequence numbers are discussed further in CCNP courses.</li></ul> <p>The <span class="cmd"><b>show ip eigrp neighbors</b></span> command is very useful for verifying and troubleshooting EIGRP. If a neighbor is not listed after adjacencies have been established with a router's neighbors, check the local interface to make sure it is activated with the <span class="cmd"><b>show ip interface brief</b></span> command. If the interface is active, try pinging the IP address of the neighbor. If the ping fails, it means that the neighbor interface is down and needs to be activated. If the ping is successful and EIGRP still does not see the router as a neighbor, examine the following configurations:</p> <ul><li> Are both routers configured with the same EIGRP process ID?</li> <li> Is the directly connected network included in the EIGRP network statements?</li> <li> Is the <span class="cmd"><b>passive-interface</b></span> command configured to prevent EIGRP Hello packets on the interface?</li></ul></content-text>
</page>
<page type="OneColumn" id="en0909020502">
<content-media type="StaticGraphic" id="cm8027203070"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020500/en0909020502/cm8027203070.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020500/en0909020502/cm8027203070text.xml"/></content-media>
<content-text><p>As with RIP, the <span class="cmd"><b>show ip protocols</b></span> command can be used to verify that EIGRP is enabled. The <span class="cmd"><b>show ip protocols</b></span> command displays different types of output specific to each routing protocol. We will examine some of these details in later sections. </p> <p><b>Click Router Output in the figure.</b></p> <p>Notice that the output specifies the process ID used by EIGRP: </p> <span class="cmd"><p>Routing Protocol is "<span class="blue">eigrp 1</span>"</p></span> <p>Remember, the process ID must be the same on all routers for EIGRP to establish neighbor adjacencies and share routing information.</p> <p>EIGRP's internal and external administrative distances are also displayed: </p> <span class="cmd"><p>Distance: <span class="blue">internal 90</span> external 170</p></span></content-text>
</page>
</topic>
<topic type="" id="en0909020600">
<title><content-text>Examining the Routing Table</content-text></title>
<page type="OneColumn" id="en0909020601">
<content-media type="InteractiveGraphicHotspots" id="cm6753980030"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020600/en0909020601/cm6753980030.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020600/en0909020601/cm6753980030text.xml"/></content-media>
<content-text><p>Another way to verify that EIGRP and other functions of the router are configured properly is to examine the routing tables with the <span class="cmd"><b>show ip route</b></span> command. </p> <p><b>Click R1, R2, and R3 in the figure.</b></p> <p>By default, EIGRP automatically summarizes routes at the major network boundary. We can disable the automatic summarization with the <span class="cmd"><b>no auto-summary</b></span> command, just as we did in RIPv2. We will examine this in more detail in a later section.</p> <p>Notice that EIGRP routes are denoted in the routing table with a <b>D</b>, which stands for DUAL. </p> <p>Remember, because EIGRP is a classless routing protocol (includes the subnet mask in the routing update), it supports VLSM and CIDR. We can see in the routing table for R1 that the 172.16.0.0/16 parent network is variably subnetted with three child routes using either a /24 or /30 mask. </p></content-text>
</page>
<page type="OneColumn" id="en0909020602">
<content-media type="StaticGraphic" id="cm4746051302"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020600/en0909020602/cm4746051302.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020600/en0909020602/cm4746051302text.xml"/></content-media>
<content-text><p><b>Introducing the Null0 Summary Route</b></p> <p>The figure shows the routing table for R2 with two entries highlighted. Notice that EIGRP has automatically included a summary route to Null0 for the classful networks 192.168.10.0/24 and 172.16.0.0/16. </p> <p>Remember from Chapter 7, "RIPv2," that Null0 is not an actual interface. Notice that the summary routes are sourced from Null0 - this is because these routes are used for advertisement purposes. The 192.168.10.0/24 and 172.16.0.0/16 routes do not actually represent a path to reach the parent networks. If a packet does not match one of the level 2 child routes, it is sent to the Null0 interface. In other words, if the packet matches the level 1 parent - the classful network address - but none of the subnets, the packet is discarded. </p> <p><b>Note</b>: EIGRP automatically includes a null0 summary route as a child route whenever both of following conditions exist:</p> <ul><li> There is at least one subnet that was learned via EIGRP.</li> <li> Automatic summarization is enabled.</li></ul> <p>We will see that the null0 summary route is removed when automatic summary is disabled.</p></content-text>
</page>
<page type="OneColumn" id="en0909020603">
<content-media type="StaticGraphic" id="cm7071561185"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020600/en0909020603/cm7071561185.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909020000/en0909020600/en0909020603/cm7071561185text.xml"/></content-media>
<content-text><p><b>R3 Routing Table</b></p> <p>The routing table for R3 shows that both R1 and R2 are automatically summarizing the 172.16.0.0/16 network and sending it as a single routing update. R1 and R2 are not propagating the individual subnets because of automatic summarization. We will turn off automatic summarization later. Because R3 is getting two equal cost routes for 172.16.0.0/16 from both R1 and R2, both routes are included in the routing table.</p></content-text>
</page>
<page type="OneColumn" id="en0909020604">
<content-media type="ActivityPKT" id="cm9973251828"><title><content-text></content-text></title><media ref="en0909000000/en0909020000/en0909020600/en0909020604/cm9973251828/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909020000/en0909020600/en0909020604/cm9973251828/icontext.xml"/></content-media>
<content-text><p>Use the Packet Tracer Activity to configure and verify basic EIGRP routing.</p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en0909030000">
<title><content-text>EIGRP Metric Calculation</content-text></title>
<topic type="" id="en0909030100">
<title><content-text>EIGRP Composite Metric and the K Values</content-text></title>
<page type="OneColumn" id="en0909030101">
<content-media type="StaticGraphic" id="cm4744617533"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030100/en0909030101/cm4744617533.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030100/en0909030101/cm4744617533text.xml"/></content-media>
<content-text><p>EIGRP uses the following values in its composite metric to calculate the preferred path to a network:</p> <ul><li> Bandwidth</li> <li> Delay</li> <li> Reliability</li> <li> Load</li></ul> <p><b>Note: </b>As mentioned earlier in this chapter, although MTU is included in the routing table updates, it is not a routing metric used by EIGRP or IGRP. By default, only bandwidth and delay are used to calculate the metric. Cisco recommends that reliability and load are not used unless the administrator has an explicit need to do so. </p> <p><b>The Composite Metric</b></p> <p>The figure shows the composite metric formula used by EIGRP. The formula consists of values K1 through K5, known as EIGRP metric weights. By default, K1 and K3 are set to 1, and K2, K4, and K5 are set to 0. The result is that only the bandwidth and delay values are used in the computation of the default composite metric. </p> <p>The default K values can be changed with the EIGRP router command:</p> <span class="cmd"><p>Router(config-router)#<b>metric weights </b><i>tos k1 k2 k3 k4 k5</i></p></span> <p><b>Note:</b> Modifying the metric weights is beyond the scope of this course, but their relevance is important in establishing neighbors and is discussed in a later section. The <span class="cmd"><b>tos</b></span> (Type of Service) value is left over from IGRP and was never implemented. The <span class="cmd"><b>tos</b></span> value is always set to 0. </p></content-text>
</page>
<page type="OneColumn" id="en0909030102">
<content-media type="StaticGraphic" id="cm4722514667"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030100/en0909030102/cm4722514667.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030100/en0909030102/cm4722514667text.xml"/></content-media>
<content-text><p><b>Verifying the K Values</b></p> <p>The <span class="cmd"><b>show ip protocols</b></span> command is used to verify the K values. The command output for R1 is shown in the figure. Notice that the K values on R1 are set to the default. Again, changing these values to other than the default is not recommended unless the network administrator has a very good reason to do so. </p></content-text>
</page>
</topic>
<topic type="" id="en0909030200">
<title><content-text>EIGRP Metrics</content-text></title>
<page type="OneColumn" id="en0909030201">
<content-media type="StaticGraphic" id="cm8842260833"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030200/en0909030201/cm8842260833.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030200/en0909030201/cm8842260833text.xml"/></content-media>
<content-text><p><b>Examining the Metric Values</b></p> <p>You now know the defaults for the K values. By using the <span class="cmd"><b>show interface</b></span> command we can examine the <i>actual</i> values used for bandwidth, delay, reliability, and load in the computation of the routing metric. </p> <p><b>Click Router Output in the figure.</b></p> <p>The output in the figure shows the values used in the composite metric for the Serial 0/0/0 interface on R1.</p> <span class="cmd"><p> MTU 1500 bytes, <span class="blue">BW 1544 Kbit, DLY 20000 usec,</span></p></span> <span class="cmd"><p><span class="blue"> reliability 255/255, txload 1/255, rxload 1/255</span></p></span>  <p><b>Bandwidth</b></p> <p>The bandwidth metric (1544 Kbit) is a static value used by some routing protocols such as EIGRP and OSPF to calculate their routing metric. The bandwidth is displayed in Kbit (kilobits). Most serial interfaces use the default bandwidth value of 1544 Kbit or 1,544,000 bps (1.544 Mbps). This is the bandwidth of a T1 connection. However, some serial interfaces use a different default bandwidth value. Always verify bandwidth with the <span class="cmd"><b>show interface</b></span> command.</p> <p>The value of the bandwidth may or may not reflect the actual physical bandwidth of the interface. <i>Modifying the bandwidth value does not change the actual bandwidth of the link.</i> If actual bandwidth of the link differs from the default bandwidth value, then you should modify the bandwidth value, as we will see in a later section.</p></content-text>
</page>
<page type="OneColumn" id="en0909030202">
<content-media type="StaticGraphic" id="cm7941191867"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030200/en0909030202/cm7941191867.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030200/en0909030202/cm7941191867text.xml"/></content-media>
<content-text><p><b>Delay</b></p> <p>Delay is a measure of the time it takes for a packet to traverse a route. The delay (DLY) metric is a static value based on the type of link to which the interface is connected and is expressed in microseconds. Delay is not measured dynamically. In other words, the router does not actually track how long packets are taking to reach the destination. The delay value, much like the bandwidth value, is a default value that can be changed by the network administrator.</p> <span class="cmd"><p> MTU 1500 bytes, BW 1544 Kbit, <span class="blue">DLY 20000</span> usec,</p></span> <span class="cmd"><p> reliability 255/255, txload 1/255, rxload 1/255</p></span>  <p>The table in the figure shows the default delay values for various interfaces. Notice that the default value is 20,000 microseconds for Serial interfaces and 100 microseconds for FastEthernet interfaces.</p></content-text>
</page>
<page type="OneColumn" id="en0909030203">
<content-media type="StaticGraphic" id="cm4448111834"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030200/en0909030203/cm4448111834.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030200/en0909030203/cm4448111834text.xml"/></content-media>
<content-text><p><b>Reliability</b></p> <p>Reliability (<span class="cmd">reliability</span>) is a measure of the probability that the link will fail or how often the link has experienced errors. Unlike delay, Reliability is measured dynamically with a value between 0 and 255, with 1 being a minimally reliable link and 255 one hundred percent reliable. Reliability is calculated on a 5-minute weighted average to avoid the sudden impact of high (or low) error rates. </p> <p>Reliability is expressed as a fraction of 255 - the higher the value, the more reliable the link. So, 255/255 would be 100 percent reliable, whereas a link of 234/255 would be 91.8 percent reliable.</p> <p><b>Remember:</b> By default, EIGRP does not use reliability in its metric calculation.</p> <p><b>Load</b></p> <p>Load (<span class="cmd">load</span>) reflects the amount of traffic utilizing the link. Like reliability, load is measured dynamically with a value between 0 and 255. Similar to reliability, load is expressed as a fraction of 255. However, in this case a lower load value is more desirable because it indicates less load on the link. So, 1/255 would be a minimally loaded link. 40/255 is a link at 16 percent capacity, and 255/255 would be a link that is 100 percent saturated.</p> <p>Load is displayed as both an outbound, or transmit, load value (<span class="cmd">txload</span>) and an inbound, or receive, load value (<span class="cmd">rxload</span>). This value is calculated on a 5-minute weighted average to avoid the sudden impact of high (or low) channel usage.</p> <p><b>Remember:</b> By default, EIGRP does not use load in its metric calculation.</p></content-text>
</page>
</topic>
<topic type="" id="en0909030300">
<title><content-text>Using the bandwidth Command</content-text></title>
<page type="OneColumn" id="en0909030301">
<content-media type="InteractiveGraphicHotspots" id="cm2386363372"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030300/en0909030301/cm2386363372.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030300/en0909030301/cm2386363372text.xml"/></content-media>
<content-text><p>On most serial links, the bandwidth metric will default to 1544 Kbits. Because both EIGRP and OSPF use bandwidth in default metric calculations, a correct value for bandwidth is very important to the accuracy of routing information. But what do you do if the actual bandwidth of the link does not match the default bandwidth of the interface? </p> <p><b>Click Configure Bandwidth in the figure.</b></p> <p>Use the interface command <span class="cmd"><b>bandwidth</b></span> to modify the bandwidth metric: </p> <span class="cmd"><p>Router(config-if)#<b>bandwidth </b><i>kilobits</i></p></span>  <p>Use the interface command <span class="cmd"><b>no bandwidth</b></span> to restore the default value.</p> <p>In the figure, the link between R1 and R2 has a bandwidth of 64 kbps, and the link between R2 and R3 has a bandwidth of 1024 kbps. The figure shows the configurations used on all three routers to modify the bandwidth on the appropriate serial interfaces.</p> <p><b>Click Verify Bandwidth in the figure.</b></p> <p>We can verify the change using the <span class="cmd"><b>show interface</b></span> command. It is important to modify the bandwidth metric on both sides of the link to ensure proper routing in both directions.</p> <p><b>Note: </b>A common misconception for students new to networking and the Cisco IOS is to assume that the <span class="cmd"><b>bandwidth</b></span> command will change the physical bandwidth of the link. As stated in the previous section, the <span class="cmd"><b>bandwidth</b></span> command only modifies the bandwidth metric used by routing protocols such as EIGRP and OSPF. Sometimes, a network administrator will change the bandwidth value in order have more control over the chosen outgoing interface.</p></content-text>
</page>
</topic>
<topic type="" id="en0909030400">
<title><content-text>Calculating the EIGRP Metric</content-text></title>
<page type="OneColumn" id="en0909030401">
<content-media type="StaticGraphic" id="cm5976719281"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030400/en0909030401/cm5976719281.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030400/en0909030401/cm5976719281text.xml"/></content-media>
<content-text><p>The figure shows the composite metric used by EIGRP. Using the default values for K1 and K3, we can simplify this calculation to: the slowest bandwidth (or minimum bandwidth) plus the cumulative sum of all of the delays. </p> <p>In other words, by examining the bandwidth and delay values for all of the outgoing interfaces of the route, we can determine the EIGRP metric. First, determine the link with the slowest bandwidth. That bandwidth is used for the <b>(10,000,000/bandwidth) * 256</b> portion of the formula. Next, determine the delay value for each outgoing interface on the way to the destination. Sum the delay values and divide by 10 <b>(sum of delay/10) </b>and then multiply by 256 <b>(* 256)</b>. Add the bandwidth and sum of delay values to obtain the <b>EIGRP metric</b>.</p> <p>The routing table output for R2 shows that the route to 192.168.1.0/24 has an EIGRP metric of 3,014,400. Let's see exactly how EIGRP calculated this value. </p></content-text>
</page>
<page type="OneColumn" id="en0909030402">
<content-media type="InteractiveGraphicHotspots" id="cm2875518052"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030400/en0909030402/cm2875518052.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909030000/en0909030400/en0909030402/cm2875518052text.xml"/></content-media>
<content-text><p><b>Bandwidth</b></p> <p><b>Click Bandwidth Calculation in the figure.</b></p> <p>Because EIGRP uses the slowest bandwidth in its metric calculation, we can find the slowest bandwidth by examining each interface between R2 and the destination network 192.168.1.0. The Serial 0/0/1 interface on R2 has a bandwidth of 1,024 Kbps or 1,024,000 bps. The FastEthernet 0/0 interface on R3 has a bandwidth of 100,000 Kbps or 100 Mbps. Therefore, the slowest bandwidth is 1024 Kbps and is used in the calculation of the metric.</p> <p>EIGRP takes the <content-link target="cg2185396118" type="glossary">reference bandwidth</content-link> value of 10,000,000 and divides it by the bandwidth value in kbps. This will result in higher bandwidth values receiving a lower metric and lower bandwidth values receiving a higher metric. </p> <p>10,000,000 is divided by 1024. If the result is not a whole number, then the value is rounded down. In this case, 10,000,000 divided by 1024 equals 9765.625. The .625 is dropped before multiplying by 256. The bandwidth portion of the composite metric is 2,499,840.</p> <p><b>Delay</b></p> <p>Using the same outgoing interfaces we can also determine the delay value.</p> <p><b>Click Delay Calculation in the figure.</b></p> <p>EIGRP uses the cumulative sum of delay metrics of all of the outgoing interfaces. The Serial 0/0/1 interface on R2 has a delay of 20000 microseconds. The FastEthernet 0/0 interface on R3 has a delay of 100 microseconds. </p> <p>Each delay value is divided by 10 and then summed. 20,000/10 + 100/10 results in a value of 2,010. This result is then multiplied by 256. The delay portion of the composite metric is 514,560.</p> <p><b>Adding Bandwidth and Delay</b></p> <p><b>Click EIGRP Metric in the figure.</b></p> <p>Simply add the two values together, 2,499,840 + 514,560, to obtain the EIGRP metric of 3,014,400. This value matches the value shown in the routing table for R2. This is a result of the slowest bandwidth and the sum of the delays</p></content-text>
</page>
<page type="OneColumn" id="en0909030403">
<content-media type="ActivityPKT" id="cm5610587491"><title><content-text></content-text></title><media ref="en0909000000/en0909030000/en0909030400/en0909030403/cm5610587491/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909030000/en0909030400/en0909030403/cm5610587491/icontext.xml"/></content-media>
<content-text><p>Use the Packet Tracer Activity to investigate EIGRP's metric calculations.</p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en0909040000">
<title><content-text>DUAL</content-text></title>
<topic type="" id="en0909040100">
<title><content-text>DUAL Concepts</content-text></title>
<page type="OneColumn" id="en0909040101">
<content-media type="StaticGraphic" id="cm1541901476"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040100/en0909040101/cm1541901476.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040100/en0909040101/cm1541901476text.xml"/></content-media>
<content-text><p>As stated in a previous section, DUAL (Diffusing Update Algorithm) is the algorithm used by EIGRP. This section will discuss how DUAL determines the best loop-free path and loop-free backup paths.</p> <p>DUAL uses several terms which will be discussed in more detail throughout this section:</p> <ul><li> Successor</li> <li> <content-link target="cg3609572796" type="glossary">Feasible Distance (FD)</content-link></li> <li> <content-link target="cg9630550867" type="glossary">Feasible Successor (FS)</content-link></li> <li> Reported Distance (RD) or Advertised Distance (AD)</li> <li> Feasible Condition or <content-link target="cg2454214713" type="glossary">Feasibility Condition (FC)</content-link></li></ul> <p>These terms and concepts are at the center of DUAL's loop avoidance mechanism. Let's examine them in more depth.</p></content-text>
</page>
</topic>
<topic type="" id="en0909040200">
<title><content-text>Successor and Feasible Distance</content-text></title>
<page type="OneColumn" id="en0909040201">
<content-media type="StaticGraphic" id="cm6635095626"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040200/en0909040201/cm6635095626.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040200/en0909040201/cm6635095626text.xml"/></content-media>
<content-text><p>A <i><content-link target="cg8388310335" type="glossary">successor</content-link></i> is a neighboring router that is used for packet forwarding and is the least-cost route to the destination network. The IP address of a successor is shown in a routing table entry right after the word <span class="cmd">via</span>. </p> <p><i>Feasible distance</i> (FD) is the lowest calculated metric to reach the destination network. FD is the metric listed in the routing table entry as the second number inside the brackets. As with other routing protocols this is also known as the metric for the route. </p> <p><b>Click Router Output in the figure.</b></p> <p>Examining the routing table for R2 in the figure, we can see that EIGRP's best path for the 192.168.1.0/24 network is through router R3 and that the feasible distance is 3014400-the same metric that we calculated in the last topic: </p> <span class="cmd"><p>D 192.168.1.0/24 [90/<span class="blue">3014400</span>] via <span class="blue">192.168.10.10</span>, 00:00:31, Serial0/0/1</p></span>  <p>Other successors and feasible distances are also shown in the figure. Can you answer the following questions?</p> <p><b>What is the IP address of the successor for network 172.16.1.0/24? </b></p> <p>Answer: 172.16.3.1, which is R1. </p> <p><b>What is the feasible distance to 172.16.1.0/24? </b></p> <p>Answer: 40514560.</p></content-text>
</page>
</topic>
<topic type="" id="en0909040300">
<title><content-text>Feasible Successors, Feasibility Condition and Reported Distance</content-text></title>
<page type="OneColumn" id="en0909040301">
<content-media type="InteractiveGraphicHotspots" id="cm3668751889"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040300/en0909040301/cm3668751889.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040300/en0909040301/cm3668751889text.xml"/></content-media>
<content-text><p>One of the reasons DUAL can converge quickly after a change in the topology is because it can use backup paths to other routers known as <i>feasible successors</i> without having to recompute DUAL.</p> <p><b>Click Feasible Successor in the figure.</b></p> <p>A<i> feasible successor</i> (FS) is a neighbor who has a loop-free backup path to the same network as the successor by satisfying the feasibility condition. In our topology, would R2 consider R1 to be a feasible successor to network 192.168.1.0/24? In order to be a feasible successor, R1 must satisfy the <i>feasibility condition </i>(FC). Let's examine what that means.</p> <p><b>Click Feasibility Condition in the figure.</b></p> <p>The feasibility condition (FC) is met when a neighbor's <content-link target="cg1726875050" type="glossary">reported distance (RD)</content-link> to a network is less than the local router's feasible distance to the same destination network. The reported distance or advertised distance is simply an EIGRP neighbor's feasible distance to the same destination network. The reported distance is the metric that a router reports to a neighbor about its own cost to that network. </p> <p>If R3 is the successor, can the neighbor R1 be a feasible successor to this same 192.161.0/24 network? In other words, if the link between R2 and R3 fails can R1 immediately be used as a backup path without a recomputation of the DUAL algorithm? R1 can only be a feasible successor if it meets the feasibility condition.</p> <p>In the figure, R1 is reporting to R2 that its feasible distance to 192.168.1.0/24 is 2172416. From R2's perspective, 2172416 is R1's <i>reported</i> distance. From R1's perspective, 2172416 is its <i>feasible</i> distance.</p> <p><b>Click Reported Distance in the figure.</b></p> <p>R2 examines the reported distance (RD) of 2172416 from R1. Because the reported distance (RD) of R1 is less than R2's own feasible distance (FD) of 3014400, R1 meets the feasibility condition. R1 is now a feasible successor for R2 to the 192.168.1.0/24 network.</p> <p>Why isn't R1 the successor if its reported distance (RD) is less than R2's feasible distance (FD) to 192.168.1.0/24? Because the total cost for R2, its feasible distance (FD), to reach 192.168.1.0/24 is greater through R1 than it is through R3. </p></content-text>
</page>
</topic>
<topic type="" id="en0909040400">
<title><content-text>Topology Table: Successor and Feasible Successor</content-text></title>
<page type="OneColumn" id="en0909040401">
<content-media type="StaticGraphic" id="cm7392579353"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040400/en0909040401/cm7392579353.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040400/en0909040401/cm7392579353text.xml"/></content-media>
<content-text><p>The successor, feasible distance, and any feasible successors with their reported distances are kept by a router in its EIGRP topology table or <content-link target="cg6545469832" type="glossary">topology database</content-link>. As shown in the figure, the topology table can be viewed using the <span class="cmd"><b>show ip eigrp topology</b></span> command. The topology table lists all successors and feasible successors that DUAL has calculated to destination networks.</p></content-text>
</page>
<page type="OneColumn" id="en0909040402">
<content-media type="InteractiveGraphicHotspots" id="cm7930108412"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040400/en0909040402/cm7930108412.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040400/en0909040402/cm7930108412text.xml"/></content-media>
<content-text><p><b>Click Play to view the animation.</b></p> <p>A detailed description of each part of the topology table entry for destination network 192.168.1.0/24 appears below.</p> <p>The first line displays:</p> <ul><li> <span class="cmd"><b>P</b></span> - This route is in the <content-link target="cg6028464901" type="glossary">passive state</content-link>. When DUAL is not performing its diffusing computations to determine a path for a network, the route will be in a stable mode, known as the passive state. If DUAL is recalculating or searching for a new path, the route will be in an <content-link target="cg9615848253" type="glossary">active state</content-link>. All routes in the topology table should be in the passive state for a stable routing domain. DUAL will display an <b>A</b> if the route is "Stuck in Active," which is a CCNP-level troubleshooting issue. </li> <li> <span class="cmd"><b>192.168.1.0/24</b></span> - This is the destination network that is also found in the routing table.</li> <li> <span class="cmd"><b>1 successors</b></span> - This shows the number of successors for this network. If there are multiple equal cost paths to this network, there will be multiple successors.</li> <li> <span class="cmd"><b>FD is 3014400</b></span> - This is the feasible distance, the EIGRP metric to reach the destination network. </li></ul> <p>The first entry shows the successor:</p> <ul><li> <span class="cmd"><b>via 192.168.10.10</b></span> - This is the next-hop address of the successor, R3. This address is shown in the routing table.</li> <li> <span class="cmd"><b>3014400</b></span> - This is the feasible distance to 192.168.1.0/24. It is the metric shown in the routing table.</li> <li> <span class="cmd"><b>28160</b></span> - This is the reported distance of the successor and is R3's cost to reach this network.</li> <li> <span class="cmd"><b>Serial0/0/1</b></span> - This is the outbound interface used to reach this network, also shown in the routing table.</li></ul> <p>The second entry shows the feasible successor, R1 (if there is not a second entry, then there are no feasible successors):</p> <ul><li> <span class="cmd"><b>via 172.16.3.1</b></span> - This is the next-hop address of the feasible successor, R1.</li> <li> <span class="cmd"><b>41026560</b></span> - This would be R2's new feasible distance to 192.168.1.0/24 if R1 became the new successor. </li> <li> <span class="cmd"><b>2172416</b></span> - This is the reported distance of the feasible successor or R1's metric to reach this network. This value, RD, must be less than the current FD of 3014400 to meet the feasibility condition.</li> <li> <span class="cmd"><b>Serial0/0/0</b></span> - This is the outbound interface used to reach feasible successor, if this router becomes the successor.</li></ul></content-text>
</page>
<page type="OneColumn" id="en0909040403">
<content-media type="StaticGraphic" id="cm7522451666"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040400/en0909040403/cm7522451666.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040400/en0909040403/cm7522451666text.xml"/></content-media>
<content-text><p>To view detailed information about the metrics of a specific entry in the topology table, add the optional parameter <span class="cmd">[<i>network</i>]</span> to the <span class="cmd"><b>show ip eigrp topology</b></span> command, as shown in the figure:</p> <span class="cmd"><p>R2#<b>show ip eigrp topology 192.168.1.0</b></p></span> <p>Remember that EIGRP is a distance vector routing protocol. This command lists the full list of distance vector metrics available to EIGRP even though, by default, EIGRP only uses bandwidth and delay. It also displays other information included in the routing update, but not included in the composite metric: minimum MTU and hop count.</p></content-text>
</page>
</topic>
<topic type="" id="en0909040500">
<title><content-text>Topology Table: No Feasible Successor</content-text></title>
<page type="OneColumn" id="en0909040501">
<content-media type="InteractiveGraphicHotspots" id="cm2187051213"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040500/en0909040501/cm2187051213.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040500/en0909040501/cm2187051213text.xml"/></content-media>
<content-text><p>To continue our understanding of DUAL and its use of successors and feasible successors, let's look at the routing table for R1. </p> <p><b>Click R1 Routing Table in the figure.</b></p> <p>The route to 192.168.1.0/24 shows that the successor is R3 via 192.168.10.6 with a feasible distance of 2172416.</p> <span class="cmd"><p>D 192.168.1.0/24 [90/<span class="blue">2172416</span>] via 192.168.10.6, 00:56:13, Serial0/1</p></span> <p>Now let's examine the topology table to see if there are any feasible successors for this route. </p> <p><b>Click R1 Topology Table in the figure.</b></p> <p>The topology table only shows the successor 192.168.10.6. There are no feasible successors. By looking at the actual physical topology or network diagram, it is obvious that there is a backup route to 192.168.1.0/24 through R2. Why isn't R2 listed as a feasible successor? R2 is not a feasible successor because it does not meet the feasibility condition. </p> <p>Although, looking at the topology it is obvious that R2 is a backup route, EIGRP does not have a map of the network topology. EIGRP is a distance vector routing protocol and only knows about remote network information through its neighbors.</p> <p>Therefore, DUAL does not store the route through R2 in the topology table. However, we can view all possible links whether they satisfy the feasible condition or not by adding the <span class="cmd">[all-links]</span> option to the <span class="cmd">show ip eigrp topology</span> command.</p> <p><b>Click R1 Topology Table [</b><span class="cmd"><b>all-links</b></span><b>] in the figure.</b></p> <p>The <span class="cmd"><b>show ip eigrp topology all-links</b></span> command shows all possible paths to a network including successors, feasible successors, and even those routes that are not feasible successors. R1's feasible distance to 192.168.1.0/24 is 2172416 via the successor R3. For R2 to be considered a feasible successor, it must meet the feasibility condition. R2's feasible distance to reach 192.168.1.0/24 must be less the R1's current feasible distance (FD). As we can see in the figure, R2's feasible distance is 3014400, which is higher than R1's feasible distance of 2172416. </p> <p>Even though R2 looks like a viable backup path to 192.168.1.0/24, R1 has no idea that its path is not a potential loop back through itself. EIGRP is a distance vector routing protocol, without the ability to see a complete, loop-free topological map of the network. DUAL's method of guaranteeing that a neighbor has a loop-free path is that the neighbor's metric must satisfy the feasibility condition. By ensuring that the RD of the neighbor is less than its own FD, the router can assume that this neighboring router is not part of its own advertised route, thus always avoiding the potential for a loop.</p> <p>Does this mean R2 cannot be used if the successor fails? No, R3 can be used, but there will be a longer delay before adding it to the routing table. Before this can happen, DUAL will need to do some further processing, which is explained in the next topic.</p></content-text>
</page>
</topic>
<topic type="" id="en0909040600">
<title><content-text>Finite State Machine</content-text></title>
<page type="OneColumn" id="en0909040601">
<content-media type="StaticGraphic" id="cm9163160256"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040600/en0909040601/cm9163160256.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040600/en0909040601/cm9163160256text.xml"/></content-media>
<content-text><p><b>DUAL Finite State Machine (FSM)</b></p> <p>The centerpiece of EIGRP is DUAL and its EIGRP route-calculation engine. The actual name of this technology is DUAL Finite State Machine (FSM). This finite state machine contains all of the logic used to calculate and compare routes in an EIGRP network. The figure shows a simplified version of the DUAL FSM. </p> <p>A finite state machine is an abstract machine, not a mechanical device with moving parts. FSMs define a set of possible states that something can go through, what events cause those states, and what events result from those states. Designers use FSMs to describe how a device, computer program, or routing algorithm will react to a set of input events. Finite state machines are beyond the scope of this course; however, we introduce the concept in order to examine some of the output from EIGRP's finite state machine using <span class="cmd"><b>debug eigrp fsm</b></span>. Let's use the command to watch what DUAL does when a route is removed from the routing table.</p></content-text>
</page>
<page type="OneColumn" id="en0909040602">
<content-media type="InteractiveGraphicHotspots" id="cm1515566624"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040600/en0909040602/cm1515566624.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040600/en0909040602/cm1515566624text.xml"/></content-media>
<content-text><p><b>Click R2 Topology Table 1 in the figure.</b></p> <p>Remember from our previous discussions that R2 is currently using R3 as the successor to 192.168.1.0/24. In addition, R2 currently lists R1 as a feasible successor. Let's watch what happens when we simulate a failure of the link between R2 and R3.</p> <p><b>Click R2 Debug Output in the figure.</b></p> <p>First, we turn on DUAL debugging with the <span class="cmd"><b>debug eigrp fsm</b></span> command. Then, we simulate a link failure using the <span class="cmd"><b>shutdown</b></span> command on the Serial 0/0/1 interface on R2. </p> <p>When you do this on a real router or Packet Tracer, you will see all the activity generated by DUAL when a link goes down. R2 must inform all EIGRP neighbors of the lost link as well as take care of updating its own routing and topology tables. The figure in this example only shows selected debug output. In particular, notice that the DUAL finite state machine searches for and finds a feasible successor for the route in the EIGRP topology table. The feasible successor, R1, now becomes the successor and is installed in the routing table as the new best path to 192.168.1.0/24. </p> <p><b>Click R2 Topology Table 2 in the figure.</b></p> <p>The topology table for R2 now shows R1 as the successor and there are no new feasible successors.</p> <p>If you are following along on routers or Packet Tracer, be sure to restore the original topology by re-activating the Serial 0/0/1 interface on R2 with the <span class="cmd"><b>no shutdown</b></span> command.</p></content-text>
</page>
<page type="OneColumn" id="en0909040603">
<content-media type="InteractiveGraphicHotspots" id="cm9283994052"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040600/en0909040603/cm9283994052.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909040000/en0909040600/en0909040603/cm9283994052text.xml"/></content-media>
<content-text><p><b>No Feasible Successor</b></p> <p>What if the path to the successor fails and there are no feasible successors? Remember, just because DUAL does not have a feasible successor does not mean that there is not another path to the network. It just means that DUAL does not have a guaranteed loop-free backup path to the network, so it wasn't added to the topology table as a feasible successor. If there are no feasible successors in the topology table, DUAL will put the network into the <i>active</i> state. DUAL will actively query its neighbors for a new successor. </p> <p><b>Click R1 Topology Table 1 in the figure.</b></p> <p>R1 is currently using R3 as the successor to 192.168.1.0/24. However, R1 does <i>not</i> have R2 listed as a feasible successor because R2 does not satisfy the feasibility condition. Let's watch what happens when we simulate a failure of the link between R1 and R3.</p> <p><b>Click R1 Debug Output in the figure.</b></p> <p>First, we turn on DUAL debugging with the <span class="cmd"><b>debug eigrp fsm</b></span> command. Then, we simulate a link failure using the <span class="cmd"><b>shutdown</b></span> command on the Serial 0/0/1 interface on R1. </p> <p>The selected debug output shows the 192.168.1.0/24 network put into the <i>active</i> state and EIGRP queries are sent to other neighbors. R2 replies with a path to this network, which becomes the new successor and is installed into the routing table.</p> <p>When the successor is no longer available and there is no feasible successor, DUAL will put the route into active state. DUAL will send EIGRP queries asking other routers for a path to this network. Other routers will return EIGRP replies, letting the sender of the EIGRP query know whether or not they have a path to the requested network. If none of the EIGRP replies have a path to this network, the sender of the query will not have a route to this network. </p> <p>If the sender of the EIGRP queries receives EIGRP replies that include a path to the requested network, the preferred path is added as the new successor and added to the routing table. This process will take longer than if DUAL had a feasible successor in its topology table and was able to quickly add the new route to the routing table.</p> <p><b>Note</b>: DUAL FSM and the process of queries and replies is beyond the scope of this course.</p> <p><b>Click R1 Topology Table 2 in the figure.</b></p> <p>The topology table for R1 now shows R2 as the successor and there are no new feasible successors.</p> <p>If you are following along on routers or Packet Tracer, be sure to restore the original topology by re-activating the Serial 0/0/1 interface on R1 with the <span class="cmd"><b>no shutdown</b></span> command.</p></content-text>
</page>
<page type="OneColumn" id="en0909040604">
<content-media type="ActivityPKT" id="cm8828838954"><title><content-text></content-text></title><media ref="en0909000000/en0909040000/en0909040600/en0909040604/cm8828838954/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909040000/en0909040600/en0909040604/cm8828838954/icontext.xml"/></content-media>
<content-text><p>Use the Packet Tracer Activity to investigate successors and feasible successors as well as watch the DUAL FSM remove and install routes.</p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en0909050000">
<title><content-text>More EIGRP Configurations</content-text></title>
<topic type="" id="en0909050100">
<title><content-text>The Null0 Summary Route</content-text></title>
<page type="OneColumn" id="en0909050101">
<content-media type="StaticGraphic" id="cm6537092320"><title><content-text></content-text></title><media ref="en0909000000/en0909050000/en0909050100/en0909050101/cm6537092320.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909050000/en0909050100/en0909050101/cm6537092320text.xml"/></content-media>
<content-text><p>Analyzing a routing table containing EIGRP routes can be confusing due to EIGRP's automatic inclusion of <content-link target="cg2370190715" type="glossary">Null0 summary routes</content-link>. In the figure, R1's routing table contains two routes that have an exit interface of Null0. Remember from Chapter 7, "RIPv2," that the Null0 interface is simply a route to nowhere, commonly known as "the bit bucket." So by default, EIGRP uses the Null0 interface to discard any packets that match the parent route but do not match any of the child routes.</p> <p>You might think that if we configure classless routing behavior with the <span class="cmd"><b>ip classless</b></span> command, EIGRP would not discard that packet but would continue looking for a default or supernet route. However, the EIGRP Null0 summary route is a child route that will match any possible packets of the parent route that do not match another child route. Even with classless routing behavior, <span class="cmd"><b>ip classless</b></span>, where you would expect the route lookup process to check for supernets and default routes, EIGRP will use the Null0 summary route and discard the packet because this route will match any packets of the parent that do not have a child route.</p> <p>Regardless of whether classful or classless routing behavior is being used, the null0 summary will be used and therefore denying the use of any supernet or default route. </p> <p>In the figure, R1 will discard any packets that match the parent 172.16.0.0/16 classful network but do not match one of the child routes 172.16.1.0/24, 172.16.2.0/24 or 172.16.3.0/24. For example, a packet to 172.16.4.10 would be discarded. Even if a default route was configured, R1 would still discard the packet because it matches the Null0 summary route to 172.16.0.0/16.</p> <span class="cmd"><p>D 172.16.0.0/16 is a summary, 00:46:10, Null0</p></span> <p><b>Note</b>: EIGRP automatically includes a null0 summary route as a child route whenever both of following conditions exist:</p> <ul><li> There is at least one subnet that was learned via EIGRP.</li> <li> Automatic summarization is enabled.</li></ul> <p>Like RIP, EIGRP automatically summarizes at major network boundaries. You may have already noticed in the <span class="cmd"><b>show run</b></span> output that EIGRP, by default, uses the <span class="cmd"><b>auto-summary</b></span> command. In the next topic, you will see that disabling automatic summarization will remove the Null0 summary route and allow EIGRP to look for a supernet or default route when an EIGRP child route does not match a destination packet.</p></content-text>
</page>
</topic>
<topic type="" id="en0909050200">
<title><content-text>Disabling Automatic Summarization</content-text></title>
<page type="OneColumn" id="en0909050201">
<content-media type="InteractiveGraphicHotspots" id="cm6362989412"><title><content-text></content-text></title><media ref="en0909000000/en0909050000/en0909050200/en0909050201/cm6362989412.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909050000/en0909050200/en0909050201/cm6362989412text.xml"/></content-media>
<content-text><p>Like RIP, EIGRP automatically summarizes at major network boundaries using the default <span class="cmd"><b>auto-summary</b></span> command. We can see the result of this by looking at the routing table for R3. </p> <p><b>Click R3 Routing Table in the figure.</b></p> <p>Notice that R3 is not receiving individual routes for the 172.16.1.0/24, 172.16.2.0/24, and 172.16.3.0/24 subnets. Both R1 and R2 automatically summarized those subnets to the 172.16.0.0/16 classful boundary when sending EIGRP update packets to R3. The result is that R3 has one route to 172.16.0.0/16 through R1. R1 is the successor because of the difference in bandwidth.</p> <span class="cmd"><p>D 172.16.0.0/16 [90/2172416] via 192.168.10.5, 01:08:30, Serial0/0/0</p></span> <p>You can quickly see that this route is not optimal. R3 will route all packets destined for 172.16.2.0 through R1. R3 does not know that R1 will then have to route these packets across a very slow link to R2. The only way R3 can learn about this slow bandwidth is if R1 and R2 send individual routes for each of the 172.16.0.0/16 subnets. In other words, R1 and R2 must stop automatically summarizing 172.16.0.0/16.</p> <p><b>Click </b><span class="cmd"><b>no auto-summary</b></span><b> in the figure.</b></p> <p>As in RIPv2, automatic summarization can be disabled with the <span class="cmd"><b>no auto-summary</b></span> command. The router configuration command <span class="cmd"><b>eigrp log-neighbor-changes</b></span> is on by default on some IOS implementations. If on, you will see output similar to that shown for R1. DUAL takes down all neighbor adjacencies and then reestablishes them so that the effect of the <span class="cmd"><b>no auto-summary</b></span> command can be fully realized. All EIGRP neighbors will immediately send out a new round of updates that will not be automatically summarized.</p> <p><b>Click R1, R2, and R3 in the figure.</b></p> <p>We can see in the routing tables for all three routers that EIGRP is now propagating individual subnets. Notice that EIGRP no longer includes the Null0 summary route, because automatic summarization has been disabled with <span class="cmd"><b>no auto-summary</b></span>. As long as the default classless routing behavior (<span class="cmd"><b>ip classless</b></span>) is in effect, supernet and default routes will be used when there is not a match with a subnet route. </p></content-text>
</page>
<page type="OneColumn" id="en0909050202">
<content-media type="InteractiveGraphicHotspots" id="cm3776931818"><title><content-text></content-text></title><media ref="en0909000000/en0909050000/en0909050200/en0909050202/cm3776931818.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909050000/en0909050200/en0909050202/cm3776931818text.xml"/></content-media>
<content-text><p>Because routes are no longer automatically summarized at major network boundaries, the EIGRP routing and topology tables also change.</p> <p><b>Click R1, R2, and R3 in the figure.</b></p> <p>Without automatic summarization, R3's routing table now includes the three subnets, 172.16.1.0/24, 172.16.2.0/24, and 172.16.3.0/24. Why does R3's routing table now have two equal cost paths to 172.16.3.0/24? Shouldn't the best path only be through R1 with the 1544 Mbps link? </p> <p>Remember that EIGRP only uses the link with the slowest bandwidth when calculating the composite metric. The slowest link is the 64 Kbps link that contains the 172.16.3.0/30 network. In this example, the 1544 Mbps link and the 1024 Kbps link are irrelevant in the calculation as far as the bandwidth metric is concerned. Because both paths have the same number and types of outgoing interfaces, the delay values end up being the same. As a result, the EIGRP metric for both paths is the same, even though the path through R1 would actually be the "faster" path.</p></content-text>
</page>
</topic>
<topic type="" id="en0909050300">
<title><content-text>Manual Summarization</content-text></title>
<page type="OneColumn" id="en0909050301">
<content-media type="InteractiveGraphicHotspots" id="cm2211769071"><title><content-text></content-text></title><media ref="en0909000000/en0909050000/en0909050300/en0909050301/cm2211769071.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909050000/en0909050300/en0909050301/cm2211769071text.xml"/></content-media>
<content-text><p>EIGRP can be configured to summarize routes, whether or not automatic summarization (<span class="cmd"><b>auto-summary</b></span>) is enabled. Because EIGRP is a classless routing protocol and includes the subnet mask in the routing updates, manual summarization can include supernet routes. Remember, a supernet is an aggregation of multiple major classful network addresses.</p> <p><b>Click R3 New LANs in the figure.</b></p> <p>Suppose we added two more networks to router R3 using loopback interfaces: 192.168.2.0/24 and 192.168.3.0/24. We also configure networks in R3's EIGRP routing process with <span class="cmd"><b>network</b></span> commands so that R3 will propagate these networks to other routers.</p> <p><b>Click Routing Tables 1 in the figure.</b></p> <p>To verify that R3 sent EIGRP update packets to R1 and R2, we check the routing tables. In the figure, only the pertinent routes are shown. R1 and R2 routing tables show these additional networks in their routing tables: 192.168.2.0/24 and 192.168.3.0/24. Instead of sending three separate networks, R3 can summarize the 192.168.1.0/24, 192.168.2.0/24, and 192.168.3.0/24 networks as a single route.</p> <p><b>Click R3 Summary Route in the figure.</b></p> <p><b>Determining the Summary EIGRP Route</b></p> <p>First, let's determine what the summary of these three networks would be using the same method we used to determine summary static routes: </p> <p>1. Write out the networks that you want to summarize in binary. </p> <p>2. To find the subnet mask for summarization, start with the left-most bit. </p> <p>3. Work your way to the right, finding all the bits that match consecutively. </p> <p>4. When you find a column of bits that do not match, stop. You are at the summary boundary. </p> <p>5. Now, count the number of left-most matching bits, which in our example is 22. This number becomes your subnet mask for the summarized route: /22 or 255.255.252.0</p> <p>6. To find the network address for summarization, copy the matching 22 bits and add all 0 bits to the end to make 32 bits.</p> <p>The result is the summary network address and mask for 192.168.0.0/22.</p> <p><b>Configure EIGRP Manual Summarization</b></p> <p>To establish EIGRP manual summarization on all interfaces that send EIGRP packets, use the following interface command:</p> <span class="cmd"><p>Router(config-if)<b>#ip summary-address eigrp </b><i>as-number network-address subnet-mask</i></p></span> <p>Because R3 has two EIGRP neighbors, the EIGRP manual summarization in configured on both Serial 0/0/0 and Serial 0/0/1.</p> <p><b>Click Routing Tables 2 in the figure.</b></p> <p>The routing tables of R1 and R2 now no longer include the individual 192.168.1.0/24, 192.168.2.0/24, and 192.168.3.0/24 networks. Instead, they show a single summary route of 192.168.0.0/22. As you learned in Chapter 2, "Static Routing," summary routes lessen the number of total routes in routing tables, which makes the routing table lookup process more efficient. Summary routes also require less bandwidth utilization for the routing updates because a single route can be sent instead of multiple individual routes.</p></content-text>
</page>
</topic>
<topic type="" id="en0909050400">
<title><content-text>EIGRP Default Route</content-text></title>
<page type="OneColumn" id="en0909050401">
<content-media type="InteractiveGraphicHotspots" id="cm1560663639"><title><content-text></content-text></title><media ref="en0909000000/en0909050000/en0909050400/en0909050401/cm1560663639.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909050000/en0909050400/en0909050401/cm1560663639text.xml"/></content-media>
<content-text><p><b>Click R2 Static Default Configuration in the figure.</b></p> <p>Using a static route to 0.0.0.0/0 as a default route is not routing protocol dependent. The "quad zero" static default route can be used with any currently supported routing protocols. The static default route is usually configured on the router that has a connection to a network outside the EIGRP routing domain, for example, to an ISP. </p> <p>EIGRP requires the use of the <span class="cmd"><b>redistribute static</b></span> command to include this static default route with its EIGRP routing updates. The <span class="cmd"><b>redistribute static</b></span> command tells EIGRP to include this static route in its EIGRP updates to other routers. The figure shows the configuration of the static default route and the <span class="cmd"><b>redistribute static</b></span> command on router R2. </p> <p><b>Note:</b> The static default route is using the exit interface of <b>Loopback1</b>. This is because the ISP router in our topology does not physically exist. By using a loopback interface we can simulate a connection to another router. </p> <p><b>Click R1, R2, and R3 in the figure.</b></p> <p>The routing tables now show a static default route, and a <span class="cmd">gateway of last resort</span> is now set. </p> <p>In the routing tables for R1 and R3, notice the routing source and administrative distance for the new static default route. The entry for the static default route on R1 is the following:</p> <span class="cmd"><p><span class="blue">D*EX</span> 0.0.0.0/0 [<span class="blue">170</span>/3651840] via 192.168.10.6, 00:01:08, Serial0/1</p></span> <ul><li> <span class="cmd"><b>D</b></span> - This static route was learned from an EIGRP routing update.</li> <li> <span class="cmd"><b>*</b></span> - The route is a candidate for a default route.</li> <li> <span class="cmd"><b>EX</b></span> - The route is an external EIGRP route, in this case a static route outside of the EIGRP routing domain.</li> <li> <span class="cmd"><b>170</b></span> - This is the administrative distance of an external EIGRP route.</li></ul> <p>Default routes provide a default path to outside the routing domain and, like summary routes, minimize the number of entries in the routing table.</p> <p><b>Note</b>: There is another method to propagate a default route in EIGRP, using the <span class="cmd"><b>ip default-network</b></span> command. More information on this command can be found at:</p> <p><content-link target="http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094374.shtml" type="external">http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094374.shtml</content-link></p></content-text>
</page>
</topic>
<topic type="" id="en0909050500">
<title><content-text>Fine-tuning EIGRP</content-text></title>
<page type="OneColumn" id="en0909050501">
<content-media type="StaticGraphic" id="cm1126029541"><title><content-text></content-text></title><media ref="en0909000000/en0909050000/en0909050500/en0909050501/cm1126029541.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909050000/en0909050500/en0909050501/cm1126029541text.xml"/></content-media>
<content-text><p>The last two topics of this chapter discuss two fundamental ways to fine-tune EIGRP operations. First, we will discuss EIGRP bandwidth utilization. Next, we will discuss how to change the default hello and hold time values.</p> <p><b>EIGRP Bandwidth Utilization</b></p> <p>By default, EIGRP will use only up to 50 percent of the bandwidth of an interface for EIGRP information. This prevents the EIGRP process from over-utilizing a link and not allowing enough bandwidth for the routing of normal traffic. The <span class="cmd"><b>ip bandwidth-percent eigrp</b></span> command can be used to configure the percentage of bandwidth that may be used by EIGRP on an interface. </p> <span class="cmd"><p>Router(config-if)#<b>ip bandwidth-percent eigrp</b><i> as-number percent</i></p></span> <p>In the figure, R1 and R2 share a very slow 64kbps link. The configuration to limit how much bandwidth EIGRP uses is shown, along with the bandwidth command. The <span class="cmd"><b>ip bandwidth-percent eigrp</b></span> command uses the amount of configured bandwidth (or the default bandwidth) when calculating the percent that EIGRP can use. In our example, we are limiting EIGRP to no more than 50 percent of the link's bandwidth. Therefore, EIGRP will never use more the 32kbps of the link's bandwidth for EIGRP packet traffic.</p></content-text>
</page>
<page type="OneColumn" id="en0909050502">
<content-media type="StaticGraphic" id="cm2307703188"><title><content-text></content-text></title><media ref="en0909000000/en0909050000/en0909050500/en0909050502/cm2307703188.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909050000/en0909050500/en0909050502/cm2307703188text.xml"/></content-media>
<content-text><p><b>Configuring Hello Intervals and Hold Times</b></p> <p>Hello intervals and hold times are configurable on a per-interface basis and do not have to match with other EIGRP routers to establish adjacencies. The command to configure a different hello interval is:</p> <span class="cmd"><p>Router(config-if)#<b>ip hello-interval eigrp </b><i>as-number seconds</i></p></span> <p>If you change the hello interval, make sure that you also change the hold time to a value equal to or greater than the hello interval. Otherwise, neighbor adjacency will go down after the hold time expires and before the next hello interval. The command to configure a different hold time is:</p> <span class="cmd"><p>Router(config-if)#<b>ip hold-time eigrp </b><i>as-number seconds</i></p></span> <p>The <span class="cmd"><i>seconds</i></span> value for both hello and hold time intervals can range from 1 to 65,535. This range means that you can set the hello interval to a value of just over 18 hours, which may be appropriate for a very expensive dialup link. However, in the figure we configure both R1 and R2 to use a 60-second hello interval and 180-second hold time. The <span class="cmd"><b>no</b></span> form can be used on both of these commands to restore the default values.</p></content-text>
</page>
</topic>
</section>
<section type="" id="en0909060000">
<title><content-text>EIGRP Configuration Labs</content-text></title>
<topic type="" id="en0909060100">
<title><content-text>Basic EIGRP Configuration Lab</content-text></title>
<page type="OneColumn" id="en0909060101">
<content-media type="ActivityLab" id="cm1186097403"><title><content-text></content-text></title><media ref="en0909000000/en0909060000/en0909060100/en0909060101/cm1186097403/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909060000/en0909060100/en0909060101/cm1186097403/icontext.xml"/></content-media>
<content-text><p>In this lab, you will learn how to configure the routing protocol EIGRP. A <content-link target="cg8751073854" type="glossary">loopback address</content-link> will be used on the R2 router to simulate a connection to an ISP, where all traffic that is not destined for the local network will be sent. Some segments of the network have been subnetted using VLSM. EIGRP is a classless routing protocol that can be used to provide subnet mask information in the routing updates. This will allow VLSM subnet information to be propagated throughout the network.</p><p><b>Click the lab icon for more details.</b></p></content-text>
</page>
<page type="OneColumn" id="en0909060102">
<content-media type="ActivityPKA" id="cm1822274063"><title><content-text></content-text></title><media ref="en0909000000/en0909060000/en0909060100/en0909060102/cm1822274063/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909060000/en0909060100/en0909060102/cm1822274063/icontext.xml"/></content-media>
<content-text><p>Use this Packet Tracer Activity to repeat a simulation of Lab 9.6.1. Remember, however, that Packet Tracer is not a substitute for a hands-on lab experience with real equipment. </p> <p>A summary of the instructions is provided within the activity. Use the Lab PDF for more details.</p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0909060200">
<title><content-text>Challenge EIGRP Configuration Lab</content-text></title>
<page type="OneColumn" id="en0909060201">
<content-media type="ActivityLab" id="cm1183716590"><title><content-text></content-text></title><media ref="en0909000000/en0909060000/en0909060200/en0909060201/cm1183716590/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909060000/en0909060200/en0909060201/cm1183716590/icontext.xml"/></content-media>
<content-text><p>In this lab activity, you will be given a network address that must be subnetted using VLSM to complete the addressing of the network. A combination of EIGRP routing and static routing will be required so that hosts on networks that are not directly connected will be able to communicate with each other. EIGRP must be configured so that all IP traffic takes the shortest path to the destination address.</p><p><b>Click the lab icon for more details.</b></p></content-text>
</page>
<page type="OneColumn" id="en0909060202">
<content-media type="ActivityPKA" id="cm3328204853"><title><content-text></content-text></title><media ref="en0909000000/en0909060000/en0909060200/en0909060202/cm3328204853/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909060000/en0909060200/en0909060202/cm3328204853/icontext.xml"/></content-media>
<content-text><p>Use this Packet Tracer Activity to repeat a simulation of Lab 9.6.2. Remember, however, that Packet Tracer is not a substitute for a hands-on lab experience with real equipment. </p> <p>A summary of the instructions is provided within the activity. Use the Lab PDF for more details.</p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0909060300">
<title><content-text>Troubleshooting EIGRP Configuration Lab</content-text></title>
<page type="OneColumn" id="en0909060301">
<content-media type="ActivityLab" id="cm9423696379"><title><content-text></content-text></title><media ref="en0909000000/en0909060000/en0909060300/en0909060301/cm9423696379/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909060000/en0909060300/en0909060301/cm9423696379/icontext.xml"/></content-media>
<content-text><p>In this lab, you will begin by loading corrupted configuration scripts on each of the routers. These scripts contain errors that will prevent end-to-end communication across the network. You will need to troubleshoot each router to determine the configuration errors, and then use the appropriate commands to correct the configurations. When you have corrected all of the configuration errors, all of the hosts on the network should be able to communicate with each other. </p><p><b>Click the lab icon for more details.</b></p></content-text>
</page>
<page type="OneColumn" id="en0909060302">
<content-media type="ActivityPKA" id="cm4832565156"><title><content-text></content-text></title><media ref="en0909000000/en0909060000/en0909060300/en0909060302/cm4832565156/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909060000/en0909060300/en0909060302/cm4832565156/icontext.xml"/></content-media>
<content-text><p>Use this Packet Tracer Activity to repeat a simulation of Lab 9.6.3. Remember, however, that Packet Tracer is not a substitute for a hands-on lab experience with real equipment. </p> <p>A summary of the instructions is provided within the activity. Use the Lab PDF for more details.</p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="en0909070000">
<title><content-text>Chapter Summary</content-text></title>
<topic type="" id="en0909070100">
<title><content-text>Summary and Review</content-text></title>
<page type="OneColumn" id="en0909070101">
<content-media type="ChapterSummary" id="cm7193811547"><title><content-text></content-text></title><media ref="en0909000000/en0909070000/en0909070100/en0909070101/cm7193811547.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909070000/en0909070100/en0909070101/cm7193811547text.xml"/></content-media>
<content-text><p><b>Summary</b></p> <p>EIGRP (Enhanced Interior Gateway Routing Protocol) is a <i>classless</i>, distance vector routing protocol released in 1992 by Cisco Systems. EIGRP is a Cisco proprietary routing protocol and an enhancement of another Cisco propriety protocol IGRP (Interior Gateway Routing Protocol). IGRP is a <i>classful</i>, distance vector routing protocol which is no longer supported by Cisco. EIGRP uses the source code of "D" for DUAL in the routing table. EIGRP has a default administrative distance of 90 for internal routes and 170 for routes imported from an external source, such as default routes.</p> <p>EIGRP used PDMs (Protocol Dependent Modules) giving it the capability to support different Layer 3 protocols including IP, IPX and AppleTalk. EIGRP uses RTP (Reliable Transport Protocol) as the Transport layer protocol for the delivery of EIGRP packets. EIGRP uses reliable delivery for EIGRP updates, queries and replies; and uses unreliable delivery for EIGRP hellos and acknowledgments. Reliable RTP means an EIGRP acknowledgment must be returned.</p> <p>Before any EIGRP updates are sent, a router must first discover their neighbors. This is done with EIGRP hello packets. On most networks EIGRP sends hello packets every 5 seconds. On multipoint nonbroadcast multiaccess networks (NBMA) such as X.25, Frame Relay, and ATM interface with access links of T1 (1.544 Mbps) or slower, Hellos are sent every 60 seconds. The hold time is three times the hello, or 15 seconds on most networks and 180 seconds on low speed NBMA networks. </p> <p>The hello and hold-down values do not need to match for two routers to become neighbors. The <span class="cmd"><b>show ip eigrp neighbors</b></span> command is used to view the neighbor table and verify that EIGRP has established an adjacency with its neighbors.</p> <p>EIGRP does not send periodic updates like RIP. EIGRP sends partial or bounded updates, which includes only the route changes and only to those routers that are affected by the change. EIGRP composite metric uses bandwidth, delay, reliability and load to determine best path. By default only bandwidth and delay are used. The default calculation is the slowest bandwidth plus the sum of the delays of the outgoing interfaces from the router to the destination network.</p> <p>At the center of EIGRP is DUAL (Diffusing Update Algorithm). The DUAL finite state machine is used to determine best path and potential backup paths to every destination network. The successor is a neighboring router that is used to forward the packet using the least-cost route to the destination network. Feasible distance (FD) is the lowest calculated metric to reach the destination network through the successor. A feasible successor (FS) is a neighbor who has a loop-free backup path to the same network as the successor, and also meets the feasibility condition. The feasibility condition (FC) is met when a neighbor's reported distance (RD) to a network is less than the local router's feasible distance to the same destination network. The reported distance is simply an EIGRP neighbor's feasible distance to the destination network.</p> <p>EIGRP is configured with the <span class="cmd"><b>router eigrp </b><i>autonomous-system</i></span> command. The <span class="cmd"><i>autonomous-system</i></span> value is actually a process-id and must be the same on all routers in the EIGRP routing domain. The <span class="cmd"><b>network</b></span> command is similar to that used with RIP. The network is the classful network address of the directly connected interfaces on the router. A wildcard mask is an optional parameter that can be used to include only specific interfaces.</p> <p>There are several ways to propagate a static default route with EIGRP. The <span class="cmd"><b>redistribute static</b></span> command in EIGRP router mode is a common method.</p></content-text>
</page>
<page type="FullScreen" id="en0909070102">
<content-media type="ChapterSummary" id="cm4745806305"><title><content-text></content-text></title><media ref="en0909000000/en0909070000/en0909070100/en0909070102/cm4745806305.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909070000/en0909070100/en0909070102/cm4745806305text.xml"/></content-media>
<content-text><p>Check Your Understanding</p></content-text>
</page>
<page type="OneColumn" id="en0909070103">
<content-media type="ActivityPKA" id="cm1523561835"><title><content-text></content-text></title><media ref="en0909000000/en0909070000/en0909070100/en0909070103/cm1523561835/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0909000000/en0909070000/en0909070100/en0909070103/cm1523561835/icontext.xml"/></content-media>
<content-text><p>The Packet Tracer Skills Integration Challenge Activity integrates all the knowledge and skills you acquired in previous chapters of this course and prior courses. Skills related to this chapter's discussion of EIGRP are also included. </p> <p>In this activity, you build a network from the ground up. Starting with an addressing space and network requirements, you must implement a network design that satisfies the specifications. Next, you implement an effective EIGRP routing configuration with integrated default routing. Detailed instructions are provided within the activity. </p> <p><content-link target="E2_PTAct_9_7_1_Directions.pdf" type="internalfile">Packet Tracer Skills Integration Instructions (PDF)</content-link></p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
<page type="OneColumn" id="en0909070104">
<content-media type="StaticGraphic" id="cm8973111891"><title><content-text></content-text></title><media ref="en0909000000/en0909070000/en0909070100/en0909070104/cm8973111891.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0909000000/en0909070000/en0909070100/en0909070104/cm8973111891text.xml"/></content-media>
<content-text><p><b>To Learn More</b></p> <p> </p> <p><b>Routing TCP/IP, Volume I</b></p> <p>There are several good sources to learn more about DUAL. <i>Routing TCP/IP</i>, Volume I by Jeff Doyle and Jennifer Carroll, includes an excellent section on the Diffusing Update Algorithm including two diffusing computation examples.</p> <p><b>J.J. Garcia-Luna-Aceves</b></p> <p>DUAL was first proposed by E.W. Dijkstra and C.S. Scholten, with the most prominent work done by that of J.J. Garcia-Luna-Aceves. J.J. Garcia-Luna-Aceves is the Jack Baskin Chair of Computer Engineering at the University of California, Santa Cruz (UCSC), and is a Principal Scientist at the Palo Alto Research Center (PARC). Several of J.J. Garcia-Luna-Aceves's published articles including his work done on DUAL, "Loop-Free Routing Using Diffusing Computations", IEEE/ACM Transactions on Networking, Vol. 1, No. 1, February 1993, can be found at: <content-link target="http://www.soe.ucsc.edu/research/ccrg/publications.html" type="external">www.soe.ucsc.edu/research/ccrg/publications.html</content-link>.</p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="en0909080000">
<title><content-text>Chapter Quiz</content-text></title>
<topic type="" id="en0909080100">
<title><content-text>Chapter Quiz</content-text></title>
<page type="FullScreen" id="en0909080101">
<content-media type="ChapterQuiz" id="cm5700175412"><title><content-text></content-text></title><media ref="en0909000000/en0909080000/en0909080100/en0909080101/cm5700175412/" mime="" scale="true" type="directory" width="100%" height="100%" external="en0909000000/en0909080000/en0909080100/en0909080101/cm5700175412/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>
