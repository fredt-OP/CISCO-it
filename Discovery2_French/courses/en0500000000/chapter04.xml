<chapter type="" id="en0504000000">
<title><content-text>Planning the Addressing Structure</content-text></title>
<section type="ChapterIntroduction" id="en0504000000">
<title><content-text>Chapter Introduction</content-text></title>
<topic type="" id="en0504000100">
<title><content-text>Introduction</content-text></title>
<page type="FullScreen" id="en0504000101">
<content-media type="AnimationFullScreen" id="cm2725802410">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504000000/en0504000100/en0504000101/cm2725802410.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504000000/en0504000100/en0504000101/cm2725802410text.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
<section type="" id="en0504010000">
<title><content-text>IP Addressing in the LAN</content-text></title>
<topic type="" id="en0504010100">
<title><content-text>Review of IP Addresses</content-text></title>
<page type="OneColumn" id="en0504010101">
<content-media type="AnimationPartialScreen" id="cm6765755202">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010100/en0504010101/cm6765755202.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010100/en0504010101/cm6765755202text.xml"/></content-media>
<content-text><p>One of the most important aspects of communications on an internetwork is the IP addressing scheme.</p> <p>IP addressing is the method used to identify hosts and network devices. As the Internet grew over time and the number of hosts connected to it increased, IP addressing schemes had to adapt to cope with the growth. </p> <p>While IP addressing schemes have had to adapt, the basic IP address structure for IPv4 remains the same. To send and receive messages on an IP network, every network host must be assigned a unique 32-bit IP address. Because large binary numbers are difficult for people to read and understand, IP addresses are usually displayed in <content-link target="{E1BBAE1A-61FC-4A33-9988-461D5467AF8A}" type="glossary">dotted-decimal notation</content-link>. In dotted-decimal notation, each of the four octets is converted to a decimal number separated by a decimal point. For example, the IP address:</p> <p>11000000.10101000.00000001.01101010 </p> <p>is represented as 192.168.1.106 in dotted-decimal notation.</p></content-text>
</page>
<page type="OneColumn" id="en0504010102">
<content-media type="AnimationPartialScreen" id="cm4588022151">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010100/en0504010102/cm4588022151.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010100/en0504010102/cm4588022151text.xml"/></content-media>
<content-text><p>IP addresses are hierarchical. A hierarchy is like a family tree with parents at the top and children connected to them below. For a network, this means that part of the 32-bit number identifies the network (parent), while the rest of the bits identify the host (child). In the early days of the Internet, there were so few organizations needing to connect to the Internet, that networks were assigned by only the first 8 bits (first <content-link target="{D14C3C76-4DDC-460F-9F62-953D0B64F9F5}" type="glossary">octet</content-link>) of the IP address. This left the remaining 24 bits to be used for local host addresses. </p> <p>The 8-bit network designation made sense at first, because originally people thought that the Internet would be made up of a few very large universities, governments, and military organizations. Using only 8 bits for the network number enabled the creation of 256 separate networks, each containing over 16 million hosts. It soon became apparent that more organizations, and eventually individuals, were connecting to the Internet to do research and to communicate with others. More networks were required, and a way to assign more network numbers had to be created.</p></content-text>
</page>
<page type="OneColumn" id="en0504010103">
<content-media type="InteractiveGraphicHotspots" id="cm4681320076">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010100/en0504010103/cm4681320076.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010100/en0504010103/cm4681320076text.xml"/></content-media>
<content-text><p>To create more possible network designations, the 32-bit address space was organized into five classes. Three of these classes, A, B, and C, provide addresses that can be assigned to individual hosts or networks. The other two classes, D and E, are reserved for <content-link target="{CF105385-324A-4C9D-8E44-85162F741E08}" type="glossary">multicast</content-link> and experimental use. </p> <p>Until this change, routers examined only the first 8-bits of an IP address for the network ID. Class B networks, however, use the first 16 bits to identify the network. Class C networks use the first 24 bits to identify the network. With this addition, routers needed to be programmed to look beyond the first 8 bits to identify class B and C networks.</p> <p>It was decided to divide the networks in a manner that would make it easy for routers and hosts to determine the correct number of <content-link target="{A0B0F777-F897-4CF5-A145-FC3D6A85760F}" type="glossary">network ID</content-link> bits. The class of a network is indicated by the values of the first few bits of the IP address, called the <content-link target="{3BC38444-7721-481E-8BA5-8D6000D196EE}" type="glossary">high-order bit</content-link>s. If the first bit is 0, the network is a Class A, and the first octet represents the network ID. When the first bit is 1, the router examines the second bit. If that bit is 0, the network is a Class B, and the router uses the first 16 bits for the network ID. If the first three bits are 110, it indicates a Class C address. Class C addresses use the first 24 bits, or three octets, to designate the network. Dividing the original 8-bit network into smaller network classes increased the number of available network designations from 256 to over two million.</p></content-text>
</page>
<page type="OneColumn" id="en0504010104">
<content-media type="InteractiveGraphicRollovers" id="cm7752042326">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010100/en0504010104/cm7752042326.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010100/en0504010104/cm7752042326text.xml"/></content-media>
<content-text><p>In addition to creating separate classes, the Internet Engineering Task Force (<content-link target="{48A71EB4-F253-4F04-99E8-65F132677A8D}" type="glossary">IETF</content-link>) decided to reserve some of the Internet address space for use by private networks. Private networks have no connection to public networks. <content-link target="{B3A4B869-4A5C-44AC-8922-B6F5935A1A73}" type="glossary">Private network address</content-link>es are not able to be routed across the Internet. This allows multiple networks in various locations to use the same private addressing scheme without creating addressing conflicts.</p> <p>The use of private address space reduced the number of unique registered IP addresses that were assigned to organizations.</p> <p>A single Class A address, 10.0.0.0, was reserved for private use. In addition, address space in classes B and C was also set aside for private networks.</p> <p>Most networks today use a private address structure. Most consumer networking devices, by default, give out private addresses through DHCP. Only the devices that connect directly to the Internet are assigned registered Internet routable addresses.</p></content-text>
</page>
</topic>
<topic type="" id="en0504010200">
<title><content-text>Subnetting a Network</content-text></title>
<page type="OneColumn" id="en0504010201">
<content-media type="StaticGraphic" id="cm5289628584">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010200/en0504010201/cm5289628584.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010200/en0504010201/cm5289628584text.xml"/></content-media>
<content-text><p>Networks continued to grow and connect to the Internet throughout the 1980s and into the 1990s, with many organizations adding hundreds, and even thousands, of hosts to their network. An organization with thousands of hosts should have been well served by a Class B network, however, there were some problems.</p> <p>First, organizations with thousands of hosts rarely had them all in one place. Some organizations wanted to separate individual departments from each other for security or management purposes. Second, a primary type of packet forwarded on a network is the broadcast packet. Broadcast packets are forwarded to all hosts within a single logical network. With thousands of hosts on a single network sending broadcast traffic, and limited bandwidth available, network performance significantly decreased as more hosts were added.</p> <p>To solve these problems, the organizations leading the development of the Internet chose to partition their networks into mini-networks, or subnetworks, using a process called subnetting. How can a single IP network get split into multiple networks so that each subnet is treated as a separate network? </p> <p>RFC 917, Internet Subnets, defines the subnet mask as the method routers use to isolate the network portion from an IP address. When a router receives a packet, it uses the destination IP address in the packet and the subnet masks associated with the routes in its routing table to determine the appropriate path on which to forward the packet.</p> <p>The router reads the subnet mask from left to right, bit for bit. If a bit in the subnet mask is set to 1, it indicates that the value in that position is part of the network ID. A 0 in the subnet mask indicates that the value in that position is part of the host ID.</p></content-text>
</page>
<page type="OneColumn" id="en0504010202">
<content-media type="InteractiveGraphicRollovers" id="cm7657633284">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010200/en0504010202/cm7657633284.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010200/en0504010202/cm7657633284text.xml"/></content-media>
<content-text><p>In the original IP address hierarchy, there are two levels: a network and a host. In a classful addressing scheme, the first three leading bit values are used to determine that an IP address is either a Class A, B, or C. When an address is identified by class, the number of bits that make up the network ID and the number of bits that make up the <content-link target="{3CFFB992-F398-476B-9EEE-D6D2EF023853}" type="glossary">host ID</content-link> are known. The default subnet masks for the network classes are:</p> <p>Class A  255.0.0.0</p> <p>Class B 255.255.0.0</p> <p>Class C 255.255.255.0</p> <p>Subdividing a classful network adds a level to the network hierarchy. Now there are three levels: a network, a subnetwork, and a host. How can the subnet mask be modified to indicate the new hierarchical level?</p> <p>A single Class A, B, or C network address space can be divided into multiple subnetworks by using bits from the host address space to designate the subnet ID. As an example, an organization using a Class C address space has two offices in different buildings. To make the network easier to manage, the network administrators want each location to have a logically separate network. Taking two bits from the host address increases the subnet mask length from the default 24 bits to 26 bits, or 255.255.255.192.</p> <p>When bits are borrowed from the host portion of the address to identify the subnet, fewer bits are available for individual hosts. If two bits are used for the subnet ID, only six bits are left in the host portion of the address. </p></content-text>
</page>
<page type="OneColumn" id="en0504010203">
<content-media type="AnimationPartialScreen" id="cm2491718232">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010200/en0504010203/cm2491718232.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010200/en0504010203/cm2491718232text.xml"/></content-media>
<content-text><p>With traditional classful subnetting, the same number of host bits is used to designate the subnet ID for all the resulting subnetworks. This type of subnetting always results in a fixed number of subnets and a fixed number of hosts per subnet. For this reason, this is known as fixed-length subnetting. </p> <p>The decision about how many host bits to use for the subnet ID is a big planning decision. There are two considerations when planning subnets: the number of hosts on each network, and the number of individual local networks needed. The table for the subnet possibilities for the 192.168.1.0 network shows how the selection of a number of bits for the subnet ID affects both the number of possible subnets and the number of hosts that can be in each subnet. </p> <p>One thing to keep in mind is that in all IPv4 networks, two host addresses are reserved: the all-0s and the all-1s. An address with all 0s in the host portion of the address is an invalid host address and usually refers to the entire network or subnetwork. An address with all 1s in the host portion is used as the local network broadcast address. When a network is subnetted, each subnet contains an all-0s and an all-1s host address that cannot be used for individual host addresses.</p></content-text>
</page>
</topic>
<topic type="" id="en0504010300">
<title><content-text>Custom Subnet Masks</content-text></title>
<page type="OneColumn" id="en0504010301">
<content-media type="InteractiveGraphicHotspots" id="cm5796644523">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010300/en0504010301/cm5796644523.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010300/en0504010301/cm5796644523text.xml"/></content-media>
<content-text><p>When a network is partitioned, the router must use a modified or custom subnet mask to distinguish the subnets from each other. </p> <p>A default subnet mask and a custom subnet mask differ from each other in that the default subnet masks only change on octet boundaries. For instance, the default subnet mask for a Class A network is 255.0.0.0. Custom subnet masks take bits from the host ID portion of the IP address and add them to the default subnet mask.</p> <p>To create a <content-link target="{F8FF1D1D-EE04-4A02-8812-2281EA7C5B53}" type="glossary">custom subnet mask</content-link>, the first question to answer is how many bits to take from the host ID to add to the subnet mask? The number of bits to borrow to meet a specific number of subnets can be determined by the math equation: 2^<i>n</i>, where <i>n</i> equals the number of bits borrowed. </p> <p>If three subnets are required, there must be enough subnet bits to allow for three unique subnet addresses. </p> <p>For example, if starting with a Class C address, such as 192.168.1.0, there are only eight host bits to borrow from. Each bit can only be a 1 or a 0. To allow for three subnets, at least two of the eight bits must be borrowed. This creates four subnets total: </p> <p>00 - 1<sup>st</sup> subnet</p> <p>01 - 2<sup>nd</sup> subnet</p> <p>10 - 3<sup>rd</sup> subnet</p> <p>11 - 4<sup>th</sup> subnet</p> <p>In the above example, two bits were borrowed, 2^2 = 4 or 2 x 2 = 4, so four subnets were created. If between five and eight subnets were needed, then three bits would be required (2^3 = 8 or 2 x 2 x 2).</p> <p>The number of bits selected for the subnet ID affects both the number of possible subnets and the number of hosts that can be in each subnet.</p></content-text>
</page>
<page type="OneColumn" id="en0504010302">
<content-media type="InteractiveGraphicHotspots" id="cm6646843735">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010300/en0504010302/cm6646843735.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010300/en0504010302/cm6646843735text.xml"/></content-media>
<content-text><p>With classed subnetting, the number of bits required for the subnet ID depends on two factors: the number of subnets created and the number of hosts per subnet. </p> <p>In classed, or fixed-length, subnetting, all subnets must be the same size, which means that the maximum number of hosts that each subnet can support is the same for all subnets created. The more bits that are taken for the subnet ID, the fewer bits left for host IDs. </p> <p>The same base equation, 2^<i>n</i>, with a slight modification, can be used to determine the number of host IDs available based on the number of host bits remaining. Because each subnet has two host addresses that are reserved, the all-0s and all-1s addresses, the equation to determine the number of hosts supported is modified to 2^<i>n</i> - 2.</p> <p>After it is determined how many bits make up the subnet address, all devices on the network are informed of the subdivision by the subnet mask. With the subnet mask, it is possible to tell which subnet an IP address is in and to design simple classful subnetted IP address schemes.</p></content-text>
</page>
<page type="OneColumn" id="en0504010303">
<content-media type="AnimationPartialScreen" id="cm5764106208">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010300/en0504010303/cm5764106208.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010300/en0504010303/cm5764106208text.xml"/></content-media>
<content-text><p>Subnetting solved a number of problems that existed with the original classed network address spaces. It permitted organizations that owned a class A, B, or C address to subdivide their address space into smaller local subnets to more efficiently assign addresses. However, subnetting is also important in helping to minimize traffic loads and for adding security measures between networks. </p> <p>An example of a situation that might require subnetting is an ISP customer that has outgrown its initial network installation. In this network, the original small, integrated wireless router is overloaded with traffic from both wired and wireless users. Because of its relatively small size, a Class C address space is used to address the network. </p> <p>One possible solution to the problem of the overloaded network is to add a second networking device, such as a larger integrated service router (ISR). When adding a device, it is a good practice to place the wired and wireless users on separate local subnetworks to increase security. The original wireless router can still be used to provide the wireless users with connectivity and security on one network. Hubs or switches connecting the wired users can then be directly connected to the new ISR using a different network. The ISR and the wireless router can then be directly connected with a third network. </p> <p>This new network configuration requires that the existing Class C network be divided into at least three subnetworks. Using classful subnetting, at least two bits must be taken from the host portion of the address to meet the customer requirements. This subnetting scheme results in the creation of four individual networks, each with 62 available host addresses (64 possible addresses, minus the all-0s and all-1s addresses).</p></content-text>
</page>
<page type="FullScreen" id="en0504010304">
﻿<?xml version="1.0" encoding="utf-8"?><content-media type="ActivityCustom" id="cm4473959274">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010300/en0504010304/cm4473959274.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010300/en0504010304/cm4473959274text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p> </p> <p>Given the network address and the subnet mask, define the range of hosts, the broadcast address, and the next network address.</p><p><b>Click the octet in the table to enter your answer.</b></p></content-text>
</page>
<page type="OneColumn" id="en0504010305">
<content-media type="ActivityPKA" id="cm5273062748">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010300/en0504010305/cm5273062748/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0504000000/en0504010000/en0504010300/en0504010305/cm5273062748/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Subnet a network to meet the requirements of multiple LANs.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0504010400">
<title><content-text>VLSM and Classless Inter-Domain Routing (CIDR)</content-text></title>
<page type="OneColumn" id="en0504010401">
<content-media type="InteractiveGraphicHotspots" id="cm2175204685">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010400/en0504010401/cm2175204685.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010400/en0504010401/cm2175204685text.xml"/></content-media>
<content-text><p>The original classful subnetting design required that all subnets of a single classed network be the same size. This was because routers did not include subnet mask information in their routing updates. A router programmed with one subnet address and mask on an interface automatically applied that same mask to the other network subnets in its routing table. This limitation required planning for fixed-length subnet masks in the IP addressing scheme.</p> <p>However, fixed-length subnet masks can waste a significant number of IP addresses. For example, an organization with one site has approximately 8,000 hosts and three other locations with 1,000, 400, and 100 hosts, respectively. With a fixed-length subnet mask, each subnet would have to support at least 8,000 hosts, even the one assigned to the location needing only 100 addresses.</p> <p>Variable length subnet masking (VLSM) helps to solve this issue. VLSM addressing allows an address space to be divided into networks of various sizes. This is done by subnetting subnets. To accomplish this, routers today must receive routing information that includes the IP address of the network, and the subnet mask information which indicates the number of bits that make up the network portion of the IP address. VLSM saves thousands of IP addresses that would be wasted with traditional classful subnetting. </p> <p>In addition to VLSM, Classless Inter-Domain Routing (<content-link target="{3CA36C10-8C0A-4E82-B9A9-64889A403757}" type="glossary">CIDR</content-link>) was proposed in RFC 1519 and accepted. CIDR ignores network classes based on the value of the high-order bits. CIDR identifies networks based solely on the number of bits in the network prefix, which corresponds to the number of 1s in the subnet mask. An example of an IP address written using CIDR notation is 172.16.1.1/16, where the /16 represents the number of bits in the network prefix. </p></content-text>
</page>
<page type="OneColumn" id="en0504010402">
﻿<?xml version="1.0" encoding="utf-8"?><content-media type="StaticGraphic" id="cm8729690070">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010400/en0504010402/cm8729690070.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010400/en0504010402/cm8729690070text.xml"/></content-media>
<content-text><p>CIDR protocols freed routers from using only the high-order bits to determine the network prefix. Removing that restriction eliminated the need to allocate registered IP addresses by address class. </p> <p>Before CIDR, an ISP requiring 3,000 host addresses could request either a full Class B address space or multiple Class C network addresses to meet its requirements. With a Class B address space, the ISP would waste thousands of registered addresses. If it requested multiple Class C addresses, it could be difficult to design the ISP network so that no single section required more than 254 host addresses. Routing tables containing many Class C addresses can also get large and difficult to manage. </p> <p>By ignoring the traditional address classes, CIDR enables the ISP to request a block of addresses based on the number of host addresses it requires. Supernets, created by combining a group of Class C addresses into one large block, enable addresses to be assigned more efficiently. An example of a supernet is 192.168.0.0/19. Using the first 19 bits of the IP address for the network prefix enables this supernet to contain 8,190 possible host addresses. An ISP can use a supernet as one large network or divide it into as many smaller networks as needed to meet its requirements.</p> <p>In this example of a supernet, the private Class C address of 192.168.0.0 is used. In reality, most networks that use private addressing use either the Class A or B reserved addresses and subnetting. Although classed addressing and fixed-length subnet masking are becoming less common, it is important to understand how these addressing methods work. Many devices still use the default subnet mask if no custom subnet mask is specified.</p></content-text>
</page>
</topic>
<topic type="" id="en0504010500">
<title><content-text>Communicating Between Subnets</content-text></title>
<page type="OneColumn" id="en0504010501">
<content-media type="AnimationPartialScreen" id="cm7814644755">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010500/en0504010501/cm7814644755.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504010000/en0504010500/en0504010501/cm7814644755text.xml"/></content-media>
<content-text><p>When a network is split into subnets, each subnet is actually a completely separate network. Therefore, for a device in one subnet to communicate with a device in another subnet, a router is required because routers connect networks. </p> <p>To determine how many hosts are needed in each subnet, it is necessary to include the router interface, or gateway interface, and the individual host devices. Each router interface must have an IP address in the same subnet as the host network attached to it.</p> <p>In some instances, it may be necessary to connect two routers, such as when connecting the Linksys device and the 1841 ISR. This configuration must ensure that interfaces on routers that connect to each other are assigned IP addresses in the same network or subnet. Here the common link shows the two routers connected on the 192.168.1.16/29 subnet with host IP addresses of 192.168.1.17/29 and 192.168.1.18/29.</p></content-text>
</page>
<page type="OneColumn" id="en0504010502">
<content-media type="ActivityPKA" id="cm4221795762">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010500/en0504010502/cm4221795762/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0504000000/en0504010000/en0504010500/en0504010502/cm4221795762/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Modify the addresses, subnet masks, and device default gateways to enable routing between subnets.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
<page type="OneColumn" id="en0504010503">
<content-media type="ActivityLab" id="cm5244837699">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504010000/en0504010500/en0504010503/cm5244837699/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0504000000/en0504010000/en0504010500/en0504010503/cm5244837699/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Create an IP addressing scheme for a small network. </p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en0504020000">
<title><content-text>NAT and PAT</content-text></title>
<topic type="" id="en0504020100">
<title><content-text>Basic Network Address Translation (NAT)</content-text></title>
<page type="OneColumn" id="en0504020101">
<content-media type="AnimationPartialScreen" id="cm7941706775">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020100/en0504020101/cm7941706775.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020100/en0504020101/cm7941706775text.xml"/></content-media>
<content-text><p>Routers are required to route between subnets on an internal network, regardless of whether the IP address range is public or private. However, if the address range is private, private networks cannot be routed across the public Internet. Therefore, how do host devices using a private addressing scheme communicate across the Internet? Network Address Translation (NAT) must be enabled on the device connecting the private network to the ISP network. </p>  <p>NAT allows a large group of private users to access the Internet by sharing one or more public IP addresses. Address translation is similar to how a telephone system works in a company. As a company adds employees, at some point, they no longer run a public phone line directly to each employee desk. Instead, they use a system that allows the company to assign each employee an extension number. The company can do this because not all employees use the phone at the same time. Using private extension numbers enables the company to purchase a smaller number of external phone lines from the phone company.</p> <p>NAT works similarly to a company phone system. Saving registered IP addresses is one of the main reasons that NAT was developed. NAT can also provide security to PCs, servers, and networking devices by withholding their actual IP host addresses from direct Internet access.</p></content-text>
</page>
<page type="OneColumn" id="en0504020102">
<content-media type="StaticGraphic" id="cm7073879915">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020100/en0504020102/cm7073879915.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020100/en0504020102/cm7073879915text.xml"/></content-media>
<content-text><p>The main advantages of NAT are that IP addresses can be re-used and many hosts on a single LAN can share globally unique IP addresses. NAT operates transparently and helps shield users of a private network against access from the public domain. </p> <p>In addition, NAT hides private IP addresses from public networks. The advantage to this is that NAT operates much like an access control list, not allowing outside users to access internal devices. The disadvantage is that additional configurations are required to allow access from legitimate, external users.</p> <p>Another disadvantage is that NAT has an impact on some applications that have IP addresses in their <content-link target="{BC8F0711-1B3C-4523-B782-4C9FEA35A1F0}" type="glossary">message payload</content-link>, because these IP addresses must also be translated. This translation increases load on the router and hinders network performance. </p></content-text>
</page>
</topic>
<topic type="" id="en0504020200">
<title><content-text>IP NAT Terms</content-text></title>
<page type="OneColumn" id="en0504020201">
<content-media type="AnimationPartialScreen" id="cm7751521843">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020200/en0504020201/cm7751521843.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020200/en0504020201/cm7751521843text.xml"/></content-media>
<content-text><p>When configuring NAT on a router, there are a few terms that help explain how the router accomplishes NAT:</p> <p><ul><li><b> <content-link target="{5E0829C7-7B9D-43A8-AF95-1448CB44D016}" type="glossary">Inside local network</content-link></b> -- Refers to any network connected to a router interface that is part of the privately addressed LAN. Hosts on inside networks have their IP addresses translated before they are transmitted to outside destinations.</li><li> <b><content-link target="{C91AD3FE-71CD-4742-B07B-05223801ABCC}" type="glossary">Outside global network</content-link></b> - Any network attached to the router that is external to the LAN and does not recognize the private addresses assigned to hosts on the LAN.</li><li><b> <content-link target="{B5C5AE61-7E72-4650-98FF-E6A2B54634E0}" type="glossary">Inside local address</content-link></b> - Private IP address configured on a host on an inside network. The address must be translated before it can travel outside the local network addressing structure.</li><li><b> <content-link target="{788DA073-9667-4C20-9E79-610C9C011595}" type="glossary">Inside global address</content-link></b> - IP address of an inside host as it appears to the outside network. This is the translated IP address.</li><li> <b><content-link target="{2F88081B-63C6-4B38-B347-AA8963516D2B}" type="glossary">Outside local address</content-link></b> - Destination address of the packet while it is on the local network. Usually, this address is the same as the outside global address.</li><li> <b><content-link target="{7591B9DF-3F8F-4B90-961D-71FC0E56465F}" type="glossary">Outside global address</content-link></b> - Public IP address of an external host. The address is allocated from a globally routable address or network space.</li></ul></p></content-text>
</page>
<page type="FullScreen" id="en0504020202">
<content-media type="ActivityDnDSnapback" id="cm6198518106">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020200/en0504020202/cm6198518106.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020200/en0504020202/cm6198518106text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p> </p> <p>Match the NAT terminology to the source and destination of the <content-link target="{697E8655-E19F-4BCA-B5B1-1186BDCBBB21}" type="glossary">datagram</content-link>.</p><p><b>Drag and drop the Inside and Outside options to the correct address type.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0504020300">
<title><content-text>Static and Dynamic NAT</content-text></title>
<page type="OneColumn" id="en0504020301">
<content-media type="AnimationPartialScreen" id="cm1349046166">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020300/en0504020301/cm1349046166.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020300/en0504020301/cm1349046166text.xml"/></content-media>
<content-text><p>Addresses can be assigned dynamically. Dynamic NAT allows hosts on a private network that have private IP addresses to access a public network, such as the Internet. Dynamic NAT occurs when a router assigns an outside global address from a pre-defined address, or pool of addresses, to an inside private network device. </p> <p>As long as the session is open, the router watches for the inside global address and sends acknowledgments to the initiating inside device. When the session ends, the router simply returns the inside global address to the pool.</p></content-text>
</page>
<page type="OneColumn" id="en0504020302">
<content-media type="AnimationPartialScreen" id="cm3818373585">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020300/en0504020302/cm3818373585.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020300/en0504020302/cm3818373585text.xml"/></content-media>
<content-text><p>One of the advantages of using NAT is that individual hosts are not directly accessible from the public Internet. But what if one or more of the hosts within a network are running services that need to be accessed from Internet connected devices and devices on the local private LAN?</p> <p>One way to provide access to a local host from the Internet is to assign that device a static address translation. Static translations ensure that an individual host private IP address is always translated to the same registered global IP address. It ensures that no other local host is translated to the same registered address.</p> <p>Static NAT allows hosts on the public network to access selected hosts on a private network. If a device on the inside network needs to be accessible from the outside, use <content-link target="{57708430-4775-45CB-8388-0AB1AA98DACA}" type="glossary">static NAT</content-link>.</p> <p>Both static and dynamic NAT can be configured at the same time, if necessary.</p></content-text>
</page>
<page type="OneColumn" id="en0504020303">
<content-media type="ActivityPKA" id="cm4868687320">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020300/en0504020303/cm4868687320/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0504000000/en0504020000/en0504020300/en0504020303/cm4868687320/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Examine the contents of the IP header as traffic crosses the NAT border.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0504020400">
<title><content-text>Port-based Network Address Translation (PAT)</content-text></title>
<page type="OneColumn" id="en0504020401">
<content-media type="StaticGraphic" id="cm1084407036">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020400/en0504020401/cm1084407036.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020400/en0504020401/cm1084407036text.xml"/></content-media>
<content-text><p>When an organization has a very small registered <content-link target="{C148A29C-05BF-4DE1-A1ED-CBE7ADAEE85A}" type="glossary">IP address pool</content-link>, or perhaps even just a single IP address, it can still enable multiple users to simultaneously access the public network with a mechanism called NAT overload, or port address translation (<content-link target="{E378CB75-06B8-46C9-A377-45427FD1AEB5}" type="glossary">PAT</content-link>). PAT translates multiple local addresses to a single global IP address.</p> <p>When a source host sends a message to a destination host, it uses an IP address and port number combination to keep track of each individual conversation with the destination host. In PAT, the gateway translates the local source address and port combination in the packet to a single global IP address and a unique port number above 1024. Although each host is translated into the same global IP address, the port number associated with the conversation is unique. </p> <p>Responding traffic is addressed to the translated IP address and port number used by the host. A table in the router contains a list of the internal IP address and port number combinations that are translated to the external address. Responding traffic is directed to the appropriate internal address and port number. Because there are over 64,000 ports available, a router is unlikely to run out of addresses, which could happen with dynamic NAT.</p></content-text>
</page>
<page type="OneColumn" id="en0504020402">
<content-media type="AnimationPartialScreen" id="cm2157414277">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020400/en0504020402/cm2157414277.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020400/en0504020402/cm2157414277text.xml"/></content-media>
<content-text><p>Because each translation is specific to the local address and local port, each connection, which generates a new source port, requires a separate translation. For example, 10.1.1.1:1025 requires a separate translation from 10.1.1.1:1026. </p> <p>The translation is only in place for the duration of the connection, so a given user does not keep the same global IP address and port number combination after the conversation ends. </p> <p>Users on the outside network cannot reliably initiate a connection to a host on a network that uses PAT. Not only is it impossible to predict the local or global port number of the host, but a gateway does not even create a translation unless a host on the inside network initiates the communication.</p></content-text>
</page>
<page type="OneColumn" id="en0504020403">
<content-media type="ActivityLab" id="cm8120702911">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020400/en0504020403/cm8120702911/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0504000000/en0504020000/en0504020400/en0504020403/cm8120702911/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Determine the number of port address translations being performed.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0504020500">
<title><content-text>IP NAT Issues</content-text></title>
<page type="OneColumn" id="en0504020501">
<content-media type="StaticGraphic" id="cm3702786821">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020500/en0504020501/cm3702786821.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020500/en0504020501/cm3702786821text.xml"/></content-media>
<content-text><p>People access the Internet from private networks without ever realizing that the router is using NAT. However, an important issue with NAT is the additional workload necessary to support IP address and port translations. </p> <p>Some applications increase the workload of the router, because they embed an IP address as part of the encapsulated data. The router must replace the source IP addresses and port combinations that are contained within the data, and the source addresses in the IP header. </p> <p>With all this activity taking place within a router, NAT implementation requires good network design, careful selection of equipment and accurate configuration.</p> <p>NAT has become so commonplace in integrated networking devices used in homes and small businesses, that for some people, configuring it is a matter of selecting a check box. As businesses grow and require more sophisticated gateway and routing solutions, device configurations for NAT become more complex.</p></content-text>
</page>
<page type="OneColumn" id="en0504020502">
<content-media type="StaticGraphic" id="cm7561779206">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020500/en0504020502/cm7561779206.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020500/en0504020502/cm7561779206text.xml"/></content-media>
<content-text><p>Subnetting networks, private IP addressing, and the use of NAT were developed to provide a temporary solution to the problem of IP address depletion. These methods, though useful, do not create more IP addresses. As a response to address depletion, <content-link target="{AD7C0FE0-F048-4621-BF5D-CFA5C4A68071}" type="glossary">IPv6</content-link> was proposed in 1998 with RFC 2460. </p> <p>Although its primary purpose was to solve IPv4 IP address depletion, there were other good reasons for its development. Since IPv4 was first standardized, the Internet has grown significantly. This growth has uncovered advantages and disadvantages of IPv4, and the possibility for upgrades to include new capabilities.</p> <p>A general list of improvements that IPv6 proposes are:</p> <p><ul><li> More address space</li><li> Better address space management</li><li> Easier TCP/IP administration</li><li> Modernized routing capabilities</li><li> Improved support for multicasting, security, and mobility</li></ul></p> <p>The development of IPv6 is designed to address as many of these requests and problems as possible.</p></content-text>
</page>
<page type="OneColumn" id="en0504020503">
<content-media type="AnimationPartialScreen" id="cm1011732703">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504020000/en0504020500/en0504020503/cm1011732703.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504020000/en0504020500/en0504020503/cm1011732703text.xml"/></content-media>
<content-text><p>With IPv6, IP addresses are 128 bits with a potential address space of 2^128. In decimal notation, that is approximately a 3 followed by 38 zeroes. If IPv4 address space was represented by a small marble, then IPv6 address space is represented by a volume almost equivalent to the planet Saturn.</p> <p>Working with 128-bit numbers is difficult, so the IPv6 address notation represents the 128 bits as 32 hexadecimal digits, which are further subdivided into eight groups of four hexadecimal digits, using colons as delimiters. The IPv6 address has a three-part hierarchy. The global prefix is the first three blocks of the address and is assigned to an organization by an Internet names registry. The subnet and the interface ID are controlled by the network administrator.</p> <p>Network administrators will have some time to adjust to this new IPv6 structure. Before the widespread adoption of IPv6 occurs, network administrators still need a way to more efficiently use private address spaces.</p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="en0504030000">
<title><content-text>Chapter Summary</content-text></title>
<topic type="" id="en0504030100">
<title><content-text>Summary</content-text></title>
<page type="FullScreen" id="en0504030101">
<content-media type="ChapterSummary" id="cm9673482388">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504030000/en0504030100/en0504030101/cm9673482388.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0504000000/en0504030000/en0504030100/en0504030101/cm9673482388text.xml"/></content-media>
<content-text><p><b>Click through the buttons for summary information.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="en0504040000">
<title><content-text>Chapter Quiz</content-text></title>
<topic type="" id="en0504040100">
<title><content-text>Quiz</content-text></title>
<page type="OneColumn" id="en0504040101">
<content-media type="ChapterQuiz" id="cm3708078296">	<title><content-text></content-text></title>	<media ref="en0504000000/en0504040000/en0504040100/en0504040101/cm3708078296/" mime="" scale="true" type="directory" width="100%" height="100%" external="en0504000000/en0504040000/en0504040100/en0504040101/cm3708078296/icontext.xml"/></content-media>
<content-text><p>Take the chapter quiz to check your knowledge.</p><p><b>Click the quiz icon to begin.</b></p></content-text>
</page>
</topic>
</section>
</chapter>
