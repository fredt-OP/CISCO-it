<chapter type="" id="en0506000000">
<title><content-text>Routing</content-text></title>
<section type="ChapterIntroduction" id="en0506000000">
<title><content-text>Chapter Introduction</content-text></title>
<topic type="" id="en0506000100">
<title><content-text>Introduction</content-text></title>
<page type="FullScreen" id="en0506000101">
<content-media type="AnimationFullScreen" id="cm7774974787">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506000000/en0506000100/en0506000101/cm7774974787.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506000000/en0506000100/en0506000101/cm7774974787text.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
<section type="" id="en0506010000">
<title><content-text>Enabling Routing Protocols</content-text></title>
<topic type="" id="en0506010100">
<title><content-text>Routing Basics</content-text></title>
<page type="OneColumn" id="en0506010101">
<content-media type="AnimationPartialScreen" id="cm7195509876">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010100/en0506010101/cm7195509876.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010100/en0506010101/cm7195509876text.xml"/></content-media>
<content-text><p>As the internal network of an organization grows, it may be necessary to break up the network into multiple smaller networks for security or organizational purposes. This division is often accomplished by subnetting the network. Subnetting requires a router to pass traffic from one subnet to another.</p> <p>To direct messages across networks so that they arrive at the correct destination, a router uses a table containing all the locally connected networks and the interfaces that are connected to each network. Each interface belongs to a different IP network. </p> <p>A router determines which route, or path, to use by looking up the information stored in its routing table. The routing table also contains information about routes that the router can use to reach remote networks which are not locally attached. </p> <p>Routes can be statically assigned to a router by an administrator, or routes can be dynamically given to the router by another router via a routing protocol.</p></content-text>
</page>
<page type="OneColumn" id="en0506010102">
<content-media type="InteractiveGraphicHotspots" id="cm9468835068">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010100/en0506010102/cm9468835068.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010100/en0506010102/cm9468835068text.xml"/></content-media>
<content-text><p>A router uses a routing table to determine where to send packets. The routing table contains a set of routes. Each route describes which gateway or interface the router uses to reach a specified network. </p> <p>A route has four main components: </p> <p><ul><li> Destination value</li><li> Subnet mask</li><li> Gateway or interface address</li><li> <content-link target="{435E2A72-4D5B-4057-ACEE-63312ECE3018}" type="glossary">Route cost</content-link> or metric</li></ul></p> <p>When a router receives a packet, the router examines the destination IP address in that packet to determine where to forward the packet. The router then looks for a matching destination value in the routing table. </p> <p>Each destination value within the route table refers to a destination network address. The destination IP address within a packet, however, consists of both a network address and a host address. For the router to determine if its table contains a route to the destination network, it must determine there is a match between the IP network address and one of the destination values in the routing table. This means the router must determine which bits of the IP address represent the network and which bits represent the host.</p> <p>The router looks up the subnet mask assigned to each potential route in the table. The router applies each subnet mask to the destination IP address in the packet. The resulting network address is then compared to the network address of the route in the table. If a match is found, the packet is forwarded out the correct interface or to the appropriate gateway. If the network address matches more than one route in the routing table, the router uses the route that has the most specific, or longest, network address match.</p> <p>Sometimes there is more than one route to the destination network. In this case, routing protocol rules determine which route the router uses.</p> <p>If none of the route entries match, the router directs the message to the gateway specified by its default route, if a default route is configured. Otherwise, the packet is simply dropped.</p></content-text>
</page>
<page type="OneColumn" id="en0506010103">
<content-media type="StaticGraphic" id="cm8897936980">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010100/en0506010103/cm8897936980.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010100/en0506010103/cm8897936980text.xml"/></content-media>
<content-text><p>On a Cisco router, the Cisco IOS command <span class="cmd"><b>show ip route</b></span> displays the routes in the routing table. Several types of routes can appear in the routing table.</p> <p><b>Directly Connected Routes</b></p> <p>When the router powers up, the configured interfaces are enabled. As the interfaces become operational, the router stores the directly attached, local-network addresses as connected routes in the routing table. On Cisco routers, these routes are identified in the routing table with the prefix C. The routes are automatically updated whenever the interface is reconfigured or shut down.</p> <p><b>Static Routes </b></p> <p>A network administrator can manually configure a static route to a specific network. A static route does not change until the administrator manually reconfigures it. These routes are identified in the routing table with the prefix S.</p> <p><b>Dynamically Updated Routes (Dynamic Routes)</b></p> <p>Dynamic routes are automatically created and maintained by routing protocols. Routing protocols exchange routing information with other routers in the network. Dynamically updated routes are identified in the routing table with the prefix that corresponds to the type of routing protocol that created the route. For example, R is used for the Routing Information Protocol (<content-link target="{4A01CA38-FC0C-44D7-AF32-4181266A712B}" type="glossary">RIP</content-link>).</p> <p><b>Default Route </b></p> <p>The default route is a type of static route that specifies the gateway to use when the routing table does not contain a path for the destination network. It is common for default routes to point to the next router in the path to the ISP. If a subnet has only one router, that router is automatically the default gateway, because all network traffic to and from that local network has no option but to travel through that router.</p> <p>Routing tables do not contain end-to-end information about the entire path from a source network to a destination network. They only contain information about the next hop along that path. The next hop is typically a directly-connected network within the routing table. </p>  <p>In the case of a static route, the next hop could be any IP address, as long as it is reachable by that router. Eventually the message gets passed to a router that is directly connected to the destination host and the message is delivered. Routing information between all the intermediate routers on a path is in the form of network addresses not specific hosts. It is only in the final router that the destination address in the routing table points specifically to a host computer rather than a network.</p> <p> </p></content-text>
</page>
<page type="OneColumn" id="en0506010104">
<content-media type="InteractiveGraphicRollovers" id="cm1193174771">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010100/en0506010104/cm1193174771.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010100/en0506010104/cm1193174771text.xml"/></content-media>
<content-text><p><b>Configuring Static Routes</b></p> <p>Static routes are manually configured by a network administrator. Configuring a static route on a Cisco router requires these steps:</p> <p><b>Step 1</b>. Connect to the router using a console cable.</p> <p><b>Step 2</b>. Open a HyperTerminal window to connect with the first router that you want to configure. </p> <p><b>Step 3</b>. Enter privileged mode by typing <span class="cmd"><b>enable</b></span> at the <b>Router1></b> prompt. Note how the > symbol changes to a # to indicate that privilege mode is being used.<br/> <br/> <span class="cmd">Router1<i>></i><b>enable</b></span><br/> <span class="cmd">Router1#</span> </p> <p><b>Step 4</b>. Enter global configuration mode.</p> <p><span class="cmd">Router1#<b>config terminal</b></span><br/> <span class="cmd">Router1(config)#</span></p> <p><b>Step 5</b>. Use the <span class="cmd"><b>ip route</b></span> Cisco IOS command to configure the static route, with the following format.<br/> <br/> <span class="cmd"><b>ip route </b>[<i>destination_network</i>] [<i>subnet_mask</i>] [<i>gateway_address</i>]</span> </p> <p>or</p> <p><span class="cmd"><b>ip route </b>[<i>destination_network</i>] [<i>subnet_mask</i>] [exit<i>_interface</i>]</span> </p> <p>For example, to enable router 1 (R1) to reach a host on network 192.168.16.0, the administrator configures a static route on R1 with the following Cisco IOS command in global configuration mode:</p> <p><span class="cmd">Router1(config)#<b>ip route 192.168.16.0 255.255.255.0 192.168.15.1</b></span> </p> <p>or</p> <p><span class="cmd">Router1(config)#<b>ip route 192.168.16.0 255.255.255.0 S0/0/0</b></span> </p> <p>To enable two-way communication with a host on network 192.168.16.0, the administrator also configures a static route on router 2 (R2).</p> <p>Because static routes are configured manually, network administrators must add and delete static routes to reflect any changes in network topology. On small networks, static routes require very little maintenance because there are not many possible changes. In a large network, manually maintaining routing tables could require significant administrative time. For this reason, larger networks generally use dynamic routing rather than static routes.</p></content-text>
</page>
<page type="OneColumn" id="en0506010105">
<content-media type="ActivityPKA" id="cm7466744497">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010100/en0506010105/cm7466744497/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0506000000/en0506010000/en0506010100/en0506010105/cm7466744497/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Manually configure and reconfigure static routes.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0506010200">
<title><content-text>Routing Protocols</content-text></title>
<page type="OneColumn" id="en0506010201">
<content-media type="AnimationPartialScreen" id="cm7369834091">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010200/en0506010201/cm7369834091.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010200/en0506010201/cm7369834091text.xml"/></content-media>
<content-text><p>Routes can change very quickly. Problems with cables and hardware failures can make destinations unreachable through the designated interface. Routers need to be able to quickly update routes in a way that does not depend on the administrator to make the changes manually.</p> <p>Routers use routing protocols to dynamically manage information received from their own interfaces and from other routers. Routing protocols can also be configured to manage manually entered routes. </p> <p>Dynamic routing makes it possible to avoid the time-consuming process of configuring static routes. Dynamic routing enables routers to react to changes in the network and to adjust their routing tables accordingly, without the intervention of the network administrator. </p> <p>A dynamic routing protocol learns all the available routes, places the best routes into the routing table, and removes routes when they are no longer valid. The method that a routing protocol uses to determine the best route is called a <content-link target="{9124A664-8A92-4DFE-B07F-AEC38E682C99}" type="glossary">routing algorithm</content-link>. There are two main classes of routing algorithms: <content-link target="{CFF512F6-D215-4F3D-95DB-5602D0E8698B}" type="glossary">distance vector</content-link> and <content-link target="{AFC7B436-A25D-4721-9555-80700B4AF741}" type="glossary">link state</content-link>. Each type uses a different method for determining the best route to a destination network. </p> <p>Whenever the topology of a network changes because of reconfiguration or failure, the routing tables in all the routers must also change to reflect an accurate view of the new topology. When all the routers in a network have updated their tables to reflect the new route, the routers are said to have converged.</p> <p>The specific routing algorithm that is being used is a very important factor in dynamic routing. For two routers to exchange routes, they must be using the same routing protocol and therefore the same routing algorithm.</p></content-text>
</page>
<page type="OneColumn" id="en0506010202">
<content-media type="StaticGraphic" id="cm8527599692">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010200/en0506010202/cm8527599692.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010200/en0506010202/cm8527599692text.xml"/></content-media>
<content-text><p>The distance vector routing algorithm periodically passes copies of the routing table from router to router. These regular updates between routers communicate topology changes. </p> <p>The distance vector algorithm evaluates the route information it receives from other routers using two basic criteria:</p> <p><ul><li> Distance - How far away is the network from this router?</li><li> Vector - In which direction should the packet be sent to reach this network?</li></ul></p> <p>The distance component of a route is expressed in terms of a route cost, or metric, that can be based on the following items:</p> <p><ul><li> Number of hops</li><li> Administrative cost</li><li> Bandwidth</li><li> Transmission speed</li><li> Likelihood of delays</li><li> Reliability</li></ul></p> <p>The vector, or direction, component of a route is the address of the next hop along the path to the network named in the route.</p> <p>An analogy for distance vectors are the highway signs found at intersections. A sign points toward a destination and indicates the distance that must be traveled to reach that destination. Further down the highway, another sign points toward the same destination, but now the distance remaining to that destination is shorter. As long as the distance is shorter, the traffic is on the best path.</p></content-text>
</page>
<page type="OneColumn" id="en0506010203">
<content-media type="AnimationPartialScreen" id="cm3956812693">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010200/en0506010203/cm3956812693.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010200/en0506010203/cm3956812693text.xml"/></content-media>
<content-text><p>Each router that uses distance vector routing communicates its routing information to its neighbors. Neighbor routers share a directly connected network. The interface that leads to each directly connected network has a distance of 0. </p> <p>Each router receives a routing table from its neighbor routers. For example, R2 receives information from R1. R2 adds to the metric, in this case the <content-link target="{5EC3F654-E96B-4D59-BE46-413B814C414B}" type="glossary">hop count</content-link>, to show that there is now one more hop to get to the destination network. Then R2 sends this new routing table to its neighbors, including R3. This step-by-step process occurs in all directions between neighbor routers. </p> <p>Eventually, each router learns about other more-remote networks based on the information that it receives from its neighbors. Each of the network entries in the routing table has an accumulated distance vector to show how far away that network is in a given direction. </p> <p>As the distance vector discovery process continues, routers discover the best path to destination networks based on the information they receive from each neighbor. The best path is the path with the shortest distance or smallest metric.</p> <p>Routing table updates also occur when the topology changes, for example, when a new network is added or when a router fails, causing a network to become unreachable. As with the network discovery process, topology change updates proceed step-by-step by sending copies of routing tables from router to router.</p></content-text>
</page>
<page type="FullScreen" id="en0506010204">
<content-media type="ActivityCustom" id="cm4828067120">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010200/en0506010204/cm4828067120.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010200/en0506010204/cm4828067120text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p>For each router select the shortest path, based on the number of hops, to the destination Ethernet networks. If the network is directly connected, specify the exit interface; otherwise, specify the next hop router.</p><p><b>Click each router to complete the routing table entries. To proceed to another router, first click Check, and then click the new router.</b></p></content-text>
</page>
<page type="OneColumn" id="en0506010205">
<content-media type="ActivityLab" id="cm7089329412">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010200/en0506010205/cm7089329412/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0506000000/en0506010000/en0506010200/en0506010205/cm7089329412/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Create a network topology diagram based on the output of the <span class="cmd"><b>show ip route</b></span> command.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0506010300">
<title><content-text>Common Interior Routing Protocols</content-text></title>
<page type="OneColumn" id="en0506010301">
<content-media type="AnimationPartialScreen" id="cm3182814931">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010300/en0506010301/cm3182814931.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010300/en0506010301/cm3182814931text.xml"/></content-media>
<content-text><p>Routing Information Protocol (RIP) is a distance vector routing protocol that is used in thousands of networks throughout the world. It was initially specified in RFC 1058.</p> <p>Characteristics of RIP include: </p> <p><ul><li> Is a distance vector routing protocol</li><li> Uses hop count as the <content-link target="{11BC42F3-373E-4F82-A2F3-1A8F0B57940E}" type="glossary">metric</content-link> for path selection</li><li> Defines a hop count greater than 15 as an unreachable route</li><li> Sends routing table contents every 30 seconds</li></ul></p> <p>When a router receives a routing update with a change, it updates its routing table to reflect that change. If the router learns a new route from another router, it increases the hop count value by one before adding that route to its own routing table. The router uses the local network address of the directly connected router that sent the update as the next hop address. </p> <p>After updating its routing table, the router immediately begins transmitting routing updates to inform other network routers of the change. These updates, called <content-link target="{861B8B5B-F067-4069-AD90-E5D1F0EEA1BF}" type="glossary">triggered update</content-link>s, are sent independently of the regularly scheduled updates that RIP routers forward.</p></content-text>
</page>
<page type="OneColumn" id="en0506010302">
<content-media type="InteractiveGraphicRollovers" id="cm1333234631">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010300/en0506010302/cm1333234631.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010300/en0506010302/cm1333234631text.xml"/></content-media>
<content-text><p><b>Routing Information Protocol (RIP)</b></p> <p><content-link target="{4A01CA38-FC0C-44D7-AF32-4181266A712B}" type="glossary">RIP</content-link> is simple and easy to implement. These advantages make RIP a widely used and popular routing protocol.</p> <p>RIP has several disadvantages:</p> <p><ul><li> Allows a maximum of 15 hops, so it can only be used for networks that connect no more than 16 routers in a series.</li><li> Periodically sends complete copies of the entire routing table to directly connected neighbors. In a large network, this can cause a significant amount of network traffic each time there is an update.</li><li> Converges slowly on larger networks when the network changes.</li></ul></p> <p>There are currently two versions of RIP available: RIPv1 and RIPv2. RIPv2 has many advantages over RIPv1 and is usually used unless the equipment cannot support RIPv2. The most significant difference between RIP versions 1 and 2 is that RIPv2 can support classless routing, because it includes the subnet mask information in routing updates. RIPv1 does not send subnet mask information in the updates; therefore, it must rely on the classful default subnet masks.</p></content-text>
</page>
<page type="OneColumn" id="en0506010303">
<content-media type="StaticGraphic" id="cm8121721127">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010300/en0506010303/cm8121721127.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010300/en0506010303/cm8121721127text.xml"/></content-media>
<content-text><p><b>Enhanced Interior Gateway Routing Protocol (EIGRP) </b></p> <p><content-link target="{F74A7763-4AA3-4C8D-BBD3-61B17FFC78CC}" type="glossary">EIGRP</content-link> is a Cisco-proprietary, enhanced distance vector routing protocol. EIGRP was developed to address some of the limitations of other distance vector routing protocols, such as RIP. These limitations include the use of the hop count metric and the maximum network size of 15 hops. </p> <p>EIGRP uses a number of metrics, including a configured bandwidth value and the delay encountered when a packet travels a particular route. </p> <p>The characteristics of EIGRP are:</p> <p><ul><li> Uses a variety of metrics to calculate the cost of a route</li><li> Combines the next hop and metric features of distance vector protocols with additional database and update features</li><li> Has a maximum hop count of 224 hops</li></ul></p> <p>Unlike RIP, EIGRP does not rely only on the routing table in the router to hold all the information it needs to operate. EIGRP creates two additional database tables: the neighbor table and the topology table.</p> <p>The neighbor table stores data about the neighboring routers that are on directly connected local networks. This neighbor table includes information such as the interface IP addresses, interface type, and bandwidth. </p> <p>EIGRP builds the topology table from each of the advertisements of its neighbors. The topology table contains all the routes advertised by the neighbor routers. EIGRP depends on a routing algorithm called Diffused Update Algorithm (<content-link target="{E1969BB4-755E-48E3-B5B3-633AF4BFA884}" type="glossary">DUAL</content-link>) to calculate the shortest path to a destination within a network and to install this route into the routing table. The topology table enables a router running EIGRP to find the best alternate path quickly when a network change occurs. If no alternate route exists in the topology table, EIGRP queries its neighbors to find a new path to the destination. </p> <p>Unlike RIP, which is limited to small simple networks of less than 15 hops, EIGRP is ideal for larger, more complex networks up to 224 hops in size that require fast convergence.</p></content-text>
</page>
<page type="OneColumn" id="en0506010304">
<content-media type="AnimationPartialScreen" id="cm2072619919">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010300/en0506010304/cm2072619919.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010300/en0506010304/cm2072619919text.xml"/></content-media>
<content-text><p><b>Link-state Protocol</b></p> <p>Routers that use the distance vector routing algorithm have little information about distant networks and none about distant routers. The link-state routing algorithm maintains a full database of distant routers and how they interconnect.</p> <p>Link-state routing uses the following features: </p> <p><ul><li> Routing table - List of the known paths and interfaces.</li><li> Link-state advertisement (<content-link target="{3561F1ED-8580-4069-8926-964F9591E510}" type="glossary">LSA</content-link>) - Small packet of routing information that is sent between routers. LSAs describe the state of the interfaces (links) of a router and other information, such as the IP address of each link.</li><li> <content-link target="{0BC01C4D-0B7F-4F14-AF3F-B26225A533CA}" type="glossary">Topological database</content-link> - Collection of information gathered from all the LSAs received by the router.</li><li> <content-link target="{9F8426BB-E81B-4B4E-9B93-9C1D86B829F8}" type="glossary">SPF</content-link> (Shortest Path First) algorithm - Calculation performed on the database that results in the SPF tree. The SPF tree is a map of the network as seen from the point of view of the router. The information in this tree is used to build the routing table.</li></ul></p> <p>When LSAs are received from other routers, the SPF algorithm analyzes the information in the database to construct the SPF tree. Based on the SPF tree, the SPF algorithm then calculates the shortest paths to other networks. Each time a new LSA packet causes a change to the link-state database, SPF recalculates the best paths and updates the routing table.</p></content-text>
</page>
<page type="OneColumn" id="en0506010305">
<content-media type="AnimationPartialScreen" id="cm1381062504">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010300/en0506010305/cm1381062504.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010300/en0506010305/cm1381062504text.xml"/></content-media>
<content-text><p><b>OSPF</b></p> <p>Open Shortest Path First (<content-link target="{344EBC80-EB04-4461-B584-19411F1BA4BB}" type="glossary">OSPF</content-link>) is a non-proprietary, link-state routing protocol described in RFC 2328. The characteristics of OSPF are:</p> <p><ul><li> Uses the SPF algorithm to calculate the lowest cost to a destination</li><li> Sends routing updates only when the topology changes; does not send periodic updates of the entire routing table</li><li> Provides fast convergence</li><li> Supports Variable Length Subnet Mask (VLSM) and discontiguous subnets</li><li> Provides route authentication</li></ul></p> <p>In OSPF networks, routers send link-state advertisements to each other when a change occurs, for example, when a new neighbor is added, or when a link fails or is restored. </p> <p>If the network topology changes, the routers affected by the change send update LSAs to the rest of the network. All routers update their topology databases accordingly, regenerate their SPF trees to find new shortest paths to each network, and update their routing tables with the changed routes.</p> <p>OSPF requires more router resources, such as RAM and CPU processing power, and is an advanced networking protocol that requires an experienced support staff.</p></content-text>
</page>
</topic>
<topic type="" id="en0506010400">
<title><content-text>Routing Within an Organization</content-text></title>
<page type="OneColumn" id="en0506010401">
<content-media type="StaticGraphic" id="cm5790485845">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010400/en0506010401/cm5790485845.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010400/en0506010401/cm5790485845text.xml"/></content-media>
<content-text><p>Each routing protocol uses different metrics. The metric used by one routing protocol is not comparable to the metric used by another routing protocol. Two routing protocols might choose different paths to the same destination because they use different metrics. For example, RIP chooses the path with the fewest number of hops, whereas EIGRP chooses the path based on the highest bandwidth and least delay. </p> <p>Metrics used in IP routing protocols include:</p> <p><ul><li> Hop count - Number of routers a packet must traverse.</li><li> Bandwidth - Bandwidth of a specific link.</li><li> Load - Traffic utilization of a specific link.</li><li> Delay - Time a packet takes to traverse a path.</li><li> Reliability -- Probability of a link failure, based on the interface error count or previous link failures.</li><li> Cost - Determined by either the Cisco IOS application or the network administrator to indicate preference for a route. Cost can represent a metric, a combination of metrics, or a policy. </li></ul></p> <p>It is possible to have more than one routing protocol enabled on a single router. Additionally, a network administrator may choose to configure static routes to a specific destination. If a router has two different paths to a destination based on two different routing protocols and their metrics, how does the router know which path to use? </p> <p>The router uses what is known as the administrative distance (<content-link target="{F4474044-6378-431D-B39A-A4321EA5C2EB}" type="glossary">AD</content-link>). The AD represents the "trustworthiness" of the route. The lower the AD, the more the trustworthy the route. For example, a static route has an AD of 1, whereas a RIP-discovered route has an AD of 120. Given two separate routes to the same destination, the router chooses the route with the lowest AD. When a router has the choice of a static route and a RIP route, the static route takes precedence. Additionally, a directly connected route with an AD of 0 takes precedence over a static route with an AD of 1.</p></content-text>
</page>
<page type="OneColumn" id="en0506010402">
<content-media type="InteractiveGraphicRollovers" id="cm5508389694">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010400/en0506010402/cm5508389694.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010400/en0506010402/cm5508389694text.xml"/></content-media>
<content-text><p>Sometimes it is necessary to use multiple routing protocols, for example, when merging two pre-existing networks. However, when initially designing a network, it is recommended that only one routing protocol be enabled for the entire network. Having one protocol makes it easier to support and troubleshoot the network. Deciding which type of routing protocol to select can be difficult even for expert network designers. </p> <p>Small networks with only one gateway to the Internet can probably use static routes. Such a topology rarely needs dynamic routing.</p> <p>As an organization grows and adds routers to its network topology, RIPv2 can be used. It is easy to configure and works well in small networks. When a network begins to exceed 15 routers, RIP is no longer a good choice.</p> <p>For larger networks, EIGRP and OSPF are commonly used, but there is no simple principle that makes it obvious to choose one over the other. Each network has to be considered independently. The three main criteria to consider are:</p> <p><ul><li> <b>Ease of management </b>- What information does the protocol keep about itself? Which <span class="cmd">show</span> commands are available?</li><li> <b>Ease of configuration </b>- How many commands does the average configuration require? Is it possible to configure several routers in the network with the same configuration? </li><li> <b>Efficiency</b> - How much bandwidth does the routing protocol use while it is in a steady state, and how much could it use when converging in response to a major network event?</li></ul></p></content-text>
</page>
</topic>
<topic type="" id="en0506010500">
<title><content-text>Configuring and Verifying RIP</content-text></title>
<page type="OneColumn" id="en0506010501">
<content-media type="InteractiveGraphicHotspots" id="cm3118453104">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010500/en0506010501/cm3118453104.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010500/en0506010501/cm3118453104text.xml"/></content-media>
<content-text><p>RIP is a popular distance vector protocol supported by most routers. It is an appropriate choice for small networks containing multiple routers. Before configuring RIP on a router, think about the networks a router serves, and the interfaces on the router that connect to these networks.</p> <p>The figure shows three routers. Each router serves a separate private local network, so there are three LANs. The routers are also connected by separate networks, so there are a total of six networks shown.</p> <p>With this topology, R1 does not automatically know how to reach the 10.0.0.0/8 network, or the 192.168.4.0/24 network. R1 is only able to reach those networks after RIP routing is properly configured. Once RIP routing is configured, R2 and R3 will forward routing updates to R1 containing information on the availability of the 10.0.0.0/8 and 192.168.4.0/24 networks.</p> <p>Before configuring RIP, assign an IP address and enable all the physical interfaces that will participate in routing. </p> <p>For the most basic RIPv2 configuration, there are three commands to remember:</p> <p><span class="cmd">Router(config)#<b>router rip</b></span></p> <p><span class="cmd">Router (config-router)#v<b>ersion 2</b></span></p> <p><span class="cmd">Router(config-router)#<b>network</b> [network_number]</span></p> <p>Enter the <span class="cmd"><b>router rip</b></span> command in global configuration mode to enable RIP on the router. Enter the <span class="cmd"><b>network</b></span> command from router configuration mode to tell the router which networks are part of the RIP routing process. The routing process associates specific interfaces with the network numbers specified, and begins to send and receive RIP updates on these interfaces.</p></content-text>
</page>
<page type="OneColumn" id="en0506010502">
<content-media type="InteractiveGraphicHotspots" id="cm8516606548">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010500/en0506010502/cm8516606548.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506010000/en0506010500/en0506010502/cm8516606548text.xml"/></content-media>
<content-text><p>After a configuration is done, it is a good idea to compare the running configuration with an accurate topology diagram to verify the network numbers and interface IP addresses. This is good practice because it is easy to make a simple data entry error.</p> <p>There are several ways to verify that RIP is functioning properly in the network. One way to verify that routing is working properly is to ping devices on remote networks. If the ping is successful, it is likely that routing is working.</p> <p>Another method is to run the IP routing verification commands <span class="cmd"><b>show ip protocols</b></span> and <span class="cmd"><b>show ip route</b></span> at the CLI prompt.</p> <p>The <span class="cmd"><b>show ip protocols</b></span> command verifies that RIP routing is configured, that the correct interfaces are sending and receiving RIP updates, and that the router is advertising the correct networks.</p> <p>The <span class="cmd"><b>show ip route</b></span> command shows the routing table, which verifies that routes received by RIP neighbors are installed in the routing table.</p> <p>The <span class="cmd"><b>debug ip rip</b></span> command can be used to observe the networks advertised in the routing updates as they are sent and received. Debug commands display router activity in real time. Because debug activity uses router processor resources, debugging should be used with care in a production network, because it can affect network operation.</p></content-text>
</page>
<page type="OneColumn" id="en0506010503">
<content-media type="ActivityPKA" id="cm3886443337">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010500/en0506010503/cm3886443337/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en0506000000/en0506010000/en0506010500/en0506010503/cm3886443337/icontext.xml"/></content-media>
<content-text><p><b>Packet Tracer Activity</b></p> <p>Configure and verify RIP.</p><p><b>Click the Packet Tracer icon to begin.</b></p></content-text>
</page>
<page type="OneColumn" id="en0506010504">
<content-media type="ActivityLab" id="cm6364309718">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506010000/en0506010500/en0506010504/cm6364309718/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0506000000/en0506010000/en0506010500/en0506010504/cm6364309718/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity </b></p> <p>Configure and verify RIP.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en0506020000">
<title><content-text>Exterior Routing Protocols</content-text></title>
<topic type="" id="en0506020100">
<title><content-text>Autonomous Systems</content-text></title>
<page type="OneColumn" id="en0506020101">
<content-media type="StaticGraphic" id="cm7290315176">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020100/en0506020101/cm7290315176.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020100/en0506020101/cm7290315176text.xml"/></content-media>
<content-text><p>The Internet routing architecture has evolved over the years into a distributed system of interconnected networks. The Internet is now so vast and involves so many networks that it is impossible for a single organization to manage all the routing information needed to reach every destination around the world. </p> <p>Instead, the Internet is divided up into collections of networks called Autonomous Systems (<content-link target="{FF21C1DB-77F2-4F05-A26F-9244DEE1846E}" type="glossary">AS</content-link>), which are independently controlled by different organizations and companies. </p> <p>An AS is a set of networks controlled by a single administrative authority using the same internal routing policy throughout. Each AS is identified by a unique AS number (<content-link target="{7C945A30-BB3A-4077-B445-F0AAB39564D0}" type="glossary">ASN</content-link>). ASNs are controlled and registered on the Internet.</p> <p>The most common example of an AS is the ISP. Most businesses connect to the Internet through an ISP, and so become part of the routing domain of that ISP. The AS is administered by the ISP and, therefore, not only includes its own network routes but also manages the routes to all the business and other customer networks that are connected to it.</p></content-text>
</page>
<page type="OneColumn" id="en0506020102">
<content-media type="StaticGraphic" id="cm8331241916">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020100/en0506020102/cm8331241916.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020100/en0506020102/cm8331241916text.xml"/></content-media>
<content-text><p>The same ASN applies to all network devices within the AS routing domain.</p> <p>ISP A is an AS whose routing domain includes a local business that directly connects to that ISP for Internet access. The business does not have a separate ASN. Instead, it uses the ASN of ISP A (ASN 100) in its routing information. </p> <p>Also shown is a large global business with corporate offices located in Hong Kong and New York. Because they are located in different countries, each office connects to a different local ISP for Internet access. This means that the business is connected to two ISPs. Which AS does it belong to and which ASN does it use?</p> <p>Because the company communicates through both ISP B and ISP C, this causes routing confusion in terms of connectivity. Traffic from the internet does not know which AS to use to reach the large global business. To solve the problem, the business registers as an AS in its own right and is assigned an ASN of 400.</p></content-text>
</page>
<page type="FullScreen" id="en0506020103">
<content-media type="ActivityMCSACheckbox" id="cm1026871177">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020100/en0506020103/cm1026871177.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020100/en0506020103/cm1026871177text.xml"/></content-media>
<content-text><p><b>Activity</b></p> <p> </p> <p>Identify which networks belong to which Autonomous Systems.</p><p><b>For each scenario, select either Uses ASN of ISP or Uses Private ASN.</b></p></content-text>
</page>
</topic>
<topic type="" id="en0506020200">
<title><content-text>Routing Across the Internet</content-text></title>
<page type="OneColumn" id="en0506020201">
<content-media type="StaticGraphic" id="cm5341889422">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020200/en0506020201/cm5341889422.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020200/en0506020201/cm5341889422text.xml"/></content-media>
<content-text><p>Interior gateway protocols (<content-link target="{5E9156F3-A265-48F2-862A-CEAA7D9F62BA}" type="glossary">IGP</content-link>s) are used to exchange routing information within an AS or individual organization. The purpose of an interior routing protocol is to find the best path through the internal network. IGPs run on the routers inside an organization. Examples of IGPs are RIP, EIGRP, and OSPF.</p> <p>By contrast, exterior gateway protocols (<content-link target="{DDC29902-FA1A-4D9E-AB7C-992902E83AF3}" type="glossary">EGP</content-link>s) are designed to exchange routing information between different autonomous systems. Because each AS is managed by a different administration and may use different interior protocols, networks must use a protocol that can communicate between diverse systems. The EGP serves as a translator for ensuring that external routing information gets successfully interpreted inside each AS network.</p> <p>EGPs run on the exterior routers. These are the routers that are located at the border of an AS. Exterior routers are also called border gateways, or boundary routers.</p> <p>Unlike interior routers, which exchange individual routes with each other using IGPs, exterior routers exchange information about how to reach various networks using exterior protocols. Exterior routing protocols seek to find the best path through the Internet as a sequence of autonomous systems.</p> <p>The most common exterior routing protocol on the Internet today is Border Gateway Protocol (<content-link target="{5FF39A83-3B2E-49BE-96DE-754147039DCA}" type="glossary">BGP</content-link>). It is estimated that 95% of autonomous systems use BGP. The most current version of BGP is version 4 (BGP-4), for which the latest description is provided in RFC 4271.</p></content-text>
</page>
<page type="OneColumn" id="en0506020202">
<content-media type="InteractiveGraphicRollovers" id="cm9975692988">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020200/en0506020202/cm9975692988.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020200/en0506020202/cm9975692988text.xml"/></content-media>
<content-text><p>Each AS is responsible for informing other autonomous systems about which networks they can reach through that AS. Autonomous systems exchange this <content-link target="{AC73FCF3-51C1-40E1-B6DA-08D895F915DA}" type="glossary">reachability information</content-link> with each other through exterior routing protocols that run on dedicated routers called border gateways. </p> <p>Packets are routed across the Internet in several steps.</p> <p>1. The source host sends a packet destined for a remote host located in another AS. </p> <p>2. Because the destination IP address of the packet is not a local network, the interior routers keep passing the packet along their default routes, until eventually it arrives at an exterior router at the edge of the local AS. </p> <p>3. The exterior router maintains a database for all the autonomous systems with which it connects. This <content-link target="{27761AEE-24CD-4E2C-8F90-E604B58B1E27}" type="glossary">reachability</content-link> database tells the router that the path to the destination network passes through several autonomous systems, and that the next hop on the path is through a directly connected exterior router on a neighboring AS.</p> <p>4. The exterior router directs the packet to its next hop on the path, which is the exterior router at the neighboring AS.</p> <p>5. The packet arrives at the neighboring AS, where the exterior router checks its own reachability database and forwards the packet to the next AS on the path.</p> <p>6. The process is repeated at each AS until the exterior router at the destination AS recognizes the destination IP address of the packet as an internal network in that AS. </p> <p>7. The final exterior router then directs the packet to the next hop interior router listed in its routing table. From then on, the packet is treated just like any local packet and is directed through interior routing protocols through a series of internal next hops until it arrives at the destination host.</p></content-text>
</page>
</topic>
<topic type="" id="en0506020300">
<title><content-text>Exterior Routing Protocols and the ISP</content-text></title>
<page type="OneColumn" id="en0506020301">
<content-media type="StaticGraphic" id="cm8216049136">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020300/en0506020301/cm8216049136.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020300/en0506020301/cm8216049136text.xml"/></content-media>
<content-text><p>EGPs provide many useful features for ISPs. Exterior protocols allow traffic to be routed across the Internet to remote destinations. They also provide the method by which ISPs can set and enforce policies and local preferences so that the traffic flow through the ISP is efficient and that none of the internal routes are overloaded with <content-link target="{263669CE-91A7-493C-B656-01A8935FA0A7}" type="glossary">transit traffic</content-link>. </p> <p>Business customers insist on reliability for their Internet service. ISPs must make sure that the Internet connection for those customers is always available. They do this by providing backup routes and routers in case the regular route fails. During normal conditions, the ISP advertises the regular route to other autonomous systems. If that regular route fails, the ISP sends an exterior protocol update message to advertise the backup route instead.</p></content-text>
</page>
<page type="OneColumn" id="en0506020302">
<content-media type="StaticGraphic" id="cm3787136299">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020300/en0506020302/cm3787136299.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020300/en0506020302/cm3787136299text.xml"/></content-media>
<content-text><p>The flow of messages in the Internet is called traffic. Internet traffic can be categorized in one of two ways:</p> <p><ul><li> <content-link target="{80E721F6-93D8-40D9-A082-8EEE08BD10B4}" type="glossary">Local traffic</content-link> - Traffic carried within an AS that either originated in that same AS, or is intended to be delivered within that AS. This is like local traffic on a street.</li><li> Transit traffic - Traffic that was generated outside that AS and can travel through the internal AS network to be delivered to destinations outside the AS. This is like through traffic on a street.</li></ul></p> <p>The flow of traffic between autonomous systems is carefully controlled. It is important to be able to limit or even prohibit certain types of messages from going to or from an AS for security reasons or to prevent overloading.</p> <p>Many autonomous systems network administrators choose not to carry transit traffic. Transit traffic can cause routers to overload and fail if those routers do not have the capacity to handle large amounts of traffic.</p></content-text>
</page>
</topic>
<topic type="" id="en0506020400">
<title><content-text>Configuring and Verifying BGP</content-text></title>
<page type="OneColumn" id="en0506020401">
<content-media type="StaticGraphic" id="cm1911910752">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020400/en0506020401/cm1911910752.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506020000/en0506020400/en0506020401/cm1911910752text.xml"/></content-media>
<content-text><p>When an ISP puts a router at a customer location, they usually configure it with a default static route to the ISP. Sometimes, an ISP may want the router to be included in its AS and to participate in BGP. In these instances, it is necessary to configure the customer premise router with the commands necessary to enable BGP.</p> <p>The first step in enabling BGP on a router is to configure the AS number. This step is done with the command:<br/> <br/> <span class="cmd"><b>router bgp </b>[<i>AS_number</i>]</span> </p> <p>The next step is to identify the ISP router that is the BGP neighbor with which the customer premises equipment (CPE) router exchanges information. The command to identify the neighbor router is:<br/> <br/> <span class="cmd"><b>neighbor </b>[<i>IP_address</i>]<b> remote-as </b>[<i>AS_number</i>]</span> </p> <p>When an ISP customer has its own registered IP address block, it may want the routes to some of its internal networks to be known on the Internet. To use BGP to advertise an internal route, the network address needs to be identified. The format of the command is:<br/> <br/> <span class="cmd"><b>network</b> [<i>network_address</i>]</span> </p> <p>When the CPE is installed and the routing protocols are configured, the customer has both local and Internet connectivity. Now the customer is able to fully participate in other services that the ISP offers.</p> <p>The IP addresses used for BGP are normally registered, routable addresses that identify unique organizations. In very large organizations, private addresses may be used in the BGP process. On the Internet, BGP should never be used to advertise a private network address.</p></content-text>
</page>
<page type="OneColumn" id="en0506020402">
<content-media type="ActivityLab" id="cm9069205818">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506020000/en0506020400/en0506020402/cm9069205818/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en0506000000/en0506020000/en0506020400/en0506020402/cm9069205818/icontext.xml"/></content-media>
<content-text><p><b>Lab Activity</b></p> <p>Configure BGP on the external gateway router.</p><p><b>Click the lab icon to begin.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="en0506030000">
<title><content-text>Chapter Summary</content-text></title>
<topic type="" id="en0506030100">
<title><content-text>Summary</content-text></title>
<page type="FullScreen" id="en0506030101">
<content-media type="ChapterSummary" id="cm8530397424">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506030000/en0506030100/en0506030101/cm8530397424.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en0506000000/en0506030000/en0506030100/en0506030101/cm8530397424text.xml"/></content-media>
<content-text><p><b>Click through the buttons for summary information.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="en0506040000">
<title><content-text>Chapter Quiz</content-text></title>
<topic type="" id="en0506040100">
<title><content-text>Quiz</content-text></title>
<page type="OneColumn" id="en0506040101">
<content-media type="ChapterQuiz" id="cm9065827823">	<title><content-text></content-text></title>	<media ref="en0506000000/en0506040000/en0506040100/en0506040101/cm9065827823/" mime="" scale="true" type="directory" width="100%" height="100%" external="en0506000000/en0506040000/en0506040100/en0506040101/cm9065827823/icontext.xml"/></content-media>
<content-text><p>Take the chapter quiz to check your knowledge.</p><p><b>Click the quiz icon to begin.</b></p></content-text>
</page>
</topic>
</section>
</chapter>
