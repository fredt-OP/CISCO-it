<transcript lastedited="01.06.09 13:01:08">
<title><content-text><![CDATA[6.1.2  - Interfaces and Subinterfaces]]></content-text></title>
<brief><content-text><![CDATA[The animation depicts more details about the operation of router-on-a-stick inter-V LAN routing using a single router interface. <br><br>Network Topology:<br>Same as 6.1.2 Diagram 2, except that there is only a single trunk link from switch S1 port F0/5 to router R1 interface F0/1. This single physical router interface has three logical subinterfaces defined:<br>Subinterface F0/1 dot 10, IP address 172.17.10.1<br>Subinterface F0/1 dot 20, IP address 172.17.20.1<br>Subinterface F0/1 dot 30, IP address 172.17.30.1<br><br>Scenario:<br>PC1 (in V LAN 10) sends a unicast frame to PC3 (in V LAN 30) via switches S2 and S1 and router R1, using a single router interface.<br><br>Animation sequence:<br>One. PC1 sends an ARP request for the MAC address of its default gateway, which is the V LAN subinterface on router R1.<br><br>Two. The ARP request is sent out for the IP address 172.16.10.1, which corresponds to the subnet that PC1 is connected to.<br><br>Three. The ARP request is sent to switch S2 on V LAN 10, and is tagged and forwarded out the trunk link to switch S1.<br><br>Four. Switch S1 maintains the V LAN tag on the broadcast frame as it forwards it out the other trunk link connected to router R1.<br><br>Five. Router R1 examines the V LAN tag on the broadcast and recognizes that it was sent on V LAN 10. Because subinterface F0/0 dot 10 has been configured for V LAN 10 and with the IP address specified in the ARP request, the router responds back to PC1 with the MAC address of the physical interface.<br><br>Six. PC1 uses the MAC address received from router R1 to frame the unicast packet before it is sent out on the network.<br><br>Seven. Switch S2 tags the frame on V LAN 10 as it traverses the trunk link to switch S1.<br><br>Eight. Switch S1 maintains the V LAN tag as it continues to forward the frame to router R1.<br><br>Nine. Router R1 examines the frame and sees the V LAN tag for V LAN 10. The router forwards the frame to subinterface F0/0 dot 10.<br><br>Ten. The router then examines the routing table to see if there is a defined route to use as a basis for forwarding the packet to its destination. The routing table indicates that the destination network is directly connected to subinterface F0/0 dot 30.<br><br>Eleven. The router then forwards the packet to subinterface F0/0 dot 30.<br><br>Twelve. R1 sends a new ARP request for the MAC address of PC3. The ARP request is sent out the physical interface tagged with V LAN 30.<br><br>Thirteen. PC3 receives the ARP request.<br><br>Fourteen. PC3 sends back an ARP reply with its MAC address.<br><br>Fifteen. Router R1 receives the ARP reply and finishes framing the packet before it sends it out onto the network.<br><br>Sixteen. Switch S1 forwards the frame to switch S2, which then finally delivers the frame to PC3.<br><br>Seventeen. PC3 sends a unicast frame back to PC1. However, this time, ARP broadcasts are not needed because the MAC addresses of the adjacent devices are already known.<br><br>Eighteen. R1 uses its routing table to determine that the destination network address of the unicast packet from PC3 is directly connected to F0/0 dot 10.<br><br>Nineteen. R1 forwards the packet to subinterface F0/0 dot 10.<br><br>Twenty. The unicast packet is delivered to PC1.]]></content-text></brief>
<full><content-text><![CDATA[FULL - NOT FOR PRODUCTION]]></content-text></full>
</transcript>
