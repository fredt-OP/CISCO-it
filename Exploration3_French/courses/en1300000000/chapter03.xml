<chapter type="" id="en1303000000">
<title><content-text>VLANs</content-text></title>
<section type="ChapterIntroduction" id="en1303000000">
<title><content-text>Chapter Introduction</content-text></title>
<topic type="" id="en1303000100">
<title><content-text>Chapter Introduction</content-text></title>
<page type="OneColumn" id="en1303000101">
<content-media type="StaticGraphic" id="cm1743829437">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303000000/en1303000100/en1303000101/cm1743829437.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303000000/en1303000100/en1303000101/cm1743829437text.xml"/></content-media>
<content-text><p>Network performance can be a factor in an organization's productivity and its reputation for delivering as promised. One of the contributing technologies to excellent network performance is the separation of large broadcast domains into smaller ones with VLANs. Smaller broadcast domains limit the number of devices participating in broadcasts and allow devices to be separated into functional groupings, such as database services for an accounting department and high-speed data transfer for an engineering department. In this chapter, you will learn how to configure, manage, and troubleshoot VLANs and <content-link target="{F88ADC95-841A-4F47-A188-BD2926AA41C7}" type="glossary">trunks</content-link>.</p></content-text>
</page>
</topic>
</section>
<section type="" id="en1303010000">
<title><content-text>Introducing VLANs</content-text></title>
<topic type="" id="en1303010100">
<title><content-text>Introducing VLANs</content-text></title>
<page type="OneColumn" id="en1303010101">
<content-media type="InteractiveGraphicHotspots" id="cm4948924255">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010100/en1303010101/cm4948924255.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010100/en1303010101/cm4948924255text.xml"/></content-media>
<content-text><p><b>Before VLANs</b></p> <p>To appreciate why VLANs are being widely used today, consider a small community college with student dorms and the faculty offices all in one building. The figure shows the student computers in one LAN and the faculty computers in another LAN. This works fine because each department is physically together, so it is easy to provide them with their network resources.</p> <p><b>Click the Many Buildings button in the figure.</b></p> <p>A year later, the college has grown and now has three buildings. In the figure, the original network is the same, but student and faculty computers are spread out across three buildings. The student dorms remain on the fifth floor and the faculty offices remain on the third floor. However, now the IT department wants to ensure that student computers all share the same security features and bandwidth controls. How can the network accommodate the shared needs of the geographically separated departments? Do you create a large LAN and wire each department together? How easy would it be to make changes to that network? It would be great to group the people with the resources they use regardless of their geographic location, and it would make it easier to manage their specific security and bandwidth needs.</p></content-text>
</page>
<page type="OneColumn" id="en1303010102">
<content-media type="InteractiveGraphicHotspots" id="cm3940596348">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010100/en1303010102/cm3940596348.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010100/en1303010102/cm3940596348text.xml"/></content-media>
<content-text><p><b>VLAN Overview </b></p> <p>The solution for the community college is to use a networking technology called a virtual LAN (VLAN). A VLAN allows a network administrator to create groups of logically networked devices that act as if they are on their own independent network, even if they share a common infrastructure with other VLANs. When you configure a VLAN, you can name it to describe the primary role of the users for that VLAN. As another example, all of the student computers in a school can be configured in the "Student" VLAN. Using VLANs, you can logically segment switched networks based on functions, departments, or project teams. You can also use a VLAN to geographically structure your network to support the growing reliance of companies on home-based workers. In the figure, one VLAN is created for students and another for faculty. These VLANs allow the network administrator to implement access and security policies to particular groups of users. For example, the faculty, but not the students, can be allowed access to e-learning management servers for developing online course materials.</p> <p><b>Click the Details button in the figure.</b></p> <p><b>VLAN Details </b></p> <p>A VLAN is a logically separate IP subnetwork. VLANs allow multiple IP networks and subnets to exist on the same switched network. The figure shows a network with three computers. For computers to communicate on the same VLAN, each must have an IP address and a subnet mask that is consistent for that VLAN. The switch has to be configured with the VLAN and each port in the VLAN must be assigned to the VLAN. A switch port with a singular VLAN configured on it is called an access port. Remember, just because two computers are physically connected to the same switch does not mean that they can communicate. Devices on two separate networks and subnets must communicate via a router (Layer 3), whether or not VLANs are used. You do not need VLANs to have multiple networks and subnets on a switched network, but there are definite advantages to using VLANs.</p></content-text>
</page>
<page type="OneColumn" id="en1303010103">
<content-media type="StaticGraphic" id="cm8676455526">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010100/en1303010103/cm8676455526.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010100/en1303010103/cm8676455526text.xml"/></content-media>
<content-text><p><b>Benefits of a VLAN</b></p> <p>User productivity and network adaptability are key drivers for business growth and success. Implementing VLAN technology enables a network to more flexibly support business goals. The primary benefits of using VLANs are as follows:</p> <p><ul><li><b>Security</b> - Groups that have sensitive data are separated from the rest of the network, decreasing the chances of confidential information breaches. Faculty computers are on VLAN 10 and completely separated from student and guest data traffic.</li><li><b>Cost reduction</b> - Cost savings result from less need for expensive network upgrades and more efficient use of existing bandwidth and uplinks.</li><li><b>Higher performance</b> - Dividing flat Layer 2 networks into multiple logical workgroups (broadcast domains) reduces unnecessary traffic on the network and boosts performance. </li><li><b><content-link target="{E2E52EA9-63E9-4DEA-94F8-AA646A792E05}" type="glossary">Broadcast storm</content-link> mitigation</b> - Dividing a network into VLANs reduces the number of devices that may participate in a broadcast storm. As discussed in the "Configure a Switch" chapter, LAN segmentation prevents a broadcast storm from propagating to the whole network. In the figure you can see that although there are six computers on this network, there are only three broadcast domains: Faculty, Student, and Guest. </li><li><b>Improved IT staff efficiency</b> - VLANs make it easier to manage the network because users with similar network requirements share the same VLAN. When you provision a new switch, all the policies and procedures already configured for the particular VLAN are implemented when the ports are assigned. It is also easy for the IT staff to identify the function of a VLAN by giving it an appropriate name. In the figure, for easy identification VLAN 20 has been named "Student", VLAN 10 could be named "Faculty", and VLAN 30 "Guest." </li><li><b>Simpler project or application management</b> - VLANs aggregate users and network devices to support business or geographic requirements. Having separate functions makes managing a project or working with a specialized application easier, for example, an e-learning development platform for faculty. It is also easier to determine the scope of the effects of upgrading network services.</li></ul></p></content-text>
</page>
<page type="OneColumn" id="en1303010104">
<content-media type="StaticGraphic" id="cm6969698258">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010100/en1303010104/cm6969698258.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010100/en1303010104/cm6969698258text.xml"/></content-media>
<content-text><p><b>VLAN </b><b>ID Ranges</b></p> <p>Access VLANs are divided into either a normal range or an extended range.</p> <p><b>Normal Range VLANs</b></p> <p><ul><li>Used in small- and medium-sized business and enterprise networks.</li><li>Identified by a VLAN ID between 1 and 1005. </li><li>IDs 1002 through 1005 are reserved for <content-link target="{46FCF3BE-3E64-417D-9EE5-12E458850691}" type="glossary">Token Ring</content-link> and <content-link target="{7C23AC52-FFCC-4D23-A73E-41BF9B8C1070}" type="glossary">FDDI</content-link> VLANs.</li><li>IDs 1 and 1002 to 1005 are automatically created and cannot be removed. You will learn more about VLAN 1 later in this chapter.</li><li>Configurations are stored within a VLAN database file, called vlan.dat. The vlan.dat file is located in the flash memory of the switch. </li><li>The VLAN trunking protocol (<content-link target="{A7D87294-FAAE-4337-B1C8-D8FCAACFA099}" type="glossary">VTP</content-link>), which helps manage VLAN configurations between switches, can only learn normal range VLANs and stores them in the VLAN database file.</li></ul></p> <p><b>Extended Range VLANs</b></p> <p><ul><li>Enable service providers to extend their infrastructure to a greater number of customers. Some global enterprises could be large enough to need extended range VLAN IDs.</li><li>Are identified by a VLAN ID between 1006 and 4094.</li><li>Support fewer VLAN features than normal range VLANs.</li><li>Are saved in the running configuration file. </li><li>VTP does not learn extended range VLANs.</li></ul></p> <p><b>255 VLANs Configurable</b></p> <p>One Cisco Catalyst 2960 switch can support up to 255 normal range and extended range VLANs, although the number configured affects the performance of the switch hardware. Because an enterprise network may need a switch with a lot of ports, Cisco has developed enterprise-level switches that can be joined or stacked together to create a single switching unit consisting of nine separate switches. Each separate switch can have 48 ports, which totals 432 ports on a single switching unit. In this case, the 255 VLAN limit per single switch could be a constraint for some enterprise customers. </p></content-text>
</page>
</topic>
<topic type="" id="en1303010200">
<title><content-text>Types of VLANs</content-text></title>
<page type="OneColumn" id="en1303010201">
<content-media type="StaticGraphic" id="cm4534586688">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010200/en1303010201/cm4534586688.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010200/en1303010201/cm4534586688text.xml"/></content-media>
<content-text><p>Today there is essentially one way of implementing VLANs - port-based VLANs. A port-based VLAN is associated with a port called an access VLAN. </p> <p>However in the network there are a number of terms for VLANs. Some terms define the type of network traffic they carry and others define a specific function a VLAN performs. The following describes common VLAN terminology:</p> <p><b>Roll over the Data VLAN button in the figure.</b></p> <p><b>Data VLAN</b></p> <p>A data VLAN is a VLAN that is configured to carry only user-generated traffic. A VLAN could carry voice-based traffic or traffic used to manage the switch, but this traffic would not be part of a data VLAN. It is common practice to separate voice and management traffic from data traffic. The importance of separating user data from switch management control data and voice traffic is highlighted by the use of a special term used to identify VLANs that only carry user data - a "data VLAN". A data VLAN is sometimes referred to as a user VLAN.</p> <p><b>Roll over the Default VLAN button in the figure.</b></p> <p><b>Default VLAN</b></p> <p>All switch ports become a member of the default VLAN after the initial boot up of the switch. Having all the switch ports participate in the default VLAN makes them all part of the same broadcast domain. This allows any device connected to any switch port to communicate with other devices on other switch ports. The default VLAN for Cisco switches is VLAN 1. VLAN 1 has all the features of any VLAN, except that you cannot rename it and you can not delete it. By default, Layer 2 control traffic, such as CDP and spanning tree protocol traffic, are associated with VLAN 1. In the figure, VLAN 1 traffic is forwarded over the VLAN trunks connecting the S1, S2, and S3 switches. It is a security best practice to change the default VLAN to a VLAN other than VLAN 1; this entails configuring all the ports on the switch to be associated with a default VLAN other than VLAN 1. VLAN trunks support the transmission of traffic from more than one VLAN. Although VLAN trunks are mentioned throughout this section, they are explained in the next section on VLAN trunking. </p> <p><b>Note:</b> Some network administrators use the term "default VLAN" to mean a VLAN other than VLAN 1 defined by the network administrator as the VLAN that all ports are assigned to when they are not in use. In this case, the only role that VLAN 1 plays is that of handling Layer 2 control traffic for the network. </p> <p><b>Roll over the Native VLAN button in the figure.</b></p> <p><b>Native VLAN</b></p> <p>A native VLAN is assigned to an 802.1Q trunk port. An 802.1Q trunk port supports traffic coming from many VLANs (tagged traffic) as well as traffic that does not come from a VLAN (untagged traffic). The 802.1Q trunk port places untagged traffic on the native VLAN. In the figure, the native VLAN is VLAN 99. Untagged traffic is generated by a computer attached to a switch port that is configured with the native VLAN. Native VLANs are set out in the IEEE 802.1Q specification to maintain backward compatibility with untagged traffic common to legacy LAN scenarios. For our purposes, a native VLAN serves as a common identifier on opposing ends of a trunk link. It is a best practice to use a VLAN other than VLAN 1 as the native VLAN.</p> <p><b>Roll over the Management VLAN button in the figure.</b></p> <p><b>Management VLAN</b></p> <p>A management VLAN is any VLAN you configure to access the management capabilities of a switch. VLAN 1 would serve as the management VLAN if you did not proactively define a unique VLAN to serve as the management VLAN. You assign the management VLAN an IP address and subnet mask. A switch can be managed via HTTP, Telnet, SSH, or SNMP. Since the out-of-the-box configuration of a Cisco switch has VLAN 1 as the default VLAN, you see that VLAN 1 would be a bad choice as the management VLAN; you wouldn't want an arbitrary user connecting to a switch to default to the management VLAN. Recall that you configured the management VLAN as VLAN 99 in the Basic Switch Concepts and Configuration chapter.</p> <p>On the next page we will explore the one remaining VLAN type: voice VLANs.</p></content-text>
</page>
<page type="OneColumn" id="en1303010202">
<content-media type="InteractiveGraphicHotspots" id="cm5489987872">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010200/en1303010202/cm5489987872.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010200/en1303010202/cm5489987872text.xml"/></content-media>
<content-text><p><b>Voice VLANs</b></p> <p>It is easy to appreciate why a separate VLAN is needed to support Voice over IP (VoIP). Imagine you are receiving an emergency call and suddenly the quality of the transmission degrades so much you cannot understand what the caller is saying. VoIP traffic requires:</p> <p><ul><li>Assured bandwidth to ensure voice quality </li><li>Transmission priority over other types of network traffic</li><li>Ability to be routed around congested areas on the network</li><li>Delay of less than 150 milliseconds (ms) across the network</li></ul></p> <p>To meet these requirements, the entire network has to be designed to support VoIP. The details of how to configure a network to support VoIP are beyond the scope of the course, but it is useful to summarize how a voice VLAN works between a switch, a Cisco IP phone, and a computer.</p> <p>In the figure, VLAN 150 is designed to carry voice traffic. The student computer PC5 is attached to the Cisco IP phone, and the phone is attached to switch S3. PC5 is in VLAN 20, which is used for student data. The F0/18 port on S3 is configured to be in voice mode so that it will tell the phone to tag voice frames with VLAN 150. Data frames coming through the Cisco IP phone from PC5 are left untagged. Data destined for PC5 coming from port F0/18 is tagged with VLAN 20 on the way to the phone, which strips the VLAN tag before the data is forwarded to PC5. Tagging refers to the addition of bytes to a field in the data frame which is used by the switch to identify which VLAN the data frame should be sent to. You will learn later about how data frames are tagged.</p> <p><b>Click The Details button in the figure.</b></p> <p><b>A Cisco Phone is a Switch</b></p> <p>The Cisco IP Phone contains an integrated three-port 10/100 switch as shown in the Figure. The ports provide dedicated connections to these devices:</p> <p><ul><li> Port 1 connects to the switch or other voice-over-IP (VoIP) device.</li><li> Port 2 is an internal 10/100 interface that carries the IP phone traffic.</li><li> Port 3 (access port) connects to a PC or other device.</li></ul></p> <p>The figure shows one way to connect an IP Phone.</p> <p>The voice VLAN feature enables switch ports to carry IP voice traffic from an IP phone. When the switch is connected to an IP Phone, the switch sends messages that instruct the attached IP phone to send voice traffic tagged with the voice VLAN ID 150. The traffic from the PC attached to the IP Phone passes through the IP phone untagged. When the switch port has been configured with a voice VLAN, the link between the switch and the IP phone acts as a trunk to carry both the tagged voice traffic and untagged data traffic.</p> <p><b>Note:</b> Communication between the switch and IP phone is facilitated by the CDP protocol. This protocol is discussed in greater detail in the CCNA Exploration: Routing Protocols and Concepts course.</p> <p><b>Click the Sample Configuration button in the figure.</b></p> <p><b>Sample Configuration</b></p> <p>The figure shows sample output. A discussion of the Cisco IOS commands are beyond the scope of this course, but you can see that the highlighted areas in the sample output show the F0/18 interface configured with a VLAN configured for data (VLAN 20) and a VLAN configured for voice (VLAN 150). </p></content-text>
</page>
<page type="OneColumn" id="en1303010203">
<content-media type="StaticGraphic" id="cm4248423792">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010200/en1303010203/cm4248423792.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010200/en1303010203/cm4248423792text.xml"/></content-media>
<content-text><p><b>Network Traffic Types</b></p> <p>In CCNA Exploration: Network Fundamentals, you learned about the different kinds of traffic a LAN handles. Because a VLAN has all the characteristics of a LAN, a VLAN must accommodate the same network traffic as a LAN. </p> <p><b>Network Management and Control Traffic </b></p> <p>Many different types of network management and control traffic can be present on the network, such as Cisco Discovery Protocol (CDP) updates, Simple Network Management Protocol (SNMP) traffic, and Remote Monitoring (RMON) traffic.</p> <p><b>Roll over the Network Management button in the figure. </b></p> <p><b>IP Telephony</b></p> <p>The types of IP telephony traffic are <content-link target="{8D36350D-0EDF-45EA-A837-1053E1872B59}" type="glossary">signaling</content-link> traffic and voice traffic. Signaling traffic is, responsible for call setup, progress, and teardown, and traverses the network end to end. The other type of telephony traffic consists of data packets of the actual voice conversation. As you just learned, in a network configured with VLANs, it is strongly recommended to assign a VLAN other than VLAN 1 as the management VLAN. Data traffic should be associated with a data VLAN (other than VLAN 1), and voice traffic is associated with a voice VLAN.</p> <p><b>Roll over the IP Telephony button in the figure. </b></p> <p><b>IP Multicast</b></p> <p><content-link target="{729F8D32-FC85-45B2-975C-5C379DA99A8B}" type="glossary">IP multicast</content-link> traffic is sent from a particular source address to a multicast group that is identified by a single IP and MAC destination-group address pair. Examples of applications that generate this type of traffic are Cisco IP/TV broadcasts. Multicast traffic can produce a large amount of data streaming across the network. When the network must support multicast traffic, VLANs should be configured to ensure multicast traffic only goes to those user devices that use the service provided, such as remote video or audio applications. Routers must be configured to ensure that multicast traffic is forwarded to the network areas where it is requested.</p> <p><b>Roll over the IP Multicast button in the figure.</b></p> <p><b>Normal Data</b></p> <p>Normal data traffic is related to file creation and storage, print services, e-mail database access, and other shared network applications that are common to business uses. VLANs are a natural solution for this type of traffic because you can segment users by their functions or geographic area to more easily manage their specific needs.</p> <p><b>Roll over the Normal Data button in the figure.</b></p> <p><b>Scavenger Class</b></p> <p>The Scavenger class is intended to provide less-than best-effort services to certain applications. Applications assigned to this class have little or no contribution to the organizational objectives of the enterprise and are typically entertainment oriented in nature. These include peer-to-peer media-sharing applications (KaZaa, Morpheus, Groekster, Napster, iMesh, and so on), gaming applications (Doom, Quake, Unreal Tournament, and so on), and any entertainment video applications.</p></content-text>
</page>
</topic>
<topic type="" id="en1303010300">
<title><content-text>Switch Port Membership Modes</content-text></title>
<page type="OneColumn" id="en1303010301">
<content-media type="InteractiveGraphicHotspots" id="cm7847792093">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010300/en1303010301/cm7847792093.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010300/en1303010301/cm7847792093text.xml"/></content-media>
<content-text><p><b>Switch Ports</b></p> <p>Switch ports are Layer 2-only interfaces associated with a physical port. Switch ports are used for managing the physical interface and associated Layer 2 protocols. They do not handle routing or bridging. Switch ports belong to one or more VLANs.</p> <p><b>VLAN Switch Port Modes</b></p> <p>When you configure a VLAN, you must assign it a number ID, and you can optionally give it a name. The purpose of VLAN implementations is to judiciously associate ports with particular VLANs. You configure the port to forward a frame to a specific VLAN. As mentioned previously, you can configure a VLAN in voice mode to support voice and data traffic coming from a Cisco IP phone. You can configure a port to belong to a VLAN by assigning a membership mode that specifies the kind of traffic the port carries and the VLANs to which it can belong. A port can be configured to support these VLAN types:</p> <p><ul><li><b>Static VLAN</b> - Ports on a switch are manually assigned to a VLAN. Static VLANs are configured using the Cisco CLI. This can also be accomplished with GUI management applications, such as the Cisco Network Assistant. However, a convenient feature of the CLI is that if you assign an interface to a VLAN that does not exist, the new VLAN is created for you. To see a sample static-VLAN configuration, <b>click the Static Mode Example button</b> in the figure. When you are done, <b>click the Port Modes button</b> in the figure. This configuration will not be examined in detail now. You will see this configuration later in the chapter.</li><li><b>Dynamic VLAN</b> - This mode is not widely used in production networks and is not explored in this course. However, it is useful to know what a dynamic VLAN is. A dynamic port VLAN membership is configured using a special server called a VLAN Membership Policy Server (VMPS). With the VMPS, you assign switch ports to VLANs dynamically, based on the source MAC address of the device connected to the port. The benefit comes when you move a host from a port on one switch in the network to a port on another switch in the network, the switch dynamically assigns the new port to the proper VLAN for that host.</li><li><b>Voice VLAN</b> - A port is configured to be in voice mode so that it can support an IP phone attached to it. Before you configure a voice VLAN on the port, you need to first configure a VLAN for voice and a VLAN for data. In the figure, VLAN 150 is the voice VLAN, and VLAN 20 is the data VLAN. It is assumed that the network has been configured to ensure that voice traffic can be transmitted with a priority status over the network. When a phone is first plugged into a switch port that is in voice mode, the switch port sends messages to the phone providing the phone with the appropriate voice VLAN ID and configuration. The IP phone tags the voice frames with the voice VLAN ID and forwards all voice traffic through the voice VLAN.</li></ul></p> <p>To examine parts of a voice mode configuration, <b>click the Voice Mode Example button</b> in the figure: </p> <p><ul><li>The configuration command <span class="cmd"><b>mls qos trust cos</b></span> ensures that voice traffic is identified as priority traffic. Remember that the entire network must be set up to prioritize voice traffic. You cannot just configure the port with this command.</li><li>The <span class="cmd"><b>switchport voice vlan 150</b></span> command identifies VLAN 150 as the voice VLAN. You can see this verified in the bottom screen capture: <span class="cmd">Voice VLAN: 150 (VLAN0150)</span>.</li><li>The <span class="cmd"><b>switchport access vlan 20</b></span> command configures VLAN 20 as the access mode (data) VLAN. You can see this verified in the bottom screen capture: <span class="cmd">Access Mode VLAN: 20 (VLAN0020)</span>.</li></ul></p> <p>For more details about configuring a voice VLAN, visit this Cisco.com site: <content-link target="http://www.cisco.com/en/US/docs/switches/lan/catalyst2975/software/release/12.2_46_ex/configuration/guide/swvoip.html" type="external">http://www.cisco.com/en/US/docs/switches/lan/catalyst2975/software/release/12.2_46_ex/configuration/guide/swvoip.html</content-link>.</p></content-text>
</page>
</topic>
<topic type="" id="en1303010400">
<title><content-text>Controlling Broadcast Domains with VLANs</content-text></title>
<page type="OneColumn" id="en1303010401">
<content-media type="AnimationPartialScreen" id="cm8319897433">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010400/en1303010401/cm8319897433.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010400/en1303010401/cm8319897433text.xml"/></content-media>
<content-text><p><b>Network Without VLANS </b></p> <p>In normal operation, when a switch receives a broadcast frame on one of its ports, it forwards the frame out all other ports on the switch. In the figure, the entire network is configured in the same subnet, 172.17.40.0/24. As a result, when the faculty computer, PC1, sends out a broadcast frame, switch S2 sends that broadcast frame out all of its ports. Eventually the entire network receives it; the network is one broadcast domain. </p> <p><b>Click the Network broadcasts with VLAN segmentation button in the figure. </b></p> <p><b>Network with VLANs </b></p> <p>In the figure, the network has been segmented into two VLANs: Faculty as VLAN 10 and Student as VLAN 20. When the broadcast frame is sent from the faculty computer, PC1, to switch S2, the switch forwards that broadcast frame only to those switch ports configured to support VLAN 10.</p> <p>In the figure, the ports that make up the connection between switches S2 and S1 (ports F0/1) and between S1 and S3 (ports F0/3) have been configured to support all the VLANs in the network. This connection is called a trunk. You will learn more about trunks later in this chapter. </p> <p>When S1 receives the broadcast frame on port F0/1, S1 forwards that broadcast frame out the only port configured to support VLAN 10, port F0/3. When S3 receives the broadcast frame on port F0/3, it forwards that broadcast frame out the only port configured to support VLAN 10, port F0/11. The broadcast frame arrives at the only other computer in the network configured on VLAN 10, faculty computer PC4.</p> <p>When VLANs are implemented on a switch, the transmission of unicast, multicast, and broadcast traffic from a host on a particular VLAN are constrained to the devices that are on the VLAN.</p></content-text>
</page>
<page type="OneColumn" id="en1303010402">
<content-media type="AnimationPartialScreen" id="cm5820426872">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010400/en1303010402/cm5820426872.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010400/en1303010402/cm5820426872text.xml"/></content-media>
<content-text><p><b>Controlling Broadcast Domains with Switches and Routers</b></p> <p>Breaking up a big broadcast domain into several smaller ones reduces broadcast traffic and improves network performance. Breaking up domains into VLANs also allows for better information confidentiality within an organization. Breaking up broadcast domains can be performed either with VLANs (on switches) or with routers. A router is needed any time devices on different Layer 3 networks need to communicate, regardless whether VLANs are used.</p> <p><b>Click the Intra-VLAN Communication button and click the Play button to start the animation.</b></p> <p><b>Intra-VLAN Communication</b></p> <p>In the figure, PC1, wants to communicate with another device, PC4. PC1 and PC4 are both in VLAN 10. Communicating with a device in the same VLAN is called intra-VLAN communication. The following describes how this process is accomplished:</p> <p><b>Step 1.</b> PC1 in VLAN 10 sends its ARP request frame (broadcast) to switch S2. Switches S2 and S1 send the ARP request frame out all ports on VLAN 10. Switch S3 sends the ARP request out port F0/11 to PC4 on VLAN 10.</p> <p><b>Step 2.</b> The switches in the network forward the ARP reply frame (unicast) to PC1. PC1 receives the reply which contains the MAC address of PC4.</p> <p><b>Step 3.</b> PC1 now has the destination MAC address of PC4 and uses this to create a unicast frame with PC4's MAC address as the destination. Switches S2, S1 and S3 deliver the frame to PC4.</p> <p><b>Click the Inter-VLAN Communication button and click the Play button to start the animation.</b></p> <p><b>Inter-VLAN Communication</b></p> <p>In the figure, PC1 in VLAN 10 wants to communicate with PC5 in VLAN 20. Communicating with a device in another VLAN is called inter-VLAN communication. </p> <p><b>Note:</b> There are two connections from switch S1 to the router: one to carry transmissions on VLAN 10, and the other to carry transmissions on VLAN 20 to the router interface. </p> <p>The following describes how this process is accomplished:</p> <p><b>Step 1.</b> PC1 in VLAN 10 wants to communicate with PC5 in VLAN 20. PC1 sends an ARP request frame for the MAC address of the default gateway R1.</p> <p><b>Step 2. </b>The router R1 replies with an ARP reply frame from its interface configured on VLAN 10.</p> <p>All switches forward the ARP reply frame and PC1 receives it. The ARP reply contains the MAC address of the default gateway.</p> <p><b>Step 3.</b> PC1 then creates an Ethernet frame with the MAC address of the Default Gateway. The frame is sent from switch S2 to S1.</p> <p><b>Step 4.</b> The router R1 sends an ARP request frame on VLAN 20 to determine the MAC address of PC5. Switches, S1, S2, S3, broadcast the ARP request frame out ports configured for VLAN 20. PC5 on VLAN 20 receives the ARP request frame from router R1.</p> <p><b>Step 5.</b> PC5 on VLAN 20 sends an ARP reply frame to switch S3. Switches S3 and S1 forward the ARP reply frame to router R1 with the destination MAC address of interface F0/2 on router R1.</p> <p><b>Step 6.</b> Router R1 sends the frame received from PC1 though S1 and S3 to PC5 (on VLAN 20).</p></content-text>
</page>
<page type="OneColumn" id="en1303010403">
<content-media type="AnimationPartialScreen" id="cm4699172974">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010400/en1303010403/cm4699172974.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303010000/en1303010400/en1303010403/cm4699172974text.xml"/></content-media>
<content-text><p><b>Controlling Broadcast Domains with VLANs and Layer 3 Forwarding</b></p> <p>In the last chapter, you learned about some of the differences between Layer 2 and Layer 3 switches. The figure shows the Catalyst 3750G-24PS switch, one of many Cisco switches that supports Layer 3 routing. The icon that represents a Layer 3 switch is shown. A discussion of Layer 3 switching is beyond the scope of this course, but a brief description of the switch virtual interface (SVI) technology that allows a Layer 3 switch to route transmissions between VLANs is helpful. </p> <p><b>SVI</b></p> <p>SVI is a logical interface configured for a specific VLAN. You need to configure an SVI for a VLAN if you want to route between VLANs or to provide IP host connectivity to the switch. By default, an SVI is created for the default VLAN (VLAN 1) to permit remote switch administration. </p> <p><b>Click the Layer 3 Forwarding Example button </b>in the figure to see an animation that presents a simplified representation of how a Layer 3 switch controls broadcast domains.</p> <p><b>Layer 3 Forwarding</b></p> <p>A Layer 3 switch has the ability to route transmissions between VLANs. The procedure is the same as described for the inter-VLAN communication using a separate router, except that the SVIs act as the router interfaces for routing the data between VLANs. The animation describes this process.</p> <p>In the animation, PC1 wants to communicate with PC5. The following steps outline the communication through the Layer 3 switch S1:</p> <p><b>Step 1.</b> PC1 sends an ARP request broadcast on VLAN10. S2 forwards the ARP request out all ports configured for VLAN 10.</p> <p><b>Step 2.</b> Switch S1 forwards the ARP request out all ports configured for VLAN 10, including the SVI for VLAN 10. Switch S3 forwards the ARP request out all ports configured for VLAN 10. </p> <p><b>Step 3.</b> The SVI for VLAN 10 in switch S1 knows the location of VLAN 20. The SVI for VLAN 10 in switch S1 sends an ARP reply back to PC1 with this information.</p> <p><b>Step 4.</b> PC1 sends data, destined for PC5, as a unicast frame through switch S2 to the SVI for VLAN 10 in switch S1.</p> <p><b>Step 5.</b> The SVI for VLAN 20 sends an ARP request broadcast out all switch ports configured for VLAN 20. Switch S3 sends that ARP request broadcast out all switch ports configured for VLAN 20.</p> <p><b>Step 6.</b> PC5 on VLAN 20 sends an ARP reply. Switch S3 sends that ARP reply to S1. Switch S1 forwards the ARP reply to the SVI for VLAN 20.</p> <p><b>Step 7.</b> The SVI for VLAN 20 forwards the data, sent from PC1, in a unicast frame to PC5 using the destination address it learned from the ARP reply in step 6.</p></content-text>
</page>
<page type="OneColumn" id="en1303010404">
<content-media type="ActivityPKA" id="cm4306023781">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303010000/en1303010400/en1303010404/cm4306023781/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303010000/en1303010400/en1303010404/cm4306023781/icontext.xml"/></content-media>
<content-text><p>This activity opens in simulation mode and with completion at 100%. The purpose of the activity is to observe how broadcast traffic is forwarded by the switches when VLANs are configured and when VLANs are not configured. Detailed instructions are provided within the activity as well as in the PDF link below. </p> <p><content-link target="E3_PTAct_3_1_4.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1303020000">
<title><content-text>VLAN Trunking</content-text></title>
<topic type="" id="en1303020100">
<title><content-text>VLAN Trunks</content-text></title>
<page type="OneColumn" id="en1303020101">
<content-media type="StaticGraphic" id="cm4766199491">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303020000/en1303020100/en1303020101/cm4766199491.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303020000/en1303020100/en1303020101/cm4766199491text.xml"/></content-media>
<content-text><p><b>What is a Trunk?</b></p> <p>It is hard to describe VLANs without mentioning VLAN trunks. You learned about controlling network broadcasts with VLAN segmentation, and you saw how VLAN trunks transmitted traffic to different parts of the network configured in one VLAN. In the figure, the links between switches S1 and S2, and S1 and S3, are configured to transmit traffic coming from VLAN 10, 20, 30, and 99. This network simply could not function without VLAN trunks. You will find that most networks that you encounter are configured with VLAN trunks. This section brings together the knowledge you already have on VLAN trunking and provides the details you need to be able to configure VLAN trunking in a network.</p> <p><b>Definition of a VLAN Trunk</b></p> <p>A trunk is a point-to-point link between two network devices that carries more than one VLAN. A VLAN trunk allows you to extend the VLANs across an entire network. Cisco supports IEEE 802.1Q for coordinating trunks on Fast Ethernet and Gigabit Ethernet interfaces. You will learn about 802.1Q later in this section.</p> <p>A VLAN trunk does not belong to a specific VLAN, rather it is a conduit for VLANs between switches and routers.</p></content-text>
</page>
<page type="OneColumn" id="en1303020102">
<content-media type="InteractiveGraphicHotspots" id="cm3194519706">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303020000/en1303020100/en1303020102/cm3194519706.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303020000/en1303020100/en1303020102/cm3194519706text.xml"/></content-media>
<content-text><p><b>What Problem Does a Trunk Solve?</b></p> <p>In the figure, you see the standard topology used in this chapter, except instead of the VLAN trunk that you are used to seeing between switches S1 and S2, there is a separate link for each subnet. There are four separate links connecting switches S1 and S2, leaving three fewer ports to allocate to end-user devices. Each time a new subnetwork is considered, a new link is needed for each switch in the network. </p> <p><b>Click the With VLAN Trunks </b><b>button </b><b>in the figure.</b></p> <p>In the figure, the network topology shows a VLAN trunk connecting switches S1 and S2 with a single physical link. This is the way a network should be configured.</p></content-text>
</page>
<page type="OneColumn" id="en1303020103">
<content-media type="InteractiveGraphicHotspots" id="cm9446662197">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303020000/en1303020100/en1303020103/cm9446662197.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303020000/en1303020100/en1303020103/cm9446662197text.xml"/></content-media>
<content-text><p><b>802.1Q Frame Tagging</b></p> <p>Remember that switches are Layer 2 devices. They only use the Ethernet frame header information to forward packets. The frame header does not contain information about which VLAN the frame should belong to. Subsequently, when Ethernet frames are placed on a trunk they need additional information about the VLANs they belong to. This is accomplished by using the 802.1Q encapsulation header. This header adds a tag to the original Ethernet frame specifying the VLAN to which the frame belongs.</p> <p>Frame tagging has been mentioned a number of times. The first time was in reference to the voice mode configuration on a switch port. There you learned that once configured, a Cisco phone (which includes a small switch) tags voice frames with a VLAN ID. You also learned that VLAN IDs can be in a normal range, 1-1005, and an extended range, 1006-4094. How do VLAN IDs get inserted into a frame? </p> <p><b>VLAN Frame Tagging Overview</b> </p> <p>Before exploring the details of an 802.1Q frame, it is helpful to understand what a switch does when it forwards a frame out a trunk link. When the switch receives a frame on a port configured in access mode with a static VLAN, the switch takes apart the frame and inserts a VLAN tag, recalculates the FCS and sends the tagged frame out a trunk port.</p> <p><b>Note:</b> An animation of the trunking operation is presented later in this section.</p> <p><b>VLAN Tag Field Details</b></p> <p>The VLAN tag field consists of an EtherType field, a tag control information field,and the FCS field. </p> <p><b>EtherType field</b></p> <p>Set to the hexadecimal value of 0x8100. This value is called the tag protocol ID (TPID) value. With the EtherType field set to the TPID value, the switch receiving the frame knows to look for information in the tag control information field.</p> <p><b>Tag control information field</b></p> <p>The tag control information field contains:</p> <p><ul><li><b>3 bits of user priority</b> - Used by the 802.1p standard, which specifies how to provide expedited transmission of Layer 2 frames. A description of the IEEE 802.1p is beyond the scope of this course; however, you learned a little about it earlier in the discussion on voice VLANs.</li><li><b>1 bit of Canonical Format Identifier (CFI)</b> - Enables Token Ring frames to be carried across Ethernet links easily.</li><li><b>12 bits of VLAN ID (VID)</b> - VLAN identification numbers; supports up to 4096 VLAN IDs.</li></ul></p> <p><b>FCS field</b></p> <p>After the switch inserts the EtherType and tag control information fields, it recalculates the FCS values and inserts it into the frame.</p></content-text>
</page>
<page type="OneColumn" id="en1303020104">
<content-media type="InteractiveGraphicHotspots" id="cm8756447061">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303020000/en1303020100/en1303020104/cm8756447061.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303020000/en1303020100/en1303020104/cm8756447061text.xml"/></content-media>
<content-text><p><b>Native VLANs and 802.1Q Trunking</b> </p> <p>Now that you know more about how a switch tags a frame with the correct VLAN, it is time to explore how the native VLAN supports the switch in handling tagged and untagged frames that arrive on an 802.1Q trunk port. </p> <p><b>Tagged Frames on the Native VLAN </b></p> <p>Some devices that support trunking tag native VLAN traffic as a default behavior. Control traffic sent on the native VLAN should be untagged. If an 802.1Q trunk port receives a tagged frame on the native VLAN, it drops the frame. Consequently, when configuring a switch port on a Cisco switch, you need to identify these devices and configure them so that they do not send tagged frames on the native VLAN. Devices from other vendors that support tagged frames on the native VLAN include IP phones, servers, routers, and non-Cisco switches. </p> <p><b>Untagged Frames on the Native VLAN</b> </p> <p>When a Cisco switch trunk port receives untagged frames it forwards those frames to the native VLAN. As you may recall, the default native VLAN is VLAN 1. When you configure an 802.1Q trunk port, a default Port VLAN ID (PVID) is assigned the value of the native VLAN ID. All untagged traffic coming in or out of the 802.1Q port is forwarded based on the PVID value. For example, if VLAN 99 is configured as the native VLAN, the PVID is 99 and all untagged traffic is forward to VLAN 99. If the native VLAN has not been reconfigured, the PVID value is set to VLAN 1. </p> <p><b>Click the Native VLAN Configuration Example button in the figure.</b> </p> <p>In this example, VLAN 99 will be configured as the native VLAN on port F0/1 on switch S1. This example shows how to reconfigure the native VLAN from its default setting of VLAN 1. </p> <p>Starting in privileged EXEC mode, the figure describes how to configure the native VLAN on port F0/1 on switch S1 as an IEEE 802.1Q trunk with native VLAN 99. </p> <p><b>Click the Native VLAN Verification button in the figure. </b></p> <p>Using the <span class="cmd"><b>show interfaces</b><i> interface-id </i><b>switchport</b></span> command, you can quickly verify that you have correctly reconfigured the native VLAN from VLAN 1 to VLAN 99. The highlighted output in the screen capture indicates that the configuration was successful. </p></content-text>
</page>
</topic>
<topic type="" id="en1303020200">
<title><content-text>Trunking Operation</content-text></title>
<page type="OneColumn" id="en1303020201">
<content-media type="AnimationPartialScreen" id="cm8828794859">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303020000/en1303020200/en1303020201/cm8828794859.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303020000/en1303020200/en1303020201/cm8828794859text.xml"/></content-media>
<content-text><p><b>A Trunk in Action</b></p> <p>You have learned how a switch handles untagged traffic on a trunk link. You now know that frames traversing a trunk are tagged with the VLAN ID of the access port the frame arrived on. In the figure, PC1 on VLAN 10 and PC3 on VLAN 30 send broadcast frames to switch S2. Switch S2 tags these frames with the appropriate VLAN ID and then forwards the frames over the trunk to switch S1. Switch S1 reads the VLAN ID on the frames and broadcasts them to each port configured to support VLAN 10 and VLAN 30. Switch S3 receives these frames and strips off the VLAN IDs and forwards them as untagged frames to PC4 on VLAN 10 and PC6 on VLAN 30.</p> <p><b>Click Play on the animation toolbar in the figure.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1303020300">
<title><content-text>Trunking Modes</content-text></title>
<page type="OneColumn" id="en1303020301">
<content-media type="InteractiveGraphicHotspots" id="cm1972965505">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303020000/en1303020300/en1303020301/cm1972965505.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303020000/en1303020300/en1303020301/cm1972965505text.xml"/></content-media>
<content-text><p>You have learned how 802.1Q trunking works on Cisco switch ports. Now it is time to examine the 802.1Q trunk port mode configuration options. First we need to discuss a Cisco legacy trunking protocol called inter-switch link (ISL), because you will see this option in the switch software configuration guides.</p> <p><b>IEEE, Not ISL</b></p> <p>Although a Cisco switch can be configured to support two types of trunk ports, IEEE 802.1Q and ISL, today only 802.1Q is used. However, legacy networks may still use ISL, and it is useful to learn about each type of trunk port.</p> <p><ul><li>An IEEE 802.1Q trunk port supports simultaneous tagged and untagged traffic. An 802.1Q trunk port is assigned a default PVID, and all untagged traffic travels on the port default PVID. All untagged traffic and tagged traffic with a null VLAN ID are assumed to belong to the port default PVID. A packet with a VLAN ID equal to the outgoing port default PVID is sent untagged. All other traffic is sent with a VLAN tag. </li><li>In an ISL trunk port, all received packets are expected to be encapsulated with an ISL header, and all transmitted packets are sent with an ISL header. Native (non-tagged) frames received from an ISL trunk port are dropped. ISL is no longer a recommended trunk port mode, and it is not supported on a number of Cisco switches. </li></ul></p> <p><b>DTP</b></p> <p>Dynamic Trunking Protocol (DTP) is a Cisco proprietary protocol. Switches from other vendors do not support DTP. DTP is automatically enabled on a switch port when certain trunking modes are configured on the switch port.</p> <p>DTP manages trunk negotiation only if the port on the other switch is configured in a trunk mode that supports DTP. DTP supports both ISL and 802.1Q trunks. This course focuses on the 802.1Q implementation of DTP. A detailed discussion on DTP is beyond the scope of this course; however, you will enable it in the labs and activities associated with the chapter. Switches do not need DTP to do trunking, and some Cisco switches and routers do not support DTP. To learn about DTP support on Cisco switches, visit: <content-link target="http://www.cisco.com/en/US/tech/tk389/tk689/technologies_tech_note09186a008017f86a.shtml" type="external">http://www.cisco.com/en/US/tech/tk389/tk689/technologies_tech_note09186a008017f86a.shtml</content-link>.</p> <p><b>Trunking Modes</b></p> <p>A switch port on a Cisco switch supports a number of trunking modes. The trunking mode defines how the port negotiates using DTP to set up a trunk link with its peer port. The following provides a brief description of the available trunking modes and how DTP is implemented in each.</p> <p><b>On (default)</b></p> <p>The switch port periodically sends DTP frames, called advertisements, to the remote port. The command used is <span class="cmd"><b>switchport mode trunk</b></span>. The local switch port advertises to the remote port that it is dynamically changing to a trunking state. The local port then, regardless of what DTP information the remote port sends as a response to the advertisement, changes to a trunking state. The local port is considered to be in an unconditional (always on) trunking state.</p> <p><b>Dynamic auto</b> </p> <p>The switch port periodically sends DTP frames to the remote port. The command used is <span class="cmd"><b>switchport mode dynamic auto</b></span>. The local switch port advertises to the remote switch port that it is able to trunk but does not request to go to the trunking state. After a DTP negotiation, the local port ends up in trunking state only if the remote port trunk mode has been configured to be on or desirable. If both ports on the switches are set to auto, they do not negotiate to be in a trunking state. They negotiate to be in the access (non-trunk) mode state.</p> <p><b>Dynamic desirable</b> </p> <p>DTP frames are sent periodically to the remote port. The command used is <span class="cmd"><b>switchport mode dynamic desirable</b></span>. The local switch port advertises to the remote switch port that it is able to trunk and asks the remote switch port to go to the trunking state. If the local port detects that the remote has been configured in on, desirable, or auto mode, the local port ends up in trunking state. If the remote switch port is in the nonegotiate mode, the local switch port remains as a nontrunking port.</p>  <p><b>Turn off DTP</b></p> <p>You can turn off DTP for the trunk so that the local port does not send out DTP frames to the remote port. Use the command <span class="cmd"><b>switchport nonegotiate</b></span>. The local port is then considered to be in an unconditional trunking state. Use this feature when you need to configure a trunk with a switch from another switch vendor.</p> <p><b>A Trunk Mode Example</b></p> <p>In the figure, the F0/1 ports on switches S1 and S2 are configured with trunk mode on. The F0/3 ports on switches S1 and S3 are configured to be in auto trunk mode. When the switch configurations are completed and the switches are fully configured, which link will be a trunk? </p> <p><b>Click the Which link will be configured as a trunk? button </b><b>in the figure. </b></p> <p>The link between switches S1 and S2 becomes a trunk because the F0/1 ports on switches S1 and S2 are configured to ignore all DTP advertisements and come up and stay in trunk port mode. The F0/3 ports on switches S1 and S3 are set to auto, so they negotiate to be in the default state, the access (non-trunk) mode state. This results in an inactive trunk link. When you configure a trunk port to be in trunk port mode, there is no ambiguity about which state the trunk is in-it is always on. It is also easy to remember which state the trunk ports are in-if the port is supposed to be a trunk, trunk mode is on.</p> <p><b>Note:</b> The default switchport mode for an interface on a Catalyst 2950 switch is dynamic desirable, but the default switchport mode for an interface on a Catalyst 2960 switch is dynamic auto. If S1 and S3 were Catalyst 2950 switches with interface F0/3 in default switchport mode, the link between S1 and S3 would become an active trunk.</p> <p><b>Click the DTP Modes button in the figure</b> to review the mode interactions.</p> <p>For information on which Cisco switches support 802.1Q, ISL, and DTP, visit: <content-link target="http://www.cisco.com/en/US/tech/tk389/tk689/technologies_tech_note09186a008017f86a.shtml#topic1" type="external">http://www.cisco.com/en/US/tech/tk389/tk689/technologies_tech_note09186a008017f86a.shtml#topic1</content-link>.</p> <p>For information on how to support ISL on legacy networks, visit: <content-link target="http://www.cisco.com/en/US/tech/tk389/tk689/tsd_technology_support_troubleshooting_technotes_list.html" type="external">http://www.cisco.com/en/US/tech/tk389/tk689/tsd_technology_support_troubleshooting_technotes_list.html</content-link>.</p></content-text>
</page>
<page type="OneColumn" id="en1303020302">
<content-media type="ActivityPKA" id="cm7679463277">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303020000/en1303020300/en1303020302/cm7679463277/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303020000/en1303020300/en1303020302/cm7679463277/icontext.xml"/></content-media>
<content-text><p>Trunks carry the traffic of multiple VLANs through a single link, making them a vital part of communicating between switches with VLANs. This activity focuses on viewing switch configuration, trunk configuration, and VLAN tagging information. Detailed instructions are provided within the activity as well as in the PDF link below. </p> <p><content-link target="E3_PTAct_3_2_3.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1303030000">
<title><content-text>Configure VLANs and Trunks</content-text></title>
<topic type="" id="en1303030100">
<title><content-text>Configuring VLANs and Trunks Overview</content-text></title>
<page type="OneColumn" id="en1303030101">
<content-media type="StaticGraphic" id="cm8538457266">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030100/en1303030101/cm8538457266.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030100/en1303030101/cm8538457266text.xml"/></content-media>
<content-text><p>In this chapter, you have already seen examples of the commands used to configure VLANs and VLAN trunks. In this section, you will learn the key Cisco IOS commands needed to create, delete, and verify VLANs and VLAN trunks. Often these commands have many optional parameters that extend the capabilities of the VLAN and VLAN trunk technology. These optional commands are not presented; however, references are provided if you want to research these options. The focus of this section is to provide you with the necessary skills and knowledge to configure VLANs and VLAN trunks with their key features.</p> <p>In this section, you are shown the configuration and verification syntax for one side of a VLAN or trunk. In the labs and activities, you will configure both sides and verify that the link (VLAN or VLAN trunk) is configured correctly. </p> <p><b>Note:</b> If you want to keep the newly configured running configuration, you must save it to the startup configuration.</p></content-text>
</page>
</topic>
<topic type="" id="en1303030200">
<title><content-text>Configure a VLAN</content-text></title>
<page type="OneColumn" id="en1303030201">
<content-media type="InteractiveGraphicHotspots" id="cm2655798981">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030200/en1303030201/cm2655798981.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030200/en1303030201/cm2655798981text.xml"/></content-media>
<content-text><p><b>Add a VLAN</b></p> <p>In this topic, you will learn how to create a static VLAN on a Cisco Catalyst switch using VLAN global configuration mode. There are two different modes for configuring VLANs on a Cisco Catalyst switch, database configuration mode and global configuration mode. Although the Cisco documentation mentions VLAN database configuration mode, it is being phased out in favor of VLAN global configuration mode. </p> <p>You will configure VLANs with IDs in the normal range. Recall there are two ranges of VLAN IDs. The normal range includes IDs 1 to 1001, and extended range consists of IDs 1006 to 4094. VLAN 1 and 1002 to 1005 are reserved ID numbers. When you configure normal range VLANs, the configuration details are stored automatically in flash memory on the switch in a file called vlan.dat. Because you often configure other aspects of a Cisco switch at the same time, it is good practice to save running configuration changes to the startup configuration.</p> <p><b>Click the Command Syntax button in the figure.</b></p> <p>The figure reviews the Cisco IOS commands used to add a VLAN to a switch.</p> <p><b>Click the Example button in the figure.</b></p> <p>The figure shows how the student VLAN, VLAN 20, is configured on switch S1. In the topology example, the student computer, PC2, is not in a VLAN yet it, but has an IP address of 172.17.20.22.</p> <p><b>Click the Verification button in figure.</b></p> <p>The figure shows an example of using the <span class="cmd"><b>show vlan brief</b></span> command to display the contents of the vlan.dat file. The student VLAN, VLAN 20, is highlighted in the screen capture. The default VLAN IDs 1 and 1002 to 1005 are shown in the screen output.</p> <p><b>Note:</b> In addition to entering a single VLAN ID, you can enter a series of VLAN IDs separated by commas, or a range of VLAN IDs separated by hyphens using the <span class="cmd"><b>vlan </b><i>vlan-id</i></span> command, for example: switch(config)#<b>vlan 100,102,105-107</b>.</p></content-text>
</page>
<page type="OneColumn" id="en1303030202">
<content-media type="InteractiveGraphicHotspots" id="cm4186246670">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030200/en1303030202/cm4186246670.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030200/en1303030202/cm4186246670text.xml"/></content-media>
<content-text><p><b>Assign a Switch Port</b></p> <p>After you have created a VLAN, assign one or more ports to the VLAN. When you manually assign a switch port to a VLAN, it is known as a static access port. A static access port can belong to only one VLAN at a time. </p> <p><b>Click the Command Syntax </b><b>button </b><b>in the figure</b> to review the Cisco IOS commands used to assign a static access port to VLAN.</p> <p><b>Click the Example </b><b>button </b><b>in the figure</b> to see how the student VLAN, VLAN 20, is statically assigned to port F0/18 on switch S1. Port F0/18 has been assigned to VLAN 20 so the student computer, PC2, is in VLAN 20. When VLAN 20 is configured on other switches, the network administrator knows to configure the other student computers to be in the same subnet as PC2: 172.17.20.0 /24.</p> <p><b>Click the Verification </b><b>button </b><b>in the figure </b>to confirm that the <span class="cmd"><b>show vlan brief</b></span> command displays the contents of the vlan.dat file. The student VLAN, VLAN 20, is highlighted in the screen capture.</p></content-text>
</page>
</topic>
<topic type="" id="en1303030300">
<title><content-text>Managing VLANs</content-text></title>
<page type="OneColumn" id="en1303030301">
<content-media type="StaticGraphic" id="cm4790265324">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030300/en1303030301/cm4790265324.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030300/en1303030301/cm4790265324text.xml"/></content-media>
<content-text><p><b>Verify VLANs and Port Memberships</b></p> <p>After you configure the VLAN, you can validate the VLAN configurations using Cisco IOS <span class="cmd"><b>show</b></span> commands. </p> <p><b>Click the Command Syntax </b><b>button </b><b>in the figure.</b></p> <p>The command syntax for the various Cisco IOS <span class="cmd"><b>show</b></span> commands should be well known. You have used the <span class="cmd"><b>show vlan brief</b></span> command already. Examples of these commands can be seen by clicking the buttons in the figure.</p> <p><b>Click the Show VLAN </b><b>button </b><b>in the figure. </b></p> <p>In this example, you can see that the <span class="cmd"><b>show vlan name student</b></span> command does not produce very readable output. The preference here is to use the <span class="cmd"><b>show vlan brief</b></span> command. The <span class="cmd"><b>show vlan summary</b></span> command displays the count of all configured VLANs. The output shows six VLANs: 1, 1002-1005, and the student VLAN, VLAN 20.</p> <p><b>Click the Interfaces VLAN </b><b>button </b><b>in the figure.</b> </p> <p>This command displays a lot of detail that is beyond the scope of this chapter. The key information appears on the second line of the screen capture, indicating that VLAN 20 is up. </p> <p><b>Click the Interfaces Switchport </b><b>button </b><b>in the figure.</b> </p> <p>This command displays information that is useful to you. You can determine that the port F0/18 is assigned to VLAN 20 and that the native VLAN is VLAN 1. You have used this command to review the configuration of a voice VLAN.</p> <p>For details on the <span class="cmd"><b>show vlan</b></span> command output fields, visit: <content-link target="http://www.cisco.com/en/US/docs/ios/lanswitch/command/reference/lsw_s2.html#wp1011412" type="external">http://www.cisco.com/en/US/docs/ios/lanswitch/command/reference/lsw_s2.html#wp1011412</content-link>.</p> <p>For details on the <span class="cmd"><b>show interfaces</b></span> command output fields, visit: <content-link target="http://www.cisco.com/en/US/docs/ios/12_0/interface/command/reference/irshowin.html#wp1017387" type="external">http://www.cisco.com/en/US/docs/ios/12_0/interface/command/reference/irshowin.html#wp1017387</content-link>.</p></content-text>
</page>
<page type="OneColumn" id="en1303030302">
<content-media type="InteractiveGraphicHotspots" id="cm5709204294">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030300/en1303030302/cm5709204294.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030300/en1303030302/cm5709204294text.xml"/></content-media>
<content-text><p><b>Manage Port Memberships</b></p> <p>There are a number of ways to manage VLANs and VLAN port memberships. The figure shows the syntax for the <span class="cmd"><b>no switchport access vlan</b></span> command.</p> <p><b>Click the Remove VLAN </b><b>button </b><b>in the figure.</b></p> <p><b>Reassign a Port to VLAN 1</b></p> <p>To reassign a port to VLAN 1, you can use the <span class="cmd"><b>no switchport access vlan</b></span> command in interface configuration mode. Examine the output in the <span class="cmd"><b>show vlan brief</b></span> command that immediately follows. Notice how VLAN 20 is still active. It has only been removed from interface F0/18. In the <span class="cmd"><b>show interfaces f0/18 switchport</b></span> command, you can see that the access VLAN for interface F0/18 has been reset to VLAN 1.</p> <p><b>Click the Reassign VLAN </b><b>button </b><b>in the figure.</b></p> <p><b>Reassign the VLAN to Another Port</b></p> <p>A static access port can only have one VLAN. With Cisco IOS software, you do not need to first remove a port from a VLAN to change its VLAN membership. When you reassign a static access port to an existing VLAN, the VLAN is automatically removed from the previous port. In the example, port F0/11is reassigned to VLAN 20 .</p></content-text>
</page>
<page type="OneColumn" id="en1303030303">
<content-media type="StaticGraphic" id="cm2603626927">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030300/en1303030303/cm2603626927.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030300/en1303030303/cm2603626927text.xml"/></content-media>
<content-text><p><b>Delete VLANs</b></p> <p>The figure provides an example of using the global configuration command <span class="cmd"><b>no vlan </b><i>vlan-id</i></span> to remove VLAN 20 from the system. The <span class="cmd"><b>show vlan brief</b></span> command verifies that VLAN 20 is no longer in the vlan.dat file.</p> <p>Alternatively, the entire vlan.dat file can be deleted using the command <span class="cmd"><b>delete flash:vlan.dat</b></span> from privileged EXEC mode. After the switch is reloaded, the previously configured VLANs will no longer be present. This effectively places the switch into is "factory default" concerning VLAN configurations.</p> <p><b>Note:</b> Before deleting a VLAN, be sure to first reassign all member ports to a different VLAN. Any ports that are not moved to an active VLAN are unable to communicate with other stations after you delete the VLAN.</p></content-text>
</page>
</topic>
<topic type="" id="en1303030400">
<title><content-text>Configure a Trunk</content-text></title>
<page type="OneColumn" id="en1303030401">
<content-media type="InteractiveGraphicHotspots" id="cm5758197443">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030400/en1303030401/cm5758197443.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030400/en1303030401/cm5758197443text.xml"/></content-media>
<content-text><p><b>Configure an 802.1Q Trunk</b></p> <p>To configure a trunk on a switch port, use the <span class="cmd"><b>switchport mode trunk</b></span> command. When you enter trunk mode, the interface changes to permanent trunking mode, and the port enters into a DTP negotiation to convert the link into a trunk link even if the interface connecting to it does not agree to the change. In this course, you will configure a trunk using only the <span class="cmd"><b>switchport mode trunk</b></span> command. The Cisco IOS command syntax to specify a native VLAN other than VLAN 1 is shown in the figure. In the example, you configure VLAN 99 as the native VLAN. </p> <p><b>Click the Topology </b><b>button </b><b>in the figure.</b> </p> <p>You are familiar with this topology. The VLANs 10, 20, and 30 will support the Faculty, Student, and Guest computers, PC1, PC2, and PC3. The F0/1 port on switch S1 will be configured as a trunk port and will forward traffic for VLANs 10, 20, and 30. VLAN 99 will be configured as the native VLAN.</p> <p><b>Click the Example </b><b>button </b><b>in the figure. </b></p> <p>The example configures port F0/1 on switch S1 as the trunk port. It reconfigures the native VLAN as VLAN 99. </p> <p>A discussion on DTP and the details of how each switchport access mode option works is beyond the scope of the course. For details on all of the parameters associated with the <span class="cmd"><b>switchport mode</b></span> interface command, visit: <content-link target="http://www.cisco.com/en/US/docs/switches/lan/catalyst2960/software/release/12.2_37_se/command/reference/cli3.html#wp1948171" type="external">http://www.cisco.com/en/US/docs/switches/lan/catalyst2960/software/release/12.2_37_se/command/reference/cli3.html#wp1948171</content-link>.</p></content-text>
</page>
<page type="OneColumn" id="en1303030402">
<content-media type="InteractiveGraphicHotspots" id="cm6753822250">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030400/en1303030402/cm6753822250.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030400/en1303030402/cm6753822250text.xml"/></content-media>
<content-text><p><b>Verify Trunk Configuration</b></p> <p>The figure displays the configuration of switch port F0/1 on switch S1. The command used is the <span class="cmd"><b>show interfaces </b><i>interface-ID </i><b>switchport</b></span> command. </p> <p>The first highlighted area shows that port F0/1 has its administrative mode set to Trunk-the port is in trunking mode. The next highlighted area verifies that the native VLAN is VLAN 99, the management VLAN. At the bottom of the output, the last highlighted area shows that the enabled trunking VLANs are VLANs 10, 20, and 30.</p></content-text>
</page>
<page type="OneColumn" id="en1303030403">
<content-media type="StaticGraphic" id="cm5209847353">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030400/en1303030403/cm5209847353.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303030000/en1303030400/en1303030403/cm5209847353text.xml"/></content-media>
<content-text><p><b>Managing a Trunk Configuration</b></p> <p>In the figure, the commands to reset the allowed VLANs and the native VLAN of the trunk to the default state are shown. The command to reset the switch port to an access port and, in effect, deleting the trunk port is also shown.</p> <p><b>Click the Reset Example </b><b>button </b><b>in the figure.</b> </p> <p>In the figure, the commands used to reset all trunking characteristics of a trunking interface to the default settings are highlighted in the sample output. The <span class="cmd"><b>show interfaces f0/1 switchport</b></span> command reveals that the trunk has been reconfigured to a default state.</p> <p><b>Click the Remove Example </b><b>button </b><b>in the figure.</b> </p> <p>In the figure, the sample output shows the commands used to remove the trunk feature from the F0/1 switch port on switch S1. The <span class="cmd"><b>show interfaces f0/1 switchport</b></span> command reveals that the F0/1 interface is now in static access mode.</p></content-text>
</page>
<page type="OneColumn" id="en1303030404">
<content-media type="ActivityPKA" id="cm3462555584">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303030000/en1303030400/en1303030404/cm3462555584/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303030000/en1303030400/en1303030404/cm3462555584/icontext.xml"/></content-media>
<content-text><p>VLANs are helpful in the administration of logical groups, allowing members of a group to be easily moved, changed, or added. This activity focuses on creating and naming VLANs, assigning access ports to specific VLANs, changing the native VLAN, and configuring trunk links. Detailed instructions are provided within the activity as well as in the PDF link below. </p> <p><content-link target="E3_PTAct_3_3_4.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1303040000">
<title><content-text>Troubleshooting VLANs and Trunks</content-text></title>
<topic type="" id="en1303040100">
<title><content-text>Common Problems with Trunks</content-text></title>
<page type="OneColumn" id="en1303040101">
<content-media type="StaticGraphic" id="cm5419848578">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303040000/en1303040100/en1303040101/cm5419848578.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303040000/en1303040100/en1303040101/cm5419848578text.xml"/></content-media>
<content-text><p><b>Common Problems with Trunks</b></p> <p>In this topic, you learn about common VLAN and trunking issues, which usually are associated with incorrect configurations. When you are configuring VLANs and trunks on a switched infrastructure, these types of configuration errors are most common in the following order:</p> <p><ul><li><b>Native VLAN mismatches</b> - Trunk ports are configured with different native VLANs, for example, if one port has defined VLAN 99 as the native VLAN and the other trunk port has defined VLAN 100 as the native VLAN. This configuration error generates console notifications, causes control and management traffic to be misdirected and, as you have learned, poses a security risk.</li><li><b>Trunk mode mismatches</b> - One trunk port is configured with trunk mode "off" and the other with trunk mode "on". This configuration error causes the trunk link to stop working.</li><li><b>VLANs and IP Subnets</b> - End user devices configured with incorrect IP addresses will not have network connectivity. Each VLAN is a logically separate IP subnetwork. Devices within the VLAN must be configured with the correct IP settings.</li><li><b>Allowed VLANs on trunks</b> - The list of allowed VLANs on a trunk has not been updated with the current VLAN trunking requirements. In this situation, unexpected traffic or no traffic is being sent over the trunk.</li></ul></p> <p>If you have discovered an issue with a VLAN or trunk and do not know what the problem is, start your troubleshooting by examining the trunks for a native VLAN mismatch and then work down the list. The rest of this topic examines how to fix the common problems with trunks. The next topic presents how to identify and solve incorrectly configured VLAN and IP subnets.</p></content-text>
</page>
<page type="OneColumn" id="en1303040102">
<content-media type="StaticGraphic" id="cm7676892140">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303040000/en1303040100/en1303040102/cm7676892140.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303040000/en1303040100/en1303040102/cm7676892140text.xml"/></content-media>
<content-text><p><b>Native VLAN Mismatches</b></p> <p>You are a network administrator and you get a call that the person using computer PC4 cannot connect to the internal web server, WEB/TFTP server in the figure. You learn that a new technician was recently configuring switch S3. The topology diagram seems correct, so why is there a problem? You decide to check the configuration on S3.</p> <p><b>Click the Configurations </b><b>button </b><b>in the figure.</b></p> <p>As soon as you connect to switch S3, the error message shown in the top highlighted area in the figure appears in your console window. You take a look at the interface using the <span class="cmd"><b>show interfaces f0/3 switchport</b></span> command. You notice that the native VLAN, the second highlighted area in the figure, has been set to VLAN 100 and it is inactive. As you scan further down the output, you see that the allowed VLANs are 10 and 99, shown in the bottom highlighted area. </p> <p><b>Click the Solution </b><b>button </b><b>in the figure.</b></p> <p>You need to reconfigure the native VLAN on the Fast Ethernet F0/3 trunk port to be VLAN 99. In the figure, the top highlighted area shows the command to configure the native VLAN to be VLAN 99. The next two highlighted areas confirm that the Fast Ethernet F0/3 trunk port has the native VLAN reset to VLAN 99.</p> <p>The screen output for the computer PC4 shows that connectivity has been restored to the WEB/TFTP server found at IP address 172.17.10.30.</p></content-text>
</page>
<page type="OneColumn" id="en1303040103">
<content-media type="StaticGraphic" id="cm9975559463">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303040000/en1303040100/en1303040103/cm9975559463.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303040000/en1303040100/en1303040103/cm9975559463text.xml"/></content-media>
<content-text><p><b>Trunk Mode Mismatches</b></p> <p>In this course, you have learned that trunk links are configured statically with the <span class="cmd"><b>switchport mode trunk</b></span> command. You have learned that the trunk ports use DTP advertisements to negotiate the state of the link with the remote port. When a port on a trunk link is configured with a trunk mode that is incompatible with the other trunk port, a trunk link fails to form between the two switches. </p> <p>In this scenario, the same problem arises: the person using computer PC4 cannot connect to the internal web server. Again, the topology diagram has been maintained and shows a correct configuration. Why is there a problem? </p> <p><b>Click the Configurations </b><b>button </b><b>in the figure.</b></p> <p>The first thing you do is check the status of the trunk ports on switch S1 using the <span class="cmd"><b>show interfaces trunk</b></span> command. It reveals in the figure that there is not a trunk on interface F0/3 on switch S1. You examine the F0/3 interface to learn that the switch port is in dynamic auto mode, the first highlighted area in the top figure. An examination of the trunks on switch S3 reveals that are no active trunk ports. Further checking reveals that the F0/3 interface is also in dynamic auto mode, the first highlighted area in the bottom figure. Now you know why the trunk is down.</p> <p><b>Click the Solution </b><b>button </b><b>in the figure.</b></p> <p>You need to reconfigure the trunk mode of the Fast Ethernet F0/3 ports on switches S1 and S3. In the top left figure, the highlighted area shows that the port is now in trunking mode. The top right output from switch S3 shows the commands used to reconfigure the port and the results of the <span class="cmd"><b>show interfaces trunk</b></span> command, revealing that interface F0/3 has been reconfigured as a trunk. The output from computer PC4 indicates that PC4 has regained connectivity to the WEB/TFTP server found at IP address 172.17.10.30.</p></content-text>
</page>
<page type="OneColumn" id="en1303040104">
<content-media type="StaticGraphic" id="cm9572681193">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303040000/en1303040100/en1303040104/cm9572681193.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303040000/en1303040100/en1303040104/cm9572681193text.xml"/></content-media>
<content-text><p><b>Incorrect VLAN List</b></p> <p>You have learned that for traffic from a VLAN to be transmitted across a trunk it has to be allowed access on the trunk. The command used to do this is the <span class="cmd"><b>switchport access trunk allowed vlan add </b><i>vlan-id</i></span> command. In the figure, VLAN 20 (Student) and computer PC5 have been added to the network. The documentation has been updated to show that the VLANs allowed on the trunk are 10, 20, and 99.</p> <p>In this scenario, the person using computer PC5 cannot connect to the student e-mail server shown in the figure. </p> <p><b>Click the Configurations </b><b>button </b><b>in the figure.</b></p> <p>Check the trunk ports on switch S1 using the <span class="cmd"><b>show interfaces trunk</b></span> command. The command reveals that the interface F0/3 on switch S3 is correctly configured to allow VLANs 10, 20, and 99. An examination of the F0/3 interface on switch S1 reveals that interfaces F0/1 and F0/3 only allow VLANs 10 and 99. It seems someone updated the documentation but forgot to reconfigure the ports on the S1 switch.</p> <p><b>Click the Solution </b><b>button </b><b>in the figure.</b></p> <p>You need to reconfigure the F0/1 and the F0/3 ports on switch S1 using the <span class="cmd"><b>switchport trunk allowed vlan 10,20,99</b></span> command. The top screen output in the figure shows that VLANs 10, 20, and 99 are now added to the F0/1 and F0/3 ports on switch S1. The <span class="cmd"><b>show interfaces trunk</b></span> command is an excellent tool for revealing common trunking problems. The bottom figure indicates that PC5 has regained connectivity to the student e-mail server found at IP address 172.17.20.10.</p></content-text>
</page>
</topic>
<topic type="" id="en1303040200">
<title><content-text>A Common Problem with VLAN Configurations</content-text></title>
<page type="OneColumn" id="en1303040201">
<content-media type="StaticGraphic" id="cm9743841437">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303040000/en1303040200/en1303040201/cm9743841437.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303040000/en1303040200/en1303040201/cm9743841437text.xml"/></content-media>
<content-text><p><b>VLAN and IP Subnets</b></p> <p>As you have learned, each VLAN must correspond to a unique IP subnet. If two devices in the same VLAN have different subnet addresses, they cannot communicate. This type of incorrect configuration is a common problem, and it is easy to solve by identifying the offending device and changing the <content-link target="{DE7D7294-4EC3-4900-BF89-2FE55FA05583}" type="glossary">subnet address</content-link> to the correct one.</p> <p>In this scenario, the person using computer PC1 cannot connect to the WEB/TFTP server shown in the figure. </p> <p><b>Click the Configurations </b><b>button </b><b>in the figure.</b></p> <p>In the figure, a check of the IP configuration settings of PC1 reveals the most common error in configuring VLANs: an incorrectly configured IP address. The PC1 computer is configured with an IP address of 172.172.10.21, but it should have been configured with 172.17.10.21.</p> <p><b>Click the Solution </b><b>button </b><b>in the figure.</b></p> <p>The screen capture of the PC1 Fast Ethernet configuration dialog box shows the updated IP address of 172.17.10.21. The bottom screen capture reveals that PC1 has regained connectivity to the WEB/TFTP server found at IP address 172.17.10.30.</p></content-text>
</page>
<page type="OneColumn" id="en1303040202">
<content-media type="ActivityPKA" id="cm1106014721">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303040000/en1303040200/en1303040202/cm1106014721/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303040000/en1303040200/en1303040202/cm1106014721/icontext.xml"/></content-media>
<content-text><p>In this activity, you will troubleshoot connectivity problems between PCs on the same VLAN. The activity is complete when you achieve 100% and the PCs can ping the other PCs on the same VLAN. Any solution you implement must conform to the topology diagram. Detailed instructions are provided within the activity as well as in the PDF link below.</p> <p><content-link target="E3_PTAct_3_4_2.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p> <p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="en1303050000">
<title><content-text>Chapter Labs</content-text></title>
<topic type="" id="en1303050100">
<title><content-text>Basic VLAN Configuration</content-text></title>
<page type="OneColumn" id="en1303050101">
<content-media type="ActivityLab" id="cm8395935759">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303050000/en1303050100/en1303050101/cm8395935759/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303050000/en1303050100/en1303050101/cm8395935759/icontext.xml"/></content-media>
<content-text><p>In a network it is essential to be able to limit the effects of network broadcasts. One way to do this is to break up a large physical network into a number of smaller logical or virtual networks. This is one of the goals of VLANs. This lab will teach you the basics of configuring VLANs.</p></content-text>
</page>
<page type="OneColumn" id="en1303050102">
<content-media type="ActivityPKA" id="cm8014860559">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303050000/en1303050100/en1303050102/cm8014860559/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303050000/en1303050100/en1303050102/cm8014860559/icontext.xml"/></content-media>
<content-text><p>This activity is a variation of Lab 3.5.1. Packet Tracer may not support all the tasks specified in the hands-on lab. This activity should not be considered equivalent to completing the hands-on lab. Packet Tracer is not a substitute for a hands-on lab experience with real equipment. Detailed instructions are provided within the activity as well as in the PDF link below.</p> <p><content-link target="E3_PTAct_3_5_1.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p> <p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1303050200">
<title><content-text>Challenge VLAN Configuration</content-text></title>
<page type="OneColumn" id="en1303050201">
<content-media type="ActivityLab" id="cm3581276528">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303050000/en1303050200/en1303050201/cm3581276528/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303050000/en1303050200/en1303050201/cm3581276528/icontext.xml"/></content-media>
<content-text><p>Having set up VLANs once in the Basic lab, this lab will verify how much you learned. Attempt to do as much of the lab as possible without referring back to the Basic lab. Once you have completed as much of the lab as possible on your own, check your work with the answer key that your instructor will provide.</p></content-text>
</page>
<page type="OneColumn" id="en1303050202">
<content-media type="ActivityPKA" id="cm7081833601">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303050000/en1303050200/en1303050202/cm7081833601/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303050000/en1303050200/en1303050202/cm7081833601/icontext.xml"/></content-media>
<content-text><p>This activity is a variation of Lab 3.5.2. Packet Tracer may not support all the tasks specified in the hands-on lab. This activity should not be considered equivalent to completing the hands-on lab. Packet Tracer is not a substitute for a hands-on lab experience with real equipment. Detailed instructions are provided within the activity as well as in the PDF link below.</p> <p><content-link target="E3_PTAct_3_5_2.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p> <p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
<topic type="" id="en1303050300">
<title><content-text>Troubleshooting VLAN Configurations</content-text></title>
<page type="OneColumn" id="en1303050301">
<content-media type="ActivityLab" id="cm4279676661">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303050000/en1303050300/en1303050301/cm4279676661/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303050000/en1303050300/en1303050301/cm4279676661/icontext.xml"/></content-media>
<content-text><p>In this lab, you will practice troubleshooting a misconfigured VLAN environment. Load or have your instructor load the configurations below into your lab gear. Your objective is to locate and correct any and all errors in the configurations and establish end-to-end connectivity. Your final configuration should match the topology diagram and addressing table. </p></content-text>
</page>
<page type="OneColumn" id="en1303050302">
<content-media type="ActivityPKA" id="cm5112719044">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303050000/en1303050300/en1303050302/cm5112719044/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303050000/en1303050300/en1303050302/cm5112719044/icontext.xml"/></content-media>
<content-text><p>In this activity, you will practice troubleshooting a misconfigured VLAN environment. The initial network has errors. Your objective is to locate and correct any and all errors in the configurations and establish end-to-end connectivity. Your final configuration should match the topology diagram and addressing table. Detailed instructions are provided within the activity as well as in the PDF link below. </p> <p><content-link target="E3_PTAct_3_5_3.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p> <p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="en1303060000">
<title><content-text>Chapter Summary</content-text></title>
<topic type="" id="en1303060100">
<title><content-text>Chapter Summary</content-text></title>
<page type="OneColumn" id="en1303060101">
<content-media type="StaticGraphic" id="cm7705084821">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303060000/en1303060100/en1303060101/cm7705084821.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303060000/en1303060100/en1303060101/cm7705084821text.xml"/></content-media>
<content-text><p>In this chapter, we introduced VLANs. VLANs are used to segment broadcast domains in a switched LAN. This improves the performance and manageability of LANs. VLANs provides network administrators flexible control over traffic associated with devices in the LAN.</p> <p>There are several types of VLANs: a default VLAN, a management VLAN, native VLANs, user/data VLANs, and voice VLANs.</p> <p>VLAN trunks facilitate inter-switch communication with multiple VLANs. IEEE 802.1Q frame tagging enables differentiation between Ethernet frames associated with distinct VLANs as they traverse common trunk links. </p> <p>We discussed the configuration, verification, and troubleshooting of VLANs and trunks using the Cisco IOS CLI.</p></content-text>
</page>
<page type="FullScreen" id="en1303060102">
<content-media type="StaticGraphic" id="cm3827497065">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303060000/en1303060100/en1303060102/cm3827497065.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="en1303000000/en1303060000/en1303060100/en1303060102/cm3827497065text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="en1303060103">
<content-media type="ActivityPKA" id="cm5524505852">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303060000/en1303060100/en1303060103/cm5524505852/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="en1303000000/en1303060000/en1303060100/en1303060103/cm5524505852/icontext.xml"/></content-media>
<content-text><p>In this activity, you will connect and completely configure the Chapter 3 topology, including adding and connecting devices, and configuring security and VLANs. Detailed instructions are provided within the activity as well as in the PDF link below.</p> <p><content-link target="E3_PTAct_3_6_1.pdf" type="internalfile">Activity Instructions (PDF)</content-link></p><p><b>Click the Packet Tracer icon for more details.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="en1303070000">
<title><content-text>Chapter Quiz</content-text></title>
<topic type="" id="en1303070100">
<title><content-text>Chapter Quiz</content-text></title>
<page type="FullScreen" id="en1303070101">
<content-media type="ChapterQuiz" id="cm9870979014">	<title><content-text></content-text></title>	<media ref="en1303000000/en1303070000/en1303070100/en1303070101/cm9870979014/" mime="" scale="true" type="directory" width="100%" height="100%" external="en1303000000/en1303070000/en1303070100/en1303070101/cm9870979014/icontext.xml"/></content-media>
<content-text><p><b>Chapter Quiz</b></p></content-text>
</page>
</topic>
</section>
</chapter>
