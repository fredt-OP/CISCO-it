<transcript lastedited="11.05.08 18:11:27">
<title><content-text><![CDATA[5.2.2  - STP BPDU]]></content-text></title>
<brief><content-text><![CDATA[The diagram depicts the BPDU fields and an example of a BPDU frame captured by Wireshark. <br><br>BPDU fields:<br>Field numbers: 1 to 4<br>Protocol ID (2 bytes): Indicates the type of protocol being used. This field contains the value zero.<br>Version (1 byte): Indicates the version of the protocol. This field contains the value zero.<br>Message type (1 byte): Indicates the type of message. This field contains the value zero.<br>Flags (1 byte): Includes one of the following: <br>- Topology change (TC) bit, which signals a topology change in the event that a path to the root bridge has been disrupted.<br>- Topology change acknowledges (TCA) bit, which is set to acknowledge receipt of a configuration message with the TC bit set.<br><br>Field numbers: 5 to 8<br>Root ID (8 bytes): Indicates the root bridge by listing its 2-byte priority followed by its 6-byte MAC address ID. When a switch first boots, the root ID is the same as the bridge ID. However, as the election process occurs, the lowest bridge ID replaces the local root ID to identify the root bridge switch.<br>Cost of path (4 bytes): Indicates the cost of the path from the bridge sending the configuration message to the root bridge. The path cost field is updated by each switch along the path to the root bridge. <br>Bridge ID (8 byte): Indicates the priority and MAC address ID of the bridge sending the message. This label allows the root bridge to identify where the BPDU originated, as well as identify the multiple paths from the switch to the root bridge. When the root bridge receives more than one BPDU from a switch with different path costs, it knows that there are two distinct paths and uses the path with the lower cost.<br>Port ID (2 bytes): Indicates the port number from which the configuration message was sent. This field allows loops created by multiple attached bridges to be detected and corrected.<br><br>Field numbers: 9 to 12<br>Message age (2 bytes): Indicates the amount of time that has elapsed since the root sent the configuration message on which the current configuration message is based.<br>Max age (2 bytes): Indicates when the current configuration message should be detected. When the message age reaches the maximum age, the switch expires the current configuration and initiates a new election to determine a new root bridge because it assumes that it has been disconnected from the root bridge. By default, this is 20 seconds, but it can be set between 6 and 40 seconds.<br>Hello time (2 bytes): Indicates the time between root bridge configuration messages. The interval defines how long the root bridge waits between sending configuration message BPDU's. By default, this is 2 seconds, but it can be set between 1 and 10 seconds.<br>Forward delay (2 bytes): Indicates the length of time that bridges wait before transitioning to a new state after a topology change. If a bridge transitions too soon, all network links might not be ready to change their state and loops can result. By default, this is 15 seconds for each state, but it can be set between 4 and 30 seconds.<br><br>BPDU Example - Wireshark frame capture:<br>A screen capture from the Wireshark protocol analyzer shows the BPDU fields listed above and the actual values captured.<br>]]></content-text></brief>
<full><content-text><![CDATA[FULL - NOT FOR PRODUCTION]]></content-text></full>
</transcript>
